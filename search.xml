<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>每日Java面经（Day2）</title>
      <link href="/2023/07/04/%E6%AF%8F%E6%97%A5Java%E9%9D%A2%E7%BB%8F%EF%BC%88Day2%EF%BC%89/"/>
      <url>/2023/07/04/%E6%AF%8F%E6%97%A5Java%E9%9D%A2%E7%BB%8F%EF%BC%88Day2%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="1、Java-线程池几种实现方式"><a href="#1、Java-线程池几种实现方式" class="headerlink" title="1、Java 线程池几种实现方式"></a>1、Java 线程池几种实现方式</h3><h4 id="1-FixedThreadPool（固定大小线程池）："><a href="#1-FixedThreadPool（固定大小线程池）：" class="headerlink" title="1. FixedThreadPool（固定大小线程池）："></a>1. FixedThreadPool（固定大小线程池）：</h4><ul><li>使用固定数量的线程处理任务。</li><li>可以使用<code>Executors.newFixedThreadPool(int)</code>方法创建。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService executor = Executors.newFixedThreadPool(<span class="number">5</span>);</span><br><span class="line">executor.execute(<span class="keyword">new</span> MyTask());</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">executor.shutdown();</span><br></pre></td></tr></table></figure><h4 id="2-CachedThreadPool（缓存线程池）："><a href="#2-CachedThreadPool（缓存线程池）：" class="headerlink" title="2. CachedThreadPool（缓存线程池）："></a>2. <code>CachedThreadPool</code>（缓存线程池）：</h4><ul><li>根据需要动态创建线程。</li><li>可以使用<code>Executors.newCachedThreadPool()</code>方法创建。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService executor = Executors.newCachedThreadPool();</span><br><span class="line">executor.execute(<span class="keyword">new</span> MyTask());</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">executor.shutdown();</span><br></pre></td></tr></table></figure><h4 id="3-SingleThreadExecutor（单线程线程池）："><a href="#3-SingleThreadExecutor（单线程线程池）：" class="headerlink" title="3. SingleThreadExecutor（单线程线程池）："></a>3. <code>SingleThreadExecutor</code>（单线程线程池）：</h4><ul><li>只有一个工作线程，按顺序执行任务。</li><li>可以使用<code>Executors.newSingleThreadExecutor()</code>方法创建。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService executor = Executors.newSingleThreadExecutor();</span><br><span class="line">executor.execute(<span class="keyword">new</span> MyTask());</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">executor.shutdown();</span><br></pre></td></tr></table></figure><h4 id="4-ScheduledThreadPool（定时任务线程池）："><a href="#4-ScheduledThreadPool（定时任务线程池）：" class="headerlink" title="4. ScheduledThreadPool（定时任务线程池）："></a>4. <code>ScheduledThreadPool</code>（定时任务线程池）：</h4><ul><li>定期执行或延迟执行任务。</li><li>可以使用<code>Executors.newScheduledThreadPool(int)</code>方法创建。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ScheduledExecutorService executor = Executors.newScheduledThreadPool(<span class="number">3</span>);</span><br><span class="line">executor.schedule(<span class="keyword">new</span> MyTask(), <span class="number">1</span>, TimeUnit.SECONDS);  <span class="comment">// 延迟1秒后执行</span></span><br><span class="line">executor.scheduleAtFixedRate(<span class="keyword">new</span> MyTask(), <span class="number">1</span>, <span class="number">2</span>, TimeUnit.SECONDS);  <span class="comment">// 每2秒执行一次</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">executor.shutdown();</span><br></pre></td></tr></table></figure><h4 id="5-WorkStealingPool（工作窃取线程池）："><a href="#5-WorkStealingPool（工作窃取线程池）：" class="headerlink" title="5. WorkStealingPool（工作窃取线程池）："></a>5. <code>WorkStealingPool</code>（工作窃取线程池）：</h4><ul><li>基于任务分解的线程池算法，实现负载均衡。</li><li>可以使用<code>Executors.newWorkStealingPool(int)</code>方法创建（Java 8+）。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService executor = Executors.newWorkStealingPool();</span><br><span class="line">executor.execute(<span class="keyword">new</span> MyTask());</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">executor.shutdown();</span><br></pre></td></tr></table></figure><p>上述代码示例中，<code>MyTask</code>代表要执行的任务，可以通过实现<code>Runnable</code>接口或<code>Callable</code>接口来定义具体的任务逻辑。调用<code>execute()</code>方法将任务提交给线程池执行，<code>shutdown()</code>方法用于关闭线程池。</p><h3 id="2、常见的线程池参数及其作用"><a href="#2、常见的线程池参数及其作用" class="headerlink" title="2、常见的线程池参数及其作用"></a>2、常见的线程池参数及其作用</h3><ol><li><code>corePoolSize</code>（核心线程数）：<ul><li>指定线程池中保留的核心线程数，即使处于空闲状态也不会被销毁。</li><li>控制着线程池的基本规模。</li></ul></li><li><code>maximumPoolSize</code>（最大线程数）：<ul><li>指定线程池中允许存在的最大线程数（包括核心线程和非核心线程）。</li><li>决定了线程池的最大容量。</li></ul></li><li><code>keepAliveTime</code>（线程空闲时间）：<ul><li>当线程池中的线程数量超过核心线程数时，多余的空闲线程在等待新任务到来时的存活时间。</li><li>超过该时间后，空闲线程将被销毁，直到线程池中的线程数量不超过核心线程数。</li></ul></li><li><code>unit</code>（时间单位）：<ul><li>用于指定<code>keepAliveTime</code>参数的时间单位，如<code>TimeUnit.SECONDS</code>表示秒。</li></ul></li><li><code>workQueue</code>（任务队列）：<ul><li>用于保存等待执行的任务的阻塞队列。</li><li>可以选择适合业务需求的不同类型的阻塞队列，如<code>ArrayBlockingQueue</code>、<code>LinkedBlockingQueue</code>、<code>PriorityBlockingQueue</code>等。</li></ul></li><li><code>threadFactory</code>（线程工厂）：<ul><li>用于创建线程的工厂对象，用于自定义线程的创建方式（如线程名、优先级等）。</li><li>可以使用<code>ThreadFactory</code>接口的默认实现类<code>DefaultThreadFactory</code>，也可以自定义实现。</li></ul></li><li><code>rejectedExecutionHandler</code>（任务拒绝处理器）：<ul><li>当线程池无法接受新任务时，用于处理被拒绝的任务。</li><li>可以选择不同的处理策略，如<code>ThreadPoolExecutor.AbortPolicy</code>（默认）表示抛出异常，<code>ThreadPoolExecutor.DiscardPolicy</code>表示默默丢弃等。</li></ul></li></ol><p>这些参数可以在创建线程池时传递给相关的构造函数或方法进行配置。根据具体的业务需求和性能要求，可以灵活地调整这些参数来优化线程池的行为和性能。</p><p>举例来说，对于一个固定大小的线程池，可以通过设置合适的核心线程数和最大线程数来平衡并发度和资源消耗；对于一个可缓存的线程池，可以调整线程空闲时间和任务队列的容量来控制线程的创建和销毁；对于一个定时任务线程池，可以设置合适的核心线程数和任务队列类型来满足定时任务的执行需求。</p><h3 id="3、为什么一般不推荐直接使用Executors，而是建议使用ThreadPoolExecutor来进行线程池的创建和配置"><a href="#3、为什么一般不推荐直接使用Executors，而是建议使用ThreadPoolExecutor来进行线程池的创建和配置" class="headerlink" title="3、为什么一般不推荐直接使用Executors，而是建议使用ThreadPoolExecutor来进行线程池的创建和配置"></a>3、为什么一般不推荐直接使用Executors，而是建议使用ThreadPoolExecutor来进行线程池的创建和配置</h3><p>一般不推荐直接使用<code>Executors</code>类提供的静态工厂方法来创建线程池，而是建议使用<code>ThreadPoolExecutor</code>类进行线程池的创建和配置。以下是一些主要原因：</p><ol><li><strong>控制线程池的行为</strong>：<code>Executors</code>提供的静态工厂方法返回的线程池实现具有固定的默认配置，无法进行细粒度的调整。而使用<code>ThreadPoolExecutor</code>可以通过构造函数或setter方法来指定各个参数，能够更灵活地控制线程池的行为和性能。</li><li><strong>避免资源耗尽</strong>：<code>Executors</code>提供的静态工厂方法的默认配置可能不适合所有场景，比如默认的无界队列可能导致内存溢出。而使用<code>ThreadPoolExecutor</code>可以根据具体需求选择适当的任务队列类型，防止由于任务积压导致的资源耗尽问题。</li><li><strong>自定义线程创建和销毁逻辑</strong>：<code>Executors</code>提供的静态工厂方法对于线程的创建和销毁逻辑较为简单，并不能满足所有需求。而使用<code>ThreadPoolExecutor</code>，可以自定义线程工厂对象来灵活控制线程的创建方式，并通过重写<code>beforeExecute()</code>和<code>afterExecute()</code>等钩子方法来扩展线程执行前后的处理逻辑。</li><li><strong>提供更多的拒绝策略选项</strong>：<code>Executors</code>提供的静态工厂方法对于任务拒绝处理器的选择比较有限，只提供了一些基本的拒绝策略。而使用<code>ThreadPoolExecutor</code>可以通过自定义实现<code>RejectedExecutionHandler</code>接口来灵活选择和实现任务拒绝处理的策略。</li></ol><p>总之，虽然<code>Executors</code>提供了一种简洁的方式来创建线程池，但是由于其默认配置的局限性以及对于个性化需求的不适应性，推荐使用<code>ThreadPoolExecutor</code>来手动创建和配置线程池，以获得更好的灵活性和可控性。</p><h3 id="4、说一下java中的各种锁，以及锁升级过程"><a href="#4、说一下java中的各种锁，以及锁升级过程" class="headerlink" title="4、说一下java中的各种锁，以及锁升级过程"></a>4、说一下java中的各种锁，以及锁升级过程</h3><h4 id="在Java中，有多种类型的锁可用于实现线程之间的同步和并发控制。以下是一些常见的锁及其特点："><a href="#在Java中，有多种类型的锁可用于实现线程之间的同步和并发控制。以下是一些常见的锁及其特点：" class="headerlink" title="在Java中，有多种类型的锁可用于实现线程之间的同步和并发控制。以下是一些常见的锁及其特点："></a>在Java中，有多种类型的锁可用于实现线程之间的同步和并发控制。以下是一些常见的锁及其特点：</h4><ol><li><strong>synchronized关键字</strong>：<ul><li>是Java内置的关键字，用于实现基本的互斥同步。</li><li>采用悲观锁机制，当某个线程获取到锁后，其他线程将被阻塞等待。</li><li>可以用于同步代码块或方法，也可以用于修饰静态方法或类。</li></ul></li><li><strong>ReentrantLock类</strong>：<ul><li>是Java.util.concurrent（JUC）包中提供的可重入锁实现。</li><li>提供了与<code>synchronized</code>相似的功能，但具有更高的灵活性和扩展性。</li><li>支持公平和非公平性，可以手动控制锁的获取和释放。</li></ul></li><li><strong>ReadWriteLock接口</strong>：<ul><li>是JUC包中提供的读写锁机制，用于优化读多写少的场景。</li><li>读锁（共享锁）允许多个线程同时读取共享资源。</li><li>写锁（排他锁）在写操作时独占资源，阻塞其他线程的读写操作。</li></ul></li><li><strong>StampedLock类</strong>：<ul><li>是JUC包中引入的乐观读锁机制，用于提供更高的并发性能。</li><li>乐观读锁不会阻塞写锁，但读取数据时需要进行额外的验证。</li><li>支持获取乐观读锁、写锁和悲观读锁（类似于读写锁）。</li></ul></li></ol><h4 id="锁升级是指从低级别的锁转换为高级别的锁机制。在Java中，存在以下几种常见的锁升级过程："><a href="#锁升级是指从低级别的锁转换为高级别的锁机制。在Java中，存在以下几种常见的锁升级过程：" class="headerlink" title="锁升级是指从低级别的锁转换为高级别的锁机制。在Java中，存在以下几种常见的锁升级过程："></a>锁升级是指从低级别的锁转换为高级别的锁机制。在Java中，存在以下几种常见的锁升级过程：</h4><ol><li><strong>偏向锁升级为轻量级锁</strong>：<ul><li>当只有一个线程访问同步代码块时，JVM会将对象的标记置为该线程的Thread ID，表示偏向锁状态。</li><li>如果其他线程尝试获取同步锁，偏向锁将升级为轻量级锁。</li></ul></li><li><strong>轻量级锁升级为重量级锁</strong>：<ul><li>轻量级锁是基于CAS（比较并交换）操作实现的，它允许多个线程同时获取锁。</li><li>当线程自旋获取锁的时间过长或自旋次数超过阈值时，轻量级锁将升级为重量级锁。</li></ul></li><li><strong>自旋锁优化</strong>：<ul><li>在某些场景下，JVM可能会将轻量级锁或重量级锁替换为自旋锁。</li><li>自旋锁允许线程在获取锁之前进行短时间的忙等待，减少线程切换开销。</li></ul></li></ol><p>需要注意的是，锁升级过程是由JVM自动进行的，开发人员无需手动干预。JVM会根据线程的竞争情况和锁的状态来选择合适的锁机制，以提供更好的性能和并发控制。</p><h3 id="5、Java中-i-如何保证线程安全"><a href="#5、Java中-i-如何保证线程安全" class="headerlink" title="5、Java中 i++ 如何保证线程安全"></a>5、Java中 i++ 如何保证线程安全</h3><p>在Java中，<code>i++</code>操作本身是非线程安全的，因为它涉及到读取、修改和写入一个共享的变量。如果多个线程同时执行<code>i++</code>操作，可能会导致竞态条件和不确定的结果。</p><p>为了保证对<code>i++</code>操作的线程安全，常见的做法是使用同步机制，如<code>synchronized</code>关键字或<code>ReentrantLock</code>。下面是两种常见的方式：</p><p>1.<strong>使用synchronized关键字</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;  <span class="comment">// 共享的变量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    i++;  <span class="comment">// 线程安全的自增操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.<strong>使用ReentrantLock</strong>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> i = <span class="number">0</span>;  <span class="comment">// 共享的变量</span></span><br><span class="line"><span class="keyword">private</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    lock.lock();  <span class="comment">// 获取锁</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        i++;  <span class="comment">// 线程安全的自增操作</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();  <span class="comment">// 释放锁</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这些同步机制能够确保在同一时刻只有一个线程能够执行<code>increment()</code>方法，从而避免了竞态条件。当一个线程获取到锁并执行自增操作时，其他线程将被阻塞，直到锁被释放。</p><p>需要注意的是，使用同步机制会带来一定的性能开销，因为线程会竞争锁并进行上下文切换。在某些情况下，可以考虑使用原子类（如<code>AtomicInteger</code>）来实现线程安全的自增操作，它们利用了底层硬件指令提供的原子性保证，避免了显式的锁机制。</p><p><strong>补充：原子类（如<code>AtomicInteger</code>）：</strong></p><p>当需要实现线程安全的自增操作时，可以考虑使用原子类，例如<code>AtomicInteger</code>。原子类是Java提供的一组线程安全的操作类，使用了底层的CAS（比较并交换）操作，能够保证某个操作的原子性，避免了显式的锁机制。</p><p>对于自增操作，<code>AtomicInteger</code>类提供了<code>incrementAndGet()</code>方法，它会以原子方式将当前值加1，并返回新的值。下面是一个简单的示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AtomicCounter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AtomicInteger count = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);  <span class="comment">// 初始值为0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">increment</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        count.incrementAndGet();  <span class="comment">// 原子自增操作</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count.get();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，<code>AtomicInteger</code>的实例 <code>count</code> 被用作计数器。通过调用 <code>incrementAndGet()</code> 方法，可以实现线程安全的自增操作，而无需额外的同步机制。</p><p><code>AtomicInteger</code> 的 <code>incrementAndGet()</code> 操作是原子的，因此多个线程可以同时调用该方法而不会导致竞态条件。它利用了底层的硬件指令提供的原子性保证，确保自增操作的完整性。</p><p>需要注意的是，<code>AtomicInteger</code> 只能保证单个操作的原子性，如果需要进行多个操作的复合操作，仍然需要考虑使用同步机制，如<code>synchronized</code>或<code>ReentrantLock</code>。</p><p>总之，通过使用<code>AtomicInteger</code> 类来实现线程安全的自增操作，可以简化代码，减少同步控制的开销，并且保证数据的一致性。</p><h3 id="6、简单说一下HashMap和ConcurrentHashMap"><a href="#6、简单说一下HashMap和ConcurrentHashMap" class="headerlink" title="6、简单说一下HashMap和ConcurrentHashMap"></a>6、简单说一下HashMap和ConcurrentHashMap</h3><p><code>HashMap</code>和<code>ConcurrentHashMap</code>都是Java中常用的Map实现，用于存储键值对数据。它们具有相似的功能，但在并发环境下存在一些重要的区别。</p><p><strong>HashMap</strong>:</p><ul><li><code>HashMap</code>是非线程安全的，适用于单线程环境或者多线程环境下不存在并发写操作的情况。</li><li>HashMap的实现是基于哈希表（Hash Table）的，通过将键映射到存储桶（bucket）上来实现快速存取。</li><li>在HashMap中，可以使用<code>put(key, value)</code>方法添加键值对，使用<code>get(key)</code>方法获取特定键的值。</li><li>由于HashMap是非线程安全的，如果多个线程同时对HashMap进行写操作，可能会导致数据不一致和死循环等问题。</li></ul><p><strong>ConcurrentHashMap</strong>:</p><ul><li><code>ConcurrentHashMap</code>是线程安全的HashMap实现，适用于高度并发的环境。</li><li>ConcurrentHashMap的实现也基于哈希表，但与HashMap不同的是，ConcurrentHashMap在桶级别上使用了锁机制来实现并发访问控制。</li><li>ConcurrentHashMap提供了诸如<code>put(key, value)</code>、<code>get(key)</code>等线程安全的方法，可以在多线程环境下安全地进行读写操作。</li><li>除了并发安全性外，ConcurrentHashMap还提供了更好的性能和可伸缩性，适用于高并发读写的场景。</li><li>注意，虽然ConcurrentHashMap在写操作上是线程安全的，但仍然会有一定的开销，因此在读多写少的情况下，可能会有更适合的替代方案。</li></ul><p>总结：</p><ul><li>如果在单线程环境或者不存在并发写操作的场景中，可以使用HashMap。</li><li>如果在高并发环境下，需要安全地进行读写操作，可以选择ConcurrentHashMap来保证线程安全性和性能。</li><li>需要注意的是，在使用ConcurrentHashMap时，仍然需要注意避免可能出现的竞态条件和需要原子性操作的场景，例如针对同一个键的复合操作。</li></ul><h3 id="7、-Autowired和-Resource区别"><a href="#7、-Autowired和-Resource区别" class="headerlink" title="7、@Autowired和@Resource区别"></a>7、@Autowired和@Resource区别</h3><p><code>@Autowired</code>和<code>@Resource</code>是Java中常用的依赖注入（Dependency Injection）注解，用于实现对象之间的自动装配。它们有一些区别和使用场景上的差异。</p><p><strong>@Autowired</strong>:</p><ul><li><code>@Autowired</code>是Spring框架提供的注解，用于进行自动装配。</li><li>在使用<code>@Autowired</code>时，Spring会自动在容器中查找匹配类型的Bean，并将其注入到标记了<code>@Autowired</code>注解的字段、构造方法或者setter方法中。</li><li><code>@Autowired</code>默认通过类型（Type）进行自动装配，如果存在多个匹配的Bean时，可以结合<code>@Qualifier</code>注解指定具体要注入的Bean。</li><li><code>@Autowired</code>是按照类型进行自动装配的，不支持按照名称进行装配。</li></ul><p><strong>@Resource</strong>:</p><ul><li><code>@Resource</code>是Java EE标准的注解，也可以在Spring框架中使用，用于进行自动装配。</li><li><code>@Resource</code>可以根据字段名、字段类型以及通过名称（Name）指定要注入的Bean。</li><li><code>@Resource</code>的name属性可以指定具体要注入的Bean的名称，如果没有指定，则默认按照字段名或者类型进行查找匹配的Bean。</li><li><code>@Resource</code>支持按照名称进行装配，如果找不到与名称匹配的Bean，则会抛出异常。</li></ul><p>总结：</p><ul><li><code>@Autowired</code>是Spring框架提供的注解，使用更为广泛。</li><li><code>@Resource</code>是Java EE标准的注解，可以在Spring中使用，更加灵活。</li><li><code>@Autowired</code>按照类型进行自动装配，支持结合<code>@Qualifier</code>指定具体要注入的Bean。</li><li><code>@Resource</code>支持按照名称进行自动装配，也可以通过字段名、字段类型和名称指定要注入的Bean。</li><li>如果只考虑Spring框架，一般推荐使用<code>@Autowired</code>，如果需要兼容Java EE平台，可以考虑使用<code>@Resource</code>。</li></ul><h3 id="8、简单说一下Redis为什么这么快"><a href="#8、简单说一下Redis为什么这么快" class="headerlink" title="8、简单说一下Redis为什么这么快"></a>8、简单说一下Redis为什么这么快</h3><p>Redis之所以被认为是一个快速的数据存储系统，主要有以下几个原因：</p><p><strong>1. 内存存储：</strong> Redis主要将数据存储在内存中，而不是磁盘上。相对于磁盘访问，内存访问速度更快，因此Redis能够实现低延迟的读写操作。</p><p><strong>2. 单线程模型：</strong> Redis采用单线程模型来处理所有的客户端请求。这样可以避免多线程的锁开销和线程上下文切换的开销，并减少了并发竞争带来的性能损失。此外，Redis通过使用非阻塞I/O和事件驱动模型，在单线程下也能够处理高并发的请求。</p><p><strong>3. 高效的数据结构：</strong> Redis提供了多种高效的数据结构，如字符串、哈希表、列表、集合和有序集合等。这些数据结构在内部都经过优化，可以实现快速的插入、读取和删除操作。</p><p><strong>4. 持久化机制：</strong> Redis支持将数据持久化到磁盘中，以便于在重启后恢复数据。Redis提供了两种持久化方式：快照（snapshotting，Redis DataBase，<strong>RDB</strong>）和日志（append-only file，<strong>AOF</strong>）。快照会将整个数据集保存到磁盘中，而AOF则记录了对数据集的修改操作，通过重放这些操作来恢复数据。</p><p><strong>5. 网络优化：</strong> Redis使用高性能的网络库，通过减少网络开销和优化传输协议来提高网络传输效率。此外，Redis支持连接池和管道（pipeline）等技术，可以进一步提升网络通信的效率。</p><p><strong>6. 高级功能支持：</strong> Redis还支持一些高级功能，如发布/订阅、事务和Lua脚本。这些功能在一定程度上提升了Redis的灵活性和可扩展性。</p><p>需要注意的是，尽管Redis非常快速，但它也具有一些局限性。由于数据存储在内存中，所以受到内存容量的限制；并且在持久化过程中可能出现数据丢失的情况。因此，在设计应用程序时需要根据实际需求进行权衡和选择。</p><h3 id="9、说一下Redis的两种持久化机制：RDB和AOF"><a href="#9、说一下Redis的两种持久化机制：RDB和AOF" class="headerlink" title="9、说一下Redis的两种持久化机制：RDB和AOF"></a>9、说一下Redis的两种持久化机制：RDB和AOF</h3><p>Redis支持两种不同的持久化机制：RDB（快照）和AOF（追加文件）。</p><p><strong>RDB（Redis DataBase）持久化：</strong> RDB持久化是将Redis在某个时间点的数据集快照写入磁盘。它会周期性地将内存中的数据集以二进制的形式保存到磁盘文件中。RDB持久化是一种紧凑且高效的持久化方式，适用于备份、灾难恢复以及通过恢复保存的数据集来重新启动Redis。但是，由于数据集需要完全写入磁盘，因此在发生故障时可能会出现数据丢失。默认情况下，Redis每15分钟如果有至少1个键发生变化，就会执行一次自动保存。</p><p><strong>AOF（Append Only File）持久化：</strong> AOF持久化是通过以追加的方式记录每个写操作命令来保证数据的持久化。这样可以确保每个写操作都被记录下来，并最终重放到Redis中，从而恢复原始数据。AOF文件是一个文本文件，它包含了Redis服务器执行的所有写操作命令。相比RDB持久化，AOF持久化提供了更好的数据安全性，但相应地也会增加磁盘空间的占用和对磁盘的写入频率。Redis提供了不同的AOF策略，如always、everysec和no，以允许根据需求进行配置。</p><p>在实际应用中，可以根据具体需求选择适合的持久化方式。如果对数据安全性要求较高，并且可以接受一定的性能损失和磁盘空间占用，推荐使用AOF持久化。如果对性能要求较高，并且可以容忍一定程度的数据丢失，那么可以选择RDB持久化。在某些情况下，也可以同时开启RDB和AOF持久化，以提供更好的数据保护和恢复能力。</p><p>需要注意的是，持久化机制只是Redis的一部分功能，它并不影响Redis的高性能特点。无论选择哪种持久化方式，Redis都仍然是一个快速的键值存储数据库。</p><h3 id="10、说一下常见的索引类型以及优化"><a href="#10、说一下常见的索引类型以及优化" class="headerlink" title="10、说一下常见的索引类型以及优化"></a>10、说一下常见的索引类型以及优化</h3><p>在数据库中，索引是一种数据结构，用于提高数据库查询的效率。常见的索引类型包括以下几种：</p><ol><li><strong>B树索引（B-Tree Index）：</strong> B树索引是最常见和广泛使用的索引类型。它适用于范围查询和精确匹配，并且支持快速插入和删除操作。B树索引将数据按照键值有序地组织在树状结构中，并提供了快速的搜索和遍历功能。</li><li><strong>B+树（B+Tree）</strong>：B+树是在B树基础上演化而来的一种树状数据结构。与B树不同，B+树的所有关键字都被存储在叶子节点上，而非内部节点。叶子节点通过指针连接形成一个有序链表，这样可以更高效地支持范围查询和排序操作。B+树常用于磁盘或其他需要大规模数据存储的场景，如数据库系统的索引结构。</li><li><strong>哈希索引（Hash Index）：</strong> 哈希索引基于哈希函数将键值映射为索引位置，适用于等值查询。它具有快速的查找速度，但不支持范围查询和排序操作。由于哈希冲突的存在，哈希索引可能需要解决冲突问题。</li><li><strong>全文索引（Full-Text Index）：</strong> 全文索引用于对文本内容进行关键字搜索。它可以解析文本并创建反向索引，以便快速搜索包含指定关键字的文档。全文索引适用于文本搜索引擎和内容管理系统等应用。</li></ol><p>优化数据库索引是提高数据库性能的重要手段。以下是一些常见的索引优化技巧：</p><ol><li><strong>选择合适的索引字段：</strong> 对于经常用于查询的字段，应该考虑创建索引以提高查询性能。可以根据查询的频率、过滤条件和排序要求来选择合适的索引字段。</li><li><strong>避免过多的索引：</strong> 虽然索引可以加速查询，但过多的索引会增加数据插入和更新的成本，并占用更多的存储空间。因此，需要权衡索引数量和查询性能之间的关系，避免创建不必要的索引。</li><li><strong>定期维护和优化索引：</strong> 索引需要进行定期的维护和优化操作，以确保其在查询过程中的高效性。可以使用数据库提供的工具或命令来重新生成或重建索引，以消除索引碎片和提高性能。</li><li><strong>联合索引的使用：</strong> 对于经常同时查询多个字段的情况，可以考虑创建联合索引。联合索引可以提高联合条件查询的性能，减少查询的扫描范围。</li><li><strong>注意索引的选择性：</strong> 索引的选择性表示索引列中具有唯一值的比例。选择性越高，查询性能越好。因此，在选择索引字段时，应考虑选择具有较高选择性的字段。</li><li><strong>定期监控和调整索引：</strong> 随着数据库使用情况的变化，索引的性能可能会发生变化。因此，需要定期监控查询的执行计划和性能，并根据实际情况进行适时的索引调整和重建。</li></ol><p>综上所述，索引优化是提高数据库查询性能的重要策略。通过选择合适的索引类型、设计良好的索引策略以及定期维护和优化索引，可以有效地提高数据库的查询效率。</p><h3 id="11、MySQL的默认索引结构是B-树还是B树"><a href="#11、MySQL的默认索引结构是B-树还是B树" class="headerlink" title="11、MySQL的默认索引结构是B+树还是B树"></a>11、MySQL的默认索引结构是B+树还是B树</h3><p>MySQL的默认索引结构是B+树。从MySQL 8.0版本开始，InnoDB存储引擎作为MySQL的默认引擎，它使用B+树作为索引结构。</p><p>B+树在数据库系统中被广泛应用，因为它对范围查询和排序操作有很好的支持，并且能够处理大规模数据。同时，B+树也适合于磁盘存储，因为它提供了良好的顺序访问性能。</p><p>B+树的特点是非叶子节点存储键值和子节点的指针，而叶子节点存储键值和对应数据的指针，并通过指针连接形成有序链表。这使得B+树在范围查询、排序以及插入删除操作上表现出色。</p><p>需要注意的是，虽然MySQL的默认索引结构是B+树，但MySQL也支持其他类型的索引，如哈希索引、全文索引等。这些不同类型的索引可以根据具体需求进行选择。</p><h3 id="12、说说常用的设计模式"><a href="#12、说说常用的设计模式" class="headerlink" title="12、说说常用的设计模式"></a>12、说说常用的设计模式</h3><p>设计模式是一种在软件设计中常用的解决问题的方法论，它提供了经过验证和复用的解决方案。以下是一些常用的设计模式：</p><ol><li><strong>单例模式（Singleton Pattern）：</strong> 单例模式用于确保一个类只有一个实例，并提供全局访问点。这在需要控制资源共享或限制对象创建数量的情况下非常有用。</li><li><strong>工厂模式（Factory Pattern）：</strong> 工厂模式通过使用一个共同的接口来创建对象，隐藏具体实现细节。它可以根据不同的条件创建不同的对象，使客户端代码与具体对象的创建解耦。</li><li><strong>观察者模式（Observer Pattern）：</strong> 观察者模式定义了一种一对多的依赖关系，当一个对象状态发生变化时，它的所有依赖对象都会收到通知并自动更新。这在实现发布-订阅模式和事件驱动系统时特别有用。</li><li><strong>装饰器模式（Decorator Pattern）：</strong> 装饰器模式允许在不改变原有对象结构的情况下，通过将对象包装在一个装饰器类中来动态地添加新的功能。这种模式可以灵活地扩展对象的功能。</li><li><strong>策略模式（Strategy Pattern）：</strong> 策略模式定义了一系列可互换的算法，并将每个算法封装在单独的类中，使它们可以相互替换。这样可以使算法的变化独立于使用算法的客户端。</li><li><strong>适配器模式（Adapter Pattern）：</strong> 适配器模式用于将一个类的接口转换成客户端所期望的另一个接口。它允许不兼容的类能够合作，提高代码的复用性。</li><li><strong>模板方法模式（Template Method Pattern）：</strong> 模板方法模式定义了一个算法的骨架，将一些步骤的实现延迟到子类中。这样可以在不改变算法结构的情况下，通过子类来改变特定步骤的实现。</li><li><strong>建造者模式（Builder Pattern）：</strong> 建造者模式用于创建复杂对象，通过将对象的构造过程分离出来，使得可以使用相同的构造过程来构建不同的表示。</li></ol><p>以上只是一些常见的设计模式，实际上还有很多其他的设计模式，每种模式都有其适用的场景和优缺点。选择合适的设计模式可以提高代码的可维护性、扩展性和重用性。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java面经 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>每日Java面经（Day1）</title>
      <link href="/2023/07/03/%E6%AF%8F%E6%97%A5Java%E9%9D%A2%E7%BB%8F%EF%BC%88Day1%EF%BC%89/"/>
      <url>/2023/07/03/%E6%AF%8F%E6%97%A5Java%E9%9D%A2%E7%BB%8F%EF%BC%88Day1%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="1、HttpServletRequest-如何重复读body？"><a href="#1、HttpServletRequest-如何重复读body？" class="headerlink" title="1、HttpServletRequest 如何重复读body？"></a>1、HttpServletRequest 如何重复读body？</h3><p>在标准的<code>HttpServletRequest</code>中，只能通过一次读取<code>request.getInputStream()</code>或<code>request.getReader()</code>来获取请求体的内容。一旦读取完成，就无法再次重复读取。这是因为请求体是一个流式数据，只能读取一次。</p><p>但是，如果您想在需要时多次访问请求体的内容，您可以考虑将请求体内容保存到一个临时变量或者使用缓冲区来存储它。下面是一个示例代码，展示了如何将请求体内容保存为字符串：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读取请求体内容并保存</span></span><br><span class="line">StringBuilder requestBody = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">BufferedReader reader = request.getReader();</span><br><span class="line">String line;</span><br><span class="line"><span class="keyword">while</span> ((line = reader.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">    requestBody.append(line);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在需要的地方使用请求体内容</span></span><br><span class="line">String requestBodyString = requestBody.toString();</span><br><span class="line"><span class="comment">// 使用 requestBodyString 进行后续操作</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 当需要再次访问请求体内容时，可以使用 requestBodyString 变量</span></span><br></pre></td></tr></table></figure><p>请注意，将请求体保存为字符串或其他形式的变量可能会导致内存占用增加。因此，如果请求体非常大或者频繁访问请求体内容会对性能产生不利影响，您可能需要重新评估您的需求并考虑其他解决方案。</p><a id="more"></a><h3 id="2、说一下你对-JMM-的理解"><a href="#2、说一下你对-JMM-的理解" class="headerlink" title="2、说一下你对 JMM 的理解"></a>2、说一下你对 JMM 的理解</h3><p>JMM（Java内存模型）是Java程序中用来定义多线程并发访问共享内存的规范。它确保了不同线程之间对共享变量的读写操作具有可见性、有序性和原子性。</p><ol><li>可见性：JMM保证一个线程对共享变量的修改对其他线程是可见的。当一个线程修改了共享变量的值，JMM会将这个修改刷新到主内存中，并让其他线程可以看到最新的值。</li><li>有序性：JMM通过禁止特定类型的指令重排序，保证了程序执行的顺序一致性。即使在编译器或处理器的优化过程中，指令也不能被乱序执行，从而确保了多线程环境下的正确性。</li><li>原子性：JMM保证基本数据类型（如int、long等）的读写操作是原子的。即一个线程对该变量的操作要么完全执行，要么完全不执行，不存在中间状态。</li></ol><p>JMM通过使用”happens-before”（先行发生）关系来建立多线程之间操作的顺序关系。如果某个操作A happens-before 某个操作B，那么线程执行操作A之前的所有操作都会在执行操作B时完成。</p><ol><li>happens-before关系：JMM中的happens-before关系是一种顺序保证，它规定了在多线程环境下，指令的执行顺序。如果一个操作happens-before另一个操作，那么前一个操作的结果对于后一个操作是可见的。happens-before关系可以由各种操作和同步机制（如volatile、锁、线程的启动和终止等）建立。</li></ol><p>作为开发者需要了解JMM的概念和规则，以确保正确地处理多线程并发访问共享数据的问题。这包括使用volatile关键字、synchronized关键字、Locks（锁）、Atomic类（原子类）等来实现线程间的协调与同步，以避免出现竞态条件、死锁等并发问题。同时，合理使用JMM提供的内存屏障指令（如volatile的写-读内存屏障）可以进一步优化并发性能。</p><h3 id="3、synchronized-如何实现可重入锁"><a href="#3、synchronized-如何实现可重入锁" class="headerlink" title="3、synchronized 如何实现可重入锁"></a>3、synchronized 如何实现可重入锁</h3><p>synchronized关键字在Java中实现了可重入锁（也称为递归锁）。可重入锁允许线程多次获得同一个锁而不会导致死锁。</p><p>当一个线程进入一个synchronized方法或代码块时，它会尝试获得该方法或代码块的锁。如果锁没有被其他线程持有，那么该线程将获得锁并继续执行。此时，JVM会记下锁的持有线程和持有计数器。</p><p>如果同一个线程再次进入同一个synchronized方法或代码块，它会检查当前线程是否已经持有该锁。如果是，则允许线程继续执行，同时增加持有计数器（+1）。这个过程可以一直嵌套下去。</p><p>当线程退出synchronized方法或代码块时，它会将持有计数器减1（-1）。只有当持有计数器减为0时，其他线程才有机会获得这个锁。</p><p>这种设计实现了可重入锁的原理。通过持有计数器，线程可以多次获得同一个锁，而不会出现死锁的情况。同时，每个线程都需要在释放锁之前将持有计数器减1，确保锁的正常释放。</p><p>需要注意的是，可重入锁是基于线程的，而不是基于方法或代码块的。也就是说，线程可以多次进入同一个synchronized方法或代码块，但不同的线程之间仍然需要竞争锁的获取。此外，可重入锁的机制只适用于同一个锁对象，不同的锁对象之间无法实现可重入性。</p><p>以下是一个使用synchronized实现可重入锁的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReentrantLockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        synchronizedMethod();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">synchronizedMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            System.out.println(<span class="string">"外层同步代码块"</span>);</span><br><span class="line">            synchronizedMethod2(); <span class="comment">// 调用内层同步方法</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">synchronizedMethod2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (lock) &#123;</span><br><span class="line">            System.out.println(<span class="string">"内层同步代码块"</span>);</span><br><span class="line">            <span class="comment">// 执行其他操作...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">在上面的示例中，我们定义了一个静态对象lock作为互斥锁。synchronizedMethod方法是外层同步方法，它使用synchronized(lock)来获取锁。在synchronizedMethod方法中，我们调用了syncronizedMethod2方法作为内层同步方法。</span></span><br><span class="line"><span class="comment">当一个线程执行synchronizedMethod方法时，它会首先获得lock对象的锁并进入外层同步代码块。然后，它调用了syncronizedMethod2方法作为内层同步方法。由于是同一个锁对象，线程可以再次成功获取该锁，并进入内层同步代码块执行。</span></span><br><span class="line"><span class="comment">该代码示例展示了可重入锁的特性。无论是外层同步代码块还是内层同步代码块，线程都可以多次进入，并且退出时会按照持有计数器逐级减少。这种机制确保了可重入锁的功能。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="4、请详细讲一下ReentrantLock实现原理"><a href="#4、请详细讲一下ReentrantLock实现原理" class="headerlink" title="4、请详细讲一下ReentrantLock实现原理"></a>4、请详细讲一下ReentrantLock实现原理</h3><p>ReentrantLock是Java中的一个可重入锁实现，它提供了与synchronized相似的功能，但具有更高的灵活性和可扩展性。下面是ReentrantLock实现原理的详细解释：</p><ol><li>内部锁机制： ReentrantLock内部使用一个同步器（Sync）来提供锁的功能。在Java 5之前，ReentrantLock使用的是自定义的同步器AbstractQueuedSynchronizer（AQS）。而在Java 5及之后的版本中，ReentrantLock改为使用更高效的Sync实现，即非公平锁NonfairSync或公平锁FairSync。</li><li>非公平锁与公平锁：<ul><li>非公平锁：指线程获取锁时不考虑其他等待线程的情况，直接尝试获取锁。这种方式可能导致后续等待时间较长的线程一直无法获得锁，从而产生饥饿现象，但是在大多数情况下能够获得更高的吞吐量。</li><li>公平锁：指线程获取锁时会考虑其他等待线程的情况，遵循先来先服务的原则。这种方式可以防止某些线程一直等待锁而无法获取，但是由于需要更多的线程切换和调度开销，吞吐量通常较低。</li></ul></li><li>实现原理： ReentrantLock的Sync同步器内部使用了一个state变量来表示锁状态，当state为0时表示未被锁定，大于0时表示已被某个线程获取并且持有锁。另外，每个线程都有一个记录当前持有锁次数的计数器。<ul><li>获取锁（lock）：当一个线程调用lock()方法时，它会尝试对state进行CAS（比较交换）操作从而将其置为1。如果CAS成功，表示该线程成功获得了锁，并将持有计数器加1。如果CAS失败，则可能存在其他线程持有锁，这时当前线程会进入等待队列中。</li><li>释放锁（unlock）：当一个线程调用unlock()方法时，它会将持有计数器减1。如果计数器变为0，说明当前线程已经完全释放了锁，并将state重置为0，表示锁已释放。此时，等待队列中的其他线程有机会竞争锁。</li></ul></li><li>可重入性： ReentrantLock实现了可重入锁的特性，允许同一个线程多次获得同一个锁而不会导致死锁。这是通过持有计数器和线程标识符来实现的。当一个线程再次获取锁时，会检查当前的锁持有者是否为自己，如果是，则计数器加1，否则需要竞争锁。</li></ol><p>ReentrantLock提供了更多的功能和灵活性，例如可定时的、可中断的锁获取、公平锁与非公平锁的选择等。但相对于synchronized，使用ReentrantLock需要显式地手动获取和释放锁，并且需要在finally块中释放锁，以确保在任何情况下都能正确释放锁资源，防止死锁的发生。</p><p>下面是一个使用ReentrantLock实现可重入锁的示例代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">我们使用ReentrantLock实现了可重入锁。通过lock()方法获取锁，并在finally块中使用unlock()方法释放锁，以确保在任何情况下都能正确释放锁资源，防止死锁的发生。</span></span><br><span class="line"><span class="comment">在main方法中，我们首先获取锁，执行外部代码块，然后调用outerMethod方法，在outerMethod方法中再次获取锁，执行中间代码块，最后调用innerMethod方法，在innerMethod方法中第三次获取锁，执行内部代码块。</span></span><br><span class="line"><span class="comment">由于ReentrantLock是可重入锁，所以在这个示例中，我们同一个线程多次获取了同一个锁，但没有出现死锁的情况。这是因为ReentrantLock内部通过持有计数器和线程标识符来实现可重入性。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReentrantLockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock(); <span class="comment">// 第一次获取锁</span></span><br><span class="line">            System.out.println(<span class="string">"执行外部代码块"</span>);</span><br><span class="line">            outerMethod();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock(); <span class="comment">// 释放锁</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">outerMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock(); <span class="comment">// 第二次获取锁</span></span><br><span class="line">            System.out.println(<span class="string">"执行中间代码块"</span>);</span><br><span class="line">            innerMethod();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock(); <span class="comment">// 释放锁</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">innerMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            lock.lock(); <span class="comment">// 第三次获取锁</span></span><br><span class="line">            System.out.println(<span class="string">"执行内部代码块"</span>);</span><br><span class="line">            <span class="comment">// 执行业务逻辑</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock(); <span class="comment">// 释放锁</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、AQS-阻塞队列有长度限制吗？"><a href="#5、AQS-阻塞队列有长度限制吗？" class="headerlink" title="5、AQS 阻塞队列有长度限制吗？"></a>5、AQS 阻塞队列有长度限制吗？</h3><p>在AQS（AbstractQueuedSynchronizer 抽象排队同步器）的阻塞队列中，是没有固定长度限制的。AQS本身并不提供阻塞队列的实现，但它是许多并发类的基础，如ReentrantLock、Semaphore、CountDownLatch等。</p><p>对于具体的阻塞队列实现类（如ArrayBlockingQueue、LinkedBlockingQueue等），它们可能会限制队列的容量或长度，但这与AQS本身无关。这些实现类一般会提供一个构造方法来指定队列的容量限制。</p><p>例如，ArrayBlockingQueue是一个基于数组的有界阻塞队列，其容量由构造方法中的参数指定。只能存储固定数量的元素，一旦队列满了，后续的插入操作将会被阻塞。而LinkedBlockingQueue则是一个基于链表的可选有界或无界阻塞队列，如果创建时没有指定容量，则默认为无界队列。</p><p>在使用阻塞队列时，我们可以根据具体的需求选择适合的阻塞队列实现，有界队列可以帮助我们控制队列的长度，而无界队列则可以灵活地处理不确定数量的任务。不同的实现类会有不同的特点和适用场景，我们可以根据具体情况进行选择和使用。</p><h3 id="6、ReentrantLock-支持公平锁吗，怎么实现的？"><a href="#6、ReentrantLock-支持公平锁吗，怎么实现的？" class="headerlink" title="6、ReentrantLock 支持公平锁吗，怎么实现的？"></a>6、ReentrantLock 支持公平锁吗，怎么实现的？</h3><p>是的，ReentrantLock支持公平锁。公平锁是指多个线程按照申请锁的顺序来获取锁的机制，即先到先得。</p><p>在ReentrantLock中，可以通过构造方法来创建公平锁或非公平锁，默认情况下是非公平锁。要创建公平锁，可以将fair参数设置为true。</p><p>示例代码如下所示：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FairLockExample</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ReentrantLock lock = <span class="keyword">new</span> ReentrantLock(<span class="keyword">true</span>); <span class="comment">// 创建公平锁</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++) &#123;</span><br><span class="line">            Thread thread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Worker(i));</span><br><span class="line">            thread.start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Worker</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Worker</span><span class="params">(<span class="keyword">int</span> id)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.id = id;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"Worker "</span> + id + <span class="string">" is trying to acquire the lock."</span>);</span><br><span class="line">            lock.lock();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"Worker "</span> + id + <span class="string">" has acquired the lock."</span>);</span><br><span class="line">                <span class="comment">// 执行业务逻辑</span></span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"Worker "</span> + id + <span class="string">" is releasing the lock."</span>);</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述示例中，我们使用ReentrantLock创建了一个公平锁，通过设置构造方法中的fair参数为true。然后创建了5个Worker线程，每个线程都会尝试获取锁并输出相应的信息。</p><p>如果是公平锁，则Worker线程会按照先到先得的顺序依次获取到锁，输出的结果可能是：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Worker <span class="number">1</span> is trying to acquire the lock.</span><br><span class="line">Worker <span class="number">1</span> has acquired the lock.</span><br><span class="line">Worker <span class="number">1</span> is releasing the lock.</span><br><span class="line">Worker <span class="number">2</span> is trying to acquire the lock.</span><br><span class="line">Worker <span class="number">2</span> has acquired the lock.</span><br><span class="line">Worker <span class="number">2</span> is releasing the lock.</span><br><span class="line">Worker <span class="number">3</span> is trying to acquire the lock.</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>如果是非公平锁，则线程获取锁的顺序是不确定的。</p><p>需要注意的是，实际运行中，公平锁可能会导致性能下降，因为需要维护一个有序队列来记录线程的申请顺序。因此，在选择公平锁还是非公平锁时，需要根据具体场景和需求进行权衡和选择。</p><h3 id="7、请说一下公平锁和非公平锁的适用场景有哪些？"><a href="#7、请说一下公平锁和非公平锁的适用场景有哪些？" class="headerlink" title="7、请说一下公平锁和非公平锁的适用场景有哪些？"></a>7、请说一下公平锁和非公平锁的适用场景有哪些？</h3><p>公平锁和非公平锁都有各自适用的场景，如：</p><ol><li>公平锁适用场景：<ul><li>当系统对线程的执行顺序有严格要求时，即按照线程申请锁的先后顺序进行处理。</li><li>在高并发环境下，避免某些线程长时间被饿死（始终得不到锁），确保每个线程公平地获取资源。</li><li>对于一些对锁竞争不是特别激烈的情况，可以使用公平锁提高代码的可读性和可维护性。</li></ul></li><li>非公平锁适用场景：<ul><li>当对性能要求较高且对线程的执行顺序没有强制要求时，可以使用非公平锁。</li><li>在某些场景下，当一个线程频繁地申请锁并且持有锁的时间较长时，非公平锁可能会提供更好的吞吐量。</li><li>当已经知道在特定场景下非公平锁可以提供更好的性能，并且确认由于应用特性或负载模式造成的可能优势时，可以选择非公平锁。</li></ul></li></ol><p>需要注意的是，非公平锁并不是不考虑线程的执行顺序，而是在锁可用时，会尝试直接获取锁，只有在锁不可用时才进入等待队列。而公平锁则会先检查是否有前面排队的线程，如果有则进入等待队列，保证了线程按照申请的先后顺序获得锁。</p><p>在实际应用中，我们需要根据具体的业务场景和性能需求来选择合适的锁类型。如果对执行顺序有严格要求或者考虑公平性的问题，可以选择公平锁；如果追求更高的吞吐量或者确定非公平锁在特定场景下可以带来优势，可以选择非公平锁。</p><h3 id="8、说一下你对方法区的理解"><a href="#8、说一下你对方法区的理解" class="headerlink" title="8、说一下你对方法区的理解"></a>8、说一下你对方法区的理解</h3><p>方法区（Method Area）是Java虚拟机（JVM）的一个重要组成部分，它是线程共享的内存区域之一。在Java 8及之前的版本中，方法区是虚拟机规范的一部分。从Java 8开始，方法区被移除，并由元空间（Metaspace）取代。</p><p>方法区主要用于存储已被加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。它的生命周期与虚拟机的生命周期保持一致，即虚拟机启动时被创建，虚拟机关闭时被销毁。</p><p>在方法区中，主要包含以下内容：</p><ol><li><strong>类信息</strong>：方法区保存了每个类的完整结构信息，包括类的字段、方法、父类、接口以及常量池等。</li><li><strong>运行时常量池</strong>：方法区中的运行时常量池是每个类的常量池的运行时表示形式，包含了编译期生成的各种字面量和符号引用。</li><li><strong>静态变量</strong>：方法区中存储了类的静态变量，它们在类加载时被创建，存在于整个生命周期中。</li><li><strong>即时编译器编译后的代码</strong>：在方法区中，即时编译器将字节码编译为机器码，并将编译后的代码存储在方法区供后续使用。</li></ol><p>需要注意的是，在Java 8及之前的版本中，方法区的大小是通过-Xmx和-XX:MaxPermSize参数进行设置的。而在Java 8及以后的版本中，方法区由元空间（Metaspace）取代，并且元空间的大小默认不受限制，可根据需要动态分配。</p><p>总结来说，方法区是用于存储类信息、常量、静态变量和即时编译器生成的代码等数据的内存区域。它在虚拟机启动时被创建，在虚拟机关闭时被销毁。</p><p>补充：</p><ol><li>字面量（Literal）： 字面量是指在源代码中直接出现的常量值。在编译期间，Java编译器会将源代码中的字面量转换为对应的字节码表示。常见的字面量包括整数、浮点数、字符、字符串、布尔值等。例如，源代码中的”Hello World”字符串字面量会在编译时被转换为相应的字节码指令。</li><li>符号引用（Symbol Reference）： 符号引用是指在Java源代码中使用的类、方法、字段等的符号名称。在编译期间，编译器会将这些符号引用转化为符号引用表来描述，并在链接阶段进一步解析为直接引用。符号引用包括类的全限定名、方法的签名、字段的名称等。例如，当源代码中使用到一个类或者方法时，编译器会将其表示为符号引用，待链接时再通过符号引用表找到对应的直接引用。</li></ol><h3 id="9、说一下Java对象的生命周期"><a href="#9、说一下Java对象的生命周期" class="headerlink" title="9、说一下Java对象的生命周期"></a>9、说一下Java对象的生命周期</h3><p>Java对象的生命周期可以分为以下几个阶段：</p><ol><li><strong>创建阶段</strong>（Creation）： 在创建阶段，通过关键字<code>new</code>或者其他实例化方式（如反射、对象池等），在堆内存中为对象分配内存空间，并调用对象的构造方法进行初始化。在这个阶段中，对象已经被创建，但还没有被完全初始化。</li><li><strong>使用阶段</strong>（Usage）： 在使用阶段，对象被引用并用于程序的各种操作。此时，可以通过对象的引用调用其方法、访问其属性等。</li><li><strong>不可达阶段</strong>（Unreachable）： 当对象不再被任何引用所指向时，进入不可达阶段。对象可能因为引用被置为null、超出了引用的作用域、或者引用被重新赋值而变得不可达。在此阶段，对象仍然存在于堆内存中，但无法通过任何途径访问。</li><li><strong>垃圾收集阶段</strong>（Garbage Collection）： 一旦对象进入不可达阶段，Java虚拟机的垃圾收集器将扫描内存，检测并回收这些不可达的对象。垃圾收集过程会释放对象占用的内存空间，并可能执行一些清理操作，如执行finalize()方法、关闭文件句柄等。</li><li><strong>回收阶段</strong>（Finalization）： 在垃圾收集阶段中，可能会对不可达对象执行finalize()方法。finalize()方法是对象的一个特殊方法，用于在对象被垃圾收集之前进行清理工作。但需要注意的是，finalize()方法的执行并不能保证实时性和可靠性。</li><li><strong>内存回收阶段</strong>（Memory Reclaim）： 在垃圾收集完成后，空闲的内存将被回收，并可以供给未来的对象创建和分配使用。</li></ol><p>需要注意的是，Java的内存管理是自动的，开发人员无需显式地释放对象占用的内存，而是由垃圾收集器负责管理和回收不再使用的对象。对象的生命周期由Java虚拟机自动进行管理，开发人员主要关注对象的创建、使用和适时地释放引用。</p><p>总结来说，Java对象的生命周期包括创建、使用、不可达、垃圾收集、回收等阶段。通过自动的垃圾收集机制，Java虚拟机负责管理对象的内存分配和回收，开发人员可以专注于对象的使用和逻辑处理。</p><h3 id="10、说一下Spring-Bean的生命周期"><a href="#10、说一下Spring-Bean的生命周期" class="headerlink" title="10、说一下Spring Bean的生命周期"></a>10、说一下Spring Bean的生命周期</h3><h4 id="第一种理解："><a href="#第一种理解：" class="headerlink" title="第一种理解："></a>第一种理解：</h4><p><strong>Bean的生命周期概括起来有四个阶段：</strong></p><p>​    <strong>实例化 -&gt; 属性赋值 -&gt; 初始化 -&gt; 销毁</strong></p><p>1、实例化<br>实例化一个Bean，即new。<br>2、IOC依赖注入<br>按照Spring上下文对实例化的Bean进行配置。<br>3、setBeanName实现<br>如果这个Bean已经实现了BeanNameAware接口，就会调用它实现的setBeanName(String)方法，此处传递的是Spring配置文件中Bean的id值。<br>4、setBeanFactory实现<br>如果这个Bean实现了BeanFactoryAware接口，会调用它实现的setBeanFactory(BeanFactory)方法，传递的是Spring工厂自身。<br>5、setApplicationContext实现<br>如果这个Bean实现了ApplicationContextAware接口，会调用它实现的setApplicationContext(ApplicationContext)方法，传递的是Spring的上下文。<br>6、postProcessBeforeInitialization实现-初始化预处理<br>如果这个Bean实现了BeanPostProcessor接口，将会调用它实现的postProcessBeforeInitialization(Object obj,String s)方法。BeanPostProcessor被用作Bean内容修改，并且由于这个是在Bean初始化结束的时候调用的这个方法，也可以被用于内存或缓存技术。<br>7、init-method<br>如果这个bean在Spring配置文件中配置了init-method属性，会自动调用其配置的初始化方法。或则@Bean(initMethod=”…”)指定的方法<br>8、postProcessAfterInitialization<br>如果这个Bean实现了BeanPostProcessor接口，将会调用它实现的postProcessAfterInitialization(Object obj,String s)方法。<br>以上工作完成以后就可以应用这个Bean了。<br>9、Destory过期自动清理<br>当Bean不再需要时，如果这个Bean实现了DisposableBean这个接口，会调用其实现的.destory()方法。<br>10、destory-method<br>如果这个bean在Spring配置文件中配置了destory-method属性，会自动调用其配置的销毁方法。或者@Bean(destroyMethod=”…”)指定的方法</p><p><img src="https://img-blog.csdnimg.cn/b2a76a505aea4bd78e6c41538db244bd.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5bCY6aOOeWY=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><h4 id="第二种理解："><a href="#第二种理解：" class="headerlink" title="第二种理解："></a>第二种理解：</h4><p>一、Spring Bean的生命周期总共分为4个阶段</p><blockquote><p>一阶段：Bean的实例化和DI（dependency injection）</p><p>二阶段：检查Spring Awareness</p><p>三阶段：创建<a href="https://so.csdn.net/so/search?q=bean生命周期&spm=1001.2101.3001.7020" target="_blank" rel="noopener">bean生命周期</a>回调</p><p>四阶段：销毁bean生命周期回调</p></blockquote><p>二、4个阶段<br>1、Bean的实例化和DI（dependency injection）<br>1.1  扫描XML文件、注释类（例：@Component）、配置类中bean的定义（@Configuration -&gt; @Bean）</p><p>1.2  创建Bean实例</p><p>1.3  注入Bean依赖项（调用setter或构造方法，为自动装配字段设置值）</p><p>2、 检查Spring Awareness（以下只是几个例子）<br>2.1  如果Bean实现了BeanNameAware接口，则调用setBeanName(…)；</p><p>2.2  如果Bean实现了BeanClassLoaderAware接口，则调用setBeanClassLoader(…)；</p><p>2.3  如果Bean实现了ApplicationContextAware接口，则调用setApplicationContext(…)；</p><p>Aware接口用于告知Spring容器某个Bean需要某些特殊的处理，从而让Spring容器在创建Bean的过程中对它进行处理。 </p><p>ApplicationContextAware：让Bean实现这个接口可以让它获得一个ApplicationContext实例。</p><p>BeanFactoryAware：让Bean实现这个接口可以让它获得一个BeanFactory实例。</p><p>BeanNameAware：让Bean实现这个接口可以让它获得它自己在容器中的名字。</p><p>ServletContextAware：让Bean实现这个接口可以让它获得一个ServletContext实例。</p><p>ResourceLoaderAware：让Bean实现这个接口可以让它获得一个ResourceLoader实例。</p><p> 3、创建Bean生命周期回调<br>3.1  @PostConstruct注释，注释回调的方法上，1、2阶段Bean创建完毕即调用；</p><p>3.2  实现InitializingBean接口，调用afterPropertiesSet(…)，1、2阶段Bean创建完毕即调用；</p><p>3.3  Bean定义中包含init-method（在XML中标签<bean>的属性）或@Bean(initMethod=”…”)指定的方法，1、2阶段Bean创建完毕即调用；</p><p> 4、销毁bean生命周期回调<br>4.1  @PreDestroy注释，注释回调方法上，销毁Bean之前调用；</p><p>4.2  实现DisposableBean接口，调用destroy(…)，销毁Bean之前调用；</p><p>4.3  Bean定义中包含destroy-method（在XML中标签<bean>的属性）或@Bean(destroyMethod=”…”)指定的方法，销毁Bean之前调用；</p><h3 id="11、对象何时被回收，哪些对象可以作为-GC-Roots-根节点？"><a href="#11、对象何时被回收，哪些对象可以作为-GC-Roots-根节点？" class="headerlink" title="11、对象何时被回收，哪些对象可以作为 GC Roots 根节点？"></a>11、对象何时被回收，哪些对象可以作为 GC Roots 根节点？</h3><p>当对象在Java中不再被引用时，它将成为垃圾收集（Garbage Collection）的候选对象。具体来说，以下情况下对象可能被回收：</p><ol><li>引用计数法：<ul><li>如果使用引用计数法进行垃圾收集，当对象的引用计数变为0时，即没有任何活动引用指向该对象时，对象将被回收。（补充：引用计数无法解决循环引用的问题，例如循环依赖，BeanA依赖BeanB，BeanB又依赖BeanA，导致BeanA和BeanB引用计数一直为1无法为0而一直无法被gc视为垃圾而回收掉） </li></ul></li><li>可达性分析法：<ul><li>Java使用可达性分析法来判断对象是否可被回收。通过GC Roots作为起点，遍历对象引用链，如果对象不可达（无法从GC Roots到达），则认为该对象是不可达的，即可被回收。</li></ul></li></ol><p>GC Roots包括以下几种类型的对象：</p><ul><li>虚拟机栈（栈帧中的本地变量表）中引用的对象：活动线程的栈帧中保存了局部变量，如果局部变量引用了某个对象，那么该对象就被视为GC Roots。</li><li>方法区中类静态属性引用的对象：所有被类的静态字段引用的对象都被视为GC Roots。</li><li>方法区中常量引用的对象：常量池中的常量引用的对象也是GC Roots。</li><li>本地方法栈中JNI（Java Native Interface）引用的对象：JNI是Java与其他本地语言进行交互的接口，在JNI代码中使用的对象也是GC Roots。</li></ul><p>除了以上GC Roots的对象，其他所有对象都可能被判定为不可达而被回收。</p><p>需要注意的是，Java垃圾收集器并不保证会立即回收所有不可达对象，而是在合适的时机进行垃圾回收。具体的回收策略和时机是由垃圾收集器决定的。</p><h3 id="12、请简单介绍下JVM有哪些垃圾回收算法？"><a href="#12、请简单介绍下JVM有哪些垃圾回收算法？" class="headerlink" title="12、请简单介绍下JVM有哪些垃圾回收算法？"></a>12、请简单介绍下JVM有哪些垃圾回收算法？</h3><p>JVM（Java虚拟机）中常见的垃圾回收算法包括以下几种：</p><ol><li>标记-清除算法（Mark and Sweep）：首先标记出所有活动对象，然后清除掉未被标记的对象。该算法容易产生内存碎片。</li><li>复制算法（Copying）：将可用内存分为两块，每次只使用其中一块。当当前块内存使用满后，将活动对象复制到另一块未使用的内存上，并清理之前的内存。该算法消耗较大的内存空间。</li><li>标记-整理算法（标记-压缩算法）（Mark and Compact）：首先标记出所有活动对象，然后将这些对象向一端移动，然后清理掉端边界以外的全部内存。该算法可以解决内存碎片问题。</li><li>分代收集算法（Generational）：根据对象的生命周期将堆分为多个区域，通常分为新生代和老年代。新生代中的对象生命周期较短，采用复制算法进行回收；老年代中的对象生命周期较长，采用标记-清除或标记-整理算法进行回收。</li></ol><p>这些垃圾回收算法具有不同的特点和应用场景，并根据具体情况选择合适的算法进行垃圾回收，以优化内存的使用和程序的性能。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java面经 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅谈 Spring 如何解决 Bean 的循环依赖问题(转载)</title>
      <link href="/2023/07/01/%E6%B5%85%E8%B0%88-Spring-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-Bean-%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98-%E8%BD%AC%E8%BD%BD/"/>
      <url>/2023/07/01/%E6%B5%85%E8%B0%88-Spring-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-Bean-%E7%9A%84%E5%BE%AA%E7%8E%AF%E4%BE%9D%E8%B5%96%E9%97%AE%E9%A2%98-%E8%BD%AC%E8%BD%BD/</url>
      
        <content type="html"><![CDATA[<h2 id="1-什么是循环依赖？"><a href="#1-什么是循环依赖？" class="headerlink" title="1. 什么是循环依赖？"></a>1. 什么是循环依赖？</h2><p>通俗来讲，循环依赖指的是<strong>一个实例或多个实例存在相互依赖的关系</strong>（类之间循环嵌套引用）。</p><p>举个例子</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> BService bService;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> AService aService;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述例子中 <code>AService</code> 依赖了 <code>BService</code>，<code>BService</code> 也依赖了 <code>AService</code>，这就是两个对象之间的相互依赖。当然循环依赖还包括 <strong>自身依赖、多个实例之间相互依赖</strong>。</p><a id="more"></a><p><img src="https://img-blog.csdnimg.cn/82fcae531d9a47b09a72c05c85c67aa1.png#pic_center" alt="在这里插入图片描述"></p><p>正常运行上面的代码调用 <code>AService</code> 对象并不会出现问题，也就是说普通对象就算出现循环依赖也不会存在问题，因为对象之间存在依赖关系是很常见的，那么为什么被 Spring 容器管理后的对象会出现循环依赖问题呢？</p><h2 id="2-Spring-Bean-的循环依赖问题"><a href="#2-Spring-Bean-的循环依赖问题" class="headerlink" title="2. Spring Bean 的循环依赖问题"></a>2. Spring Bean 的循环依赖问题</h2><p>被 Spring 容器管理的对象叫做 Bean，为什么 Bean 会存在循环依赖问题呢？</p><p>想要了解 Bean 的循环依赖问题，首先需要了解 Bean 是如何创建的。</p><h3 id="2-1-Bean-的创建步骤"><a href="#2-1-Bean-的创建步骤" class="headerlink" title="2.1 Bean 的创建步骤"></a>2.1 Bean 的创建步骤</h3><p>为了能更好的展示出现循环依赖问题的环节，所以这里的 Bean 创建步骤做了简化：</p><p>1、在创建 Bean 之前，Spring 会通过扫描获取 BeanDefinition。</p><p>2、BeanDefinition就绪后会读取 BeanDefinition 中所对应的 class 来加载类。</p><p>3、实例化阶段：根据构造函数来完成实例化 （<strong>未属性注入以及初始化的对象</strong> 这里简称为 <strong>原始对象</strong>）</p><p>4、属性注入阶段：对 Bean 的属性进行依赖注入 （这里就是<strong>发生循环依赖问题的环节</strong>）</p><p>5、如果 Bean 的某个方法有AOP操作，则需要根据原始对象生成<strong>代理对象</strong>。</p><p>6、最后把代理对象放入单例池（一级缓存<code>singletonObjects</code>）中。</p><p><strong>两点说明：</strong></p><p>上面的 Bean 创建步骤是对于 <strong>单例（singleton）</strong> 作用域的 Bean。</p><p>Spring 的 AOP 代理就是作为 <code>BeanPostProcessor</code> 实现的，而 <code>BeanPostProcessor</code> 是发生在属性注入阶段后的，所以 <strong>AOP</strong> 是在 <strong>属性注入</strong> 后执行的。</p><h3 id="2-2-为什么-Spring-Bean-会产生循环依赖问题？"><a href="#2-2-为什么-Spring-Bean-会产生循环依赖问题？" class="headerlink" title="2.2 为什么 Spring Bean 会产生循环依赖问题？"></a>2.2 为什么 Spring Bean 会产生循环依赖问题？</h3><p>通过上面的 Bean 创建步骤可知：实例化 Bean 后会进行 属性注入（依赖注入）</p><p>如上面的 <code>AService</code> 和 <code>BService</code> 的依赖关系，当 <code>AService</code> 创建时，会先对 <code>AService</code> 进行实例化生成一个原始对象，然后在进行属性注入时发现了需要 <code>BService</code> 对应的 Bean，此时就会去为 <code>BService</code> 进行创建，在 <code>BService</code> 实例化后生成一个原始对象后进行属性注入，此时会发现也需要 <code>AService</code> 对应的 Bean。</p><p><img src="https://img-blog.csdnimg.cn/7983014a8e83491ead2759641939cb80.png#pic_center" alt="在这里插入图片描述"></p><p>这样就会造成 <code>AService</code> 和 <code>BService</code> 的 Bean 都无法创建，就会产生 <strong>循环依赖</strong> 问题。</p><h3 id="2-3-三大循环依赖问题场景"><a href="#2-3-三大循环依赖问题场景" class="headerlink" title="2.3 三大循环依赖问题场景"></a>2.3 三大循环依赖问题场景</h3><p>Spring 并不能解决所有 Bean 的循环依赖问题，接下来通过例子来看看哪些场景下的循环依赖问题是不能被解决的。循环依赖是指在应用程序中存在相互引用的对象，导致无法正确地初始化这些对象。以下是三个常见的循环依赖问题场景：</p><ol><li>构造函数循环依赖： 当两个或多个类在它们的构造函数中相互依赖时，可能会引发构造函数循环依赖问题。例如，类A依赖于类B的实例，而同时类B也依赖于类A的实例。这种情况下，如果使用传统的依赖注入方式，很可能会导致无限循环，无法正确完成实例化。</li><li>属性循环依赖： 当两个或多个类之间存在相互依赖的属性关系时，可能会引发属性循环依赖问题。例如，类A有一个属性引用类型为类B的实例，而类B又有一个属性引用类型为类A的实例。如果没有正确处理循环依赖，可能会导致无法正确初始化属性。</li><li>静态成员变量循环依赖： 当两个或多个类之间存在相互依赖的静态成员变量时，可能会引发静态成员变量循环依赖问题。例如，类A的静态成员变量引用类型为类B的实例，而类B的静态成员变量又引用类型为类A的实例。这种情况下，无法解决循环依赖，可能导致应用程序加载和初始化时出现问题。</li></ol><p>以上是三个常见的循环依赖问题场景。在实际开发中，为了避免循环依赖问题，可以采取一些解决方案，例如使用延迟初始化、Setter注入替代构造函数注入、引入第三方容器管理依赖关系等。具体的解决方法可以根据具体的情况和框架选择。</p><p>对应的解决方法：</p><ol><li>构造函数循环依赖：<ul><li>通过构造函数注入改为使用Setter注入：将类的依赖关系改为通过Setter方法来注入，从而打破循环依赖。</li><li>使用延迟初始化：延迟初始化一个或多个循环依赖的对象，可以通过懒加载或者使用代理对象实现。</li></ul></li><li>属性循环依赖：<ul><li>使用懒加载（<strong>@Lazy</strong>）：将循环依赖的属性设置为延迟加载，只有在需要的时候才进行初始化。</li><li>使用中间对象：引入一个中间对象，它的责任是处理循环依赖的属性，并且在合适的时候进行初始化。</li></ul></li><li>静态成员变量循环依赖：<ul><li>使用静态工厂方法：将实例的创建和初始化放在静态工厂方法中，由工厂方法控制依赖关系的初始化顺序。</li><li>使用第三方容器：使用像Spring这样的依赖注入容器，容器可以解决循环依赖问题并正确地管理对象的生命周期。</li></ul></li></ol><h2 id="3-Spring-如何解决循环依赖问题？"><a href="#3-Spring-如何解决循环依赖问题？" class="headerlink" title="3. Spring 如何解决循环依赖问题？"></a>3. Spring 如何解决循环依赖问题？</h2><p>通过上文的内容能了解到  <strong>Spring 为什么会产生循环依赖问题</strong> 以及 <strong>Spring 能解决什么场景下的循环依赖问题</strong>。</p><p>上文中也有提到过 Spring 是靠 <strong>三级缓存</strong> 来解决循环依赖问题的，接下来了解一下 <strong>什么是三级缓存</strong> 以及 <strong>解决循环依赖问题的具体流程</strong>。</p><h3 id="3-1-三级缓存是什么？"><a href="#3-1-三级缓存是什么？" class="headerlink" title="3.1 三级缓存是什么？"></a>3.1 三级缓存是什么？</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Cache of singleton objects: bean name to bean instance. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; singletonObjects = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;(<span class="number">256</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Cache of singleton factories: bean name to ObjectFactory. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, ObjectFactory&lt;?&gt;&gt; singletonFactories = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Cache of early singleton objects: bean name to bean instance. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Object&gt; earlySingletonObjects = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">16</span>);</span><br></pre></td></tr></table></figure><p>三级缓存分为：</p><ul><li>一级缓存（<code>singletonObjects</code>）：缓存的是<strong>已经实例化、属性注入、初始化后</strong>的 Bean 对象。</li><li>二级缓存（<code>earlySingletonObjects</code>）：缓存的是<strong>实例化后，但未属性注入、初始化</strong>的 Bean对象（用于提前暴露 Bean）。</li><li>三级缓存（<code>singletonFactories</code>）：缓存的是一个 <code>ObjectFactory</code>，主要作用是生成原始对象进行 AOP 操作后的<strong>代理对象</strong>（这一级缓存主要用于解决 AOP 问题，后续文章中讲解）。</li></ul><h3 id="3-2-为什么缓存可以解决循环依赖问题？"><a href="#3-2-为什么缓存可以解决循环依赖问题？" class="headerlink" title="3.2 为什么缓存可以解决循环依赖问题？"></a>3.2 为什么缓存可以解决循环依赖问题？</h3><p><strong>（注意这里只是为了说明缓存可以解决循环依赖问题，但是 Spring 实际上并不是这样做的）</strong></p><p>上文中可以看到 <code>AService</code> 和 <code>BService</code> 的循环依赖问题是因为 <code>AService的创建</code> 需要 <code>BService的注入</code>，<code>BService的注入</code> 需要 <code>BService的创建</code>，<code>BService的创建</code> 需要 <code>AService的注入</code>，<code>AService的注入</code> 需要 <code>AService的创建</code>，从而形成的环形调用。</p><p>想要打破这一环形，只需要增加一个 <strong>缓存</strong> 来存放 <strong>原始对象</strong> 即可。</p><p>在创建 <code>AService</code> 时，实例化后将 <strong>原始对象</strong> 存放到缓存中（提早暴露），然后依赖注入时发现需要 <code>BService</code>，便会去创建 <code>BService</code>，实例化后同样将 <strong>原始对象</strong> 存放到缓存中，然后依赖注入时发现需要 <code>AService</code> 便会从缓存中取出并注入，这样 <code>BService</code> 就完成了创建，随后 <code>AService</code> 也就能完成属性注入，最后也完成创建。这样就打破了环形调用，避免循环依赖问题。</p><p><img src="https://img-blog.csdnimg.cn/36952edcc9bb491ab3f27d116ebd0162.png#pic_center" alt="在这里插入图片描述"></p><h3 id="3-3-为什么还需要第三级缓存？"><a href="#3-3-为什么还需要第三级缓存？" class="headerlink" title="3.3 为什么还需要第三级缓存？"></a>3.3 为什么还需要第三级缓存？</h3><p>通过上面的分析可以发现只需要一个存放 <strong>原始对象</strong> 的缓存就可以解决循环依赖问题，也就是说只要二级缓存（<code>earlySingletonObjects</code>）就够了，那么为什么 Spring 还设置了三级缓存（<code>singletonFactories</code>）呢？</p><p>其实 <strong>第三级缓存（<code>singletonFactories</code>）</strong> 是为了处理 Spring 的 AOP的。</p><p>如上面的例子如果 <code>AService</code> 中方法没有使用 AOP 操作，会发现 <code>BService</code> 注入的 <strong>原始对象</strong> 与最后 <code>AService</code> 完成创建后的最终对象是<strong>同一个对象</strong>。</p><p>如果 <code>AService</code> 方法中有 AOP 操作，Bean 的创建会如下图：</p><p><img src="https://img-blog.csdnimg.cn/7e40764da2c042c3a0dc074becf31a33.png#pic_center" alt="在这里插入图片描述"></p><p>所以如果 <code>AService</code> 方法中有 AOP 操作时，当 <code>AService</code> 的原始对象赋值（注入）给 <code>BService</code>，<code>AService</code> 会进行 AOP 操作产生一个 <strong>代理对象</strong>，这个代理对象最后会被放入单例池（一级缓存）中，也就是说此时 <code>BService</code> 中注入的对象是原始对象，而 <code>AService</code> 最终创建的完成后是代理对象，这样就会<strong>导致 <code>BService</code> 依赖的 <code>AService</code> 和 最终的 <code>AService</code> 不是同一个对象</strong>。</p><p>出现这个问题主要是上文提到过的 AOP 是通过 <code>BeanPostProcessor</code> 实现的，而 <code>BeanPostProcessor</code> 是在 <strong>属性注入阶段后</strong> 才执行的，所以会导致<strong>注入的对象有可能和最终的对象不一致</strong>。</p><hr><h3 id="3-4-Spring-是如何通过第三级缓存来避免-AOP-问题的？"><a href="#3-4-Spring-是如何通过第三级缓存来避免-AOP-问题的？" class="headerlink" title="3.4 Spring 是如何通过第三级缓存来避免 AOP 问题的？"></a>3.4 Spring 是如何通过第三级缓存来避免 AOP 问题的？</h3><p>三级缓存中存放的是 <code>ObjectFactory</code> 对象，那 <code>ObjectFactory</code> 是什么呢？</p><p><strong><code>ObjectFactory</code> 是什么？</strong></p><p>深入源码会发现 Spring 在 <code>doCreateBean()</code> 方法中的 <code>addSingletonFactory(beanName, () -&gt; getEarlyBeanReference(beanName, mbd, bean))</code> 加入缓存。</p><p><img src="https://img-blog.csdnimg.cn/2ec8b645ed1e4e438b002c0d64f58b32.png#pic_center" alt="在这里插入图片描述"></p><p>深入 <code>addSingletonFactory</code> 方法：可以看到方法中的第二个参数就是 <code>ObjectFactory</code> 类型，并且将其添加进 <strong>三级缓存（<code>singletonFactories</code>）</strong> 中。</p><p><img src="https://img-blog.csdnimg.cn/e6a26511dcb540cf852ff0cc76228799.png#pic_center" alt="在这里插入图片描述"></p><p>这里放一下 <code>ObjectFactory</code> 类：</p><p><img src="https://img-blog.csdnimg.cn/c8c5d9b21cf942a9b5e24eca6bcf9855.png#pic_center" alt="在这里插入图片描述"></p><p>也就是说 Spring 在加入缓存时，会将 <strong>实例化后生成的原始对象</strong> 通过 <strong>lambda 表达式调用 <code>getObject()</code> 方法，<code>getObject()</code> 方法里调用 <code>getEarlyBeanReference()</code> 方法</strong> 来封装成 <code>ObjectFactory</code> 对象。</p><p><strong><code>getEarlyBeanReference()</code> 方法的作用</strong></p><p>进入 <code>getEarlyBeanReference()</code> 中，会发现调用了 <code>SmartInstantiationAwareBeanPostProcessor</code> 的 <code>getEarlyBeanReference()</code> 方法。</p><p><img src="https://img-blog.csdnimg.cn/8fefe0ef648f4261bb1a93b7fce740c6.png#pic_center" alt="在这里插入图片描述"></p><p>找到 <code>SmartInstantiationAwareBeanPostProcessor</code> 的实现类 <code>AbstractAutoProxyCreator</code> 实现的 <code>getEarlyBeanReference()</code> 方法就可以看到其作用了。</p><p><img src="https://img-blog.csdnimg.cn/c8e411fa884d499492a3c2aed14af34f.png#pic_center" alt="在这里插入图片描述"></p><ul><li><code>earlyProxyReferences</code> 存储的是 <code>(beanName, bean)</code> 键值对，这里的 bean 指的是原始对象（刚实例化后的对象）。</li><li><code>wrapIfNecessary()</code> 方法用于执行 AOP 操作，生成一个<strong>代理对象</strong>（也就是说<strong>如果有 AOP 操作最后返回的是代理对象，否则返回的还是原始对象</strong>）。</li></ul><blockquote><p><strong>Spring 真正意义上地创建 Bean 的流程</strong></p></blockquote><p>先放具体流程图：</p><p><img src="https://img-blog.csdnimg.cn/97e65a93c0c949e5bde3623288d99e08.png#pic_center" alt="在这里插入图片描述"></p><p>要点说明：</p><ol><li>并不是马上就执行 <code>ObjectFactory</code> 的 <code>getEarlyBeanReference()</code> 方法（有循环依赖时才执行）。<ul><li>实例化后的 Bean 会生成原始对象，然后经过 lambda 表达式封装为 <code>ObjectFactory</code> 对象，并且通过 <code>addSingletonFactory()</code> 方法将其放入 三级缓存（<code>singletonFactories</code>）中。</li><li>但是这里执不执行 lambda 表达式中的 <code>getEarlyBeanReference()</code> 方法是看程序有没有调用 <code>singletonFactories.get(beanName)</code>，只有调用了该方法（其实也就是看<strong>是否存在循环依赖</strong>需要提前获得该 Bean），才会触发执行 <code>getEarlyBeanReference()</code> 方法。</li><li>而 <code>getEarlyBeanReference()</code> 方法会根据 Bean 中是否有 AOP 操作来决定返回的是 <strong>原始对象</strong> 还是 <strong>代理对象</strong>，并且会将其上移到二级缓存中（也就是提前暴露出来让别的 Bean 使用）。</li></ul></li><li>如果 Bean 中有 AOP 操作，而 AOP 操作又是在属性注入之后执行的，那么之前的 <code>getEarlyBeanReference()</code> 方法中执行的 AOP 操作<strong>会不会重复</strong>？<ul><li><strong>答案是不会</strong>，还记得 <code>getEarlyBeanReference()</code> 方法中的 <strong><code>earlyProxyReferences</code></strong> 吗，这个就是用来记录当前 Bean 是否已经执行 AOP 操作。</li><li>当属性注入后需要执行 AOP 操作时，会先判断当前的 Bean 是否在 <code>earlyProxyReferences</code> 中，如果在则说明已经提前执行了 AOP 了，不用再执行了，否则就执行当前 AOP 操作。</li></ul></li><li>二级缓存中的对象什么时候会上移到一级缓存？<ul><li>二级缓存是为了提前暴露 Bean 来解决循环依赖问题，此时的 Bean 可能还没有进行属性注入，只有等完成了属性注入、初始化后的 Bean 才会上移到一级缓存（单例池）中。</li></ul></li><li>为什么可以解决 AOP 的问题？<ul><li>三级缓存通过利用 <code>ObjectFactory</code> 和 <code>getEarlyBeanReference()</code> 做到了提前执行 AOP 操作从而生成代理对象。</li><li>这样在上移到二级缓存时，可以做到如果 Bean 中有 AOP 操作，那么提前暴露的对象会是 AOP 操作后返回的代理对象；如果没有 AOP 操作，那么提前暴露的对象会是原始对象。</li><li>这样就能做到出现循环依赖问题时，注入依赖的对象和最终生成的对象是同一个对象。（相当于 AOP 提前在属性注入前完成，这样就不会导致后面生成的代理对象与属性注入时的对象的不一致）</li></ul></li></ol><p>所以 Spring 利用 <strong>三级缓存</strong> 巧妙地将出现 <strong>循环依赖</strong> 时的 <strong>AOP 操作</strong> 提前到了 <strong>属性注入</strong> 之前，避免了对象不一致问题。</p><h2 id="4-梳理-Spring-解决-Bean-的循环依赖的整个流程"><a href="#4-梳理-Spring-解决-Bean-的循环依赖的整个流程" class="headerlink" title="4. 梳理 Spring 解决 Bean 的循环依赖的整个流程"></a>4. 梳理 Spring 解决 Bean 的循环依赖的整个流程</h2><p>还是以 <code>AService</code> 和 <code>BService</code> 的循环依赖为例，完整地看看 Spring 是如何解决 Bean 的循环依赖问题。</p><blockquote><p><strong>源码分析整个流程</strong></p></blockquote><p>由于前面的内容过于繁琐，这里就以文字概括，只关注几个主要的方法：</p><p>以 <code>AbstractApplicationContext</code> 的 <code>refresh()</code> 方法出发，进入 <code>finishBeanFactoryInitialization()</code> 方法再进入 <code>preInstantiateSingletons()</code> 方法再进入 <code>getBean()</code> 方法再进入 <code>doGetBean()</code> 方法。</p><p>看看 <code>doGetBean()</code> 方法：</p><p><img src="https://img-blog.csdnimg.cn/d7365a617df74c49891f373ed63acf2f.png#pic_center" alt="在这里插入图片描述"></p><p>其中的第一个 <code>getSingleton(beanName)</code> 是判断 <strong>三级缓存</strong> 中是否有创建好的 Bean 对象，看看源码：</p><p><img src="https://img-blog.csdnimg.cn/47c926d30aa64b5d87c386eac3cc8508.png#pic_center" alt="在这里插入图片描述"></p><p>可以看到这里分别去每一级的缓存中取数据，依次从第一级开始取数据，如果取得到则直接返回，取不到则往下一级查找。</p><p>可以看到在<strong>第三级缓存</strong>中调用了 <code>singletonFactories.get(beanName)</code> 按照上文所说的会触发执行有 AOP 操作返回代理对象，没有返回原始对象，并且在这里会判断取出的数据是否存在，存在则上移到二级缓存中并删除三级缓存的数据。</p><p>如果都没有的话就会执行第二个 <code>getSingleton()</code> 也就是去执行 <code>createBean()</code> 创建一个 Bean 对象出来。</p><p>会执行 <code>createBean()</code> 方法中的 <code>doCreateBean()</code> 方法，看看源码：</p><p><img src="https://img-blog.csdnimg.cn/254eea85cca34b39ab6c847d8cf0ee9d.png#pic_center" alt="在这里插入图片描述"></p><p>到这里应该就一目了然了。</p><blockquote><p><strong>梳理整个流程</strong></p></blockquote><ol><li>首先会获取 <code>AService</code> 对应的 Bean 对象。</li><li>先是调用 <code>doGetBean()</code> 中的第一个 <code>getSingleton(beanName)</code> 判断是否有该 Bean 的实例，有就直接返回了。（显然这里没有）</li><li>然后调用 <code>doGetBean()</code> 中的第二个 <code>getSingleton()</code> 方法来执行 <code>doCreateBean()</code> 方法。</li><li>先进行实例化操作（也就是利用构造函数实例化），此时实例化后生成的是原始对象。</li><li>将原始对象通过 lambda表达式 进行封装成 <code>ObjectFactory</code> 对象，通过 <code>addSingletonFactory</code> 加入三级缓存中。</li><li>然后再进行属性注入，此时发现需要注入 <code>BService</code> 的 Bean，会通过 <code>doGetBean()</code> 去获取 <code>BService</code> 对应的 Bean。</li><li>同样调用 <code>doGetBean()</code> 中的第一个 <code>getSingleton(beanName)</code> 判断是否有该 Bean 的实例，显然这里也是不会有 <code>BService</code> 的 Bean 的。</li><li>然后只能调用 <code>doGetBean()</code> 中的第二个 <code>getSingleton()</code> 方法来执行 <code>doCreateBean()</code> 方法来创建一个 <code>BService</code> 的 Bean。</li><li>同样地先进行实例化操作，生成原始对象后封装成 <code>ObjectFactory</code> 对象放入三级缓存中。</li><li>然后进行属性注入，此时发现需要注入 <code>AService</code> 的 Bean，此时调用调用 <code>doGetBean()</code> 中的第一个 <code>getSingleton(beanName)</code> 查找是否有 <code>AService</code> 的 Bean。此时会触发三级缓存，也就是调用 <code>singletonFactories.get(beanName)</code>。</li><li>因为三级缓存中有 <code>AService</code> 的原始对象封装的 <code>ObjectFactory</code> 对象，所以可以获取到的代理对象或原始对象，并且上移到二级缓存中，提前暴露给 <code>BService</code> 调用。</li><li>所以 <code>BService</code> 可以完成属性注入，然后进行初始化后，将 Bean 放入一级缓存，这样 <code>AService</code> 也可以完成创建。</li></ol><p>以上就是 Spring 解决 Bean 的循环依赖问题的整个流程了。</p><h2 id="5-疑问"><a href="#5-疑问" class="headerlink" title="5.疑问"></a>5.疑问</h2><h3 id="为啥不只用两层缓存解决问题，从第二层缓存取对象时，如果该对象需要aop，则进行aop处理"><a href="#为啥不只用两层缓存解决问题，从第二层缓存取对象时，如果该对象需要aop，则进行aop处理" class="headerlink" title="为啥不只用两层缓存解决问题，从第二层缓存取对象时，如果该对象需要aop，则进行aop处理"></a>为啥不只用两层缓存解决问题，从第二层缓存取对象时，如果该对象需要aop，则进行aop处理</h3><p>解答：</p><p>这个问题太经典了，这里我说一下我的看法：首先呢，如果使用二级缓存的话，那么我可以理解为相当于提前判断Bean是否需要AOP，需要的话直接生成代理对象放入二级缓存，等Bean创建完成后再升到一级缓存中。大概是这个思路吧，但是为什么Spring不这么设计呢，我认为有两点原因：① 由于Spring对AOP的设计思想是AOP的创建时机是在初始化后为Bean生成代理对象的，如果采用上述的设计，那么不管Bean是否存在循环依赖，都会提早生成代理对象，这样其实已经违背了Bean的设计理念。② 使用ObjectFactory对象每次触发调用lambda表达式中的 <code>getEarlyBeanReference()</code>生成的代理对象其实都是新创建的，也就是说如果存在两个以上的Bean循环依赖，例如 A 依赖 B 和 C，而 B 也依赖 A，C 也依赖A，并且A需要AOP，那么此时在创建 B 时触发 A 的ObjectFactory对象生成的代理对象和创建 C 时触发 A 的ObjectFactory对象生成的代理对象是不一样的，因为两次触发生成的都是新对象。这也就是为什么需要在中间设置一个二级缓存存放第一次调用创建的代理对象，这样还需要属性注入 A 的Bean就可以直接在二级缓存中拿，而不需要再次触发ObjectFactory对象。</p><p>作者：单程车票<br>链接：<a href="https://juejin.cn/post/7218080360403615804" target="_blank" rel="noopener">https://juejin.cn/post/7218080360403615804</a><br>来源：稀土掘金<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Spring </tag>
            
            <tag> 循环依赖 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学Java的这些HashMap的知识点必须得懂(JDK1.8)</title>
      <link href="/2023/06/30/%E5%AD%A6Java%E7%9A%84%E8%BF%99%E4%BA%9BHashMap%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E5%BF%85%E9%A1%BB%E5%BE%97%E6%87%82(JDK1.8)/"/>
      <url>/2023/06/30/%E5%AD%A6Java%E7%9A%84%E8%BF%99%E4%BA%9BHashMap%E7%9A%84%E7%9F%A5%E8%AF%86%E7%82%B9%E5%BF%85%E9%A1%BB%E5%BE%97%E6%87%82(JDK1.8)/</url>
      
        <content type="html"><![CDATA[<h2 id="HashMap的扩容机制"><a href="#HashMap的扩容机制" class="headerlink" title="HashMap的扩容机制"></a>HashMap的扩容机制</h2><h3 id="扩容步骤"><a href="#扩容步骤" class="headerlink" title="扩容步骤"></a>扩容步骤</h3><ol><li><p><strong>扩容条件判断：当 HashMap 中的元素数量超过了负载因子与当前容量的乘积时，就会触发扩容操作。具体判断条件可以参考 <code>threshold</code> 的计算方式。</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> threshold = (<span class="keyword">int</span>)(capacity * loadFactor);</span><br></pre></td></tr></table></figure><ul><li><p>在 HashMap 中，<code>threshold</code> 是用来判断是否需要进行扩容的阈值。<code>threshold</code> 的计算方式是将当前容量 (<code>capacity</code>) 乘以负载因子 (<code>loadFactor</code>)，然后将结果转换为整数。</p><p>负载因子是一个表示 HashMap 元素填充程度的参数，默认情况下是 0.75。当 HashMap 中的元素数量超过了 <code>threshold</code>，就会触发扩容操作，以保持 HashMap 的性能。</p><p><code>threshold</code> 的计算公式是 <code>threshold = (int)(capacity * loadFactor)</code>，其中 <code>capacity</code> 表示当前 HashMap 的容量，<code>loadFactor</code> 表示负载因子。</p><p>具体来说，<code>capacity * loadFactor</code> 的结果是一个浮点数，通过强制类型转换 <code>(int)</code> 将其转换为整数。强制类型转换会将浮点数的小数部分截断，只取整数部分。这样就得到了一个整数类型的 <code>threshold</code>。</p><p>计算出的 <code>threshold</code> 值实际上代表了 HashMap 在什么时候需要进行扩容。当 HashMap 中的元素数量达到了 <code>threshold</code>，即超过了负载因子所允许的填充程度时，就会触发扩容操作。</p><p>通过合理设置负载因子，可以在空间与时间的平衡中进行权衡。较小的负载因子可以减少空间消耗，但可能导致哈希冲突增加；较大的负载因子可以减少哈希冲突，但会增加空间消耗。根据具体的应用场景，可以调整负载因子以达到最佳性能。</p><p>总结起来，<code>threshold = (int)(capacity * loadFactor)</code> 是根据当前容量和负载因子计算得出的触发 HashMap 扩容的阈值，当元素数量超过该阈值时，HashMap 将进行扩容操作。</p><a id="more"></a></li></ul></li><li><p><strong>创建新数组：在扩容时，将会创建一个新的数组，其大小是原数组的两倍。新数组的容量是原数组容量的两倍，并且容量必须是 2 的幂次方。</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Node&lt;K,V&gt;[] newTab = <span class="keyword">new</span> Node[newCap];</span><br></pre></td></tr></table></figure><ul><li><p>在 HashMap 中，<code>newTab</code> 是一个新的 Node 数组，用于存储扩容后的元素。<code>newCap</code> 是扩容后的容量，代表了新数组的长度。</p><p><code>Node&lt;K,V&gt;[] newTab = new Node[newCap]</code> 是创建一个新的 Node 数组对象。其中 <code>&lt;K, V&gt;</code> 表示泛型类型参数，分别代表键和值的类型。</p><p>通过 <code>new Node[newCap]</code> 创建出的新数组，每个元素都是一个 Node 类型的对象。Node 类型通常表示哈希桶中的一个节点，用于存储实际的键值对。</p><p>在 HashMap 的扩容过程中，需要创建一个容量更大的新数组，并将原数组中的元素重新分配到新数组的对应位置上。这是因为扩容后 HashMap 需要有更多的桶来分散键值对，以减少哈希冲突的概率。</p><p>在创建新数组时，使用 <code>new Node[newCap]</code> 声明并初始化一个新的 Node 数组。注意，<code>newCap</code> 是指定的新容量大小，是原容量的两倍或其他扩容方式计算得出的结果。</p><p>通过创建新的 Node 数组，HashMap 就可以在扩容后使用更大的内部数组来存储元素，以适应更多的键值对。接下来，就可以将原数组中的元素重新插入到新数组的相应位置上，并更新 HashMap 内部的数据结构，完成扩容操作。</p></li></ul></li><li><p><strong>数据迁移：接下来，需要将原数组中的数据逐个迁移到新数组中。这一过程称为重新哈希(Rehash)。对于每个非空的桶，会遍历链表或红黑树中的节点，并根据新数组的容量重新计算其在新数组中的位置。</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (Node&lt;K,V&gt; e : oldTab) &#123;</span><br><span class="line">    <span class="keyword">while</span> (e != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 计算新的索引位置</span></span><br><span class="line">        <span class="keyword">int</span> newIndex = indexFor(e.hash, newCapacity);</span><br><span class="line">        <span class="comment">// 将节点添加到新数组中</span></span><br><span class="line">        <span class="comment">// 省略部分代码...</span></span><br><span class="line">        e = e.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>更新引用：完成数据迁移后，需要更新 HashMap 对象内部的一些引用。主要包括数组的引用和阈值的更新。</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">table = newTab;</span><br><span class="line">threshold = (<span class="keyword">int</span>)(newCapacity * loadFactor);</span><br></pre></td></tr></table></figure><ul><li><p><code>table = newTab;</code> 和 <code>threshold = (int)(newCapacity * loadFactor);</code> 是在 HashMap 扩容过程中更新数据结构的两个关键步骤。</p><p>首先，<code>table = newTab;</code> 将引用指向新的数组 <code>newTab</code>。这意味着 HashMap 的内部数组 <code>table</code> 现在引用了扩容后的新数组，从而使 HashMap 在接下来的操作中使用新数组来存储元素。</p><p>接着，<code>threshold = (int)(newCapacity * loadFactor);</code> 根据新的容量 <code>newCapacity</code> 和负载因子 <code>loadFactor</code> 计算得到新的阈值 <code>threshold</code>。这个阈值表示在何时需要再次进行扩容。</p><p>解释一下这个计算过程：<code>newCapacity</code> 是新数组的容量，它可能是原容量的两倍或其他扩容方式计算得出的结果。负载因子 <code>loadFactor</code> 是一个参数，表示 HashMap 元素填充程度的比例，默认为 0.75。</p><p><code>newCapacity</code> 乘以 <code>loadFactor</code> 得到一个浮点数，然后通过强制类型转换 <code>(int)</code> 将其转换为整数形式。这样得到的 <code>threshold</code> 就是新容量和负载因子相乘后取整得到的结果。</p><p>计算出的新阈值 <code>threshold</code> 可以用来判断何时再次触发扩容操作。当 HashMap 中的元素数量超过了新阈值时，就会触发下一次的扩容操作，以保持 HashMap 的性能。</p></li></ul></li><li><p><strong>并发处理：在多线程环境下，可能存在并发情况下进行的插入、删除等操作。为了保证线程安全，HashMap 在扩容过程中会采取一些措施，如使用 synchronized 关键字或者 CAS（Compare and Swap）操作来避免并发问题。</strong></p></li></ol><p><strong>总结起来，HashMap 的扩容步骤可以概括为：创建新数组、将原数组的数据迁移到新数组中、更新引用和处理并发情况。通过扩容，HashMap 可以提高容量，从而减少哈希冲突的概率，提高查询和插入操作的性能。</strong></p><h3 id="为什么HashMap扩容的容量必须是-2-的幂次方"><a href="#为什么HashMap扩容的容量必须是-2-的幂次方" class="headerlink" title="为什么HashMap扩容的容量必须是 2 的幂次方"></a>为什么HashMap扩容的容量必须是 2 的幂次方</h3><p>HashMap 扩容的容量必须是 2 的幂次方，这是因为 HashMap 在计算元素在数组中存储位置时使用了位运算，通过将哈希值与 (capacity - 1) 进行与操作来得到索引值。具体而言，假设 HashMap 的容量为 n，那么对应的数组索引范围为 [0, n-1]。</p><p>原始的 HashMap 实现使用取模运算（<code>%</code>）来计算索引，例如 <code>index = hash % capacity</code>。然而，这种方式在计算机中是比较耗时的操作，而且对于不同的容量，取模的结果分布并不均匀。</p><p>为了提高计算速度和优化索引的分布，HashMap 使用位运算来计算索引，将取模操作转换为与运算（<code>&amp;</code>）。具体地，假设容量是 2 的幂次方（即 n = 2^k），那么 <code>(n - 1)</code> 的二进制形式的所有位都是 1。这样，在进行与操作时，结果的最低 k 位就是哈希值的有效位，通过这些有效位可以获取到元素在数组中的索引。</p><p>例如，当容量为 16 （即 2^4）时，<code>(n - 1)</code> 的二进制形式为 1111，对任意哈希值进行与操作后，得到的结果只会影响哈希值的最低 4 位，即 <code>hash &amp; (capacity - 1)</code>。这样，通过位运算而不是取模运算来计算索引，可以提高计算效率，并且保持了较好的分布性。</p><p>因此，在设计 HashMap 扩容机制时，为了保持元素在数组中的位置计算准确和高效，容量必须是 2 的幂次方。这样可以充分利用位运算来计算索引，提高 HashMap 的性能和效率。</p><h3 id="为何HashMap中的扩容是-lt-lt-1"><a href="#为何HashMap中的扩容是-lt-lt-1" class="headerlink" title="为何HashMap中的扩容是&lt;&lt;1"></a>为何HashMap中的扩容是&lt;&lt;1</h3><p>在 HashMap 中，扩容操作使用的是位运算符 <code>&lt;&lt;</code> 来实现容量的翻倍。<code>&lt;&lt;</code> 是位左移操作符，它将二进制数向左移动指定的位数，并在右侧填充零。</p><p>HashMap 扩容时，会将当前容量乘以 2，即进行容量的翻倍。这是因为 HashMap 内部使用一个数组来存储元素，扩容时需要重新创建一个更大的数组，并将原数组中的元素重新分配到新数组的对应位置上。</p><p>通过将当前容量左移一位，相当于将当前容量乘以 2。这种操作比起使用乘法运算符 <code>*</code> 来说更加高效，因为位运算通常比算术运算更快。</p><p>举个例子，假设当前容量为 n，那么 <code>n &lt;&lt; 1</code> 的结果就是将 n 的二进制表示向左移动一位，并在右侧填充零。这样就得到了新的容量，即原容量的两倍。</p><p>使用位运算的方式进行扩容，可以通过简单的位移操作来达到容量翻倍的效果，而不需要进行乘法运算，从而提高了性能和效率。</p><p>因此，HashMap 中使用 <code>&lt;&lt;</code> 运算符来进行扩容，是一种高效的方式，可以快速地将当前容量扩大一倍。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 二进制1001左移一位</span></span><br><span class="line"> <span class="number">10010</span> = <span class="number">01001</span> &lt;&lt; <span class="number">1</span> </span><br><span class="line"><span class="comment">// 对应的的十进制数值为</span></span><br><span class="line"> <span class="number">01001</span> = <span class="number">9</span></span><br><span class="line"> <span class="number">10010</span> = <span class="number">18</span></span><br></pre></td></tr></table></figure><h2 id="HashMap的存储结构转换机制（链表-gt-红黑树）"><a href="#HashMap的存储结构转换机制（链表-gt-红黑树）" class="headerlink" title="HashMap的存储结构转换机制（链表-&gt;红黑树）"></a>HashMap的存储结构转换机制（链表-&gt;红黑树）</h2><p>在 JDK 8 及之后的版本中，HashMap 对于哈希冲突的处理引入了红黑树来替代链表，以提高在桶中查找的效率。下面是链表转换为红黑树的机制：</p><ol><li>当链表中的节点数量超过阈值（默认为 8）时，会进行链表转换为红黑树的操作。</li><li>在进行转换前，HashMap 会先判断当前桶中的元素是否已经符合红黑树的转换条件，即该桶的长度是否大于等于 8（默认值），如果不满足，则不进行转换，仍然维持链表结构。</li><li>如果满足转换条件，在进行链表转换为红黑树之前，会先判断当前 HashMap 的容量是否达到了一个阈值（默认为 64），如果没有达到，则进行扩容，目的是为了提供红黑树所需的更多桶，防止红黑树因为容量不足而发生退化。</li><li>执行链表转换为红黑树的操作，使用红黑树的插入算法将链表中的节点逐个转移到红黑树中，这个过程是一种链表节点的插入操作。</li><li>在转换完成后，原本的链表就会被替换成一棵红黑树，这样就能够通过红黑树的高效查找算法快速定位到对应的元素。</li></ol><p>需要注意的是，在进行红黑树的转换操作后，如果发现红黑树中的节点数量少于某个阈值（默认为 6），此时会将红黑树恢复成链表结构，以节省内存空间并降低维护成本。</p><p>总结起来，HashMap 的存储结构转换机制是通过在链表长度过长时，将链表转换为红黑树来提高查找效率，并在条件满足时进行桶容量的扩容。同时，为了节省内存空间和维护成本，红黑树节点数量过少时会恢复成链表结构。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 看源码</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;     <span class="comment">//binCount遍历次数， 当binCount=0时，链表上有一个节点，故可以推出当当binCount=7即当链表上有8个节点时会进行红黑树的转换</span></span><br><span class="line">  <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">    p.next = newNode(hash, key, value, <span class="keyword">null</span>); <span class="comment">//这行代码表示，会先将新的set值插入到链表中在进行红黑树的转换，而不是先转红黑树在讲新的set值插入到红黑树中，所以说明当链表上有9个节点时才转换成的红黑树</span></span><br><span class="line">    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>)  <span class="comment">//TREEIFY_THRESHOLD常量值为8，这个判断为当遍历次数为7时就会将链表结构转为红黑树</span></span><br><span class="line">      treeifyBin(tab, hash);   <span class="comment">//链表转为红黑树的具体实现代码</span></span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">      ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  p = e;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="后续补充中。。。"><a href="#后续补充中。。。" class="headerlink" title="后续补充中。。。"></a>后续补充中。。。</h2>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> HashMap </tag>
            
            <tag> JDK1.8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring中Bean创建完后打印语句的两种方法（Bean的生命周期）</title>
      <link href="/2023/06/29/spring%E4%B8%ADBean%E5%88%9B%E5%BB%BA%E5%AE%8C%E5%90%8E%E6%89%93%E5%8D%B0%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%88Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%89/"/>
      <url>/2023/06/29/spring%E4%B8%ADBean%E5%88%9B%E5%BB%BA%E5%AE%8C%E5%90%8E%E6%89%93%E5%8D%B0%E8%AF%AD%E5%8F%A5%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%88Bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="Bean的生命周期"><a href="#Bean的生命周期" class="headerlink" title="Bean的生命周期"></a>Bean的生命周期</h2><p>Bean的生命周期包括四个阶段：</p><ul><li><p>实例化阶段（Instantiation）：容器通过调用构造函数或者工厂方法来创建Bean的实例。</p></li><li><p>属性赋值阶段（Populate properties）：容器将相应的属性值设置给Bean的实例，可以通过setter方法、直接字段注入或者其他自定义的方式完成属性赋值。</p></li><li><p>初始化阶段（Initialization）：在Bean的属性赋值完成后，容器会调用相关的初始化方法（如果有的话），如实现了InitializingBean接口的afterPropertiesSet()方法，或者通过@Bean注解的initMethod属性指定的方法。开发者可以在初始化方法中进行一些额外的操作，例如数据校验、初始化资源等。</p><a id="more"></a></li><li><p>使用阶段（In use）【补充】：经过初始化阶段后，Bean进入可用状态，可以被容器及其他对象使用。</p></li><li><p>销毁阶段（Destruction）：当Bean不再被使用时，容器可以对其进行销毁操作。这包括调用实现了DisposableBean接口的destroy()方法，或者通过@Bean注解的destroyMethod属性指定的方法。开发者可以在销毁方法中释放资源、关闭连接等。</p></li></ul><h2 id="两种方式在Bean创建完后打印语句（Bean的初始化阶段）"><a href="#两种方式在Bean创建完后打印语句（Bean的初始化阶段）" class="headerlink" title="两种方式在Bean创建完后打印语句（Bean的初始化阶段）"></a>两种方式在Bean创建完后打印语句（Bean的初始化阶段）</h2><h3 id="实现InitializingBean接口："><a href="#实现InitializingBean接口：" class="headerlink" title="实现InitializingBean接口："></a>实现InitializingBean接口：</h3><ul><li><p>创建一个类，实现InitializingBean接口。</p></li><li><p>在该类中实现afterPropertiesSet()方法，在该方法中编写创建Bean后要执行的操作，例如打印语句。</p></li><li><p>当Bean被创建后，容器会自动调用afterPropertiesSet()方法。</p><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.InitializingBean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> <span class="keyword">implements</span> <span class="title">InitializingBean</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Bean已创建。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="使用-Bean注解和initMethod属性："><a href="#使用-Bean注解和initMethod属性：" class="headerlink" title="使用@Bean注解和initMethod属性："></a>使用@Bean注解和initMethod属性：</h3><ul><li><p>在Bean对应的配置类中，使用@Bean注解定义Bean的创建方法。</p></li><li><p>在@Bean注解中，使用initMethod属性指定在Bean创建后要调用的初始化方法。</p></li><li><p>在初始化方法中，编写需要执行的操作，例如打印语句。</p><p>代码示例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AppConfig</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span>(initMethod = <span class="string">"init"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> MyBean <span class="title">myBean</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MyBean();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBean</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"Bean已创建。"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>无论使用哪种方式，当Bean被创建后，打印语句将会在<strong>初始化阶段</strong>执行。</p><p>具体使用哪种方式都可以，当然根据具体的场景选择适合的方式最好。</p>]]></content>
      
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> spring </tag>
            
            <tag> Bean的生命周期 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决feign调用时开发环境与正式环境需要增减URL的烦恼</title>
      <link href="/2023/06/27/%E8%A7%A3%E5%86%B3feign%E8%B0%83%E7%94%A8%E6%97%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%8E%E6%AD%A3%E5%BC%8F%E7%8E%AF%E5%A2%83%E9%9C%80%E8%A6%81%E5%A2%9E%E5%87%8FURL%E7%9A%84%E7%83%A6%E6%81%BC/"/>
      <url>/2023/06/27/%E8%A7%A3%E5%86%B3feign%E8%B0%83%E7%94%A8%E6%97%B6%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E4%B8%8E%E6%AD%A3%E5%BC%8F%E7%8E%AF%E5%A2%83%E9%9C%80%E8%A6%81%E5%A2%9E%E5%87%8FURL%E7%9A%84%E7%83%A6%E6%81%BC/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/f092b72ce6314ea98277aaf28bbb50b4.jpeg#pic_center" alt=""></p><h2 id="项目场景：feign在开发模式的小技巧"><a href="#项目场景：feign在开发模式的小技巧" class="headerlink" title="项目场景：feign在开发模式的小技巧"></a>项目场景：feign在开发模式的小技巧</h2><h2 id="问题描述："><a href="#问题描述：" class="headerlink" title="问题描述："></a>问题描述：</h2><p>@feignClient指定url才能命中指定的节点,但是正式发布的时候又得删了,很麻烦.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(name=<span class="string">"base"</span>,url = <span class="string">"http://127.0.0.1:9000"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BaseService</span> </span>&#123;</span><br><span class="line">   <span class="comment">//.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h2><ul><li>把url弄成动态的,并且开发模式才有值,正式环境默认值</li></ul><p>新建一个公共的DevProcessor,把所有需要调用到的微服务ip端口信息弄进去,如果有公共工程的,那就维护好这一份就可以了.<br>实现<strong>BeanPostProcessor</strong>是为了在SpringBoot启动前进行设置<br>利用 <strong>@ConditionalOnProperty</strong> 设置为只在dev模式加载</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty</span>(value = <span class="string">"spring.profiles.active"</span>,havingValue = <span class="string">"dev"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DevProcessor</span> <span class="keyword">implements</span> <span class="title">BeanPostProcessor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置微服务调试模式下的的ip端口信息</span></span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.base"</span>, <span class="string">"http://127.0.0.1:9000"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.data-compilation"</span>, <span class="string">"http://127.0.0.1:9011"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.data-spider"</span>, <span class="string">"http://127.0.0.1:9106"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.hydro-forecast-short"</span>, <span class="string">"http://127.0.0.1:9004"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.hydrodynamic-waterquality-1d"</span>, <span class="string">"http://127.0.0.1:9006"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.monitor"</span>, <span class="string">"http://127.0.0.1:9103"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.quality-manage"</span>, <span class="string">"http://127.0.0.1:9017"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.reservoir-operation"</span>, <span class="string">"http://127.0.0.1:9015"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.river-lake-health"</span>, <span class="string">"http://127.0.0.1:9016"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.system"</span>, <span class="string">"http://127.0.0.1:9002"</span>);</span><br><span class="line">        System.setProperty(<span class="string">"feign.debug.url.water-resource-allocation"</span>, <span class="string">"http://127.0.0.1:9009"</span>);</span><br><span class="line">        <span class="comment">// 不注册到nacos上,@FeignClient调用指定了url就不会再从nacos上拉取服务信息走负载均衡了</span></span><br><span class="line">        System.setProperty(<span class="string">"spring.cloud.nacos.discovery.register-enabled"</span>, <span class="string">"false"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在需要用到@FeignClient的地方就可以这么写了,注意属性变量引用最后有一个 : 这个不能少,因为正式环境是不会加载之前的DevProcessor类的. : 的作用是默认值为空字符串和原@FeignClient的url的默认值一样</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient</span>(name=<span class="string">"base"</span>,url = <span class="string">"$&#123;feign.debug.url.system:&#125;"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">BaseService</span> </span>&#123;</span><br><span class="line">   <span class="comment">//.....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>好了,以后开发模式就成指定url访问了,正式环境不受影响</p><p>————————————————<br>版权声明：本文为CSDN博主「DonkeyBulala」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br>原文链接：<a href="https://blog.csdn.net/qq_36850300/article/details/125000814" target="_blank" rel="noopener">https://blog.csdn.net/qq_36850300/article/details/125000814</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> Feign </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DO、DTO、BO、VO、POJO等各种O浅学（总结）</title>
      <link href="/2022/04/12/DO%E3%80%81DTO%E3%80%81BO%E3%80%81VO%E3%80%81POJO%E7%AD%89%E5%90%84%E7%A7%8DO%E6%B5%85%E5%AD%A6%EF%BC%88%E6%80%BB%E7%BB%93%EF%BC%89/"/>
      <url>/2022/04/12/DO%E3%80%81DTO%E3%80%81BO%E3%80%81VO%E3%80%81POJO%E7%AD%89%E5%90%84%E7%A7%8DO%E6%B5%85%E5%AD%A6%EF%BC%88%E6%80%BB%E7%BB%93%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/c8dc950ea9064495b2f9a18e4b75adce.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt=""></p><h2 id="有哪些-O"><a href="#有哪些-O" class="headerlink" title="有哪些 O"></a>有哪些 O</h2><ul><li><p>DO（ Data Object）：与数据库表结构一一对应，通过 DAO 层向上传输数据源对象。</p></li><li><p>PO（Persistant Object）：持久对象，一个 PO 的数据结构对应着库中表的结构，表中的一条记录就是一个 PO 对象</p></li><li><p>DTO（ Data Transfer Object）：数据传输对象，Service 或 Manager 向外传输的对象。</p> <a id="more"></a></li><li><p>BO（ Business Object）：业务对象。由 Service 层输出的封装业务逻辑的对象。</p></li><li><p>AO（ Application Object）：应用对象。在 Web 层与 Service 层之间抽象的复用对象模型，极为贴近展示层，复用度不高。</p></li><li><p>VO（ View Object）：显示层对象，通常是 Web 向模板渲染引擎层传输的对象。</p></li><li><p>POJO（ Plain Ordinary Java Object）：POJO 专指只有 setter/getter/toString 的简单类，包括 DO/DTO/BO/VO 等。</p></li><li><p>DAO（Data Access Objects）：数据访问对象，和上面那些 O 不同的是，其功能是用于进行数据操作的。通常不会用于描述数据实体<br>　<img src="https://img-blog.csdnimg.cn/3b7d7f6507594e709a9d8c451c54f07b.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>　　阿里Java开发手册分层领域模型：<br>　　<img src="https://img-blog.csdnimg.cn/75f382b920d64cc59fd8282abcfaf7b3.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p></li></ul><h2 id="关键的-O-：DO、DTO、VO、BO"><a href="#关键的-O-：DO、DTO、VO、BO" class="headerlink" title="关键的 O ：DO、DTO、VO、BO"></a>关键的 O ：DO、DTO、VO、BO</h2><ul><li><p>VO (View Object)，用于表示一个与前端进行交互的视图对象，它的作用是把某个指定页面(或组件)的所有数据封装起来。实际上，这里的 VO 只包含前端需要展示的数据，对于前端不需要的数据，比如数据创建和修改的时间等字段，出于减少传输数据量大小和保护数据库结构不外泄的目的，不应该在 VO 中体现出来。</p></li><li><p>DTO(Data Transfer Object)，用于表示一个数据传输对象，DTO 通常用于展示层(Controller)和服务层(Service)之间的数据传输对象。DTO 与 VO 概念相似，并且通常情况下字段也基本一致。但 DTO 与 VO 又有一些不同，这个不同主要是设计理念上的，比如 API 服务需要使用的 DTO 就可能与 VO 存在差异。</p></li><li><p>DO(Data Object) ，持久化对象，它跟持久层(Dao)的数据结构形成一一对应的映射关系。如果持久层是关系型数据库，那么数据库表中的每个字段就对应PO的一个属性，常是entity实体类。</p></li><li><p>BO（Business Object）：业务对象，就是从现实世界中抽象出来的有形或无形的业务实体。</p><h2 id="整个数据流程传递"><a href="#整个数据流程传递" class="headerlink" title="整个数据流程传递"></a>整个数据流程传递</h2><p>一般的数据传递是，前端传递VO给接口(Controller)，接口将VO转为DTO传递给service，service将DTO分解为DO，调用领域服务进行调度，然后逆向转为VO或者其他的返回结果，传递给前台。</p></li></ul><h2 id="区别用处"><a href="#区别用处" class="headerlink" title="区别用处"></a>区别用处</h2><h3 id="VO与DTO的区别"><a href="#VO与DTO的区别" class="headerlink" title="VO与DTO的区别"></a>VO与DTO的区别</h3><p>　　大家可能会有个疑问（在笔者参与的项目中，很多程序员也有相同的疑惑）：既然DTO是展示层与服务层之间传递数据的对象，为什么还需要一个VO呢？对！对于绝大部分的应用场景来说，DTO和VO的属性值基本是一致的，而且他们通常都是POJO，因此没必要多此一举。但不要忘记这是实现层面的思维，对于设计层面来说，概念上还是应该存在VO和DTO，因为两者有着本质的区别，DTO代表服务层需要接收的数据和返回的数据，而VO代表展示层需要显示的数据。</p><p>　　用一个例子来说明可能会比较容易理解：例如服务层有一个getUser的方法返回一个系统用户，其中有一个属性是gender(性别)，对于服务层来说，它只从语义上定义：1-男性，2-女性，0-未指定，而对于展示层来说，它可能需要用“帅哥”代表男性，用“美女”代表女性，用“秘密”代表未指定。说到这里，可能你还会反驳，在服务层直接就返回“帅哥美女”不就行了吗？对于大部分应用来说，这不是问题，但设想一下，如果需求允许客户可以定制风格，而不同风格对于“性别”的表现方式不一样，又或者这个服务同时供多个客户端使用（不同门户），而不同的客户端对于表现层的要求有所不同，那么，问题就来了。再者，回到设计层面上分析，从职责单一原则来看，服务层只负责业务，与具体的表现形式无关，因此，它返回的DTO，不应该出现与表现形式的耦合。</p><p>　　理论归理论，这到底还是分析设计层面的思维，是否在实现层面必须这样做呢？一刀切的做法往往会得不偿失，下面我马上会分析应用中如何做出正确的选择。</p><h3 id="VO与DTO的应用"><a href="#VO与DTO的应用" class="headerlink" title="VO与DTO的应用"></a>VO与DTO的应用</h3><p>　　上面只是用了一个简单的例子来说明VO与DTO在概念上的区别，本节将会告诉你如何在应用中做出正确的选择。</p><p>　　在以下才场景中，我们可以考虑把VO与DTO二合为一（注意：是实现层面）：</p><p>当需求非常清晰稳定，而且客户端很明确只有一个的时候，没有必要把VO和DTO区分开来，这时候VO可以退隐，用一个DTO即可，为什么是VO退隐而不是DTO？回到设计层面，服务层的职责依然不应该与展示层耦合，所以，对于前面的例子，你很容易理解，DTO对于“性别”来说，依然不能用“帅哥美女”，这个转换应该依赖于页面的脚本（如JavaScript）或其他机制（JSTL、EL、CSS）。<br>即使客户端可以进行定制，或者存在多个不同的客户端，如果客户端能够用某种技术（脚本或其他机制）实现转换，同样可以让VO退隐。<br>　　以下场景需要优先考虑VO、DTO并存：</p><p>上述场景的反面场景<br>因为某种技术原因，比如某个框架（如Flex）提供自动把POJO转换为UI中某些Field时，可以考虑在实现层面定义出VO，这个权衡完全取决于使用框架的自动转换能力带来的开发和维护效率提升与设计多一个VO所多做的事情带来的开发和维护效率的下降之间的比对。<br>如果页面出现一个“大视图”，而组成这个大视图的所有数据需要调用多个服务，返回多个DTO来组装（当然，这同样可以通过服务层提供一次性返回一个大视图的DTO来取代，但在服务层提供一个这样的方法是否合适，需要在设计层面进行权衡）。</p><h3 id="DTO与DO的区别"><a href="#DTO与DO的区别" class="headerlink" title="DTO与DO的区别"></a>DTO与DO的区别</h3><p>　　首先是概念上的区别，DTO是展示层和服务层之间的数据传输对象（可以认为是两者之间的协议），而DO是对现实世界各种业务角色的抽象，这就引出了两者在数据上的区别，例如UserInfo和User（对于DTO和DO的命名规则，请参见笔者前面的一篇博文），对于一个getUser方法来说，本质上它永远不应该返回用户的密码，因此UserInfo至少比User少一个password的数据。而在领域驱动设计中，正如第一篇系列文章所说，DO不是简单的POJO，它具有领域业务逻辑。</p><h3 id="DTO与DO的应用"><a href="#DTO与DO的应用" class="headerlink" title="DTO与DO的应用"></a>DTO与DO的应用</h3><p>　　从上一节的例子中，细心的读者可能会发现问题：既然getUser方法返回的UserInfo不应该包含password，那么就不应该存在password这个属性定义，但如果同时有一个createUser的方法，传入的UserInfo需要包含用户的password，怎么办？在设计层面，展示层向服务层传递的DTO与服务层返回给展示层的DTO在概念上是不同的，但在实现层面，我们通常很少会这样做（定义两个UserInfo，甚至更多），因为这样做并不见得很明智，我们完全可以设计一个完全兼容的DTO，在服务层接收数据的时候，不该由展示层设置的属性（如订单的总价应该由其单价、数量、折扣等决定），无论展示层是否设置，服务层都一概忽略，而在服务层返回数据时，不该返回的数据（如用户密码），就不设置对应的属性。</p><p>　　对于DO来说，还有一点需要说明：为什么不在服务层中直接返回DO呢？这样可以省去DTO的编码和转换工作，原因如下：</p><p>两者在本质上的区别可能导致彼此并不一一对应，一个DTO可能对应多个DO，反之亦然，甚至两者存在多对多的关系。<br>DO具有一些不应该让展示层知道的数据<br>DO具有业务方法，如果直接把DO传递给展示层，展示层的代码就可以绕过服务层直接调用它不应该访问的操作，对于基于AOP拦截服务层来进行访问控制的机制来说，这问题尤为突出，而在展示层调用DO的业务方法也会因为事务的问题，让事务难以控制。<br>对于某些ORM框架（如Hibernate）来说，通常会使用“延迟加载”技术，如果直接把DO暴露给展示层，对于大部分情况，展示层不在事务范围之内（Open session in view在大部分情况下不是一种值得推崇的设计），如果其尝试在Session关闭的情况下获取一个未加载的关联对象，会出现运行时异常（对于Hibernate来说，就是LazyInitiliaztionException）。<br>从设计层面来说，展示层依赖于服务层，服务层依赖于领域层，如果把DO暴露出去，就会导致展示层直接依赖于领域层，这虽然依然是单向依赖，但这种跨层依赖会导致不必要的耦合。<br>　　对于DTO来说，也有一点必须进行说明，就是DTO应该是一个“扁平的二维对象”，举个例子来说明：如果User会关联若干个其他实体（例如Address、Account、Region等），那么getUser()返回的UserInfo，是否就需要把其关联的对象的DTO都一并返回呢？如果这样的话，必然导致数据传输量的大增，对于分布式应用来说，由于涉及数据在网络上的传输、序列化和反序列化，这种设计更不可接受。如果getUser除了要返回User的基本信息外，还需要返回一个AccountId、AccountName、RegionId、RegionName，那么，请把这些属性定义到UserInfo中，把一个“立体”的对象树“压扁”成一个“扁平的二维对象”。笔者目前参与的项目是一个分布式系统，该系统不管三七二十一，把一个对象的所有关联对象都转换为相同结构的DTO对象树并返回，导致性能非常的慢。</p><h3 id="DO与PO的区别"><a href="#DO与PO的区别" class="headerlink" title="DO与PO的区别"></a>DO与PO的区别</h3><p>　　DO和PO在绝大部分情况下是一一对应的，PO是只含有get/set方法的POJO，但某些场景还是能反映出两者在概念上存在本质的区别：</p><p>DO在某些场景下不需要进行显式的持久化，例如利用策略模式设计的商品折扣策略，会衍生出折扣策略的接口和不同折扣策略实现类，这些折扣策略实现类可以算是DO，但它们只驻留在静态内存，不需要持久化到持久层，因此，这类DO是不存在对应的PO的。<br>同样的道理，某些场景下，PO也没有对应的DO，例如老师Teacher和学生Student存在多对多的关系，在关系数据库中，这种关系需要表现为一个中间表，也就对应有一个TeacherAndStudentPO的PO，但这个PO在业务领域没有任何现实的意义，它完全不能与任何DO对应上。这里要特别声明，并不是所有多对多关系都没有业务含义，这跟具体业务场景有关，例如：两个PO之间的关系会影响具体业务，并且这种关系存在多种类型，那么这种多对多关系也应该表现为一个DO，又如：“角色”与“资源”之间存在多对多关系，而这种关系很明显会表现为一个DO——“权限”。<br>某些情况下，为了某种持久化策略或者性能的考虑，一个PO可能对应多个DO，反之亦然。例如客户Customer有其联系信息Contacts，这里是两个一对一关系的DO，但可能出于性能的考虑（极端情况，权作举例），为了减少数据库的连接查询操作，把Customer和Contacts两个DO数据合并到一张数据表中。反过来，如果一本图书Book，有一个属性是封面cover，但该属性是一副图片的二进制数据，而某些查询操作不希望把cover一并加载，从而减轻磁盘IO开销，同时假设ORM框架不支持属性级别的延迟加载，那么就需要考虑把cover独立到一张数据表中去，这样就形成一个DO对应多个PO的情况。<br>PO的某些属性值对于DO没有任何意义，这些属性值可能是为了解决某些持久化策略而存在的数据，例如为了实现“乐观锁”，PO存在一个version的属性，这个version对于DO来说是没有任何业务意义的，它不应该在DO中存在。同理，DO中也可能存在不需要持久化的属性。</p><h3 id="DO与PO的应用"><a href="#DO与PO的应用" class="headerlink" title="DO与PO的应用"></a>DO与PO的应用</h3><p>　　由于ORM框架的功能非常强大而大行其道，而且JavaEE也推出了JPA规范，现在的业务应用开发，基本上不需要区分DO与PO，PO完全可以通过JPA，Hibernate Annotations/hbm隐藏在DO之中。虽然如此，但有些问题我们还必须注意：</p><p>对于DO中不需要持久化的属性，需要通过ORM显式的声明，如：在JPA中，可以利用@Transient声明。<br>对于PO中为了某种持久化策略而存在的属性，例如version，由于DO、PO合并了，必须在DO中声明，但由于这个属性对DO是没有任何业务意义的，需要让该属性对外隐藏起来，最常见的做法是把该属性的get/set方法私有化，甚至不提供get/set方法。但对于Hibernate来说，这需要特别注意，由于Hibernate从数据库读取数据转换为DO时，是利用反射机制先调用DO的空参数构造函数构造DO实例，然后再利用JavaBean的规范反射出set方法来为每个属性设值，如果不显式声明set方法，或把set方法设置为private，都会导致Hibernate无法初始化DO，从而出现运行时异常，可行的做法是把属性的set方法设置为protected。<br>对于一个DO对应多个PO，或者一个PO对应多个DO的场景，以及属性级别的延迟加载，Hibernate都提供了很好的支持，请参考Hibnate的相关资料。</p><h2 id="领域模型命名规约："><a href="#领域模型命名规约：" class="headerlink" title="领域模型命名规约："></a>领域模型命名规约：</h2><ul><li><p>数据对象：xxxDO，xxx 即为数据表名。</p></li><li><p>数据传输对象：xxxDTO，xxx 为业务领域相关的名称。</p></li><li><p>展示对象：xxxVO，xxx 一般为网页名称。</p></li><li><p>POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。</p></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 分层模型规范 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>（力扣）5. 最长回文子串 C++（中心扩散法）解题击败100%用户</title>
      <link href="/2021/09/17/%EF%BC%88%E5%8A%9B%E6%89%A3%EF%BC%895-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2-C-%EF%BC%88%E4%B8%AD%E5%BF%83%E6%89%A9%E6%95%A3%E6%B3%95%EF%BC%89%E8%A7%A3%E9%A2%98%E5%87%BB%E8%B4%A5100-%E7%94%A8%E6%88%B7/"/>
      <url>/2021/09/17/%EF%BC%88%E5%8A%9B%E6%89%A3%EF%BC%895-%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2-C-%EF%BC%88%E4%B8%AD%E5%BF%83%E6%89%A9%E6%95%A3%E6%B3%95%EF%BC%89%E8%A7%A3%E9%A2%98%E5%87%BB%E8%B4%A5100-%E7%94%A8%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/3c0c1e12abc9404f9542b7a25ac77f11.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><a id="more"></a><h1 id="5-最长回文子串"><a href="#5-最长回文子串" class="headerlink" title="5. 最长回文子串"></a>5. 最长回文子串</h1><p>示例 1：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">"babad"</span></span><br><span class="line">输出：<span class="string">"bab"</span></span><br><span class="line">解释：<span class="string">"aba"</span> 同样是符合题意的答案。</span><br></pre></td></tr></table></figure><p>示例 2：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">"cbbd"</span></span><br><span class="line">输出：<span class="string">"bb"</span></span><br></pre></td></tr></table></figure><p>示例 3：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s = <span class="string">"a"</span></span><br><span class="line">输出：<span class="string">"a"</span></span><br></pre></td></tr></table></figure><p>示例 4：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">输入：s &#x3D; &quot;ac&quot;</span><br><span class="line">输出：&quot;a&quot;</span><br></pre></td></tr></table></figure><p>提示：</p><p>1 &lt;= s.length &lt;= 1000<br>s 仅由数字和英文字母（大写和/或小写）组成</p><h1 id="解题思路："><a href="#解题思路：" class="headerlink" title="解题思路："></a>解题思路：</h1><h3 id="中心扩散法"><a href="#中心扩散法" class="headerlink" title="中心扩散法"></a>中心扩散法</h3><p>我们是以每一个字符为中心，往两边扩散，来求最长的回文子串。</p><p>我们来思考这样一个问题，如果是单个字符，我们可以认为他是回文子串，如果是多个字符，并且他们都是相同的，那么他们也是回文串。所以对于上面的问题，我们以当前字符为中心往两边扩散的时候，先要判断和他挨着的有没有相同的字符，如果有，则跳过继续判断下一个，<br>根据这个思路，我们来写下代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="built_in">string</span> <span class="title">longestPalindrome</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 获取字符串s的长度</span></span><br><span class="line">        <span class="keyword">int</span> length = s.size(); </span><br><span class="line">        <span class="comment">// 设置回文子串起始位置和字串长度的初始值</span></span><br><span class="line">        <span class="keyword">int</span> start = <span class="number">0</span>, maxlen = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; length; )&#123;</span><br><span class="line">            <span class="comment">// 判断剩余字串长度小于当前回文字串的长度，则直接跳出循环</span></span><br><span class="line">            <span class="keyword">if</span>(length - i &lt; maxlen / <span class="number">2</span>)&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> left = i, right = i;</span><br><span class="line">            <span class="comment">// 过滤掉重复的字符</span></span><br><span class="line">            <span class="keyword">while</span>(right &lt; length - <span class="number">1</span> &amp;&amp; s[right + <span class="number">1</span>] == s[right])&#123;</span><br><span class="line">                ++right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 下次循环是直接从重复的下一个位置开始判断</span></span><br><span class="line">            i = right + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">// 往两边开始扩散，求回文字串长度</span></span><br><span class="line">            <span class="keyword">while</span>(right &lt; length <span class="number">-1</span> &amp;&amp; left &gt; <span class="number">0</span> &amp;&amp; s[left - <span class="number">1</span>] == s[right + <span class="number">1</span>])&#123;</span><br><span class="line">                --left;</span><br><span class="line">                ++right;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 求出最长回文字串长度和起始位置</span></span><br><span class="line">            <span class="keyword">if</span>(right - left + <span class="number">1</span> &gt; maxlen)&#123;</span><br><span class="line">                start = left;</span><br><span class="line">                maxlen = right - left + <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回最长回文字串</span></span><br><span class="line">        <span class="keyword">return</span> s.substr(start, maxlen);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> 算法 </tag>
            
            <tag> 力扣 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Mac安装Adobe软件的时候，总是提示安装包（软件）“可能损坏了”的问题</title>
      <link href="/2021/09/09/%E8%A7%A3%E5%86%B3Mac%E5%AE%89%E8%A3%85Adobe%E8%BD%AF%E4%BB%B6%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%80%BB%E6%98%AF%E6%8F%90%E7%A4%BA%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%88%E8%BD%AF%E4%BB%B6%EF%BC%89%E2%80%9C%E5%8F%AF%E8%83%BD%E6%8D%9F%E5%9D%8F%E4%BA%86%E2%80%9D%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2021/09/09/%E8%A7%A3%E5%86%B3Mac%E5%AE%89%E8%A3%85Adobe%E8%BD%AF%E4%BB%B6%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E6%80%BB%E6%98%AF%E6%8F%90%E7%A4%BA%E5%AE%89%E8%A3%85%E5%8C%85%EF%BC%88%E8%BD%AF%E4%BB%B6%EF%BC%89%E2%80%9C%E5%8F%AF%E8%83%BD%E6%8D%9F%E5%9D%8F%E4%BA%86%E2%80%9D%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="Mac电脑在安装Adobe产品软件的时候，可能会遇到这样一个问题："><a href="#Mac电脑在安装Adobe产品软件的时候，可能会遇到这样一个问题：" class="headerlink" title="Mac电脑在安装Adobe产品软件的时候，可能会遇到这样一个问题："></a>Mac电脑在安装Adobe产品软件的时候，可能会遇到这样一个问题：</h3><p><img src="https://img-blog.csdnimg.cn/9d9a48d9d237460385a9aca3de2df473.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><a id="more"></a><p>一直提示<strong>Error The installation cannot continue as the installer file may be damaged. Download the installer file again.</strong></p><p>这是怎么回事呢？<br>首先先看一下中文翻译是什么：<br>错误：</p><p><strong>安装不能继续了，因为安装包（软件）可能损坏了。请重新下载安装包。</strong></p><p>看意思是安装包损坏了，需要重新下载安装，但是，如果你去这么做了，那么你会发现还是会出现这个错误。<br>因此，报着个错误，并不一定真的是安装包损坏了，你<strong>并不需要重新下载安装包的。</strong><br><strong>那他的解决办法是什么呢？</strong><br>请看下面：<br>其实这个问题，我们在安装adobe软件的时候都会遇到。这里呢，我们就以PS为例吧。</p><h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><h4 id="1-首先，我们打开安装包："><a href="#1-首先，我们打开安装包：" class="headerlink" title="1.首先，我们打开安装包："></a>1.首先，我们打开安装包：</h4><p><img src="https://img-blog.csdnimg.cn/8c5cb608be9c453fba9f4d4b717027b5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h4 id="2-然后，我们找到install-app这个文件，右键-显示包内容"><a href="#2-然后，我们找到install-app这个文件，右键-显示包内容" class="headerlink" title="2.然后，我们找到install.app这个文件，右键-显示包内容"></a>2.然后，我们找到install.app这个文件，右键-显示包内容</h4><p><img src="https://img-blog.csdnimg.cn/d9cec462a69c4928863ca7789e1a0219.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h4 id="3-点击Contants，进入文件夹里"><a href="#3-点击Contants，进入文件夹里" class="headerlink" title="3.点击Contants，进入文件夹里"></a>3.点击Contants，进入文件夹里<img src="https://img-blog.csdnimg.cn/0b9455d75feb455f8df9e5f9b4c8fbfd.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></h4><h4 id="4-点击MacOS文件，进入文件夹里"><a href="#4-点击MacOS文件，进入文件夹里" class="headerlink" title="4. 点击MacOS文件，进入文件夹里"></a>4. 点击MacOS文件，进入文件夹里</h4><p><img src="https://img-blog.csdnimg.cn/20552d74e9c24e87a8ce56bde9aba192.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h4 id="5-最后，点击Install，好了，现在可以正常安装了。"><a href="#5-最后，点击Install，好了，现在可以正常安装了。" class="headerlink" title="5.最后，点击Install，好了，现在可以正常安装了。"></a>5.最后，点击Install，好了，现在可以正常安装了。</h4><p><img src="https://img-blog.csdnimg.cn/2d2b258b515b4132ac46df19dc3efe1b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h4 id="以上，解决问题。"><a href="#以上，解决问题。" class="headerlink" title="以上，解决问题。"></a>以上，解决问题。</h4>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> Adobe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo+yilia+Github实现相册功能（超详细）</title>
      <link href="/2021/09/09/Hexo-yilia-Github%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD%EF%BC%88%E8%B6%85%E8%AF%A6%E7%BB%86%EF%BC%89/"/>
      <url>/2021/09/09/Hexo-yilia-Github%E5%AE%9E%E7%8E%B0%E7%9B%B8%E5%86%8C%E5%8A%9F%E8%83%BD%EF%BC%88%E8%B6%85%E8%AF%A6%E7%BB%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<ul><li>效果图：<br><img src="https://img-blog.csdnimg.cn/25b825b4e1884dffbe5ce9aba71e8485.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></li><li>最终效果请看这里：<a href="https://quanluo.github.io/">quanluo.github.io</a></li></ul><h3 id="一、目的："><a href="#一、目的：" class="headerlink" title="一、目的："></a>一、目的：</h3><ul><li>为博客添加相册功能</li><li>通过GitHub来实现相册功能</li></ul><a id="more"></a> <h3 id="二、方案"><a href="#二、方案" class="headerlink" title="二、方案"></a>二、方案</h3><ol><li>在github上新建一个仓库，主要用于存储图片，可以通过url访问到，也方便管理</li><li>将要放到相册的图片处理成json格式的数据，然后进行访问，这里json的格式需要配合要使用的样式，所以需要处理成特定格式的json数据，下面会给出</li><li>修改代码（大佬写好的）</li><li>使用py脚本压缩图片生成略缩图<h3 id="三、实现"><a href="#三、实现" class="headerlink" title="三、实现"></a>三、实现</h3><h4 id="1-博客页面添加相册"><a href="#1-博客页面添加相册" class="headerlink" title="1.博客页面添加相册"></a>1.博客页面添加相册</h4></li></ol><ul><li>通过cmd/终端进入你的博客blog的source目录下，通过 ==hexo new page “photos”== 命令创建<strong>photos</strong>文件夹，代码如下：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; cd blog</span><br><span class="line">&gt; cd source</span><br><span class="line">&gt; hexo new page <span class="string">"photos"</span></span><br></pre></td></tr></table></figure><h4 id="2-GitHub操作"><a href="#2-GitHub操作" class="headerlink" title="2.GitHub操作"></a>2.GitHub操作</h4></li><li>建立一个用于存储相册的仓库，我这里建立了名为<strong>Blog-Picture</strong>的仓库<br><img src="https://img-blog.csdnimg.cn/d87454ddfa334fe9991eafce2f0748e3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></li><li>在创建完远端仓库后，将本地与github上远端仓库关联，这样我们以后才能够将图片推送到远端。<br>远端仓库与本地仓库关联的方法:<br>打开博客文件夹，在此根目录下，使用git ,即 git Bush Here,然后输入:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; git clone git@github.com:quanluo/Blog-Picture.git</span><br></pre></td></tr></table></figure></li><li>其中<strong>clone</strong>的仓库换成自己的仓库地址。这样便能使本地与远端关联起立。此刻，会产生一个<code>Blog-Picture</code>的文件夹，在此文件夹下分别创建<code>min_photos</code>、<code>photos</code>文件夹。<br><img src="https://img-blog.csdnimg.cn/a523127e113c4d39a56744b371e835d2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><h4 id="3-修改代码"><a href="#3-修改代码" class="headerlink" title="3.修改代码"></a>3.修改代码</h4></li><li>在GitHub上下载代码：<a href="https://github.com/lawlite19/Blog-Back-Up/tree/master/blog_photos_copy" target="_blank" rel="noopener">源代码</a><br><img src="https://img-blog.csdnimg.cn/7a69e4a79ade46aaa38866327d199d33.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></li><li>删除其中的<code>data.json</code>文件。因为，后面的<code>.json</code>文件是我们自己博客在上传图片时生成的.</li><li>修改index.ejs。这一步很重要，我自己查百度和相关博文时，都没有提到这一步。将其中的href修改成自己的博客地址。当初我就没有修改，最终，显示出来的永远都是原作者的相册.<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   &lt;div class="instagram itemscope"&gt;</span><br><span class="line">    &lt;a href="https://quanluo.github.io/" target="_blank" class="open-ins"&gt;图片正在加载中…&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li><li>修改ins.js文件里的render()函数，按照上面的注释提醒，进行修改。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 修改这里render()函数：修改图片的路径地址.minSrc 小图的路径. src 大图的路径.修改为自己的图片路径(github的路径)</span><br><span class="line">    // https://raw.githubusercontent.com/quanluo/Blog-Picture/master/min_photos/</span><br><span class="line">    //https://raw.githubusercontent.com/quanluo/Blog-Picture/master/photos/</span><br><span class="line">    var render = function render(res) &#123;</span><br><span class="line">      var ulTmpl = <span class="string">""</span>;</span><br><span class="line">      <span class="keyword">for</span> (var j = <span class="number">0</span>, len2 = res.list.length; j &lt; len2; j++) &#123;</span><br><span class="line">        var data = res.list[j].arr;</span><br><span class="line">        var liTmpl = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">for</span> (var i = <span class="number">0</span>, len = data.link.length; i &lt; len; i++) &#123;</span><br><span class="line">          var minSrc = <span class="string">'https://raw.githubusercontent.com/quanluo/Blog-Picture/master/min_photos/'</span> + data.link[i];</span><br><span class="line">          var src = <span class="string">'https://raw.githubusercontent.com/quanluo/Blog-Picture/master/photos/'</span> + data.link[i];</span><br><span class="line">          var type = data.type[i];</span><br><span class="line">          var target = src + (type === 'video' ? '.mp4' : '.jpg');</span><br><span class="line">          src += <span class="string">''</span>;</span><br></pre></td></tr></table></figure><h6 id="注意-第一个容易出错的地方-："><a href="#注意-第一个容易出错的地方-：" class="headerlink" title="注意(第一个容易出错的地方)："></a><font color=red>注意(第一个容易出错的地方)：</font></h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var minSrc = <span class="string">'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/min_photos/'</span> + data.link[i]; </span><br><span class="line">var src = <span class="string">'https://raw.githubusercontent.com/lawlite19/blog-back-up/master/photos/'</span> + data.link[i];</span><br></pre></td></tr></table></figure><p>这个链接很多人输入错了，不是直接的图片url，是需要点“下载”才能看到的url。<br><img src="https://img-blog.csdnimg.cn/f179315748604e0da0f137396f4a4caf.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/657298f08cec420ea49713a538f090de.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h4 id="4-添加脚本"><a href="#4-添加脚本" class="headerlink" title="4. 添加脚本"></a>4. 添加脚本</h4><ul><li>这里添加的python脚本主要是用于处理图片。脚本下载-  <a href="https://github.com/ChemLez/blog-Picture" target="_blank" rel="noopener">下载地址</a>.</li><li><ul><li>1.将其中的.py文件拷贝至本地仓库<strong>Blog-Picture</strong>文件夹中.</li></ul></li><li><ul><li>2.根据脚本文件，图片的命名规则为：xxxx-xx-xx_name.jpg/png.<br><font color=red>注意：你要保存的和上传的图片放的地址在<strong>Blog-Picture</strong>文件夹下<strong>photos</strong>文件夹里</font><br><img src="https://img-blog.csdnimg.cn/090a9237d91b45219078b5ca20c3f394.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></li></ul></li></ul><p><img src="https://img-blog.csdnimg.cn/c9a7d98cae4647a5ab11ba68bc68cffe.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p> – 3.将图片<a href="https://raw.githubusercontent.com/quanluo/quanluo.github.io/master/assets/img/empty.png" target="_blank" rel="noopener">empty.png</a>下载放入博客目录下的assets/img文件夹中.</p><h5 id="注意-第二个错误地方-重点-：如果没有这一步可能缩略图显示不出来"><a href="#注意-第二个错误地方-重点-：如果没有这一步可能缩略图显示不出来" class="headerlink" title="注意(第二个错误地方-重点)：如果没有这一步可能缩略图显示不出来"></a><font color=red>注意(第二个错误地方-重点)：如果没有这一步可能缩略图显示不出来</font></h5><p>首先，去下载“empty.png” ,直接右键另存，保存为“empty.png”。名字也要一样，别问为什么，实现了，自己再去看源码。<br>在你博客的本地仓库source下新建一个文件夹命名为assets,再在assets下新建一个文件夹命名为img。最后把empty.png放到img里面。我的结果如下：<br>    <img src="https://img-blog.csdnimg.cn/1a0d219e44394b1c9ee01e72cd0274dc.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p>– 4.打开tool.py文件,修改def handle_photo():</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">"../lawlite19.github.io/source/photos/data.json"</span>,<span class="string">"w"</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    json.dump(final_dict, fp)</span><br></pre></td></tr></table></figure><p>将其中的的地址，换成你将要生成data.json的位置，就是在第一步中，我们删除的.json文件夹的目录地址。每次，进行tool.py脚本时，都会产生data.json文件，用于存储我们图片的信息。</p><h4 id="5-运行脚本"><a href="#5-运行脚本" class="headerlink" title="5.运行脚本"></a>5.运行脚本</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">输入：</span><br><span class="line">&gt; cd Blog-Picture <span class="comment">#用于进入Blog-Picture文件夹</span></span><br><span class="line">&gt; python tool.py <span class="comment">#python脚本文件的运行</span></span><br><span class="line">&gt; </span><br><span class="line"><span class="comment"># 第二句的运行这里可能会报错 `no module named PIL`</span></span><br><span class="line"><span class="comment">#如果报错然输入下面代码：</span></span><br><span class="line">pip install pillow</span><br><span class="line"><span class="comment">#可能出现权限不足的情况，按照下方出现的英文，加上权限进行下载。即：一路按照下方的英文,加权限进行下载.</span></span><br></pre></td></tr></table></figure><h5 id="注意：每次上传照片都需要运行python脚本"><a href="#注意：每次上传照片都需要运行python脚本" class="headerlink" title="注意：每次上传照片都需要运行python脚本"></a><font color=red>注意：每次上传照片都需要运行python脚本</font></h5><p>需要安装python环境，在命令行运行py tool.py命令。</p><h4 id="6-测试"><a href="#6-测试" class="headerlink" title="6.测试"></a>6.测试</h4><ul><li>在blog根目录下，输入代码：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; hexo s</span><br></pre></td></tr></table></figure><ul><li>进行预览查看。<br><img src="https://img-blog.csdnimg.cn/168fb7640901418387e03651a40004d1.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></li><li>测试成功，进行blog远端部署：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; hexo clean <span class="comment">#清除页面缓存</span></span><br><span class="line">&gt; hexo g -d <span class="comment"># 进行远端部署</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="OK！！！完美！！！大功告成！！！"><a href="#OK！！！完美！！！大功告成！！！" class="headerlink" title="OK！！！完美！！！大功告成！！！"></a>OK！！！完美！！！大功告成！！！</h3>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> yilia </tag>
            
            <tag> 相册 </tag>
            
            <tag> github </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ModuleNotFoundError: No module named ‘sklearn.cross_validation‘解决办法</title>
      <link href="/2021/09/07/ModuleNotFoundError-No-module-named-%E2%80%98sklearn-cross-validation%E2%80%98%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2021/09/07/ModuleNotFoundError-No-module-named-%E2%80%98sklearn-cross-validation%E2%80%98%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/c79eab1ebf3b47b1882ab5b3f18fb6b1.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><p>在Python机器学习中，会用到使用<font color=red> <strong>scikit-learn</strong> </font>中的<font color=red><strong>train_test_split</strong></font>函数，把数据集切分为训练集和测试集。</p><a id="more"></a> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.cross_validation <span class="keyword">import</span> train_test_split</span><br></pre></td></tr></table></figure><p>用后发现会报错==ModuleNotFoundError==<br><img src="https://img-blog.csdnimg.cn/151d1d7378894840bd50590e48bfa38b.png" alt="在这里插入图片描述"></p><h3 id="问题原因："><a href="#问题原因：" class="headerlink" title="问题原因："></a>问题原因：</h3><p> <strong>这个cross_validatio这个包早就不在使用了，划分到了model_selection这个包中。</strong></p><h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><p>使用下方导入模块代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> sklearn </tag>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOS下安装R语言和RStudio教程（超完整）</title>
      <link href="/2021/08/30/MacOS%E4%B8%8B%E5%AE%89%E8%A3%85R%E8%AF%AD%E8%A8%80%E5%92%8CRStudio%E6%95%99%E7%A8%8B%EF%BC%88%E8%B6%85%E5%AE%8C%E6%95%B4%EF%BC%89/"/>
      <url>/2021/08/30/MacOS%E4%B8%8B%E5%AE%89%E8%A3%85R%E8%AF%AD%E8%A8%80%E5%92%8CRStudio%E6%95%99%E7%A8%8B%EF%BC%88%E8%B6%85%E5%AE%8C%E6%95%B4%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="一、前提"><a href="#一、前提" class="headerlink" title="一、前提"></a>一、前提</h1><p>安装顺序（不能颠倒）：<br>1、R语言<br>2、RStudio<br>注：R是RStudio的基础，必须先安装R，在安装RStudio。<br><img src="https://img-blog.csdnimg.cn/f6a19ca8c1244f4e9d1ea31d5027443b.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center" alt="在这里插入图片描述"></p><a id="more"></a><h1 id="二、R语言安装"><a href="#二、R语言安装" class="headerlink" title="二、R语言安装"></a>二、R语言安装</h1><p>1.官网安装包下载地址：<a href="https://cran.r-project.org/" target="_blank" rel="noopener">https://cran.r-project.org/</a>.<br>2.点击MacOS对应选项，下方红框标出的地方<br><img src="https://img-blog.csdnimg.cn/184e5e7ea2e042c6913d4bbadfba31d6.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>3.在下载界面，点击base，下方红框标出的地方<br><img src="https://img-blog.csdnimg.cn/8a0adb83c1744309bbd5e15414f787c4.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>4.自行选择下载R语言版本，我下载的是（R-4.0.4.pkg版本的）<br><img src="https://img-blog.csdnimg.cn/ab288d691d594474a3a1fa80c4b47c0f.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>5.下载完成，在“Finder-&gt;下载”中点击pkg文件，一直按下一步就可安装完成。</p><h1 id="三、RStudio安装"><a href="#三、RStudio安装" class="headerlink" title="三、RStudio安装"></a>三、RStudio安装</h1><p>1.官网安装包下载地址：<a href="https://www.rstudio.com/products/rstudio/download/#download" target="_blank" rel="noopener">https://www.rstudio.com/products/rstudio/download/#download</a><br>2.点击下方红色标出地方，直接下载<br><img src="https://img-blog.csdnimg.cn/d7d3b4c2256147f4a641fd96c6003857.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>3. 下载完成，在“Finder-&gt;下载”中点击dmg文件，将app拖入mac的application中即可。</p><h1 id="到此，安装全部完成。"><a href="#到此，安装全部完成。" class="headerlink" title="到此，安装全部完成。"></a>到此，安装全部完成。</h1><h1 id="四、可能会遇到的问题："><a href="#四、可能会遇到的问题：" class="headerlink" title="四、可能会遇到的问题："></a>四、可能会遇到的问题：</h1><h2 id="关于macOS：在Mac上安装R-警告消息：使用“-C”设置LC-CTYPE失败"><a href="#关于macOS：在Mac上安装R-警告消息：使用“-C”设置LC-CTYPE失败" class="headerlink" title="关于macOS：在Mac上安装R-警告消息：使用“ C”设置LC_CTYPE失败"></a>关于macOS：在Mac上安装R-警告消息：使用“ C”设置LC_CTYPE失败</h2><blockquote><p>Installing R on Mac - Warning messages: Setting LC_CTYPE failed, using “C”</p></blockquote><h3 id="错误是："><a href="#错误是：" class="headerlink" title="错误是："></a>错误是：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">During startup - Warning messages:</span><br><span class="line">1: Setting LC_CTYPE failed, using&quot;C&quot;</span><br><span class="line">2: Setting LC_COLLATE failed, using&quot;C&quot;</span><br><span class="line">3: Setting LC_TIME failed, using&quot;C&quot;</span><br><span class="line">4: Setting LC_MESSAGES failed, using&quot;C&quot;</span><br><span class="line">5: Setting LC_PAPER failed, using&quot;C&quot;</span><br><span class="line">[R.app GUI 1.50 (6126) x86_64-apple-darwin9.8.0]</span><br><span class="line"></span><br><span class="line">WARNING: You&#39;re using a non-UTF8 locale, therefore only ASCII characters will work.</span><br><span class="line">Please read R for Mac OS X FAQ (see Help) section 9 and adjust your system preferences accordingly.</span><br><span class="line">[History restored from &#x2F;Users&#x2F;nemo&#x2F;.Rapp.history]</span><br></pre></td></tr></table></figure><h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><ul><li>开放终端</li><li>写入或粘贴：defaults write org.R-project.R force.LANG en_US.UTF-8</li><li>关闭终端(包括任何RStudio窗口)</li><li>开始R</li></ul><h1 id="五、在RStudio中创建新项目"><a href="#五、在RStudio中创建新项目" class="headerlink" title="五、在RStudio中创建新项目"></a>五、在RStudio中创建新项目</h1><p>1.创建新project。具体方法如下图所示，依次点击 File-&gt;New Project =&gt; New Directory-&gt;New Project-&gt;输入Derectory name（注意要用英文，别用中文）<br><img src="https://img-blog.csdnimg.cn/8e37f9bedb7145009422922d93d362a9.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/8b8dd43882844a2b8e66c1c61cc5bbd0.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/244d2cf481014cb98e54763fe145e4de.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/087a5ec9eef44f029e5412b19694edc3.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>2.创建好，就会出现如下界面<br><img src="https://img-blog.csdnimg.cn/8464b7605c364747bf6564860a1856b2.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h1 id="六、测试R"><a href="#六、测试R" class="headerlink" title="六、测试R"></a>六、测试R</h1><p>1.在《R语言实战》中有一个新手测试代码，我们可以测试下我们安装的R语言环境</p><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; age &lt;- c(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">11</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="number">3</span>)</span><br><span class="line">&gt; weight &lt;- c(<span class="number">4.4</span>, <span class="number">5.3</span>, <span class="number">7.2</span>, <span class="number">5.2</span>, <span class="number">8.5</span>, <span class="number">7.3</span>, <span class="number">6.0</span>, <span class="number">10.4</span>, <span class="number">10.2</span>, <span class="number">6.1</span>)</span><br><span class="line">&gt; mean(weight)</span><br><span class="line">&gt; sd(weight)</span><br><span class="line">&gt; cor(age, weight)</span><br><span class="line">&gt; plot(age, weight)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/e9e2eb9d673e4c879fd3f3b454402d2d.PNG?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="请添加图片描述"><br>2.测试结果：<br><img src="https://img-blog.csdnimg.cn/298c01ce858b464fa4f6544f51a65914.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5YWoIOa0mw==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p><h1 id="终"><a href="#终" class="headerlink" title="终"></a>终</h1>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> R语言 </tag>
            
            <tag> RStudio </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的个人博客live2d插件模型模块汇总（仅本人可使用，无需看）</title>
      <link href="/2021/08/25/%E6%88%91%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2live2d%E6%8F%92%E4%BB%B6%E6%A8%A1%E5%9E%8B%E6%A8%A1%E5%9D%97%E6%B1%87%E6%80%BB%EF%BC%88%E4%BB%85%E6%9C%AC%E4%BA%BA%E5%8F%AF%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%97%A0%E9%9C%80%E7%9C%8B%EF%BC%89/"/>
      <url>/2021/08/25/%E6%88%91%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2live2d%E6%8F%92%E4%BB%B6%E6%A8%A1%E5%9E%8B%E6%A8%A1%E5%9D%97%E6%B1%87%E6%80%BB%EF%BC%88%E4%BB%85%E6%9C%AC%E4%BA%BA%E5%8F%AF%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%97%A0%E9%9C%80%E7%9C%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="这篇文章存粹是我用来记录我自己的个人博客live2d插件模块下载后可使用和替换的。以防我到时候会忘掉。"><a href="#这篇文章存粹是我用来记录我自己的个人博客live2d插件模块下载后可使用和替换的。以防我到时候会忘掉。" class="headerlink" title="这篇文章存粹是我用来记录我自己的个人博客live2d插件模块下载后可使用和替换的。以防我到时候会忘掉。"></a>这篇文章存粹是我用来记录我自己的个人博客live2d插件模块下载后可使用和替换的。以防我到时候会忘掉。</h3><h3 id="所以看到这的可以退出这篇文章了！！！"><a href="#所以看到这的可以退出这篇文章了！！！" class="headerlink" title="所以看到这的可以退出这篇文章了！！！"></a>所以看到这的可以退出这篇文章了！！！</h3><blockquote><p>shizuku</p></blockquote><p><img src="https://img-blog.csdnimg.cn/c29020544f7f4cd08023f69fc834bcd2.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><a id="more"></a><blockquote><p>nipsilon</p></blockquote><p><img src="https://img-blog.csdnimg.cn/8483bf76d01a4fd3bdc3d2e5043cce03.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>nito</p></blockquote><p><img src="https://img-blog.csdnimg.cn/daf2b153d42442f5b875cedfb3979b3b.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>nico</p></blockquote><p><img src="https://img-blog.csdnimg.cn/9c23817f960f478d953938c5e8e07f0c.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>ni-j</p></blockquote><p><img src="https://img-blog.csdnimg.cn/1b50575a90ee423d8e1357089d76ce3e.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>haru</p></blockquote><p><img src="https://img-blog.csdnimg.cn/5aa52c5b2a1347c9b67777aa7749049f.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>haruto</p></blockquote><p><img src="https://img-blog.csdnimg.cn/3e437aec659247078867860c443627e1.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>tsumiki</p></blockquote><p><img src="https://img-blog.csdnimg.cn/32186439fd544f55b50d8060067a3b4d.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>z16</p></blockquote><p><img src="https://img-blog.csdnimg.cn/db6c72d556e049bb9dca9623f2bae64e.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>tororo</p></blockquote><p><img src="https://img-blog.csdnimg.cn/baec5fada2f14ac281c0d88f14210309.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>koharu</p></blockquote><p><img src="https://img-blog.csdnimg.cn/6c084a0b36974d81b5b11853e4631960.gif#pic_center" alt="在这里插入图片描述"><br>   ————————<strong><strong><strong><strong><strong><strong><strong><strong>*****</strong></strong></strong></strong></strong></strong></strong></strong>————————</p><blockquote><p>hijiki</p></blockquote><p><img src="https://img-blog.csdnimg.cn/08d4712b26404f329dfcdd7c880aae63.gif#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> live2d </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac下 Github添加SSH keys</title>
      <link href="/2021/08/16/mac%E4%B8%8B-Github%E6%B7%BB%E5%8A%A0SSH-keys/"/>
      <url>/2021/08/16/mac%E4%B8%8B-Github%E6%B7%BB%E5%8A%A0SSH-keys/</url>
      
        <content type="html"><![CDATA[<p>注：封面背景在文章最后面。</p><h2 id="一、首先测试下是否有原先有添加过公钥"><a href="#一、首先测试下是否有原先有添加过公钥" class="headerlink" title="一、首先测试下是否有原先有添加过公钥"></a>一、首先测试下是否有原先有添加过公钥</h2><p>我们用下面的代码在终端去测试下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/5071fdab2b8b40b59d2da538dcefca61.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如上，如果显示，==Permission denied(publickey)==  这就表示缺少公钥。</p><a id="more"></a><p><img src="https://img-blog.csdnimg.cn/7a1f4c19940b4d20b37c35908fa8b752.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如上，如果显示 ==You’ve successfully authenticated== 这就表明公钥添加成功了。</p><h2 id="二、进入正题，没有SSH-keys-公钥，请看下方详细mac下-Github添加SSH-keys步骤"><a href="#二、进入正题，没有SSH-keys-公钥，请看下方详细mac下-Github添加SSH-keys步骤" class="headerlink" title="二、进入正题，没有SSH keys 公钥，请看下方详细mac下 Github添加SSH keys步骤:"></a>二、进入正题，没有SSH keys 公钥，请看下方详细<code>mac下 Github添加SSH keys</code>步骤:</h2><h3 id="1-在本地创建SSH-keys"><a href="#1-在本地创建SSH-keys" class="headerlink" title="1.在本地创建SSH keys"></a>1.在本地创建SSH keys</h3><p>打开终端，输入代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"xxx@xx.com"</span></span><br><span class="line"><span class="comment">#  “”里面替换成你的GitHub账户登陆邮箱</span></span><br></pre></td></tr></table></figure><p>接着出面下面文字提示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Last login: Tue Oct <span class="number">31</span> <span class="number">10</span>:<span class="number">20</span>:<span class="number">24</span> on ttys004</span><br><span class="line">bogon:~ YYKit$ ssh-keygen -t rsa -C <span class="string">"xxx@xxx.com"</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> which to save the key (/Users/xx/.ssh/id_rsa):</span><br></pre></td></tr></table></figure><p>不用管它，直接回车，中间会让输入两次密码，什么都不输入，继续回车，会出现如下内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Last login: Tue Oct <span class="number">31</span> <span class="number">10</span>:<span class="number">20</span>:<span class="number">24</span> on ttys004</span><br><span class="line">bogon:~ YYKit$ ssh-keygen -t rsa -C <span class="string">"xxxx@xxx.com"</span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> which to save the key (/Users/xx/.ssh/id_rsa): </span><br><span class="line">/Users/xx/.ssh/id_rsa already exists.</span><br><span class="line">Overwrite (y/n)? y</span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase): </span><br><span class="line">Enter same passphrase again: </span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /Users/xx/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /Users/xx/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint <span class="keyword">is</span>:</span><br><span class="line">SHA256:rp+<span class="number">6</span>MLo27uTIONMqlO6/E9d9CvJzvVt5QI9I6Z2vy14 <span class="number">468466882</span>@qq.com</span><br><span class="line">The key<span class="string">'s randomart image is:</span></span><br><span class="line"><span class="string">+---[RSA 2048]----+</span></span><br><span class="line"><span class="string">|                 |</span></span><br><span class="line"><span class="string">|            .    |</span></span><br><span class="line"><span class="string">|           o .   |</span></span><br><span class="line"><span class="string">|          o + +  |</span></span><br><span class="line"><span class="string">|  .   . S  o = . |</span></span><br><span class="line"><span class="string">| o . o + . .  +  |</span></span><br><span class="line"><span class="string">|o.. = o o +  o E |</span></span><br><span class="line"><span class="string">|*=+o o + + .o +  |</span></span><br><span class="line"><span class="string">|*XB=o ++=  o+=.  |</span></span><br><span class="line"><span class="string">+----[SHA256]-----+</span></span><br><span class="line"><span class="string">bogon:~ YYKit$</span></span><br></pre></td></tr></table></figure><h3 id="2-复制创建好的SSH-keys到GitHub上"><a href="#2-复制创建好的SSH-keys到GitHub上" class="headerlink" title="2.复制创建好的SSH keys到GitHub上"></a>2.复制创建好的SSH keys到GitHub上</h3><p>这时候，==SSH keys==就创建完了，然后我们需要前往文件夹复制/Users/xxx/.ssh/id_rsa.pub地址下文件==id_rsa.pub==里面的==key==了，</p><p><code>打开id_rsa.pub,复制&quot;xxx@xx.com&quot;之前的部分。</code></p><p>复制完，这时候，来到Github，在你的个人账户中，<br>按照顺序依次点击<br>“Settings –&gt; SSH and GPG keys –&gt; SSH keys –&gt; New SSH Key”,<br>Title可以写自己喜欢的标记，<br>在Key下面粘贴之前复制的内容,然后点击Add SSH Key，<br>这就就添加成功了。<br><img src="https://img-blog.csdnimg.cn/6d44bb4b703040cda898ecc0427d8512.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="3-最后测试是否添加成功SSH-keys"><a href="#3-最后测试是否添加成功SSH-keys" class="headerlink" title="3.最后测试是否添加成功SSH keys"></a>3.最后测试是否添加成功SSH keys</h3><p>我们再次测试下公钥有没有添加成功：<br>在终端中，输入代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/7a1f4c19940b4d20b37c35908fa8b752.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如上，如果显示 ==You’ve successfully authenticated== 这就表明公钥添加成功了。</p><h1 id="终"><a href="#终" class="headerlink" title="终"></a>终</h1><p><img src="https://img-blog.csdnimg.cn/2d626140025744e4849ec1a16271572c.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> mac </tag>
            
            <tag> sshkeys </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mac下启动jupyter notebook</title>
      <link href="/2021/03/03/mac%E4%B8%8B%E5%90%AF%E5%8A%A8jupyter-notebook/"/>
      <url>/2021/03/03/mac%E4%B8%8B%E5%90%AF%E5%8A%A8jupyter-notebook/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20210303110634532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><a id="more"></a><h3 id="首先打开终端"><a href="#首先打开终端" class="headerlink" title="首先打开终端"></a>首先打开终端</h3><p><img src="https://img-blog.csdnimg.cn/20210303110209276.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t%60_70" alt="在这里插入图片描述"></p><h3 id="然后输入start-jupyter-notebook命令"><a href="#然后输入start-jupyter-notebook命令" class="headerlink" title="然后输入start jupyter notebook命令"></a>然后输入start jupyter notebook命令</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python -m IPython notebook</span><br><span class="line"></span><br><span class="line"><span class="comment">### 如果是python3的环境就用下面的命令</span></span><br><span class="line">python3 -m IPython notebook</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210303110501413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="最后浏览器就会自动打开-jupyter-notebook"><a href="#最后浏览器就会自动打开-jupyter-notebook" class="headerlink" title="最后浏览器就会自动打开 jupyter notebook"></a>最后浏览器就会自动打开 jupyter notebook</h3><p><img src="https://img-blog.csdnimg.cn/20210303110634532.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> mac </tag>
            
            <tag> jupyter notebook </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mysql在mac终端下没有路径不能直接登陆数据库如何添加路径解决办法</title>
      <link href="/2021/02/17/mysql%E5%9C%A8mac%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%B2%A1%E6%9C%89%E8%B7%AF%E5%BE%84%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E7%99%BB%E9%99%86%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E8%B7%AF%E5%BE%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/"/>
      <url>/2021/02/17/mysql%E5%9C%A8mac%E7%BB%88%E7%AB%AF%E4%B8%8B%E6%B2%A1%E6%9C%89%E8%B7%AF%E5%BE%84%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E7%99%BB%E9%99%86%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E8%B7%AF%E5%BE%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h4 id="mysql在mac终端下没有路径不能直接登陆数据库如何添加路径解决办法"><a href="#mysql在mac终端下没有路径不能直接登陆数据库如何添加路径解决办法" class="headerlink" title="mysql在mac终端下没有路径不能直接登陆数据库如何添加路径解决办法"></a>mysql在mac终端下没有路径不能直接登陆数据库如何添加路径解决办法</h4><p><img src="https://img-blog.csdnimg.cn/20210217145307423.png" alt="在这里插入图片描述"></p><h4 id="解决办法如下："><a href="#解决办法如下：" class="headerlink" title="解决办法如下："></a>解决办法如下：</h4><a id="more"></a><h3 id="一、打开终端，为Path路径附加MySQL的bin目录"><a href="#一、打开终端，为Path路径附加MySQL的bin目录" class="headerlink" title="一、打开终端，为Path路径附加MySQL的bin目录"></a>一、打开终端，为Path路径附加MySQL的bin目录</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PATH=<span class="string">"$PATH"</span>:/usr/local/mysql/bin</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20210217145412233.png" alt="在这里插入图片描述"></p><h3 id="二、然后就可以通过以下命令登陆MySQL"><a href="#二、然后就可以通过以下命令登陆MySQL" class="headerlink" title="二、然后就可以通过以下命令登陆MySQL"></a>二、然后就可以通过以下命令登陆MySQL</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/2021021714564471.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 一键创建依赖包和一键安装依赖包</title>
      <link href="/2021/01/24/Python-%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BA%E4%BE%9D%E8%B5%96%E5%8C%85%E5%92%8C%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85/"/>
      <url>/2021/01/24/Python-%E4%B8%80%E9%94%AE%E5%88%9B%E5%BB%BA%E4%BE%9D%E8%B5%96%E5%8C%85%E5%92%8C%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85/</url>
      
        <content type="html"><![CDATA[<h3 id="使用-pip创建依赖包"><a href="#使用-pip创建依赖包" class="headerlink" title="使用 pip创建依赖包"></a>使用 pip创建依赖包</h3><p><code>requirements.txt</code> 用来记录项目所有的依赖包和版本号，只需要一个简单的 pip 命令就能完成。<br>记住在你代码文件夹下创建你这些代码所需要的依赖包</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip freeze &gt; requirements.txt</span><br></pre></td></tr></table></figure><a id="more"></a><p>会生成的一个<code>requirements.txt</code> 文件内容会像这个样子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alabaster==<span class="number">0.7</span><span class="number">.12</span></span><br><span class="line">anaconda-client==<span class="number">1.7</span><span class="number">.2</span></span><br><span class="line">anaconda-navigator==<span class="number">1.9</span><span class="number">.12</span></span><br><span class="line">anaconda-project==<span class="number">0.8</span><span class="number">.3</span></span><br><span class="line">applaunchservices==<span class="number">0.2</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><h3 id="然后就可以用来一键安装依赖包了，也只需要一个简单的pip命令就能完成"><a href="#然后就可以用来一键安装依赖包了，也只需要一个简单的pip命令就能完成" class="headerlink" title="然后就可以用来一键安装依赖包了，也只需要一个简单的pip命令就能完成"></a>然后就可以用来一键安装依赖包了，也只需要一个简单的pip命令就能完成</h3><p>记住在你需要依赖的代码文件夹下安装</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><blockquote><p>这种一次性安装 requirements.txt 里面所有的依赖包，真的是非常方便。</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 依赖包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mac版 WPS尾部空格没有下划线解决</title>
      <link href="/2020/12/13/Mac%E7%89%88-WPS%E5%B0%BE%E9%83%A8%E7%A9%BA%E6%A0%BC%E6%B2%A1%E6%9C%89%E4%B8%8B%E5%88%92%E7%BA%BF%E8%A7%A3%E5%86%B3/"/>
      <url>/2020/12/13/Mac%E7%89%88-WPS%E5%B0%BE%E9%83%A8%E7%A9%BA%E6%A0%BC%E6%B2%A1%E6%9C%89%E4%B8%8B%E5%88%92%E7%BA%BF%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>文件-选项-常规与保存-兼容选项-为尾部空格添加下划线选中即可<br>具体图文步骤如下：</p><a id="more"></a><p><img src="https://img-blog.csdnimg.cn/20201213105209815.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/20201213105251227.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p><img src="https://img-blog.csdnimg.cn/20201213105315937.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="文件-选项-常规与保存-兼容选项-为尾部空格添加下划线选中即可"><a href="#文件-选项-常规与保存-兼容选项-为尾部空格添加下划线选中即可" class="headerlink" title="文件-选项-常规与保存-兼容选项-为尾部空格添加下划线选中即可"></a>文件-选项-常规与保存-兼容选项-为尾部空格添加下划线选中即可</h3>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
            <tag> wps </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Mac打开应用提示已损坏的办法</title>
      <link href="/2020/12/01/%E8%A7%A3%E5%86%B3Mac%E6%89%93%E5%BC%80%E5%BA%94%E7%94%A8%E6%8F%90%E7%A4%BA%E5%B7%B2%E6%8D%9F%E5%9D%8F%E7%9A%84%E5%8A%9E%E6%B3%95/"/>
      <url>/2020/12/01/%E8%A7%A3%E5%86%B3Mac%E6%89%93%E5%BC%80%E5%BA%94%E7%94%A8%E6%8F%90%E7%A4%BA%E5%B7%B2%E6%8D%9F%E5%9D%8F%E7%9A%84%E5%8A%9E%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>相信很多升级了最新Mac系统的用户在打开一些应用的时候都会出现“应用XX已损坏”的系统提示，安装这些应用的时候总是提示“已损坏，移至废纸篓”这类信息，根本无法打开应用，那么Mac打开应用提示已损坏怎么办？Mac安装软件时提示已损坏怎么办？一起来了解一下！<br><img src="https://img-blog.csdnimg.cn/20201201101149217.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><a id="more"></a><h3 id="更新10-15以及新系统应用提示损坏打不开的方法："><a href="#更新10-15以及新系统应用提示损坏打不开的方法：" class="headerlink" title="更新10.15以及新系统应用提示损坏打不开的方法："></a><code>更新10.15以及新系统应用提示损坏打不开的方法：</code></h3><blockquote><p>打开终端(屏幕下方“小火箭”——“其他”——打开“终端”)，在终端中粘贴下面命令：</p></blockquote><p>　　<code>sudo xattr -r -d com.apple.quarantine</code> ,然后输入个空格，再将应用程序目录中的软件拖拽到命令后面，按回车后输入密码执行，比如需要打开sketch应用的命令是：</p><p>　　</p><p><code>sudo xattr -r -d com.apple.quarantine  /Applications/sketch.app/</code></p><p>　　打开应用提示已损坏是因为新系统的原因。新的系统为了加强安全机制，默认不允许用户自行下载安装应用程序，只能从Mac App Store里安装应用。那么怎么解决呢？</p><h4 id="1、首先，打开终端，在系统的Dock栏找到并启动控制台（Launchpad），终端默认在“其他”这个文件夹中。"><a href="#1、首先，打开终端，在系统的Dock栏找到并启动控制台（Launchpad），终端默认在“其他”这个文件夹中。" class="headerlink" title="1、首先，打开终端，在系统的Dock栏找到并启动控制台（Launchpad），终端默认在“其他”这个文件夹中。"></a>1、首先，打开终端，在系统的Dock栏找到并启动控制台（Launchpad），终端默认在“其他”这个文件夹中。</h4><p><img src="https://img-blog.csdnimg.cn/20201201101639801.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="2、然后，输入代码：sudo-spctl-–master-disable（master前面为两个短横线）注意红框处是空格。"><a href="#2、然后，输入代码：sudo-spctl-–master-disable（master前面为两个短横线）注意红框处是空格。" class="headerlink" title="2、然后，输入代码：sudo spctl –master-disable（master前面为两个短横线）注意红框处是空格。"></a>2、然后，输入代码：sudo spctl –master-disable（master前面为两个短横线）注意红框处是空格。</h4><p><img src="https://img-blog.csdnimg.cn/20201201101657845.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>按回车输入自己电脑的密码，然后回车（这里输入的密码不会显示出来，实际你已经输入了），输完按下回车即可。<br><img src="https://img-blog.csdnimg.cn/20201201101723489.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="3、打开系统偏好设置-»-安全性与隐私，若显示任何来源，大功告成。"><a href="#3、打开系统偏好设置-»-安全性与隐私，若显示任何来源，大功告成。" class="headerlink" title="3、打开系统偏好设置 » 安全性与隐私，若显示任何来源，大功告成。"></a>3、打开系统偏好设置 » 安全性与隐私，若显示任何来源，大功告成。</h4><p><img src="https://img-blog.csdnimg.cn/20201201101744658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h4 id="4、如果还有类似出现下图打不开“xxxx”应用的情况，还可以看下面的处理方法"><a href="#4、如果还有类似出现下图打不开“xxxx”应用的情况，还可以看下面的处理方法" class="headerlink" title="4、如果还有类似出现下图打不开“xxxx”应用的情况，还可以看下面的处理方法"></a>4、如果还有类似出现下图打不开“xxxx”应用的情况，还可以看下面的处理方法</h4><p><img src="https://img-blog.csdnimg.cn/20201201101801390.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>　在<code>“系统偏好设置—安全性与隐私—通用—允许从以下位置下载的应用”</code>选择“仍要打开”，让系统同意应用运行即可（如下图所示）<br>　<img src="https://img-blog.csdnimg.cn/20201201101824833.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>本篇文章转载于：<br>Mac打开应用提示已损坏怎么办 Mac安装软件时提示已损坏怎么办(<a href="http://www.pc6.com/edu/168719.html" target="_blank" rel="noopener">http://www.pc6.com/edu/168719.html</a>)</p>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>将十进制转换成短浮点数格式（IEEE745）并用十六进制表示（组成原理）</title>
      <link href="/2020/11/30/%E5%B0%86%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E6%88%90%E7%9F%AD%E6%B5%AE%E7%82%B9%E6%95%B0%E6%A0%BC%E5%BC%8F%EF%BC%88IEEE745%EF%BC%89%E5%B9%B6%E7%94%A8%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%EF%BC%88%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%EF%BC%89/"/>
      <url>/2020/11/30/%E5%B0%86%E5%8D%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2%E6%88%90%E7%9F%AD%E6%B5%AE%E7%82%B9%E6%95%B0%E6%A0%BC%E5%BC%8F%EF%BC%88IEEE745%EF%BC%89%E5%B9%B6%E7%94%A8%E5%8D%81%E5%85%AD%E8%BF%9B%E5%88%B6%E8%A1%A8%E7%A4%BA%EF%BC%88%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20201130105022993.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="IEEE-745-标准中有三种形式的浮点数，具体如下表："><a href="#IEEE-745-标准中有三种形式的浮点数，具体如下表：" class="headerlink" title="IEEE 745 标准中有三种形式的浮点数，具体如下表："></a>IEEE 745 标准中有三种形式的浮点数，具体如下表：</h3><a id="more"></a><p>类型  | 数符 |阶码 | 尾数数值 | 总位数 | 偏置值 |偏置值 |<br>|——– | ——— | —– | —- | —- | —- | —|<br> | | | | | |十六进制 | 十进制<br> | 短浮点数|1 |8 |23 |32 |7FH | 127<br> |长浮点数 |1 |11 |52 |64 |3FFH | 1023<br> |临时浮点数 |1 |15 |64 |80 |3FFFH | 16383</p><h3 id="列题-：将（100-25）十进制转换成短浮点数格式。"><a href="#列题-：将（100-25）十进制转换成短浮点数格式。" class="headerlink" title="列题 ：将（100.25）十进制转换成短浮点数格式。"></a>列题 ：将（100.25）十进制转换成短浮点数格式。</h3><ol><li><p>把十进制转换成二进制。<br> (100.25)十进制 = （1100100.01）二进制</p></li><li><p>规格化二进制<br> 1100100.01 = 1.10010001✖️2^6</p></li><li><p>计算出阶码的移码（偏置值 + 阶码真值） ==阶码真值就是上面2^k 中的k==<br> 127 + 6 = 1111111 + 110 = 10000101</p></li><li><p>以短浮点数格式存储该数<br>因为，<br>符号为 = 0      ==（正数为0，负数为1）==<br>阶码（E） = 10000101<br>尾数 = 1001 0001 0000 0000 0000 000   （==规格化二进制后小数点后面的数然后用零补齐23位数位==）<br>所以，短浮点数代码为：<br>0，1000 0101，1001 0001 0000 0000 0000 000</p><p>表示为十六进制的代码：</p><h3 id="42C88000H"><a href="#42C88000H" class="headerlink" title="42C88000H"></a>42C88000H</h3></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> 组成原理 </tag>
            
            <tag> IEEE745 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>完美解决Mac软件意外退出的方法（软件签名）</title>
      <link href="/2020/11/23/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3Mac%E8%BD%AF%E4%BB%B6%E6%84%8F%E5%A4%96%E9%80%80%E5%87%BA%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E8%BD%AF%E4%BB%B6%E7%AD%BE%E5%90%8D%EF%BC%89/"/>
      <url>/2020/11/23/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3Mac%E8%BD%AF%E4%BB%B6%E6%84%8F%E5%A4%96%E9%80%80%E5%87%BA%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88%E8%BD%AF%E4%BB%B6%E7%AD%BE%E5%90%8D%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h5 id="因为Apple苹果公司删除了TNT的证书，所以在2019年7月12日后软件都不能运行了，临时的解决办法，就是自己签名，具体往下看。"><a href="#因为Apple苹果公司删除了TNT的证书，所以在2019年7月12日后软件都不能运行了，临时的解决办法，就是自己签名，具体往下看。" class="headerlink" title="因为Apple苹果公司删除了TNT的证书，所以在2019年7月12日后软件都不能运行了，临时的解决办法，就是自己签名，具体往下看。"></a>因为Apple苹果公司删除了TNT的证书，所以在2019年7月12日后软件都不能运行了，临时的解决办法，就是自己签名，具体往下看。</h5><p>比如安装美版的LOL，安装完后，LOL图标会是一个白色的未签名图标，因此，我们需要对lol进行手动签名。</p><p>签名：<br>打开终端工具输入并执行如下命令：<br><code>sudo codesign --force --deep --sign - /Applications/name.app</code><br>注意后面的文件路径，你可以打开访达找到应用程序，找到要签名的软件，直接拖入 终端 界面，即可自动生成路径。</p><h3 id="命令输完回车后，输入你电脑设置的密码就可以了。"><a href="#命令输完回车后，输入你电脑设置的密码就可以了。" class="headerlink" title="命令输完回车后，输入你电脑设置的密码就可以了。"></a>命令输完回车后，输入你电脑设置的密码就可以了。</h3><p><img src="https://img-blog.csdnimg.cn/20201123182537185.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决Mac电脑连接校园网不弹出登陆窗口问题汇总</title>
      <link href="/2020/11/13/%E8%A7%A3%E5%86%B3Mac%E7%94%B5%E8%84%91%E8%BF%9E%E6%8E%A5%E6%A0%A1%E5%9B%AD%E7%BD%91%E4%B8%8D%E5%BC%B9%E5%87%BA%E7%99%BB%E9%99%86%E7%AA%97%E5%8F%A3%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/"/>
      <url>/2020/11/13/%E8%A7%A3%E5%86%B3Mac%E7%94%B5%E8%84%91%E8%BF%9E%E6%8E%A5%E6%A0%A1%E5%9B%AD%E7%BD%91%E4%B8%8D%E5%BC%B9%E5%87%BA%E7%99%BB%E9%99%86%E7%AA%97%E5%8F%A3%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="1-查看你的DNS有没有改过，把自己改过的DNS全部删除，变更为默认的就好。"><a href="#1-查看你的DNS有没有改过，把自己改过的DNS全部删除，变更为默认的就好。" class="headerlink" title="1.查看你的DNS有没有改过，把自己改过的DNS全部删除，变更为默认的就好。"></a>1.查看你的DNS有没有改过，把自己改过的DNS全部删除，变更为默认的就好。</h2><p><img src="https://img-blog.csdnimg.cn/20201113102257832.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><a id="more"></a><h2 id="2-有使用梯子的同学，记得把梯子暂时先关闭一下，然后在连接校园网Wi-Fi。"><a href="#2-有使用梯子的同学，记得把梯子暂时先关闭一下，然后在连接校园网Wi-Fi。" class="headerlink" title="2.有使用梯子的同学，记得把梯子暂时先关闭一下，然后在连接校园网Wi-Fi。"></a>2.有使用梯子的同学，记得把梯子暂时先关闭一下，然后在连接校园网Wi-Fi。</h2><h2 id="3-你有登录页面的网址吗？没有的话，让同学复制给你，直接在Safari中访问该网址试试。"><a href="#3-你有登录页面的网址吗？没有的话，让同学复制给你，直接在Safari中访问该网址试试。" class="headerlink" title="3.你有登录页面的网址吗？没有的话，让同学复制给你，直接在Safari中访问该网址试试。"></a>3.你有登录页面的网址吗？没有的话，让同学复制给你，直接在Safari中访问该网址试试。</h2><h2 id="4-如果，你苹果手机是可以弹出来并且正确显示的话，那么请在你的safari的开发—-用户代理—-选择iphone。其实就是让你的mac的safari浏览器来模拟苹果手机浏览器。"><a href="#4-如果，你苹果手机是可以弹出来并且正确显示的话，那么请在你的safari的开发—-用户代理—-选择iphone。其实就是让你的mac的safari浏览器来模拟苹果手机浏览器。" class="headerlink" title="4.如果，你苹果手机是可以弹出来并且正确显示的话，那么请在你的safari的开发—-用户代理—-选择iphone。其实就是让你的mac的safari浏览器来模拟苹果手机浏览器。"></a>4.如果，你苹果手机是可以弹出来并且正确显示的话，那么请在你的safari的开发—-用户代理—-选择iphone。其实就是让你的mac的safari浏览器来模拟苹果手机浏览器。</h2><p><img src="https://img-blog.csdnimg.cn/20201113103349657.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><blockquote><p>以上就是我汇总的解决Mac电脑连接校园网不弹出登陆窗口问题的办法了，希望对使用mac电脑的同学有帮助.</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java基本数据类型默认值总结</title>
      <link href="/2020/09/06/Java%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E9%BB%98%E8%AE%A4%E5%80%BC%E6%80%BB%E7%BB%93-1/"/>
      <url>/2020/09/06/Java%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E9%BB%98%E8%AE%A4%E5%80%BC%E6%80%BB%E7%BB%93-1/</url>
      
        <content type="html"><![CDATA[<p><img src="https://images.alphacoders.com/147/thumb-1920-147323.png" alt=""></p><h3 id="byte："><a href="#byte：" class="headerlink" title="byte："></a>byte：</h3><p>默认值：<code>0</code></p><h3 id="shor"><a href="#shor" class="headerlink" title="shor:"></a>shor:</h3><p>默认值：<code>0</code></p><h3 id="int"><a href="#int" class="headerlink" title="int:"></a>int:</h3><a id="more"></a><p>默认值：<code>0</code></p><h3 id="long"><a href="#long" class="headerlink" title="long:"></a>long:</h3><p>默认值：<code>0L</code></p><h3 id="float"><a href="#float" class="headerlink" title="float:"></a>float:</h3><p>默认值：<code>0.0f</code></p><h3 id="double"><a href="#double" class="headerlink" title="double:"></a>double:</h3><p>默认值：<code>0.0d</code></p><h3 id="boolean"><a href="#boolean" class="headerlink" title="boolean:"></a>boolean:</h3><p>默认值：<code>false</code></p><h3 id="char"><a href="#char" class="headerlink" title="char:"></a>char:</h3>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java代码编写提升（1）不要在常量和变量中出现易混淆的字母</title>
      <link href="/2020/06/24/Java%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E6%8F%90%E5%8D%87%EF%BC%881%EF%BC%89%E4%B8%8D%E8%A6%81%E5%9C%A8%E5%B8%B8%E9%87%8F%E5%92%8C%E5%8F%98%E9%87%8F%E4%B8%AD%E5%87%BA%E7%8E%B0%E6%98%93%E6%B7%B7%E6%B7%86%E7%9A%84%E5%AD%97%E6%AF%8D/"/>
      <url>/2020/06/24/Java%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E6%8F%90%E5%8D%87%EF%BC%881%EF%BC%89%E4%B8%8D%E8%A6%81%E5%9C%A8%E5%B8%B8%E9%87%8F%E5%92%8C%E5%8F%98%E9%87%8F%E4%B8%AD%E5%87%BA%E7%8E%B0%E6%98%93%E6%B7%B7%E6%B7%86%E7%9A%84%E5%AD%97%E6%AF%8D/</url>
      
        <content type="html"><![CDATA[<p><img src="https://images5.alphacoders.com/108/1081273.jpg" alt=""></p><p>包名全小写，类名首字母全大写，常量全部大写并用下划线分割，变量采用驼峰命名法（camelCase）命名等，这些都是最基本的Java编码规范，是每个Javaer都应熟知的规则，但是在变量的声明中要注意不要引入容易混淆的字母。</p><a id="more"></a><p>我先放一段代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">long</span> i = <span class="number">1l</span>;</span><br><span class="line">        System.out.println(<span class="string">"i的两倍是:"</span> + (i+i));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>请思考下这段代码会打印出的结果是什么？</p><p>sure， 肯定会有人说：这部很简单嘛，运行部出错的话，结果肯定为<code>22</code>！<br>好吧，实践是检验真理的唯一标准，我们将这段代码，放到Eclipse中运行一下看看，咦？，你会发现结果是<code>2</code>,而不是22，难道是Eclipse有问题，怎么少了个’2’？</p><p>其实吧，是因为赋给变量 i 的数字就是 <code>1</code>,只是后面加了长整型变量的标志字母 <code>&quot;l&quot;</code>而已。</p><p>所以，为了让我们的程序代码更容易理解，字母<code>&#39;l&#39;</code>(还包括大写字母<code>&#39;O&#39;</code>)，尽量不要和数字混用，以避免阅读者的理解和程序意图产生差异。<br>如果字母和数字必须混用，字母<code>&#39;l&#39;</code>务必大写（<code>&#39;L&#39;</code>）， 字母<code>&#39;O&#39;</code>则增加注释。</p><p><code>注意： 字母“l”作为长整型标志时务必大写</code></p><hr><blockquote><p>文章参考书籍：《编写高质量代码之Java》 著:秦小波。</p></blockquote><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JavaPro </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+yilia主题博客如何设置网站的图标Favicon</title>
      <link href="/2020/06/21/hexo-yilia%E4%B8%BB%E9%A2%98%E5%8D%9A%E5%AE%A2%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%AB%99%E7%9A%84%E5%9B%BE%E6%A0%87Favicon/"/>
      <url>/2020/06/21/hexo-yilia%E4%B8%BB%E9%A2%98%E5%8D%9A%E5%AE%A2%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%AB%99%E7%9A%84%E5%9B%BE%E6%A0%87Favicon/</url>
      
        <content type="html"><![CDATA[<p>效果图：<br><img src="https://img-blog.csdnimg.cn/20200621152703964.png" alt="在这里插入图片描述"></p><a id="more"></a><h2 id="步骤："><a href="#步骤：" class="headerlink" title="步骤："></a>步骤：</h2><h3 id="1-先去比特虫网站做ico图标"><a href="#1-先去比特虫网站做ico图标" class="headerlink" title="1. 先去比特虫网站做ico图标"></a>1. 先去比特虫网站做ico图标</h3><p>网址链接——&gt;<a href="http://www.bitbug.net/" target="_blank" rel="noopener">比特虫</a></p><h3 id="2-将-ico图标放到themes-yilia-source-img文件夹下"><a href="#2-将-ico图标放到themes-yilia-source-img文件夹下" class="headerlink" title="2. 将.ico图标放到themes/yilia/source/img文件夹下"></a>2. 将.ico图标放到themes/yilia/source/img文件夹下</h3><h3 id="3-找到hexo-themes-yilia-layout-partial-head-ejs，修改下面一段代码为"><a href="#3-找到hexo-themes-yilia-layout-partial-head-ejs，修改下面一段代码为" class="headerlink" title="3. 找到hexo\themes\yilia\layout_partial\head.ejs，修改下面一段代码为"></a>3. 找到hexo\themes\yilia\layout_partial\head.ejs，修改下面一段代码为</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (theme.favicon)&#123; %&gt;</span><br><span class="line">    &lt;link rel&#x3D;&quot;icon&quot; href&#x3D;&quot;&#x2F;img&#x2F;favicon.ico&quot;&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h3 id="4-部署到远端"><a href="#4-部署到远端" class="headerlink" title="4.部署到远端"></a>4.部署到远端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> yilia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>某些同学已经落伍了，考试时还是不会Ctrl c/v</title>
      <link href="/2020/06/16/%E6%9F%90%E4%BA%9B%E5%90%8C%E5%AD%A6%E5%B7%B2%E7%BB%8F%E8%90%BD%E4%BC%8D%E4%BA%86%EF%BC%8C%E8%80%83%E8%AF%95%E6%97%B6%E8%BF%98%E6%98%AF%E4%B8%8D%E4%BC%9ACtrl-c-v/"/>
      <url>/2020/06/16/%E6%9F%90%E4%BA%9B%E5%90%8C%E5%AD%A6%E5%B7%B2%E7%BB%8F%E8%90%BD%E4%BC%8D%E4%BA%86%EF%BC%8C%E8%80%83%E8%AF%95%E6%97%B6%E8%BF%98%E6%98%AF%E4%B8%8D%E4%BC%9ACtrl-c-v/</url>
      
        <content type="html"><![CDATA[<p>最近由于疫情原因，同学们的课程考试，基本上都是线上考试了，但是线上考试，考试界面是不让 <code>复制粘贴的</code>。问题来了，那<code>怎么复制粘贴呢？</code><br>同学如果你还不知道的话，那就说明你<code>OUT</code>了</p><p><img src="https://img-blog.csdnimg.cn/20200616121133454.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><a id="more"></a><h2 id="接下来，我就教你们，跳过它，进行复制粘贴，任何手段都不能阻止我的前进道路！"><a href="#接下来，我就教你们，跳过它，进行复制粘贴，任何手段都不能阻止我的前进道路！" class="headerlink" title="接下来，我就教你们，跳过它，进行复制粘贴，任何手段都不能阻止我的前进道路！"></a>接下来，我就教你们，跳过它，进行复制粘贴，任何手段都不能阻止我的前进道路！</h2><p>首先<br>确保我们现在看的的网页界面是考试的界面：<br>然后我们选择我们键盘上的<code>F12</code>快捷键，进入开发者界面<br><img src="https://img-blog.csdnimg.cn/20200616121642392.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后<br>我们在选择我们键盘上的<code>F1</code>快捷键，进入下面这个界面<br><img src="https://img-blog.csdnimg.cn/20200616121653330.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后我们再找<code>Preferences</code> ——》<code>Debugger</code><br><img src="https://img-blog.csdnimg.cn/20200616121848668.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>最后<br>我们选中<code>Disable JavaScript</code>选项<br><img src="https://img-blog.csdnimg.cn/20200616121950317.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h3><p>现在你再试试，是不是可以复制粘贴了。<br><img src="https://img-blog.csdnimg.cn/20200616122115300.png" alt="在这里插入图片描述"><br>是不是，奇怪的<code>姿势</code>涨了。</p><p>注：不过这个界面的题写完后，记得取消<code>Disable JavaScript</code>选项<br>，这样才能继续考试。</p><p>祝你们科科满分！！<br><img src="https://img-blog.csdnimg.cn/2020061612231458.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> other </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python中68个内置函数的总结</title>
      <link href="/2020/06/12/python%E4%B8%AD68%E4%B8%AA%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E7%9A%84%E6%80%BB%E7%BB%93/"/>
      <url>/2020/06/12/python%E4%B8%AD68%E4%B8%AA%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E7%9A%84%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p><img src="https://images.alphacoders.com/107/1079732.jpg" alt=""><br>内置函数就是python给你提供的, 拿来直接用的函数, 比如print., input等. 截止到python版本3.6.2 python一共提供了68个内置函数</p><a id="more"></a><h1 id="68个内置函数"><a href="#68个内置函数" class="headerlink" title="68个内置函数"></a>68个内置函数</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># abs()         　　dict()      　　help()       　　min()       　　setattr()</span><br><span class="line"># all()         　　dir()       　　hex()        　　next()      　　slice() </span><br><span class="line"># any()         　　divmod()    　　id()         　　object()    　　sorted() </span><br><span class="line"># ascii()       　　enumerate() 　　input()      　　oct()       　　staticmethod() </span><br><span class="line"># bin()         　　eval()      　　int()        　　open()      　　str() </span><br><span class="line"># bool()        　　exec()      　　isinstance() 　　ord()       　　sum() </span><br><span class="line"># bytearray()   　　ﬁlter()     　　issubclass() 　　pow()       　　super() </span><br><span class="line"># bytes()       　　ﬂoat()      　　iter()       　　print()     　　tuple() </span><br><span class="line"># callable()    　　format()    　　len()        　　property()  　　type() </span><br><span class="line"># chr()         　　frozenset() 　　list()       　　range()     　　vars() </span><br><span class="line"># classmethod() 　　getattr()   　　locals()     　　repr()      　　zip() </span><br><span class="line"># compile()     　　globals()   　　map()        　　reversed()  　　__import__() </span><br><span class="line"># complex()     　　hasattr()   　　max()        　　round() </span><br><span class="line"># delattr()     　　hash()      　　memoryview() 　　set()</span><br></pre></td></tr></table></figure><ol><li>和数字相关</li></ol><p>(1) 数据类型</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1) bool : 布尔型(True,False)</span><br><span class="line"></span><br><span class="line">2) int : 整型(整数)</span><br><span class="line"></span><br><span class="line">3) float : 浮点型(小数)</span><br><span class="line"></span><br><span class="line">4) complex : 复数</span><br></pre></td></tr></table></figure><p>(2) 进制转换</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1) bin() 将给的参数转换成二进制</span><br><span class="line"></span><br><span class="line">2) otc() 将给的参数转换成八进制</span><br><span class="line"></span><br><span class="line">3) hex() 将给的参数转换成十六进制</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(bin(10))  # 二进制:0b1010</span><br><span class="line">print(hex(10))  # 十六进制:0xa</span><br><span class="line">print(oct(10))  # 八进制:0o12</span><br></pre></td></tr></table></figure><p>(3) 数学运算</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1) abs() 返回绝对值</span><br><span class="line"></span><br><span class="line">2) divmode() 返回商和余数</span><br><span class="line"></span><br><span class="line">3) round() 四舍五入</span><br><span class="line"></span><br><span class="line">4) pow(a, b) 求a的b次幂, 如果有三个参数. 则求完次幂后对第三个数取余</span><br><span class="line"></span><br><span class="line">5) sum() 求和</span><br><span class="line"></span><br><span class="line">6) min() 求最小值</span><br><span class="line"></span><br><span class="line">7) max() 求最大值</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">print(abs(-2))  # 绝对值:2</span><br><span class="line"></span><br><span class="line">print(divmod(20,3)) # 求商和余数:(6,2)</span><br><span class="line"></span><br><span class="line">print(round(4.50))   # 五舍六入:4</span><br><span class="line">print(round(4.51))   #5</span><br><span class="line"></span><br><span class="line">print(pow(10,2,3))  # 如果给了第三个参数. 表示最后取余:1</span><br><span class="line"></span><br><span class="line">print(sum([1,2,3,4,5,6,7,8,9,10]))  # 求和:55</span><br><span class="line"></span><br><span class="line">print(min(5,3,9,12,7,2))  #求最小值:2</span><br><span class="line"></span><br><span class="line">print(max(7,3,15,9,4,13))  #求最大值:15</span><br></pre></td></tr></table></figure><ol start="2"><li>和数据结构相关</li></ol><p>(1) 序列</p><p>1) 列表和元组</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list() 将一个可迭代对象转换成列表</span><br><span class="line"></span><br><span class="line">tuple() 将一个可迭代对象转换成元组</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(list((1,2,3,4,5,6)))  #[1, 2, 3, 4, 5, 6]</span><br><span class="line">print(tuple([1,2,3,4,5,6]))  #(1, 2, 3, 4, 5, 6)</span><br></pre></td></tr></table></figure><p>相关内置函数<br> reversed() 将一个序列翻转, 返回翻转序列的迭代器</p><p> slice() 列表的切片</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lst &#x3D; &quot;你好啊&quot;</span><br><span class="line">it &#x3D; reversed(lst)   # 不会改变原列表. 返回一个迭代器, 设计上的一个规则</span><br><span class="line">print(list(it))  #[&#39;啊&#39;, &#39;好&#39;, &#39;你&#39;]</span><br><span class="line"></span><br><span class="line">lst &#x3D; [1, 2, 3, 4, 5, 6, 7]</span><br><span class="line">print(lst[1:3:1])  #[2,3]</span><br><span class="line"></span><br><span class="line">s &#x3D; slice(1, 3, 1)  #  切片用的</span><br><span class="line">print(lst[s])  #[2,3]</span><br></pre></td></tr></table></figure><p>3) 字符串</p><p> str() 将数据转化成字符串</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(str(123)+&#39;456&#39;)  #123456</span><br><span class="line">　　format()     与具体数据相关, 用于计算各种小数, 精算等.</span><br><span class="line">s &#x3D; &quot;hello world!&quot;</span><br><span class="line">print(format(s, &quot;^20&quot;))  #剧中</span><br><span class="line">print(format(s, &quot;&lt;20&quot;))  #左对齐</span><br><span class="line">print(format(s, &quot;&gt;20&quot;))  #右对齐</span><br><span class="line">#     hello world!    </span><br><span class="line"># hello world!        </span><br><span class="line">#         hello world!</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(format(3, &#39;b&#39; ))    # 二进制:11</span><br><span class="line">print(format(97, &#39;c&#39; ))   # 转换成unicode字符:a</span><br><span class="line">print(format(11, &#39;d&#39; ))   # ⼗进制:11</span><br><span class="line">print(format(11, &#39;o&#39; ))   # 八进制:13 </span><br><span class="line">print(format(11, &#39;x&#39; ))   # 十六进制(⼩写字母):b</span><br><span class="line">print(format(11, &#39;X&#39; ))   # 十六进制(大写字母):B</span><br><span class="line">print(format(11, &#39;n&#39; ))   # 和d⼀样:11</span><br><span class="line">print(format(11))         # 和d⼀样:11</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">print(format(123456789, &#39;e&#39; ))      # 科学计数法. 默认保留6位小数:1.234568e+08</span><br><span class="line">print(format(123456789, &#39;0.2e&#39; ))   # 科学计数法. 保留2位小数(小写):1.23e+08</span><br><span class="line">print(format(123456789, &#39;0.2E&#39; ))   # 科学计数法. 保留2位小数(大写):1.23E+08</span><br><span class="line">print(format(1.23456789, &#39;f&#39; ))     # 小数点计数法. 保留6位小数:1.234568</span><br><span class="line">print(format(1.23456789, &#39;0.2f&#39; ))  # 小数点计数法. 保留2位小数:1.23</span><br><span class="line">print(format(1.23456789, &#39;0.10f&#39;))  # 小数点计数法. 保留10位小数:1.2345678900</span><br><span class="line">print(format(1.23456789e+3, &#39;F&#39;))   # 小数点计数法. 很大的时候输出</span><br><span class="line">INF:1234.567890</span><br></pre></td></tr></table></figure><p>bytes() 把字符串转化成bytes类型</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bs &#x3D; bytes(&quot;今天吃饭了吗&quot;, encoding&#x3D;&quot;utf-8&quot;)</span><br><span class="line">print(bs)  #b&#39;\xe4\xbb\x8a\xe5\xa4\xa9\xe5\x90\x83\xe9\xa5\xad\xe4\xba\x86\xe5\x90\x97&#39;</span><br></pre></td></tr></table></figure><p>　　 bytearray()    返回一个新字节数组. 这个数字的元素是可变的, 并且每个元素的值得范围是[0,256)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ret &#x3D; bytearray(&quot;alex&quot; ,encoding &#x3D;&#39;utf-8&#39;)</span><br><span class="line">print(ret[0])  #97</span><br><span class="line">print(ret)  #bytearray(b&#39;alex&#39;)</span><br><span class="line">ret[0] &#x3D; 65  #把65的位置A赋值给ret[0]</span><br><span class="line">print(str(ret))  #bytearray(b&#39;Alex&#39;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ord() 输入字符找带字符编码的位置</span><br><span class="line"></span><br><span class="line">chr() 输入位置数字找出对应的字符</span><br><span class="line"></span><br><span class="line">ascii() 是ascii码中的返回该值 不是就返回u...</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">print(ord(&#39;a&#39;))  # 字母a在编码表中的码位:97</span><br><span class="line">print(ord(&#39;中&#39;))  # &#39;中&#39;字在编码表中的位置:20013</span><br><span class="line"></span><br><span class="line">print(chr(65))  # 已知码位,求字符是什么:A</span><br><span class="line">print(chr(19999))  #丟</span><br><span class="line"></span><br><span class="line">for i in range(65536):  #打印出0到65535的字符</span><br><span class="line">    print(chr(i), end&#x3D;&quot; &quot;)</span><br><span class="line"></span><br><span class="line">print(ascii(&quot;@&quot;))  #&#39;@&#39;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repr() 返回一个对象的string形式</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">s &#x3D; &quot;今天\n吃了%s顿\t饭&quot; % 3</span><br><span class="line">print(s)</span><br><span class="line">#今天</span><br><span class="line"># 吃了3顿    饭</span><br><span class="line">print(repr(s))   # 原样输出,过滤掉转义字符 \n \t \r 不管百分号%</span><br><span class="line">#&#39;今天\n吃了3顿\t饭&#39;</span><br></pre></td></tr></table></figure><p>(2) 数据集合</p><p> 1) 字典</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict 创建一个字典</span><br></pre></td></tr></table></figure><p> 2) 集合</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> set 创建一个集合</span><br><span class="line"></span><br><span class="line">frozenset() 创建一个冻结的集合. 冻结的集合不能进行添加和删除操作</span><br></pre></td></tr></table></figure><p>(3) 相关内置函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">len() 返回一个对象中的元素的个数</span><br><span class="line"></span><br><span class="line">sorted() 对可迭代对象进行排序操作 (lamda)</span><br></pre></td></tr></table></figure><p> 语法:</p><p> sorted(Iterable, key=函数(排序规则), reverse=False)</p><p>Iterable: 可迭代对象</p><p>key: 排序规则(排序函数), 在sorted内部会将可迭代对象中的每一个元素传递给这个函数的参数. 根据函数运算的结果进行排序</p><p>reverse: 是否是倒叙. True: 倒叙, False: 正序</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">lst &#x3D; [5,7,6,12,1,13,9,18,5]</span><br><span class="line">lst.sort()  # sort是list里面的一个方法</span><br><span class="line">print(lst)  #[1, 5, 5, 6, 7, 9, 12, 13, 18]</span><br><span class="line"></span><br><span class="line">ll &#x3D; sorted(lst) # 内置函数. 返回给你一个新列表  新列表是被排序的</span><br><span class="line">print(ll)  #[1, 5, 5, 6, 7, 9, 12, 13, 18]</span><br><span class="line"></span><br><span class="line">l2 &#x3D; sorted(lst,reverse&#x3D;True)  #倒序</span><br><span class="line">print(l2)  #[18, 13, 12, 9, 7, 6, 5, 5, 1]</span><br></pre></td></tr></table></figure><p>#根据字符串长度给列表排序</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lst &#x3D; [&#39;one&#39;, &#39;two&#39;, &#39;three&#39;, &#39;four&#39;, &#39;five&#39;, &#39;six&#39;]</span><br><span class="line">def f(s):</span><br><span class="line">    return len(s)</span><br><span class="line">l1 &#x3D; sorted(lst, key&#x3D;f, )</span><br><span class="line">print(l1)  #[&#39;one&#39;, &#39;two&#39;, &#39;six&#39;, &#39;four&#39;, &#39;five&#39;, &#39;three&#39;]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enumerate() 获取集合的枚举对象</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">lst &#x3D; [&#39;one&#39;,&#39;two&#39;,&#39;three&#39;,&#39;four&#39;,&#39;five&#39;]</span><br><span class="line">for index, el in enumerate(lst,1):    # 把索引和元素一起获取,索引默认从0开始. 可以更改</span><br><span class="line">    print(index)</span><br><span class="line">    print(el)</span><br><span class="line"></span><br><span class="line"># 1</span><br><span class="line"># one</span><br><span class="line"># 2</span><br><span class="line"># two</span><br><span class="line"># 3</span><br><span class="line"># three</span><br><span class="line"># 4</span><br><span class="line"># four</span><br><span class="line"># 5</span><br><span class="line"># five</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">　all() 可迭代对象中全部是True, 结果才是True</span><br><span class="line"></span><br><span class="line"> any() 可迭代对象中有一个是True, 结果就是True</span><br><span class="line"></span><br><span class="line">print(all([1,&#39;hello&#39;,True,9]))  #True</span><br><span class="line">print(any([0,0,0,False,1,&#39;good&#39;]))  #True</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">zip() 函数用于将可迭代的对象作为参数, 将对象中对应的元素打包成一个元组, 然后返回由这些元组组成的列表. 如果各个迭代器的元素个数不一致, 则返回列表长度与最短的对象相同</span><br><span class="line"></span><br><span class="line">lst1 &#x3D; [1, 2, 3, 4, 5, 6]</span><br><span class="line">lst2 &#x3D; [&#39;醉乡民谣&#39;, &#39;驴得水&#39;, &#39;放牛班的春天&#39;, &#39;美丽人生&#39;, &#39;辩护人&#39;, &#39;被嫌弃的松子的一生&#39;]</span><br><span class="line">lst3 &#x3D; [&#39;美国&#39;, &#39;中国&#39;, &#39;法国&#39;, &#39;意大利&#39;, &#39;韩国&#39;, &#39;日本&#39;]</span><br><span class="line">print(zip(lst1, lst1, lst3))  #&lt;zip object at 0x00000256CA6C7A88&gt;</span><br><span class="line">for el in zip(lst1, lst2, lst3):</span><br><span class="line">    print(el)</span><br><span class="line"># (1, &#39;醉乡民谣&#39;, &#39;美国&#39;)</span><br><span class="line"># (2, &#39;驴得水&#39;, &#39;中国&#39;)</span><br><span class="line"># (3, &#39;放牛班的春天&#39;, &#39;法国&#39;)</span><br><span class="line"># (4, &#39;美丽人生&#39;, &#39;意大利&#39;)</span><br><span class="line"># (5, &#39;辩护人&#39;, &#39;韩国&#39;)</span><br><span class="line"># (6, &#39;被嫌弃的松子的一生&#39;, &#39;日本&#39;)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fiter() 过滤 (lamda)</span><br></pre></td></tr></table></figure><p>语法:<br>fiter(function. Iterable)<br>function: 用来筛选的函数. 在ﬁlter中会自动的把iterable中的元素传递给function. 然后根据function返回的True或者False来判断是否保留留此项数据 , Iterable: 可迭代对象<br>def func(i):    # 判断奇数<br>    return i % 2 == 1<br>lst = [1,2,3,4,5,6,7,8,9]<br>l1 = filter(func, lst)  #l1是迭代器<br>print(l1)  #&lt;filter object at 0x000001CE3CA98AC8&gt;<br>print(list(l1))  #[1, 3, 5, 7, 9]</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">map() 会根据提供的函数对指定序列列做映射(lamda)</span><br></pre></td></tr></table></figure><p>语法 : map(function, iterable) 可以对可迭代对象中的每一个元素进行映射. 分别去执行 function</p><p>def f(i):<br>    return i<br>lst = [1,2,3,4,5,6,7,]<br>it = map(f, lst) # 把可迭代对象中的每一个元素传递给前面的函数进行处理. 处理的结果会返回成迭代器<br>print(list(it))  #[1, 2, 3, 4, 5, 6, 7]<br>3. 和作用域相关</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locals() 返回当前作用域中的名字</span><br><span class="line"></span><br><span class="line">globals() 返回全局作用域中的名字</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def func():</span><br><span class="line">    a &#x3D; 10</span><br><span class="line">    print(locals())  # 当前作用域中的内容</span><br><span class="line">    print(globals())  # 全局作用域中的内容</span><br><span class="line">    print(&quot;今天内容很多&quot;)</span><br><span class="line">func()</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># &#123;&#39;a&#39;: 10&#125;</span><br><span class="line"># &#123;&#39;__name__&#39;: &#39;__main__&#39;, &#39;__doc__&#39;: None, &#39;__package__&#39;: None, &#39;__loader__&#39;: </span><br><span class="line"># &lt;_frozen_importlib_external.SourceFileLoader object at 0x0000026F8D566080&gt;, </span><br><span class="line"># &#39;__spec__&#39;: None, &#39;__annotations__&#39;: &#123;&#125;, &#39;__builtins__&#39;: &lt;module &#39;builtins&#39; </span><br><span class="line"># (built-in)&gt;, &#39;__file__&#39;: &#39;D:&#x2F;pycharm&#x2F;练习&#x2F;week03&#x2F;new14.py&#39;, &#39;__cached__&#39;: None,</span><br><span class="line">#  &#39;func&#39;: &lt;function func at 0x0000026F8D6B97B8&gt;&#125;</span><br><span class="line"># 今天内容很多</span><br></pre></td></tr></table></figure><ol start="4"><li>和迭代器/生成器相关<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">range() 生成数据</span><br><span class="line">next() 迭代器向下执行一次, 内部实际使⽤用了__ next__()⽅方法返回迭代器的下一个项目</span><br><span class="line">iter() 获取迭代器, 内部实际使用的是__ iter__()⽅方法来获取迭代器</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">for i in range(15,-1,-5):</span><br><span class="line">    print(i)</span><br><span class="line"># 15</span><br><span class="line"># 10</span><br><span class="line"># 5</span><br><span class="line"># 0</span><br><span class="line"></span><br><span class="line">lst &#x3D; [1,2,3,4,5]</span><br><span class="line">it &#x3D; iter(lst)  #  __iter__()获得迭代器</span><br><span class="line">print(it.__next__())  #1</span><br><span class="line">print(next(it)) #2  __next__()  </span><br><span class="line">print(next(it))  #3</span><br><span class="line">print(next(it))  #4</span><br></pre></td></tr></table></figure></li><li>字符串类型代码的执行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">eval() 执行字符串类型的代码. 并返回最终结果</span><br><span class="line">exec() 执行字符串类型的代码</span><br><span class="line">compile() 将字符串类型的代码编码. 代码对象能够通过exec语句来执行或者eval()进行求值</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">s1 &#x3D; input(&quot;请输入a+b:&quot;)  #输入:8+9</span><br><span class="line">print(eval(s1))  # 17 可以动态的执行代码. 代码必须有返回值</span><br><span class="line"></span><br><span class="line">s2 &#x3D; &quot;for i in range(5): print(i)&quot;</span><br><span class="line">a &#x3D; exec(s2) # exec 执行代码不返回任何内容</span><br><span class="line"># 0</span><br><span class="line"># 1</span><br><span class="line"># 2</span><br><span class="line"># 3</span><br><span class="line"># 4</span><br><span class="line">print(a)  #None</span><br><span class="line"></span><br><span class="line"># 动态执行代码</span><br><span class="line">exec(&quot;&quot;&quot;</span><br><span class="line">def func():</span><br><span class="line">    print(&quot; 我是周杰伦&quot;)</span><br><span class="line">&quot;&quot;&quot; )</span><br><span class="line">func()  #我是周杰伦</span><br><span class="line">code1 &#x3D; &quot;for i in range(3): print(i)&quot;</span><br><span class="line">com &#x3D; compile(code1, &quot;&quot;, mode&#x3D;&quot;exec&quot;)   # compile并不会执行你的代码.只是编译</span><br><span class="line">exec(com)   # 执行编译的结果</span><br><span class="line"># 0</span><br><span class="line"># 1</span><br><span class="line"># 2</span><br><span class="line"></span><br><span class="line">code2 &#x3D; &quot;5+6+7&quot;</span><br><span class="line">com2 &#x3D; compile(code2, &quot;&quot;, mode&#x3D;&quot;eval&quot;)</span><br><span class="line">print(eval(com2))  # 18</span><br><span class="line"></span><br><span class="line">code3 &#x3D; &quot;name &#x3D; input(&#39;请输入你的名字:&#39;)&quot;  #输入:hello</span><br><span class="line">com3 &#x3D; compile(code3, &quot;&quot;, mode&#x3D;&quot;single&quot;)</span><br><span class="line">exec(com3)</span><br><span class="line">print(name)  #hello</span><br></pre></td></tr></table></figure></li><li>输入输出<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print() : 打印输出</span><br><span class="line">input() : 获取用户输出的内容</span><br><span class="line">print(&quot;hello&quot;, &quot;world&quot;, sep&#x3D;&quot;*&quot;, end&#x3D;&quot;@&quot;) # sep:打印出的内容用什么连接,end:以什么为结尾</span><br><span class="line">#hello*world@</span><br></pre></td></tr></table></figure></li><li>内存相关<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hash() : 获取到对象的哈希值(int, str, bool, tuple). hash算法:(1) 目的是唯一性 (2) dict 查找效率非常高, hash表.用空间换的时间 比较耗费内存</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">s &#x3D; &#39;alex&#39;</span><br><span class="line">print(hash(s))  #-168324845050430382</span><br><span class="line"></span><br><span class="line">lst &#x3D; [1, 2, 3, 4, 5]</span><br><span class="line">print(hash(lst))  #报错,列表是不可哈希的</span><br><span class="line">　　id() :  获取到对象的内存地址</span><br><span class="line"></span><br><span class="line">s &#x3D; &#39;alex&#39;</span><br><span class="line">print(id(s))  #2278345368944</span><br></pre></td></tr></table></figure></li><li>文件操作相关<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open() : 用于打开一个文件, 创建一个文件句柄</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f &#x3D; open(&#39;file&#39;,mode&#x3D;&#39;r&#39;,encoding&#x3D;&#39;utf-8&#39;)</span><br><span class="line">f.read()</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></li><li>模块相关<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">__ import__() : 用于动态加载类和函数</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 让用户输入一个要导入的模块</span><br><span class="line">import os</span><br><span class="line">name &#x3D; input(&quot;请输入你要导入的模块:&quot;)</span><br><span class="line">__import__(name)    # 可以动态导入模块</span><br></pre></td></tr></table></figure></li><li>帮助<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">help() : 函数用于查看函数或模块用途的详细说明</span><br><span class="line"></span><br><span class="line">print(help(str))  #查看字符串的用途</span><br></pre></td></tr></table></figure></li><li>调用相关<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">callable() : 用于检查一个对象是否是可调用的. 如果返回True, object有可能调用失败, 但如果返回False. 那调用绝对不会成功</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a &#x3D; 10</span><br><span class="line">print(callable(a))  #False  变量a不能被调用</span><br><span class="line">#</span><br><span class="line">def f():</span><br><span class="line">    print(&quot;hello&quot;)</span><br><span class="line">print(callable(f))   # True 函数是可以被调用的</span><br></pre></td></tr></table></figure></li><li>查看内置属性<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dir() : 查看对象的内置属性, 访问的是对象中的__dir__()方法</span><br><span class="line"></span><br><span class="line">print(dir(tuple))  #查看元组的方法</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 内置函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java实现简单的GUI登录和注册界面</title>
      <link href="/2020/06/12/Java%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84GUI%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E5%86%8C%E7%95%8C%E9%9D%A2/"/>
      <url>/2020/06/12/Java%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84GUI%E7%99%BB%E5%BD%95%E5%92%8C%E6%B3%A8%E5%86%8C%E7%95%8C%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h4 id="先看效果图："><a href="#先看效果图：" class="headerlink" title="先看效果图："></a>先看效果图：</h4><p>登陆界面:<br><img src="https://img-blog.csdnimg.cn/20200612183619238.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>注册界面：<br><img src="https://img-blog.csdnimg.cn/20200612183701912.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><a id="more"></a><h4 id="实现代码如下："><a href="#实现代码如下：" class="headerlink" title="实现代码如下："></a>实现代码如下：</h4><h6 id="一、登陆界面："><a href="#一、登陆界面：" class="headerlink" title="一、登陆界面："></a>一、登陆界面：</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.bms.view;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"><span class="keyword">import</span> javax.swing.border.MatteBorder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.bms.tools.GUITools;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 登录窗口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminLogin</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> JPanel contentPanel = <span class="keyword">new</span> JPanel();</span><br><span class="line"><span class="comment">// Label标签存放背景图片</span></span><br><span class="line"><span class="keyword">private</span> JLabel label;</span><br><span class="line"><span class="comment">// 设置按钮组件</span></span><br><span class="line"><span class="keyword">private</span> JButton login = <span class="keyword">new</span> JButton(<span class="string">"登录"</span>), register = <span class="keyword">new</span> JButton(<span class="string">"注册"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> JLabel jlb1 = <span class="keyword">new</span> JLabel(<span class="string">"用户名:"</span>), jlb2 = <span class="keyword">new</span> JLabel(<span class="string">"密码:"</span>), jlbtitle = <span class="keyword">new</span> JLabel(<span class="string">"登录界面"</span>);</span><br><span class="line"><span class="comment">// 设置文本框组件</span></span><br><span class="line"><span class="keyword">private</span> JTextField admin = <span class="keyword">new</span> JTextField(), password = <span class="keyword">new</span> JTextField();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">AdminLogin</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.init();</span><br><span class="line"><span class="keyword">this</span>.addListener();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.setTitle(<span class="string">"管理员登陆界面"</span>);</span><br><span class="line"><span class="keyword">this</span>.setSize(<span class="number">500</span>, <span class="number">350</span>);</span><br><span class="line">GUITools.center(<span class="keyword">this</span>);</span><br><span class="line">ImageIcon image1 = <span class="keyword">new</span> ImageIcon(<span class="string">"837878.jpg"</span>); <span class="comment">// 界面背景图片</span></span><br><span class="line">JLabel backLabel = <span class="keyword">new</span> JLabel();</span><br><span class="line">backLabel.setIcon(image1);</span><br><span class="line">label = <span class="keyword">new</span> JLabel(image1);</span><br><span class="line">label.setBounds(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">400</span>);</span><br><span class="line"><span class="comment">// 在LayeredPane最底层上添加两个带图片的标签，并且label2在label上方</span></span><br><span class="line"><span class="keyword">this</span>.getLayeredPane().add(label, <span class="keyword">new</span> Integer(Integer.MIN_VALUE));</span><br><span class="line"><span class="comment">// 将内容面板设置为透明，就能够看见添加在LayeredPane上的背景。</span></span><br><span class="line">((JPanel) <span class="keyword">this</span>.getContentPane()).setOpaque(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 添加组件到contentPanel容器中 布局方式为自由布局。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">contentPanel.setLayout(<span class="keyword">null</span>);</span><br><span class="line">add(admin);</span><br><span class="line">add(password);</span><br><span class="line">add(login);</span><br><span class="line">add(register);</span><br><span class="line">add(jlb1);</span><br><span class="line">add(jlb2);</span><br><span class="line">add(jlbtitle);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 组件绝对位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">jlb1.setBounds(<span class="number">50</span>, <span class="number">130</span>, <span class="number">90</span>, <span class="number">25</span>);</span><br><span class="line">jlb1.setForeground(Color.WHITE);</span><br><span class="line">admin.setBounds(<span class="number">95</span>, <span class="number">130</span>, <span class="number">300</span>, <span class="number">25</span>);</span><br><span class="line">password.setBounds(<span class="number">95</span>, <span class="number">154</span>, <span class="number">300</span>, <span class="number">25</span>);</span><br><span class="line">jlb2.setBounds(<span class="number">50</span>, <span class="number">154</span>, <span class="number">90</span>, <span class="number">25</span>);</span><br><span class="line">jlb2.setForeground(Color.WHITE);</span><br><span class="line">register.setBounds(<span class="number">95</span>, <span class="number">225</span>, <span class="number">90</span>, <span class="number">20</span>);</span><br><span class="line">login.setBounds(<span class="number">315</span>, <span class="number">225</span>, <span class="number">90</span>, <span class="number">20</span>);</span><br><span class="line">jlbtitle.setBounds(<span class="number">180</span>, <span class="number">45</span>, <span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line">Font f = <span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>, Font.BOLD, <span class="number">30</span>);</span><br><span class="line">jlbtitle.setFont(f);</span><br><span class="line">jlbtitle.setForeground(Color.BLUE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 组件透明化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">admin.setOpaque(<span class="keyword">true</span>);</span><br><span class="line">password.setOpaque(<span class="keyword">true</span>);</span><br><span class="line">contentPanel.setOpaque(<span class="keyword">false</span>);</span><br><span class="line">getContentPane().add(contentPanel);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 组件边框颜色</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">textSet(admin);</span><br><span class="line">textSet(password);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * JTextField文本框设置方法.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">textSet</span><span class="params">(JTextField field)</span> </span>&#123;</span><br><span class="line">field.setBackground(<span class="keyword">new</span> Color(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>));</span><br><span class="line">field.setPreferredSize(<span class="keyword">new</span> Dimension(<span class="number">150</span>, <span class="number">28</span>));</span><br><span class="line">MatteBorder border = <span class="keyword">new</span> MatteBorder(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="keyword">new</span> Color(<span class="number">192</span>, <span class="number">192</span>, <span class="number">192</span>));</span><br><span class="line">field.setBorder(border);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 事件监听</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">login.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">forLogin(admin.getText(), password.getText());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">register.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">forRegister();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 登录方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forLogin</span><span class="params">(String admin, String pwd)</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">forRegister</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h6 id="二、注册界面："><a href="#二、注册界面：" class="headerlink" title="二、注册界面："></a>二、注册界面：</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.bms.view;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.Color;</span><br><span class="line"><span class="keyword">import</span> java.awt.Dimension;</span><br><span class="line"><span class="keyword">import</span> java.awt.Font;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.ImageIcon;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"><span class="keyword">import</span> javax.swing.border.MatteBorder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.bms.controller.AdminLoginController;</span><br><span class="line"><span class="keyword">import</span> cn.bms.tools.GUITools;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 注册窗口</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings</span>(<span class="string">"serial"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminRegister</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> JPanel contentPanel = <span class="keyword">new</span> JPanel();</span><br><span class="line"><span class="comment">// Label标签存放背景图片</span></span><br><span class="line"><span class="keyword">private</span> JLabel label;</span><br><span class="line"><span class="comment">// 设置按钮组件</span></span><br><span class="line"><span class="keyword">private</span> JButton ok = <span class="keyword">new</span> JButton(<span class="string">"确定注册"</span>), back = <span class="keyword">new</span> JButton(<span class="string">"返回登录"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> JLabel jlb1 = <span class="keyword">new</span> JLabel(<span class="string">"用户名:"</span>), jlb2 = <span class="keyword">new</span> JLabel(<span class="string">"密码:"</span>), jlb3 = <span class="keyword">new</span> JLabel(<span class="string">"确认密码:"</span>),</span><br><span class="line">jlbtitle = <span class="keyword">new</span> JLabel(<span class="string">"注册界面"</span>);</span><br><span class="line"><span class="comment">// 设置文本框组件</span></span><br><span class="line"><span class="keyword">private</span> JTextField admin = <span class="keyword">new</span> JTextField(), password1 = <span class="keyword">new</span> JTextField(), password2 = <span class="keyword">new</span> JTextField();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">AdminRegister</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.init();</span><br><span class="line"><span class="keyword">this</span>.addListener();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.setTitle(<span class="string">"管理员注册界面"</span>);</span><br><span class="line"><span class="keyword">this</span>.setSize(<span class="number">500</span>, <span class="number">350</span>);</span><br><span class="line">GUITools.center(<span class="keyword">this</span>);</span><br><span class="line">ImageIcon image1 = <span class="keyword">new</span> ImageIcon(<span class="string">"837878.jpg"</span>); <span class="comment">// 界面背景图片</span></span><br><span class="line">JLabel backLabel = <span class="keyword">new</span> JLabel();</span><br><span class="line">backLabel.setIcon(image1);</span><br><span class="line">label = <span class="keyword">new</span> JLabel(image1);</span><br><span class="line">label.setBounds(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1000</span>, <span class="number">400</span>);</span><br><span class="line"><span class="comment">// 在LayeredPane最底层上添加两个带图片的标签，并且label2在label上方</span></span><br><span class="line"><span class="keyword">this</span>.getLayeredPane().add(label, <span class="keyword">new</span> Integer(Integer.MIN_VALUE));</span><br><span class="line"><span class="comment">// 将内容面板设置为透明，就能够看见添加在LayeredPane上的背景。</span></span><br><span class="line">((JPanel) <span class="keyword">this</span>.getContentPane()).setOpaque(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 添加组件到contentPanel容器中 布局方式为自由布局。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">contentPanel.setLayout(<span class="keyword">null</span>);</span><br><span class="line">add(admin);</span><br><span class="line">add(password1);</span><br><span class="line">add(password2);</span><br><span class="line">add(ok);</span><br><span class="line">add(back);</span><br><span class="line">add(jlb1);</span><br><span class="line">add(jlb2);</span><br><span class="line">add(jlb3);</span><br><span class="line">add(jlbtitle);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 组件绝对位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">jlb1.setBounds(<span class="number">40</span>, <span class="number">130</span>, <span class="number">90</span>, <span class="number">25</span>);</span><br><span class="line">jlb1.setForeground(Color.WHITE);</span><br><span class="line">admin.setBounds(<span class="number">95</span>, <span class="number">130</span>, <span class="number">300</span>, <span class="number">25</span>);</span><br><span class="line"></span><br><span class="line">password1.setBounds(<span class="number">95</span>, <span class="number">154</span>, <span class="number">300</span>, <span class="number">25</span>);</span><br><span class="line">jlb2.setBounds(<span class="number">40</span>, <span class="number">154</span>, <span class="number">90</span>, <span class="number">25</span>);</span><br><span class="line">jlb2.setForeground(Color.WHITE);</span><br><span class="line"></span><br><span class="line">password2.setBounds(<span class="number">95</span>, <span class="number">178</span>, <span class="number">300</span>, <span class="number">25</span>);</span><br><span class="line">jlb3.setBounds(<span class="number">40</span>, <span class="number">178</span>, <span class="number">90</span>, <span class="number">25</span>);</span><br><span class="line">jlb3.setForeground(Color.WHITE);</span><br><span class="line"></span><br><span class="line">ok.setBounds(<span class="number">315</span>, <span class="number">225</span>, <span class="number">90</span>, <span class="number">20</span>);</span><br><span class="line">back.setBounds(<span class="number">95</span>, <span class="number">225</span>, <span class="number">90</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">jlbtitle.setBounds(<span class="number">180</span>, <span class="number">45</span>, <span class="number">200</span>, <span class="number">50</span>);</span><br><span class="line">Font f = <span class="keyword">new</span> Font(<span class="string">"微软雅黑"</span>, Font.BOLD, <span class="number">30</span>);</span><br><span class="line">jlbtitle.setFont(f);</span><br><span class="line">jlbtitle.setForeground(Color.BLUE);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 组件透明化</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">admin.setOpaque(<span class="keyword">true</span>);</span><br><span class="line">password1.setOpaque(<span class="keyword">true</span>);</span><br><span class="line">password2.setOpaque(<span class="keyword">true</span>);</span><br><span class="line">contentPanel.setOpaque(<span class="keyword">false</span>);</span><br><span class="line">getContentPane().add(contentPanel);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 组件边框颜色</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">textSet(admin);</span><br><span class="line">textSet(password1);</span><br><span class="line">textSet(password2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * JTextField文本框设置方法.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">textSet</span><span class="params">(JTextField field)</span> </span>&#123;</span><br><span class="line">field.setBackground(<span class="keyword">new</span> Color(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>));</span><br><span class="line">field.setPreferredSize(<span class="keyword">new</span> Dimension(<span class="number">150</span>, <span class="number">28</span>));</span><br><span class="line">MatteBorder border = <span class="keyword">new</span> MatteBorder(<span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="keyword">new</span> Color(<span class="number">192</span>, <span class="number">192</span>, <span class="number">192</span>));</span><br><span class="line">field.setBorder(border);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 事件监听</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addListener</span><span class="params">()</span> </span>&#123;</span><br><span class="line">ok.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">setRegister(admin.getText(), password1.getText(), password2.getText());</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">back.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> AdminLoginController().setVisible(<span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现注册账户方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setRegister</span><span class="params">(String admin, String pwd1, String pwd2)</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> GUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IntelliJ idea 登录和退出账户</title>
      <link href="/2020/06/09/IntelliJ-idea-%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA%E8%B4%A6%E6%88%B7/"/>
      <url>/2020/06/09/IntelliJ-idea-%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA%E8%B4%A6%E6%88%B7/</url>
      
        <content type="html"><![CDATA[<p><img src="https://resources.jetbrains.com/storage/products/intellij-idea/img/meta/intellij-idea_logo_300x300.png" alt=""></p><a id="more"></a><p>一、首先打开账户界面<br>选择菜单栏的help –&gt; register<br><img src="https://img-blog.csdnimg.cn/20200609173508521.png" alt=""><br><img src="https://img-blog.csdnimg.cn/20200609173521627.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt=""></p><p>二、登录账户<br>在username和password填写自己的账户和密码，然后单击Activate登录就ok了<br><img src="https://img-blog.csdnimg.cn/20200609173619121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt=""><br>三、退出账户<br>在出现的菜单中选择remove license，然后单击确定就okle<br><img src="https://img-blog.csdnimg.cn/20200609173749835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt=""></p>]]></content>
      
      
      
        <tags>
            
            <tag> IntelliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统知识点总结（三）</title>
      <link href="/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%89%EF%BC%89/"/>
      <url>/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%89%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>操作系统复习，知识点总结<br>6.磁盘与文件系统<br>7.操作系统接口</p><a id="more"></a><p>上一篇文章——&gt;<a href="https://quanluo.github.io/2020/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/">操作系统知识点总结（一）</a><br>上一篇文章——&gt;<a href="https://quanluo.github.io/2020/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%8C%EF%BC%89/">操作系统知识点总结（二）</a></p><h3 id="6-磁盘与文件系统"><a href="#6-磁盘与文件系统" class="headerlink" title="6.磁盘与文件系统"></a>6.磁盘与文件系统</h3><h4 id="1-磁盘的结构和基本概念"><a href="#1-磁盘的结构和基本概念" class="headerlink" title="(1)磁盘的结构和基本概念"></a>(1)磁盘的结构和基本概念</h4><p>磁盘设备包括多或一个个物理盘片，每个磁盘片分为一个或两个储存面。每个磁盘被组织成 若干个同心环，称为磁道。每个磁道从逻辑上划分为多个扇区(通常为 512B)，一个扇区称 为一个盘块(数据块)，各个扇区之间保留一定的间隙。<br>磁盘地址:柱面号-盘面号-扇区号<br>磁盘访问时间包括三部分:寻道时间，旋转延迟时间，传输时间。<br><strong>1)寻道时间</strong>:把磁头移动到指定磁道上的时间。是移动磁臂时间 s 与磁头移动 n 条磁道所 花费时间之和。T=m<em>n+s<br>*</em>2)旋转延迟时间<strong>:指扇区移动到磁头下面所经历的时间。T=1/2r,r 为磁盘旋转速度<br>**3)传输时间</strong>:把数据从磁盘读入或写入磁盘所经历的时间，T=b/rN，b 为每次所读的字节 数，N 为一个磁道上的字节数。</p><h4 id="2-磁盘的调度"><a href="#2-磁盘的调度" class="headerlink" title="(2)磁盘的调度"></a>(2)磁盘的调度</h4><p>调度算法直接决定寻找时间，从而决定总的存取时间。<br>常用的磁盘调度算法:<br><strong>1)先来先服务(FCFS)<br>2)最短寻找时间优先(SSTF)<br>3)扫描算法(SCAN)<br>4)循环扫描算法(C-SCAN)</strong></p><h4 id="3-磁盘的性能改善和容错"><a href="#3-磁盘的性能改善和容错" class="headerlink" title="(3)磁盘的性能改善和容错"></a>(3)磁盘的性能改善和容错</h4><p>提高磁盘 IO 速度的主要技术是采用磁盘高速缓存，利用内存中的存储空间来暂存从磁盘读 出一系列盘块中的信息。<br>数据交付方式有数据交付和指针交付。<br>置换算法:。。。不少系统在设计其高速缓存的置换算法时，除了考虑最近最久未使用，还考 虑以下几点:<br>1)访问频率<br>2)可预见性<br>3)数据一致性</p><p>提高 IO 速度的其他方法:<br>1)提前度<br>2)延迟写<br>3)优化物理块分布<br>4)虚拟盘 </p><p>容错技术:廉价磁盘冗余阵列 RAID(除了 0 级以外)，RAID 的优点:<br>1)可靠性高<br>2)磁 盘 IO 速度高<br>3)性价比高</p><h4 id="4-外存分配方法与物理文件组织"><a href="#4-外存分配方法与物理文件组织" class="headerlink" title="(4)外存分配方法与物理文件组织"></a>(4)外存分配方法与物理文件组织</h4><p>文件的物理结构又称文件的存储结构，是指文件在外存上的存储组织形式，不仅与存储介质 的存储性能有关，而且与采用的外存分配方式有关。<br>外存分配方法:连续分配、连接分配、索引分配<br><strong>1)连续分配</strong>:要求为每个文件分配一组相邻的盘块。一组盘块的地址定义了定义了磁盘上 一段线性地址。这样形成的文件结构是顺序文件结构，此时的物理文件称为顺序文件。<br>优点:顺序访问容易、顺序访问速度快。<br>缺点:要求有连续的存储空间、必须事先知道文件 长度。<br><strong>2)链接分配</strong>:通过每个盘快上的链接指针，将同属于一个文件的离散盘块链接成一个链表，这样形成的物理文件称为链接文件。<br>优点:消除了外部碎片，显著提高了外存利用率;当文件动态增长时，可动态的在为他分配 盘块，故无需实现知道文件大小;此外，对文件的增删改也很方便。<br>有两种方式:<br>1)显式链接<br>2)隐式链接 </p><p><strong>1)隐式链接</strong>:在文件目录的每个目录项中，都需要含有指向链接文件的第一个盘块和最后 一个盘块，每个盘块中含有指向下一个盘块的指针。<br><strong>主要问题</strong>:只适合于顺序访问，对于随机访问及其低效，其次只通过一大批指针把离散的盘 块链接起来，可靠性差，只要任何一个盘块的指针出现问题，都将会导致整条链断裂。 为了提高检索速度和减少指针所占用的存储空间，可以将几个盘块组成一个簇，在盘块分配 时，以簇为单位。这样会成倍的减少超找指定块的时间。<br><strong>2)显式链接</strong>:把用于链接文件各个物理块的指针，显式的存放在内存的一张链接表中。该 表在整个磁盘仅设置一张。由于查找记录是在内存中进行的，不仅显著的提高了检索的速度， 而且大大减少了访问磁盘的次数，该表也成为文件分配表(FAT)。 </p><p><strong>3)索引分配</strong>:链接分配的缺点:<br>1)不支持高效的直接存取<br>2)FAT 占用较大的内存空间。 </p><p>索引分配(文件的物理组织结构是 索引式文件机构)为每个文件分配一个索引块(表)， 再把分配给该文件的所有盘块号都记录在该索引块中，因而该索引块就是一个含有多个盘块 号的数组。在建立一个文件时，只需在为其建立的目录项中填上指向该索引块的指针。<br>索引分配优点:支持直接访问，当要读第 i 个盘块时，可以直接从索引块中找到第 i 个盘块 的盘块号。此外，索引分配不会产生外部碎片。文件较大时，索引优于链接。 索引分配的主要问题:可能会花费较多的外存空间。<br>多级索引<br>混合索引。</p><h4 id="5-文件存储空间的管理"><a href="#5-文件存储空间的管理" class="headerlink" title="(5)文件存储空间的管理"></a>(5)文件存储空间的管理</h4><p>储存空间的基本分配单位是磁盘块而非字节。管理包括对空闲块的组织，分配和回收。<br><strong>1)空闲表法</strong>:属于连续分配方式，系统为外存上所有的空闲区建立一张空闲表。<br>存储 空间的分配:同样采取首次适应算法，循环首次适应算法等，回收时，也类似于内存回收的 方法，即要考虑回收区是否与空闲表中插入点的前区和后区相临接，对相临接者予以合并。 文件较小时，采取空闲表法。<br><strong>2)空闲链表法</strong>:将所有空闲盘区拉成一条空闲链，根据构成链所用的基本元素不同，可把链表分为两种形式:<strong>空闲盘块链</strong>，以盘块为单位拉成一条链，<strong>优缺点</strong>:用于分配和回收一个 盘块的过程非常简单，但在为一个文件分配盘块时，可能要重复操作多次;<br><strong>空闲盘区链</strong>，将 磁盘上所有的空闲盘区拉成一条链。分配盘区的算法通常采用首次适应算法，回收时也要考 虑合并，<strong>为提高对空闲盘区的检索速度，可以采用显示连接法，为内存中的空闲盘区建立一 张链表。</strong><br><strong>3)位示图法</strong>:位示图是利用二进制中的一位来表示磁盘中一个盘块的使用情况，0 时空闲， 1 时分配。<br>根据位示图进行盘块的分配时，分为三步:</p><ul><li>1)顺序扫描位示图，找到 0。</li><li>2)将找到的一个 或一组二进制位转化成与之相对应的盘块号。</li><li>3)修改位示图，使相应位置 1。 </li></ul><p>回收分为两步:</p><ul><li>1)将回收的盘块号转化为位示图中的行号和列号。注意转化公式!!!</li><li>2) 修改位示图，使相应位置 0。 </li></ul><p><strong>4)成组链接法</strong>:空闲表法和空闲链表法不适合大型文件，会使链表和空闲表太长。将上述 两种方法结合在一起，兼备了优点，而克服了表太长的缺点。<br><strong>大致思想</strong>:把顺序的 n 个空闲扇区的地址保存在第一个空闲扇区内，其后一个空闲扇区则保 存另一个顺序空闲扇区的地址，在直至所有空闲扇区均已连接。系统只需要保存一个指向第 一个空闲扇区的指针。</p><h4 id="6-逻辑文件组织"><a href="#6-逻辑文件组织" class="headerlink" title="(6)逻辑文件组织"></a>(6)逻辑文件组织</h4><p>文件的逻辑结构是从用户观点出发所观察到的文件组织形式，是用户可以直接处理的数据及 其结构，独立于文件的物理特性，又称为文件组织。<br><strong>文件逻辑结构的类型:有结构文件;无结构文件;</strong><br>有结构文件三种:<br><strong>1)顺序文件</strong>:由一系列记录按某种顺序排列所形成的文件，记录通常是记录文件。又分为 串结构和顺序结构。串结构，记录之间的顺序与关键字无关。顺序结构，所有记录按关键字 顺序排列。<br>优点:只有顺序文件能储存在磁带上，当每次要读或写一大批文件时，顺序文件的存储效率 最高。<br>缺点:顺序文件对于查找、修改、增加、删除等操作比较困难。<br><strong>2)索引文件</strong>:对于定长记录可以方便的实现顺序存取，但对于边长记录难以实现直接存取。 可以为变长文件记录建立一张索引表(本身是一个定长记录的顺序文件)。<br><strong>3)顺序索引文件</strong>:将顺序文件中的所有记录分为若干组，为顺序文件建立一张索引表，在 索引表中为魅族第一条记录建立一个索引项，其中含有该记录的关键字值，和指向该记录 的指针。<br><strong>4)直接文件</strong>:记录值本身就决定了自己的物理地址，键值转换 哈希文件:利用散列函数， 将键值转化为相应的记录的地址，可能会发生冲突。</p><h4 id="7-文件的基本操作"><a href="#7-文件的基本操作" class="headerlink" title="(7)文件的基本操作"></a>(7)文件的基本操作</h4><p>创建文件、删除文件、读文件、写文件、截断文件、设置文件读写位置。<br>文件的打开和关闭。 熟读课本相关知识</p><h4 id="8-文件目录及其管理"><a href="#8-文件目录及其管理" class="headerlink" title="(8)文件目录及其管理"></a>(8)文件目录及其管理</h4><p>对目录管理的要求如下:<br>1)实现“按名存取”<br>2)提高对目录的检索速度<br>3)文件共享<br>4)允许文件重名。<br>文件控制块(FCB):是用来存放控制文件所需要的各种控制信息的数据结构。文件控制块 的有序集合称为文件目录，即一个文件控制块就是一个文件目录项。一个文件目录也可以看 做一个文件，称为目录文件。<br>文件控制块通常包含三类信息:基本信息:文件名，文件物理位置，文件逻辑结构，文件物 理结构;<br>存取控制信息:文件存取权限;<br>使用信息:文件建立时间，修改时间。<br>索引结点:在检索目录文件的过程中，只用到了文件名，其他一些对该文件的描述信息，在 检索目录时，一概不用，所以没必要调入内存。便采用了把文件名与文件描述信息分开的办 法。文件描述信息单独形成一个称谓索引结点的数据结构。<br>在文件目录中，每个目录项仅由文件名和指向该文件所对应的 i 结点的指针构成。<br><strong>目录结构</strong>:目录结构关系到文件系统的存取速度，也关系到文件的共享性和安全性。通常有 单击目录，两级目录和多级目录。<br><strong>单级目录</strong>:只建立一张目录表，每个文件占有一个目录项。访问时，先按文件名在该目录中 找到对应的 FCB。单级目录实现了“按名存取”但是，查找速度慢，不允许重名，不便于实现 文件共享。<br><strong>两级目录</strong>:优点:提高了检索目录的速度;在不同用户名的目录中，可以使用相同文件名; 不同用户可以使用不同的文件名来访问系统中的同一个共享文件。<br><strong>多级目录文件(树形目录文件)</strong>:优点:可以很方便的对文件进行分类，层次结构清晰，能 有效的进行文件的管理和保护。但是在树形文件中，查找一个文件时，需要按路径名逐级访 问，增加了磁盘访问次数，影响查询速度。</p><h4 id="9-文件共享和保护"><a href="#9-文件共享和保护" class="headerlink" title="(9)文件共享和保护"></a>(9)文件共享和保护</h4><p>文件共享是多个用户共享同一文件，系统只要保留该文件的一个副本。<br>文件共享方法:<br>1)基于索引结点的共享方式(硬链接)<br>2)利用符号链实现文件共享(软 连接)<br>文件保护:文件保护通过口令保护，加密保护，访问控制等方式实现。口令保护和加密保护 是为了防止用户文件被他人存取或窃取，访问控制是控制用户对文件的访问方式。<br>检查点:主要目的是对事务记录表中的事务记录清理工作经常化。</p><h3 id="7-操作系统接口"><a href="#7-操作系统接口" class="headerlink" title="7.操作系统接口"></a>7.操作系统接口</h3><h4 id="1-操作系统接口类型"><a href="#1-操作系统接口类型" class="headerlink" title="(1)操作系统接口类型"></a>(1)操作系统接口类型</h4><p>1)用户接口<br>2)程序接口，是程序能取得操作系统服务的唯一途径，大多数程序接口由一 组系统调用组成。</p><h4 id="2-系统调用概念"><a href="#2-系统调用概念" class="headerlink" title="(2)系统调用概念"></a>(2)系统调用概念</h4><p> 一方面由于系统提供保护机制，防止程序至直接调用操作系统得过程，从而避免不安全性， 另一方面，应用程序必须取得操作系统提供的服务。为此，操作系统提供系统调用，使应用 程序通过提供系统调用的方法，间接调用操作系统的相关过程。</p><h4 id="3-系统调用的类型和实现方法"><a href="#3-系统调用的类型和实现方法" class="headerlink" title="(3)系统调用的类型和实现方法"></a>(3)系统调用的类型和实现方法</h4><p>类型:进程控制类系统调用、文件操纵类系统调用、进程通信类系统调用。<br>实现:熟读课本相关知识。</p>]]></content>
      
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统知识点总结（二）</title>
      <link href="/2020/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2020/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>操作系统复习，知识点总结<br>4.内存管理<br>5.设备管理</p><a id="more"></a><p>上一篇文章——&gt;<a href="https://quanluo.github.io/2020/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/">操作系统知识点总结（一）</a><br>下一篇文章——&gt;<a href="https://quanluo.github.io/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%89%EF%BC%89/">操作系统知识点总结（三）</a></p><h3 id="四、内存管理"><a href="#四、内存管理" class="headerlink" title="四、内存管理"></a>四、内存管理</h3><h4 id="1-内存管理的基本概念-链接与装入，逻辑地址与物理地址空间，对换与覆盖，重定位"><a href="#1-内存管理的基本概念-链接与装入，逻辑地址与物理地址空间，对换与覆盖，重定位" class="headerlink" title="(1)内存管理的基本概念:链接与装入，逻辑地址与物理地址空间，对换与覆盖，重定位"></a>(1)内存管理的基本概念:链接与装入，逻辑地址与物理地址空间，对换与覆盖，重定位</h4><p><strong>源程序</strong>变为可执行程序的过程:<br><strong>首先是编译</strong>，由编译程序将用户源代码编译成若干目标模块;<br><strong>其次是连接</strong>，由链接程序将个目标模块，以及他们所要的库函数链接在一起，形成一个完整的装入模块;<br><strong>最后是装入</strong>，由装入程序将装入到内存。 </p><p>程序的链接:由链接程序将目标模块和所需库函数链接在一起，形成完整的装入模块。 </p><p>链接有三种方式: </p><ul><li>1)静态链接:在程序运行前，将目标模块和所需的库函数，连接成一个完整的装入模块， 以后不再分开。 </li><li>2)装入时动态链接:将得到的目标模块，再装入内存时，采用边装入边链接的链接方式。<br>优点:<ul><li>1)便于更新和修改，各目标模块分开存放，所以要修改和更新目标模块非常容易。</li><li>2)便于实现对目标模块的共享。 </li></ul></li><li>3)运行时动态链接:对某些模块的链接推迟到程序执行时才去链接。 程序的装入:由装入程序将装入模块装入到内存。优点:不仅加快了程序的装入过程，而且 可以节省大量内存空间。</li></ul><p>装入有三种方式:<br>1)绝对装入方式:<br>2) 可重定位装入(静态重定位):特点:一个作业装入内存时，必须给他分配要求的全部内 存空间，若没有足够的内存则不能装入。此外，作业一旦装入内存，整个运行期间不能在内 存中移动，也不能申请内存空间。<br>3)动态运行时装入(动态重定位):特点:可将程序分配到不连续的存储区;在程序装入 前，装入它的部分代码即可运行，运行期间，根据需要动态申请分配内存;便于程序段共享， 可以向用户提供一个比存储空间大的多的地址空间。</p><p>逻辑地址与物理地址:<br><strong>逻辑地址空间</strong>:编译后每个每个目标模块都从 0 号单元开始编址，这称为该目标模块的相对 地址(逻辑地址)。当连接程序将各个目标模块链接一个完整的可执行目标程序时，链接程 序顺序依次按各个模块的相对地址构成统一的从 0 号单元开始编址的<strong>逻辑地址空间</strong>。<br><strong>物理地址空间</strong>:是指内存中物理单元的集合，是地址转化的最终地址。当装入程序将可执行 代码装入内存时，必须通过地址转换将逻辑地址装换为物理地址，<strong>这个过程称为地址重定位</strong>。</p><p>对换与覆盖:<br><strong>对换(交换)</strong>:把处于等待状态的程序从内存移到辅存，再把内存空间腾出来，这一过程称 为换出，再把准备好竞争 CPU 运行的程序从辅存移到内存，这一过程称为换入。中级调度 采用的就是对换技术。<br><strong>覆盖</strong>:由于程序运行时，并非任何时候都要访问程序及数据的各个部分，因此可以把用户空 间分为一个固定区和若干个覆盖区，将经常活跃的部分放在固定区，其余部分按调用关系分 段。首先将那些即将访问的段放入覆盖区，其他段放在外存中，在需要调用前，系统将其调 入覆盖区，覆盖原有的段。</p><h4 id="2-连续内存分配方法，离散内存分配方法-分页、分段、段页-，"><a href="#2-连续内存分配方法，离散内存分配方法-分页、分段、段页-，" class="headerlink" title="(2)连续内存分配方法，离散内存分配方法(分页、分段、段页)，"></a>(2)连续内存分配方法，离散内存分配方法(分页、分段、段页)，</h4><p>连续内存分配:是指为一个程序分配一个连续的内存空间。<br>分配方式主要有三种: </p><ul><li>1)单一连续分配:此方式下分为系统区和用户区，低地址的系统区仅供操作系统使用。内 存中永远只有一道程序。<strong>优点</strong>:简单，无外部碎片，可采用覆盖技术，不要额外的技术支持。 <strong>缺点</strong>:只能用于单任务，单用户的操作系统，有内部碎片，存储器利用率极低。 </li><li>2)固定分区分配:最简单的一种可运行多道程序的存储管理方式。将内存用户空间划分为 若干个固定大小的区域，在每个分区中只装入一道作业，允许几道作业并发运行。<br>划分分区的方法:<br>  1)分区大小相等<br>  2)分区大小不等<br>固定分区分配通常会建立一张分区使用表，每个表项包括包括每个分区的起始地址，大小， 和状态(是否已分配)，当某一用户程序要装入时，由分配程序检索该表，找到一个大小满 足且未分配的分区，分配给该程序。并置状态为已分配。 <strong>缺点</strong>:程序可能太大而放不进任何一个分区;主存利用率低，有内部碎片。 </li><li>3)动态分区分配:不预先划分内存，而是在进程装入内存时，根据进程的大小动态的建立 分区，并使分区大小刚好适合进程需要。在开始 i 分配时很好，但在之后会导致内存中出现 许多小的内存块，随着时间推移，内存中会出现越来越多的碎片，内存利用率随之下降。这 碎片称为外部碎片，克服外部碎片可以采用紧凑技术。<br>在进程装入或换入时，需要确定分配哪个内存块给进程，这就是动态分区的分配策略。<br>1) 首次适应算法<br>2)最佳适应算法<br>3)最坏适应算法<br>4)临近适应算法(循环首次适应算法， 分配内存时从上次查找结束的位置开始查找)</li><li>4)可重定位分区分配(主要看书)</li></ul><p>离散内存分配方法:<br><strong>离散内存分配</strong>:允许一个程序分散的装入不相邻的内存分区。根据分区大小是否固定分为分 页储存管理方式和分段储存管理方式。<br><strong>基本分页存储管理</strong>:分页存储管理将一个进程的逻辑地址空间分成若干个大小相等的片，称 为页。相应的，把内存空间分成与页面大小相等的若干个储存块，称为物理块或页框。 页表:实现页号到物理块号的地址映射。<br><strong>基本分段存储管理</strong>:引入的目主要是为了满足程序员在编程和使用上的诸多要求。<br>1)方便 编程<br>2)信息共享<br>3)信息保护<br>4)动态增长<br>5)动态链接 </p><p><strong>分段和分页的主要区别</strong>:<br>1)分页是信息的物理单位，段是信息的逻辑单位<br>2)页的大小固定 且由系统固定，段的长度不固定，决定于用户编写程序的长度<br>3)分页的作业地址空间是一 维的，程序员只用一个记忆符即可表示一个地址;分段的地址空间是二维的，程序员在表示 一个地址时，既需要给出段名又需要给出段内地址。<br><strong>段页式存储管理</strong>:分段与分页管理相结合，先将用程序分为若干段，再把每个段分为若干个 页，地址结构由段号，段内页号，页内地址组成。<strong>地址变换过程</strong>:配置一个段表寄存器，其 中存放段表始址和段表长。进行地址变换时，先将段号与段表长比较，若小于段表长，表示 未越界，于是利用段表始址和段号求出该段所对应的段表项在段表中的位置，从中得到该段 的页表始址，并利用段内页号来获得对应的页表项位置，从中得出该页所在的物理块号，在 利用块号和页内地址构成物理地址。(三次访问内存!)</p><h4 id="3-虚拟内存分配方法-虚拟内存的概念，局部性原理，实现虚拟内存所需的硬件和软件-支持，请求分页-段-管理，页面置换算法"><a href="#3-虚拟内存分配方法-虚拟内存的概念，局部性原理，实现虚拟内存所需的硬件和软件-支持，请求分页-段-管理，页面置换算法" class="headerlink" title="(3)虚拟内存分配方法(虚拟内存的概念，局部性原理，实现虚拟内存所需的硬件和软件 支持，请求分页(段)管理，页面置换算法)"></a>(3)虚拟内存分配方法(虚拟内存的概念，局部性原理，实现虚拟内存所需的硬件和软件 支持，请求分页(段)管理，页面置换算法)</h4><p><strong>虚拟存储器</strong>:指具有请求调入功能和置换功能，能从逻辑上对内存容量加以扩充的一种存储 器系统。<br><strong>局部性原理</strong>:时间局部性:典型原因:程序中存在大量的循环操作。 <strong>空间局部性</strong>:程序在一定时间内访问的地址，可能集中在一定范围内。<br>实现虚拟内存所需的硬件和软件支持:<br>请求分页管理:<br>硬件支持<br>1)一定容量的内存和外存<br>2)页表机制<br>3)中断机构<br>4)地址变 换机构 </p><p>软件支持<br>1)实现请求调页的软件<br>)实现页面置换的软件</p><p>请求分段管理:<br>硬件支持<br>1)一定容量的内存和外存<br>2)段表机制<br>3)中断机构<br>4)地址变 换机构<br>软件支持 1)<br>1)实现请求调段的软件<br>2)实现段置换的软件<br>虚拟存储器的特征:<br>1)多次性<br>2)对换性<br>3)虚拟性<br>请求分页(段)管理:<br>页表机制:页表除了含有页号及其对对应的物理块号以外，还有状态位:用于指示该页是否调入内存。访问字段:记录一段时间内被访问次数。修改位:表示该页在调入内存后是 否被修改过。<br><strong>缺页中断机构</strong>:缺页中断是一种特殊的中断，与一般中断相比，主要区别有以下两个方面:<br>1)指令执行期间产生和处理中断信号<br>2)一条指令执行期间，可能产生多次缺页中断。<br><strong>地址变换机构</strong>:请在书中重点理解、记忆基本地址变换机构（用于实现逻辑地址到物理地址转换的一组硬件机构）的原理和流程。</p><p>物理块的分配策略:<br>1)固定分配局部置换<br>2)可变分配全局置换<br>3)可变分配局部置换 调入页面的时机:1)预调页策略 2)请求调页策略(每次调入一页) </p><p><strong>页面置换算法(重点掌握):</strong><br>1)最佳置换算法(opt)<br>2)先进先出页面置换算法(FIFO)<br>3)最近最久未使用置换算法(LRU)<br>4)时钟置换算法(CLOCK)<br>5)改进型 clock 置换算法</p><h4 id="4-内存保护与共享"><a href="#4-内存保护与共享" class="headerlink" title="(4)内存保护与共享"></a>(4)内存保护与共享</h4><p>内存保护:保护操作系统不受用户进程的影响，同时保护用户进程不受其他用户进程的影响。 主要有两种方法:<br>1)<strong>在 CPU 设置一对上下限寄存器</strong>，存放用户作业在主存中的上限和下限地址，每当 CPU 访问一个地址时，分别和两个寄存器的值比较，判断有无越界。<br>2)<strong>采用重定位寄存器(基址寄存器)和界地址寄存器(限长寄存器)</strong>。重定位寄存器含有 最小的物理地址值，界地址寄存器含逻辑地址最大值。每个逻辑地址必须小于界地址寄存器， 内存管理机构动态的将逻辑地址与界地址寄存器进行比较，若未发生地址越界，则加上重定 位地址寄存器的值形成物理地址。(重定位寄存器用来加，界地址寄存器用来比)<br>内存共享:<strong>在书中了解</strong></p><h4 id="5-抖动的概念和处理方法"><a href="#5-抖动的概念和处理方法" class="headerlink" title="(5)抖动的概念和处理方法"></a>(5)抖动的概念和处理方法</h4><p><strong>抖动</strong>:刚刚换出的页面马上就要换入主存，刚刚换入的页面马上就要换出主存，这种频繁的 页面调度现象称为<strong>抖动或颠簸</strong>。<br><strong>主要原因是</strong>:某个进程频繁访问的页面数目高于可用的物理页帧数目。<br><strong>处理方法</strong>:<br>采取局部置换策略<br>仅允许进程在自身范围内进行置换。即使发生抖动，也可以把影响限制在较小范围内。</p><h3 id="五、设备管理"><a href="#五、设备管理" class="headerlink" title="五、设备管理"></a>五、设备管理</h3><h4 id="1-I-O-体系结构"><a href="#1-I-O-体系结构" class="headerlink" title="(1)I/O 体系结构"></a>(1)I/O 体系结构</h4><p>整个 IO 系统可视为具有四个层次的系统结构:用户层 IO、设备独立性软件、设备驱动程序、 中断处理程序<br>用户层 IO:实现与用户交互的接口。<br>设备独立性软件:用于实现用户程序与设备驱动器的统一接口、设备命令、设备保护及设备 分配与释放等等，同时为设备管理与数据传送提供必要的存储空间。<br>设备驱动程序:与硬件直接相关，负责具体实现系统对设备发出的操作指令，驱动 IO 设备 工作的驱动程序。<br>中断处理程序:用户保存被中断进程的 CPU 环境，处理完并回复被中断程序的现场后，返 回到被中断进程。<br>设备控制器的基本功能:<br>1)接受和识别命令<br>2)数据交换<br>3)标识和报告设备状态<br>4)地址 识别<br>5)数据缓冲<br>6)差错控制<br>设备控制器的组成:<br>1)设备控制器与处理机接口<br>2)设备控制器与设备的接口<br>3)IO 逻辑</p><h4 id="2-I-O-控制方法"><a href="#2-I-O-控制方法" class="headerlink" title="(2)I/O 控制方法"></a>(2)I/O 控制方法</h4><p>外围设备与内存的输入输出控制有四种</p><ul><li>1)程序直接控制<br>优点:简单易于实现 缺点:CPU 和 IO 设备串行工作，导致 CPU 利用率相当低。 </li><li>2)中断驱动方式:<br>中断驱动方式的思想是:允许 IO 设备主动打断 CPU 运行并请求服务，从而“解放”CPU，使 得其向 IO 控制器发出读命令后，可以继续做其他有用的工作。<br>优点:大大提高了 CPU 利用率 缺点:数据中每个字在存储器与 IO 设备控制器之间的传输 必须经过 CPU，导致了终端驱动仍然会消耗较多的 CPU 时间。</li><li>3)DMA 方式(直接存储器存取):<br>基本思想:在 IO 设备和内存之间开辟直接的数据交换通路，彻底解放 CPU。<br>特点:<br>1)基本单位数据块<br>2)所传送的数据，是从设备直接送入内存的，或者相反 3)仅 在传送一个或多个数据块开始或结束时，才需要 CPU 的干预，整块数据的传送是在 DMA 控制器的控制下完成的。</li></ul><p>DMA 控制器的组成(机组要求请参考书中内容):</p><p>DMA 的工作方式:CPU 接到 DMA 的工作请求时，给 IO 控制器发一条命令，启动 DMA 控 制器，然后继续其他工作。之后 CPU 就把控制操作委托给 DMA 控制器，由该控制器负责处 理。DMA 控制器直接与存储器交互，传送整个数据块，每次传送一个字，这个过程不需要 CPU 的参与。传送完成后，DMA 控制器发送一个中断信号给 CPU。</p><p>DMA 与中断驱动方式的区别是:<br>1)中断驱动方式在每个数据传送需要中断 CPU，而 DMA 控制方式则是在所要求传送的一批数据全部传送结束时才中断 CPU<br>2)中断驱动方式数据 传送是在中断处理时由 CPU 控制完成，而 DMA 控制方式则是在 DMA 控制器的控制下完成 的。</p><ul><li>4)通道控制方式:<br>IO 通道:是指专门负责输入输出的处理机，是 DMA 方式的发展，他可以进一步减少 CPU 的干预，即把对一个控制块的读写为单位的干预，减少为对一组数据块的读写的及有关控制 和管理为单位的干预。同时，又可以实现 CPU、通道和 IO 设备三者的并行操作，从而更有 效的提高整个系统的资源利用率。<br>IO 通道与一般处理机的区别:通道指令的类型单一，没有自己的内存，通道执行的通道程 序是放在主机的内存中的，也就是说通道与 CPU 共享内存。<br>IO 通道与 DMA 方式的差别:DMA 方式需要 CPU 来控制和传输数据块的大小以及传输的内 存位置，而通道方式中的这些信息是由通道控制的;另外，每个 DMA 控制器对应一台设备 与内存传递数据，而一个通道可以控制多台设备与内存的数据交换。</li></ul><h4 id="3-I-O-分配中的数据结构和分配方法"><a href="#3-I-O-分配中的数据结构和分配方法" class="headerlink" title="(3)I/O 分配中的数据结构和分配方法"></a>(3)I/O 分配中的数据结构和分配方法</h4><p>在设备分配时，通常借助一些表格:设备控制表、控制器控制表、通道控制表、系统设备表。<br>设备控制表(DCT):每个设备配备一张设备控制表，用于记录本设备的情况。<br>控制器控制表(COCT):系统为每个控制器设置了一张用于记录本控制情况的控制器控制表。<br>通道控制表(CHCT):每个通道都配有一张通道控制表。<br>系统设备表(SDT):这是系统范围的数据结构，记录了系统中全部设备的情况。每个设备 占有一个表目，其中包括设备类型，设备标识符，设备控制表以及设备驱动程序的入口等。</p><p>设备分配时应考虑到的因素:<br>1)设备固有属性<br>2)设备分配算法<br>3)设备分配时的安全性<br>4) 设备独立性</p><p>设备的固有属性有三种<br>1)独占性设备<br>2)共享性设备<br>3)可虚拟设备 </p><p>设备分配算法:<br>1)先来先服务<br>2)优先级高者有优先。 </p><p>设备分配中的安全性:<br>1)安全分配方式:放弃了“请求和保持”条件，CPU 与 IO 串行工作<br>2) 不安全分配方式:可能造成死锁。</p><h4 id="4-通道和通道程序"><a href="#4-通道和通道程序" class="headerlink" title="(4)通道和通道程序"></a>(4)通道和通道程序</h4><p>通道:一种特殊的处理机，具有执行 IO 指令的能力，并通过执行通道程序来控制 IO 操作。<br>类型:<br>1)字节多路通道<br>2)数组选择通道<br>3)数组多路通道<br>字节多路通道:按字节交叉方式工作。含有许多非分配型子通道，这些子通道按时间片转轮 方式共享主通道。只要扫描各子通道速度足够快，而连接到子通道设备速率不是太高时，不 会丢失信息。(不适用于连接高速设备)<br>数组选择通道:可以连接多台高速设备，但只有一个分配型子通道，在一段时间内只能执行 一道通道程序。通道利用率极低。<br>数组多路通道:前两者优点结合。既具有很高的数据传送速率，又有令人满意的 CPU 利用 率。<br>瓶颈问题:通道价格昂贵，因此较少，通道不足会造成瓶颈问题。，解决方法:增加设备到 主机间的通路，而不增加通道。为了防止出现瓶颈。通常采用多通路的 IO 系统结构。<br>通道程序:通道是通过执行通道程序，并与设备控制器共同实现对 IO 设备的控制的。由一 系列通道指令(命令)构成。与一般机器指令不同，在他的每条指令中，都包含如下信息:</p><p>1) 操作码<br>2)内存地址<br>3)技计数<br>4)通道程序结束位<br>5)记录结束标志。</p><h4 id="5-设备独立性及其实现方法"><a href="#5-设备独立性及其实现方法" class="headerlink" title="(5)设备独立性及其实现方法"></a>(5)设备独立性及其实现方法</h4><p>为提高 OS 的可适应性和可扩展性，必须实现设备独立性(设备无关性)。基本含义:应用 程序独立于具体使用的物理设备。<br>好处:<br>1)设备分配时的灵活性<br>2)易于实现 IO 重定向。<br>实现方法:在应用程序中使用逻辑设备名来请求使用某类设备，在系统中设置一张逻辑设备 表(LUT)，用于将逻辑设备名映射成物理设备名。表的表目中包含三项:逻辑设备名，物 理设备名和设备驱动程序的入口地址。<br>建立逻辑设备表的两种方式:1)在整个系统中只设置一张 LUT，适用于单用户系统 2) 为每个用户设置一张 LUT。</p><h4 id="6-虚拟设备和-SPOOLing-技术"><a href="#6-虚拟设备和-SPOOLing-技术" class="headerlink" title="(6)虚拟设备和 SPOOLing 技术"></a>(6)虚拟设备和 SPOOLing 技术</h4><p>SPOOLing(假脱机)技术可以将一台物理 IO 设备虚拟为多台逻辑 IO 设备，允许多个用户 共享一台物理 IO 设备。实质上是一种以空间换时间的技术，而请求分页的页面调度算法时 典型的以时间换空间。</p><p>SPOOLing 是对脱机输入、输出系统的模拟。必须建立在多道程序功能的基础上，而且还要有高速随机外存的支持，通常采用磁盘存储技术。<br>SPOOLing 主要有三个部分:<br>1)输入井和输出井，在磁盘上开辟的两个大存储空间，输入井是模拟脱机输入的磁盘设备， 用于暂存 IO 设备输出得数据，输出井是模拟脱机输出的设备，用于暂存用户程序的输出数 据。<br>2)输入缓冲区和输出缓冲区，为缓和 CPU 和 IO 设备速度不匹配的矛盾，在内存中开辟两 个缓冲区:输入和输出缓冲区，输入缓冲区用来暂存由输入设备送来的数据，以后在传送到 输入井;输出缓冲区用于暂存从输出井送来的数据，以后在传送给输出设备。<br>3)输入进程和输出进程:利用这两个进程模拟脱机 IO 时的外围控制机。其中输入进程模 拟脱机输入时的外围控制机，将用户要求的数据从输入机通过输入缓冲区在送到输入井，当 CPU 需要输入数据时，直接从输入井读到内存;输出进程模拟输出时的外围控制机，把用 户要求输出的数据先从内存送到输出井，待输出设备空闲时，再将输出井中的数据经过输出 缓冲区送到输出设备上。</p><p>打印机是经常要用到的独占输出设备。利用 SPOOLing 可以改造成共多个用户共享的设备， 从而提高设备利用率。</p><h4 id="7-缓冲管理"><a href="#7-缓冲管理" class="headerlink" title="(7)缓冲管理"></a>(7)缓冲管理</h4><p>引入缓冲区的主要原因:1)缓和 CPU 和 IO 设备间速度的不匹配的矛盾 2)减少对 CPU 的 中断频率，放宽 CPU 中断响应时间的限制 3)提高 CPU 和 IO 设备之间的并行性。缓冲区 数据非空时，不能往缓冲区冲入数据，只能把数据传出;当缓冲区为空时，可以冲入数据， 但必须把缓冲区充满后，才能从缓冲区把数据传出。 根据系统设置缓冲器的个数，缓冲技术可分为四种:<br>1)单缓冲:从磁盘把一块数据输入到缓冲区的时间为 T，操作系统将该缓冲区的数据送到 用户区的时间为 M，CPU 对这块数据的处理时间为 C，T 和 C 是可以并行的，因此可把系 统对每一块数据的处理时间表示为 max(T,C)+M。<br>2)双缓冲:为了加快输入输出速度，提高设备利用率，引入双缓冲也成缓冲对换。处理一 块数据所用时间为 max(C+M,T)，单缓冲机制不允许双方同时向对方发送数据，而双缓冲 可以。<br>3)循环缓冲:包含多个大小相等的缓冲区，每个缓冲区中由一个链接指针指向下一个缓冲 区，构成一个环形。<br>4)缓冲池:在池中设置多个可供进程共享的缓冲区。<br>组成:<br>1)空闲缓冲区(空缓冲队列)<br>2)装满输入数据的缓冲区(输入缓冲队列)<br>3)装 满输出数据的缓冲区(输出缓冲队列)。</p><h4 id="8-设备处理与-I-O-软件"><a href="#8-设备处理与-I-O-软件" class="headerlink" title="(8)设备处理与 I/O 软件"></a>(8)设备处理与 I/O 软件</h4><p>IO 软件总体设计目标是高效率和通用性。<br>IO 软件应实现的目标:<br>1)与具体设备无关<br>2)统一命名<br>3)对错误的处理<br>4)缓冲技术<br>5) 设备分配和释放<br>6)IO 控制方式 四个层次:用户层软件、设备独立性软件、设备驱动程序、中断处理程序。</p><h4 id="9-设备分配"><a href="#9-设备分配" class="headerlink" title="(9)设备分配"></a>(9)设备分配</h4><p>1） 设备分配中的数据结构<br>在进行设备分配时，通常都需要借助于一些表格的帮助，在表格中记录了相应设备或控制器的状态及对设备或控制器进行控制所需的信息，在进行设备分配时所需要的数据结构有设备控制表、控制器控制表、通道控制表和系统设备表等。<br>　① 设备控制表（DCT），系统为每个设备都配置了一张设备控制表，用于记录本设备的情况。<br>　<img src="https://img-blog.csdnimg.cn/20200604121746476.png" alt="在这里插入图片描述"><br>说明：设备队列队首指针（凡因为请求本设备而未得到满足的进程，其PCB都应按照一定的策略排成一个队，称该队列为设备请求队列或简称设备队列，其队首指针指向队首PCB），设备状态（当设备处于使用状态时，应该设备设置为忙/闲标志置为1），与设备连接的控制器表指针（该指针指向该设备所连接的控制器的控制表），重复执行次数（由于外部设备在传送数据时，较容易发生数据传送错误，因而在许多系统中，如果发生传送错误，并不立即认为传送失败，而是令它重传，并由系统规定设备在工作中发生错误时应重复执行的次数）</p><p>　　② 控制器控制表（COCT)，系统为每个控制器都设置了一张用于记录本控制器情况的控制器控制表。</p><p>　　③ 通道控制表（CHCT），每个通道都配有一张通道控制表。</p><p>　　④ 系统设备表（SDT），系统范围的数据结构，记录了系统中全部设备的情况，每个设备占用一个表目，其中包括有设备类型、设备标识符、设备控制表及设备驱动程序的入口等。<br>　　<img src="https://img-blog.csdnimg.cn/20200604121802463.png" alt="在这里插入图片描述">　　</p>]]></content>
      
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>彻底解决java.lang.ClassNotFoundException: com.mysql.jdbc.Driver问题</title>
      <link href="/2020/06/03/%E5%BD%BB%E5%BA%95%E8%A7%A3%E5%86%B3java-lang-ClassNotFoundException-com-mysql-jdbc-Driver%E9%97%AE%E9%A2%98/"/>
      <url>/2020/06/03/%E5%BD%BB%E5%BA%95%E8%A7%A3%E5%86%B3java-lang-ClassNotFoundException-com-mysql-jdbc-Driver%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p><img src="https://images7.alphacoders.com/108/1080635.jpg" alt=""><br>java中连接Mysql数据库，注册数据库的驱动时报错，也就是下面这句语句报错。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br></pre></td></tr></table></figure><p>报错为：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.lang.ClassNotFoundException: com.mysql.jdbc.Driver</span><br></pre></td></tr></table></figure><a id="more"></a><p>问题：没有JDBC的驱动包。<br>解决方法：<br>1.去<a href="https://dev.mysql.com/downloads/connector/j/5.1.html" target="_blank" rel="noopener">Mysql官网</a>下载最新版的驱动包<br>2.创建项目环境，导入数据库驱动</p><ol><li>在Eclipse中新建一个java项目，使用鼠标右键单击项目名称</li><li>然后选择【New】→【Folder】，在弹出的窗口中将该文件命名为<code>lib</code>并单击【Finish】按钮</li><li>将下载好的Mysql数据库驱动文件<code>mysql-connector-java-5.1.49-bin.jar</code>复制到项目<code>lib</code>目录中</li><li>使用鼠标右键单击该JAR包，在弹出框中选择二【Build Path】→【Add to Build Path】，此时Eclipse会将该JAR包发布到类路径下。加入驱动后的项目结构如图所示：<br><img src="https://img-blog.csdnimg.cn/20200603133818150.png" alt="在这里插入图片描述"></li></ol><p>ok，问题解决。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>操作系统知识点总结（一）</title>
      <link href="/2020/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2020/06/02/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>操作系统复习，知识点总结<br>1.操作系统概述<br>2.进程管理<br>3.调度与死锁</p><a id="more"></a><p>下一篇文章——&gt;<a href="https://quanluo.github.io/2020/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%8C%EF%BC%89/">操作系统知识点总结（二）</a><br>下一篇文章——&gt;<a href="https://quanluo.github.io/2020/06/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%89%EF%BC%89/">操作系统知识点总结（三）</a></p><h3 id="一、操作系统概述"><a href="#一、操作系统概述" class="headerlink" title="一、操作系统概述"></a>一、操作系统概述</h3><h4 id="1-操作系统的概念、特征、功能和提供的服务"><a href="#1-操作系统的概念、特征、功能和提供的服务" class="headerlink" title="(1)操作系统的概念、特征、功能和提供的服务"></a>(1)操作系统的概念、特征、功能和提供的服务</h4><p>操作系统的概念:控制和管理整个计算机系统的硬件和软件资源，合理地组织和调度计算机 的资源分配，进而为用户和其他软件提供接口与环境的程序集合。</p><p>特征:<br>基本特征包括并发、共享、虚拟和异步。并发和共享是操作系统两个最基本特征。</p><p>并发是指两个或多个事件在同一时间间隔内发生。引入进程的目的是使程序能并发执行。 资源共享即共享，是指系统中的资源可供并发执行的进程同时使用。</p><p>并发与共享的关系:1、资源共享以进程并发为条件。2、若系统不能对资源共享作出有效管理，则必将影响到程序的并发。 </p><p>虚拟是指把一个物理上的实体变为若干逻辑上的对应物。利用多道程序设计把一个物理上的 CPU 虚拟为多个逻辑上的 CPU，称为虚拟处理器。还有虚拟存储器。 </p><p>异步(不确定性):多道程序环境允许多个进程并发执行，但由于资源有限，进程的执 行并不是一贯到底，而是走走停停，它以不可预知的速度向前推进，这就是进程的异步性。</p><p>功能和目标:作为计算机系统资源管理者，操作系统有以下几个方面功能:处理机管理(可 归结为进程的管理)、存储器管理(内存分配、地址映射、内存保护、内存扩充等)、文件管 理、设备管理(缓冲管理、设备分配、设配处理、虚拟设备等)。 </p><p>操作系统还可以作为用户与计算机硬件系统之间的接口。操作系统提供的接口有两类:命令 接口、程序接口。</p><p> 程序接口:由一组系统调用命令组成，用户通过在程序中使用这些系统调用命令来请求操作 系统为其提供服务。</p><h4 id="2-操作系统的发展与分类"><a href="#2-操作系统的发展与分类" class="headerlink" title="(2)操作系统的发展与分类"></a>(2)操作系统的发展与分类</h4><p>批处理阶段: 单道批处理系统:系统对作业的处理时成批进行的，但内存中始终保持一道作业。 </p><p>特征:<br>1、自动性，顺利情况下，磁带上的作业自动逐个运行，无需人工干预。<br>2、顺序性，各道作业顺序进入内存。<br>3、单道性，内存中仅有一道程序运行。</p><p>多道批处理系统:允许多个程序同时进入内存并允许他们在 CPU 中交替运行，这些程序共 享系统中的各种软硬件资源。</p><p>特点:1、多道，内存中同时存放多道相互独立的程序。<br>2、宏观上并行，微观上串行。 </p><p>优点:资源利用率高、各种资源得到充分利用;系统吞吐量大，CPU 保持忙碌。 </p><p>缺点:用户响应时间较长;不提供人机交互能力，用户不了解程序的运行情况，又不能控制 计算机。</p><p>分时操作系统:把处理器运行时间分成很短的时间片，按时间片轮流把处理器分配给各联机 的作业使用。也是支持多道程序设计的系统，但分时系统是实现人机交互的系统。 </p><p>特征:1、同时性，允许多个终端用户同时使用一台计算机。<br>2、交互性。<br>3、独立性，多个用户彼此独立进行操作。<br>4、及时性，用户请求能在极短的时间内获得响应。</p><p>实时操作系统:特点:及时性和可靠性 </p><h4 id="3-操作系统的基本结构"><a href="#3-操作系统的基本结构" class="headerlink" title="(3)操作系统的基本结构"></a>(3)操作系统的基本结构</h4><p><img src="https://img-blog.csdnimg.cn/20200602180605569.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="二、-进程管理"><a href="#二、-进程管理" class="headerlink" title="二、 进程管理"></a>二、 进程管理</h3><h4 id="1-前驱图以及程序顺序执行和并发执行的特点"><a href="#1-前驱图以及程序顺序执行和并发执行的特点" class="headerlink" title="(1) 前驱图以及程序顺序执行和并发执行的特点"></a>(1) 前驱图以及程序顺序执行和并发执行的特点</h4><p>前驱图:一个有向无环图，用户描述及进程之间执行的前后关系。</p><ul><li><p>程序的并发执行:<br>特征:<br>1、提高了系统吞吐量<br>2、间断性，程序并发执行时，共享系统资 源，程序之间形成相互制约的关系。<br>3、失去封闭性，并发执行时，多个程序共享资源，因 而这些资源的状态将有多个程序改变，致使程序运行失去封闭性。<br>4、不可在现性，由于失 去封闭性，也将导致其失去再现性。 </p></li><li><p>程序顺序执行:<br>特征:<br>1、顺序性，处理机的操作严格按照程序规定的顺序执行。<br>2、封闭性，资源的状态只有正在运行的程序能够改变，程序一旦开始运行，执行结果不受外界影响。<br>3、可再现性，只要程序执行时的环境和初始条件相同，当程序重复执行时，都将获得相同 的结果。</p><h4 id="2-进程的基本概念和思想"><a href="#2-进程的基本概念和思想" class="headerlink" title="(2) 进程的基本概念和思想"></a>(2) 进程的基本概念和思想</h4></li><li><p>进程是进程实体运行的过程，是系统进行资源分配和调度的一个独立单位。</p></li><li><p>进程实体:程序段、相关数据段和 PCB 三部分构成进程实体。其中 PCB 是进程存在的 唯一标志!</p></li><li><p>进程的基本特征:动态性，进程的实质是进程实体的一次执行过程，因此动态性是进程 最基本的特征;并发性;独立性，进程实体是一个能独立运行、独立分配资源，和独立接受 调度的基本单位;异步性;结构性。</p><h4 id="3-进程的状态与转换-进程通常有三种基本状态，运行态-就绪态-阻塞态。进程还有个挂起状态"><a href="#3-进程的状态与转换-进程通常有三种基本状态，运行态-就绪态-阻塞态。进程还有个挂起状态" class="headerlink" title="(3) 进程的状态与转换 进程通常有三种基本状态，运行态;就绪态;阻塞态。进程还有个挂起状态"></a>(3) 进程的状态与转换 进程通常有三种基本状态，运行态;就绪态;阻塞态。进程还有个挂起状态</h4><p>就绪态获得处理机→运行态<br>运行态让出处理机→就绪态<br>进程请求某一资源的使用和分配或等待某一事件发生，运行态→阻塞态<br>进程等待的事件到来，阻塞态→就绪态<br>进程的切换是在内核的支持下实现的，是指处理机从一个进程的运行转到另一个进程上运行， 切换过程如下:<br>1、保存处理机上下文，包括程序计数器和其他寄存器。<br>2、更新 PCB 信息。<br>3、把 PCB 移到相应队列，如就绪、阻塞等队列。<br>4、选择另一个进程执行并更新其 PCB。<br>5、更新数据管理的内存结构。<br>6、恢复处理机上下文</p><h4 id="4-进程控制块及其作用"><a href="#4-进程控制块及其作用" class="headerlink" title="(4) 进程控制块及其作用"></a>(4) 进程控制块及其作用</h4><p>为了描述和控制进程的运行，系统为每个进程定义了一个数据结构，进程控制块，是进程实 体的一部分，是一种重要的记录型数据结构。操作系统通过 PCB 来管理和控制进程。</p></li></ul><p>PCB 中主要包括下述四个方面的信息:<br>1、进程标识符，用于唯一的标识一个进程。<br>2、处理 机状态，保存 CPU 各寄存器信息。<br>3、进程调度信息。<br>4、进程控制信息。</p><h4 id="5-进程组织"><a href="#5-进程组织" class="headerlink" title="(5) 进程组织"></a>(5) 进程组织</h4><p>进程一般有三部分组成。<br>1 进程控制块<br>2 程序段<br>3 数据段 </p><p>程序段就是被进程调度程序调度到 CPU 的程序代码段。程序可被多个进程共享，即多个进 程运行一个程序。<br>数据段，可以是进程对应的程序加工处理的原始数据，也可以是程序执行时产生的中间或最 终结果。<br>进程控制块的组织方式:链接方式、索引方式</p><h4 id="6-进程同步-进程同步的概念和同步原则，临界资源和临界区的概念，信号量及其应用，-经典进程同步问题"><a href="#6-进程同步-进程同步的概念和同步原则，临界资源和临界区的概念，信号量及其应用，-经典进程同步问题" class="headerlink" title="(6) 进程同步:进程同步的概念和同步原则，临界资源和临界区的概念，信号量及其应用， 经典进程同步问题"></a>(6) 进程同步:进程同步的概念和同步原则，临界资源和临界区的概念，信号量及其应用， 经典进程同步问题</h4><p>概念:多道程序环境下，进程并发执行，不同进程之间存在不同的制约关系，为了协调相互 制约的关系，引入进程同步的概念。<br>同步机制遵循以下原则:<br>1、空闲让进，临界区空闲时，可以允许一个请求进入临界区的进 程立即进入临界区。<br>2、忙则等待，当已有进程进入临界区时，其他试图进入临界区的进程 必须等待。<br>3、有限等待，对请求访问的进程，应保证能在有限的时间内进入临界区。<br>4、 让全等待，当进程不能进入临界区时，应该释放处理器，防止进程忙等待。</p><p>临界资源:将一次仅允许一个进程使用的资源成为临界资源。<br>临界区:在每个进程中，访问临界资源的那段代码称为临界区。</p><h4 id="7-进程通信的基本概念和方法"><a href="#7-进程通信的基本概念和方法" class="headerlink" title="(7) 进程通信的基本概念和方法"></a>(7) 进程通信的基本概念和方法</h4><p>进程通信是指进程之间的信息交换。<br>Pv 操作是低级通信方式，高级通信方式是指以较高效 率传输大量数据的通信方式，高级通信方式主要有三类:<br>1)共享存储:在通信的进程之间存在一块可直接访问的共享空间，需要使用同步互斥工具 (如 pv 操作)对共享空间进行读写控制，共享存储又分为两种:低级方式的共享基于数据 结构的共享，高级方式的共享是是基于存储区的共享。<br>2)消息传递:进程之间的数据交换是以格式化的消息为单位。若通信的进程之间不存在可 以直接访问的共享空间，则必须利用操作系统提供的消息传递方法进行通信(发消息和接消 息)。分为直接通信方式和间接通信方式，直接通信方式:发送进程直接把消息发送给接受 进程，并将其挂在接受进程的消息缓冲队列上，接受进程从消息缓冲队列获取信息。间接通 信方式:发送进程把消息发给某个中间实体，接受进程从中间实体取得消息。这种中间实体 一般称为信箱，这种通信方式又叫信箱通信方式。<br>3)管道通信:是消息传递的一种特殊方式，“管道”是指用于连接读进程和一个写进程以实现他们之间通信的一个共享文件，即 pipe 文件。管道机制必须提供一下三方面的协调能力: 互斥、同步、和确定对方存在。<br>管道只能采用半双工同信，及某一时刻只能单向传输。要实现父子进程双方互动通信，需要 定义两个管道。</p><h4 id="8-线程的概念和多线程模型"><a href="#8-线程的概念和多线程模型" class="headerlink" title="(8) 线程的概念和多线程模型"></a>(8) 线程的概念和多线程模型</h4><p>线程的引入:引入进程的目的，是为了使多个程序并发执行，以提高资源利用率和系统吞吐 量。引入线程的目的，是为了减少程序在并发执行时的时空开销，使 OS 具有更好的并发性。 线程可看做轻量级的进程，是一个基本的 CPU 执行单元，也是程序执行流的最小单元。引 入线程后，进程只作为除 CPU 外的系统资源分配单位，线程则作为处理机的分配单元。</p><p>线程与进程的比较:<br>1)调度:线程是独立调度的基本单位，进程是拥有资源的基本单位。同一进程中，线程切 换不会引起进程切换，不同进程中，线程切换会引起进程切换。<br>2)拥有资源:进程是拥有资源的基本单位，线程不拥有有系统资源。但线程可以访问隶属 进程的系统资源。<br>3)并发性:多个线程之间也可以并发执行。<br>4)系统开销: 由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、 I/O设备等，因此操作系统所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程CPU环境的保存及新调度到进程CPU环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。此外，由于同一进程内的多个线程共享进程的地址空间，因此，这些线程之间的同步与通信非常容易实现，甚至无需操作系统的干预。<br>5)地址空间和其他资源:进程的地址空间之间相互独立，，某进程内的线程对于其它进程不 可见。</p><p>线程属性:<br>线程的实现有两类:用户型线程，内核级线程<br>多线程模型:实现用户级线程和内核级线程的链接<br>1)多对一模型:多个用户级线程映射到一个内核级线程。用户级线程对内核级线程不可见。 优点:线程管理在用户空间进行，效率较高 缺点:一个线程在内核服务时被阻塞，整个进程都将被阻塞;多个线程不能并行的运行在多 个处理机上。<br>2)一对一模型:每个用户级线程映射到一个内核级线程 优点:一个进程阻塞后，允许另一个继续执行，并发能力较强。 缺点:创建线程开销较大，会影响到程序的性能。<br>3)多对多模型:将 n 个用户级线程映射到 m 个内核级线程上。m&lt;=n 特点:克服了前两者的不足，并继承其优点</p><h3 id="三、调度与死锁"><a href="#三、调度与死锁" class="headerlink" title="三、调度与死锁"></a>三、调度与死锁</h3><h4 id="1-调度的概念"><a href="#1-调度的概念" class="headerlink" title="(1)调度的概念"></a>(1)调度的概念</h4><p>处理机调度:从就绪队列按照一定的算法，选择一个进程，并将处理机分配给他运行。 </p><h4 id="2-调度队列模型"><a href="#2-调度队列模型" class="headerlink" title="(2)调度队列模型"></a>(2)调度队列模型</h4><p>一个作业从提交到开始，要经历三级调度:<br>1)作业调度(高级调度)，根据作业控制块中的信息，审查系统能否满足用户作业的资源 需求，并按照一定的算法，将外存后备队中选取某些队列调入内存，并为他们创建进程，分 配必要资源，属于内存和辅存之间的调度。频率较低。<br>2)低级调度(进程调度)，调度对象是进程，有抢占和非抢占两种方式。<br>3)中级调度:引入中级调度的目的主要是提高内存利用率和系统吞吐量。是那些暂时不能 运行的进程不占用宝贵的内存资源，把他们调至外存等待，此时进程状态为挂起状态。当这 些进程重新具备运行条件时，再将其调入内存。</p><h3 id="3-调度的基本准则与方式"><a href="#3-调度的基本准则与方式" class="headerlink" title="(3)调度的基本准则与方式"></a>(3)调度的基本准则与方式</h3><p>面向用户的准则:<br>1)周转时间短，掌握平均周转时间，带权周转时间。<br>2)响应时间快<br>3)截止时间保证<br>4)优先权准则</p><p> 面向系统的准则:<br> 1)系统吞吐率高<br> 2)处理机利用率高<br> 3)各类资源平衡利用</p><h4 id="4-各种调度算法及其评价"><a href="#4-各种调度算法及其评价" class="headerlink" title="(4)各种调度算法及其评价"></a>(4)各种调度算法及其评价</h4><p>1)先来先服务(FCFS)，有利于长作业(进程)，不利于短作业(进程)<br>2)短作业优先(SP(J)F)，缺点:对长作业不利，完全未考虑作业紧迫程度。<br>3)高优先权优先调度(FPF):又可分为抢占式优先权和非抢占式优先权，优先权有静态和 动态两种。<br>4)高相应比优先调度算法，相应比=(等待时间+要求服务时间)/要求服务时间，既考虑到短 作业，又考虑了作业到达的先后次序。但是要进行相应比的计算，增加了开销。<br>5)基于时间片转轮调度算法，多及反馈队列调度算法。</p><h4 id="5-死锁问题及其处理方法，包括死锁的概念和原因，产生死锁的必要条件，死锁处理策-略，死锁的预防、避免、以及检测和解除。"><a href="#5-死锁问题及其处理方法，包括死锁的概念和原因，产生死锁的必要条件，死锁处理策-略，死锁的预防、避免、以及检测和解除。" class="headerlink" title="(5)死锁问题及其处理方法，包括死锁的概念和原因，产生死锁的必要条件，死锁处理策 略，死锁的预防、避免、以及检测和解除。"></a>(5)死锁问题及其处理方法，包括死锁的概念和原因，产生死锁的必要条件，死锁处理策 略，死锁的预防、避免、以及检测和解除。</h4><p>死锁:多个进程在运行过程中因争夺资源而造成的一种僵局。<br> 产生死锁的原因:<br> 1、竞争资源，只有对不可剥夺资源的竞争才可能导致死锁，对可剥夺资 源的竞争不会导致死锁<br> 2、进程间推进顺序非法 产生死锁的必要条件:<br> 1)互斥条件，进程所分配的资源进行排他性使用，即在一段时间某 资源只能由一个进程占用。<br> 2)请求和保持条件，进程已经保持了至少一个资源，又提出了 新的资源请求，而该资源又被其他资源占有，此时请求进程阻塞，但又对自己获得的其他资 源不放。<br> 3)不剥夺条件，进程已获得的资源，在未使用完之前不能被剥夺，只能在使用完 时由自己释放。<br> 4)环路等待条件，发生死锁时，必然存在一个进程—-资源的环形链。 </p><p>死锁处理的基本方法:<br>1)预防死锁<br>2)避免死锁<br>3)检测死锁<br>4)解除死锁 </p><p>预防死锁:使四个必要条件的 2,3,4 之一不能成立，<br>1)摒弃“请求和保持”条件<br>2)摒弃“不剥 夺”条件<br>3)摒弃“环路等待”条件 </p><p>避免死锁:银行家算法，采用预分配策略检查分配完成时，系统是否属于安全状态，重点掌握。<br>安全状态:能找到一个资源分配的序列能让所有进程都顺利完成。<br>死锁的检测:注意资源分配图和死锁定理</p><p>死锁的解除:三种方法:<br>1)剥夺资源<br>2)撤销进程<br>3)进程回退</p>]]></content>
      
      
      
        <tags>
            
            <tag> 操作系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现简单的文件传输功能下:服务器端</title>
      <link href="/2020/05/28/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8A%9F%E8%83%BD%E4%B8%8B-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF/"/>
      <url>/2020/05/28/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8A%9F%E8%83%BD%E4%B8%8B-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<p>通过 socket 简单实现了文件传输功能下，服务器篇</p><a id="more"></a><h4 id="服务端代码-server-java"><a href="#服务端代码-server-java" class="headerlink" title="服务端代码  server.java"></a>服务端代码  server.java</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line">package files_upload;</span><br><span class="line"></span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.FileOutputStream;</span><br><span class="line">import java.io.InputStreamReader;</span><br><span class="line">import java.io.PrintStream;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 服务器端：读取客户端发送的文件</span><br><span class="line"> * </span><br><span class="line"> * @author quanluo</span><br><span class="line"> *</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class TaskFileServer &#123;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">System.out.println(&quot;Server&quot;);</span><br><span class="line">&#x2F;&#x2F; 1. 创建服务器</span><br><span class="line">ServerSocket server &#x3D; new ServerSocket(18888);</span><br><span class="line"></span><br><span class="line">while (true) &#123;</span><br><span class="line">&#x2F;&#x2F; 2. 建立连接，每获取一个客户端就开启一个线程</span><br><span class="line">Socket client &#x3D; server.accept();</span><br><span class="line">System.out.println(&quot;客户端已连接&quot;);</span><br><span class="line">new Thread(new TaskFileThread(client)).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class TaskFileThread implements Runnable &#123;</span><br><span class="line">private Socket client;</span><br><span class="line">private static Properties prop;</span><br><span class="line"></span><br><span class="line">static &#123;</span><br><span class="line">&#x2F;&#x2F; 从配置文件中读取dirSave，初始化DIR_SAVE</span><br><span class="line">prop &#x3D; new Properties();</span><br><span class="line">try &#123;</span><br><span class="line">prop.load(new InputStreamReader(new FileInputStream(&quot;C:\\Users\\Administrator\\Desktop\\fileServer.properties&quot;), &quot;GBK&quot;));</span><br><span class="line"></span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public final String DIR_SAVE &#x3D; prop.getProperty(&quot;dirSave&quot;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">public TaskFileThread(Socket client) &#123;</span><br><span class="line">this.client &#x3D; client;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void run() &#123;</span><br><span class="line">FileOutputStream fos &#x3D; null;</span><br><span class="line">try &#123;</span><br><span class="line">&#x2F;&#x2F; 将 client 的输入流包装为DataInputStream，用于接收客户端发送的文件名与文件</span><br><span class="line">DataInputStream dis &#x3D; new DataInputStream(client.getInputStream());</span><br><span class="line">PrintStream printer &#x3D; new PrintStream(client.getOutputStream());</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 读取文件名</span><br><span class="line">String filename &#x3D; dis.readUTF();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 调用getSaveFile()方法得到文件对象</span><br><span class="line">File file &#x3D; getSaveFile(filename);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 创建在服务器上写文件的FileOutputStream对象</span><br><span class="line">fos &#x3D; new FileOutputStream(file);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 定义缓冲区,边读边写</span><br><span class="line">byte[] buffer &#x3D; new byte[1024]; &#x2F;&#x2F; 1kb</span><br><span class="line">int count &#x3D; 0; &#x2F;&#x2F; 统计文件大小</span><br><span class="line">int length &#x3D; -1; &#x2F;&#x2F; 文件读取标识</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 读取输入流中的数据</span><br><span class="line">while ((length &#x3D; dis.read(buffer)) !&#x3D; -1) &#123;</span><br><span class="line">&#x2F;&#x2F; 写入文件中</span><br><span class="line">fos.write(buffer, 0, length);</span><br><span class="line">count +&#x3D; length; &#x2F;&#x2F; 统计数据长度</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fos.close();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 打印流用于向客户端发送信息</span><br><span class="line">int fileSize &#x3D; count&#x2F;1024; &#x2F;&#x2F; 文件大小，单位 KB</span><br><span class="line">printer.println(filename + &quot;&#x3D;&#x3D;&#x3D;上传成功：&quot; + fileSize + &quot;KB&quot;);</span><br><span class="line">printer.flush();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 显示接收到的文件的相关信息</span><br><span class="line">System.out.println(client.getLocalAddress().getHostAddress()+&quot;上传文件&#x3D;&#x3D;&gt;&quot; + filename + &quot;--&quot; + fileSize + &quot;KB&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;&#x2F;&#x2F; 关闭</span><br><span class="line">&#x2F;&#x2F;client.close();</span><br><span class="line"></span><br><span class="line">&#125; catch (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 保存客户端上传的文件</span><br><span class="line"> * </span><br><span class="line"> * @param filename 文件名</span><br><span class="line"> * @return 文件路径</span><br><span class="line"> *&#x2F;</span><br><span class="line">private File getSaveFile(String filename) &#123;</span><br><span class="line">String name, suffix;&#x2F;&#x2F; suffix：包含后缀的.</span><br><span class="line">&#x2F;&#x2F; 1. 查找文件名中最后一个.的位置，并以此拆分文件名与后缀</span><br><span class="line">int index &#x3D; filename.indexOf(&quot;.&quot;);</span><br><span class="line"></span><br><span class="line">name &#x3D; filename.substring(0, index);</span><br><span class="line">suffix &#x3D; filename.substring(index);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. 保存文件的目录</span><br><span class="line">&#x2F;&#x2F; 创建保存上传文件的目录对象</span><br><span class="line">File dirSave &#x3D; new File(DIR_SAVE);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 确保目录已存在</span><br><span class="line">if (!dirSave.exists()) &#123;</span><br><span class="line">dirSave.mkdirs();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3. 得到可用的文件名</span><br><span class="line">&#x2F;&#x2F; 在服务器上用客户端上传的文件名保存文件</span><br><span class="line">File file &#x3D; new File(dirSave, filename);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 循环判断，如果已经有同名文件，则加上(1)、(2)……，即加上(n)，但后缀名保持不变</span><br><span class="line">int count &#x3D; 1;</span><br><span class="line"></span><br><span class="line">while (file.exists()) &#123;</span><br><span class="line">filename &#x3D; String.format(&quot;%s(%d)%s&quot;, name, count++, suffix);</span><br><span class="line">file &#x3D; new File(dirSave,filename);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">return file;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="配置文件-fileServer-properties"><a href="#配置文件-fileServer-properties" class="headerlink" title="配置文件 fileServer.properties"></a>配置文件 fileServer.properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirSave&#x3D;C:\\Users\\Administrator\\Desktop\\temp</span><br></pre></td></tr></table></figure><p><font color=red>注意： 服务器需要开启相应端口的权限，不然会被拦住，无法实现文件传输</font></p>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> socket </tag>
            
            <tag> fileupload </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实现简单的文件传输功能上:客户端</title>
      <link href="/2020/05/28/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8A%9F%E8%83%BD%E4%B8%8A-%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
      <url>/2020/05/28/%E5%AE%9E%E7%8E%B0%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8A%9F%E8%83%BD%E4%B8%8A-%E5%AE%A2%E6%88%B7%E7%AB%AF/</url>
      
        <content type="html"><![CDATA[<p>通过 socket 简单实现了文件传输功能上，客户端篇</p><a id="more"></a><h5 id="客户端代码-client-java"><a href="#客户端代码-client-java" class="headerlink" title="客户端代码 client.java"></a>客户端代码 client.java</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">package files_upload;</span><br><span class="line"></span><br><span class="line">import java.io.BufferedReader;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStreamReader;</span><br><span class="line">import java.net.Socket;</span><br><span class="line">import java.util.Properties;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 客户端：上传文件到服务器</span><br><span class="line"> * </span><br><span class="line"> * @author quanluo</span><br><span class="line"> *</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class TaskFileClient &#123;</span><br><span class="line">private Socket client;</span><br><span class="line"></span><br><span class="line">public static void main(String[] args) throws Exception &#123;</span><br><span class="line">System.out.println(&quot;Client&quot;);</span><br><span class="line">new TaskFileClient();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public TaskFileClient() throws Exception &#123;</span><br><span class="line">&#x2F;&#x2F; 1. 读取配置文件中的服务器端 ip 地址，端口号，要上传的文件路径</span><br><span class="line">Properties prop &#x3D; new Properties();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 读取配置文件</span><br><span class="line">FileInputStream fis &#x3D; (new FileInputStream(&quot;E:\\eclipse-workspace\\files_upload\\bin\\files_upload\\fileClient.properties&quot;));</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用 GBK 字符集，防止加载配置文件时中文乱码</span><br><span class="line">prop.load(new InputStreamReader(fis, &quot;GBK&quot;));</span><br><span class="line"></span><br><span class="line">String ip &#x3D; prop.getProperty(&quot;ip&quot;);</span><br><span class="line">int port &#x3D; Integer.parseInt(prop.getProperty(&quot;port&quot;));  </span><br><span class="line">String fileName &#x3D; prop.getProperty(&quot;filename&quot;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 检查该文件是否存在，不存在则程序结束</span><br><span class="line">File file &#x3D; new File(fileName);</span><br><span class="line"></span><br><span class="line">if (!file.exists()) &#123;</span><br><span class="line">System.out.println(&quot;待上传的文件不存在，运行结束！&quot;);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. 创建客户端</span><br><span class="line">client &#x3D; new Socket(ip, port);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 3. 操作 调用upload()方法上传文件</span><br><span class="line">upload(file);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 上传文件</span><br><span class="line">private void upload(File file) throws IOException &#123;</span><br><span class="line">&#x2F;&#x2F; 将 client 的输出流包装为 DataOutputStream</span><br><span class="line">DataOutputStream dos &#x3D; new DataOutputStream(client.getOutputStream());</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 先传文件名</span><br><span class="line">dos.writeUTF(file.getName());</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 创建FileInputStream对象</span><br><span class="line">FileInputStream fis &#x3D; new FileInputStream(file);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 定义缓冲区，边读边传</span><br><span class="line">byte buffer[] &#x3D; new byte[1024]; &#x2F;&#x2F; 1kb</span><br><span class="line">int length &#x3D; -1; &#x2F;&#x2F; 文件读取标识</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 将输出流中的数据读到缓冲区，length &gt; 0 则代表数据未读取完毕</span><br><span class="line">while((length &#x3D; fis.read(buffer)) !&#x3D; -1) &#123; </span><br><span class="line">&#x2F;&#x2F; 发送此数据</span><br><span class="line">dos.write(buffer, 0, length);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 关闭客户端输出流，发送结束</span><br><span class="line">client.shutdownOutput();</span><br><span class="line">fis.close();</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 接收服务端返回的结果，并输出到控制台</span><br><span class="line">BufferedReader reader &#x3D; new BufferedReader(new InputStreamReader(client.getInputStream()));</span><br><span class="line">System.out.println(reader.readLine());</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 关闭客户端</span><br><span class="line">client.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="配置文件-fileClient-properties"><a href="#配置文件-fileClient-properties" class="headerlink" title="配置文件   fileClient.properties"></a>配置文件   fileClient.properties</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip&#x3D;192.168.1.107</span><br><span class="line">port&#x3D;18889</span><br><span class="line">filename&#x3D;C:\\Users\\Administrator\\Desktop\\Quicksort.mkv</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> socket </tag>
            
            <tag> fileupload </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决关于使用Selenium WebDriver 在Python打开浏览器时出错</title>
      <link href="/2020/05/27/%E8%A7%A3%E5%86%B3%E5%85%B3%E4%BA%8E%E4%BD%BF%E7%94%A8Selenium-WebDriver-%E5%9C%A8Python%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E6%97%B6%E5%87%BA%E9%94%99/"/>
      <url>/2020/05/27/%E8%A7%A3%E5%86%B3%E5%85%B3%E4%BA%8E%E4%BD%BF%E7%94%A8Selenium-WebDriver-%E5%9C%A8Python%E6%89%93%E5%BC%80%E6%B5%8F%E8%A7%88%E5%99%A8%E6%97%B6%E5%87%BA%E9%94%99/</url>
      
        <content type="html"><![CDATA[<p>解决关于使用Selenium WebDriver 在Python打开浏览器时出错问题</p><a id="more"></a><p>错误1：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">File <span class="string">"E:/codes/python/script.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">driver.get(<span class="string">"http://www.python.org"</span>)</span><br><span class="line">TypeError: get() missing <span class="number">1</span> required positional argument: <span class="string">'url'</span></span><br></pre></td></tr></table></figure><p>错误2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SessionNotCreatedException: Message: session <span class="keyword">not</span> created: This version of ChromeDriver only supports Chrome version <span class="number">81</span></span><br></pre></td></tr></table></figure><p>解决办法：<br>使用webdrive管理器解决这类问题。<br>您可以使用webdrive-manager自动使用正确的chromedriver。安装webdrive-manager：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install webdriver-manager</span><br></pre></td></tr></table></figure><p>然后如下所示在python中使用驱动程序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> webdriver_manager.chrome <span class="keyword">import</span> ChromeDriverManager</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(ChromeDriverManager().install())</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> webdriver_manager.chrome <span class="keyword">import</span> ChromeDriverManager</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(ChromeDriverManager().install())</span><br><span class="line">driver.get(<span class="string">'http://quanluo.github.io/'</span>)</span><br><span class="line">driver.get_screenshot_as_file(<span class="string">"123.png"</span>)</span><br><span class="line">driver.quit()</span><br><span class="line"><span class="comment"># driver.close()</span></span><br><span class="line">print(<span class="string">'ok'</span>)</span><br></pre></td></tr></table></figure><p>得到网页截图：<br><img src="https://img-blog.csdnimg.cn/20200527200630777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>表明问题已解决。</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Selenium </tag>
            
            <tag> WebDriver </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mailto links 在chrome不工作问题解决</title>
      <link href="/2020/05/26/Mailto-links-%E5%9C%A8chrome%E4%B8%8D%E5%B7%A5%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
      <url>/2020/05/26/Mailto-links-%E5%9C%A8chrome%E4%B8%8D%E5%B7%A5%E4%BD%9C%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
      
        <content type="html"><![CDATA[<p>Mailto links 在chrome不工作问题，是因为在chrome设置中没有设置的原因。<br>我们需要更改相应的设置。<br>我们通访问 <a href="chrome://settings/handlers">chrome://settings/handlers</a> 链接，修改以下内容：</p><a id="more"></a><p><strong>允许网站要求成为协议的默认处理程序（推荐）</strong>—–允许<br>并将下方电子邮件 选中设置为<strong>默认</strong>即可</p><p><img src="https://img-blog.csdnimg.cn/20200526200208367.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><hr><p>这些弄完后我们就可以使用 mailto links了：</p><p><img src="https://img-blog.csdnimg.cn/20200526200341167.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200526200420269.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Mailto </tag>
            
            <tag> chrome </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+yilia添加RSS订阅功能</title>
      <link href="/2020/05/26/hexo-yilia%E6%B7%BB%E5%8A%A0RSS%E8%AE%A2%E9%98%85%E5%8A%9F%E8%83%BD/"/>
      <url>/2020/05/26/hexo-yilia%E6%B7%BB%E5%8A%A0RSS%E8%AE%A2%E9%98%85%E5%8A%9F%E8%83%BD/</url>
      
        <content type="html"><![CDATA[<p>最近自己在往自己的个人博客添加RSS订阅功能，走了些坑，所以在这里想将这些记录下，也好让其他同学们想添加RSS的不用踩坑了。<br>本文添加RSS订阅功能共需要四步。</p><a id="more"></a><h3 id="第一步安装插件"><a href="#第一步安装插件" class="headerlink" title="第一步安装插件"></a>第一步安装插件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed</span><br></pre></td></tr></table></figure><p>安装插件的时候记住是在自己博客的根目录上安装，<br>如果npm安装失败，我建议使用 <code>cnpm</code> 安装<br>首先我们先安装 <code>cnpm</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br></pre></td></tr></table></figure><p>然后使用：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install hexo-generator-feed</span><br></pre></td></tr></table></figure><p>进行安装（推荐）</p><h3 id="第一部成功后，进行第二步在hexo根目录配置文件-config-yml中配置插件"><a href="#第一部成功后，进行第二步在hexo根目录配置文件-config-yml中配置插件" class="headerlink" title="第一部成功后，进行第二步在hexo根目录配置文件_config.yml中配置插件:"></a>第一部成功后，进行第二步在hexo根目录配置文件_config.yml中配置插件:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">plugins:</span><br><span class="line">  hexo-generator-feed</span><br><span class="line">#Feed Atom</span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20 # 最新的20篇文章</span><br></pre></td></tr></table></figure><h3 id="第三步开启主题的左侧边栏的RSS功能"><a href="#第三步开启主题的左侧边栏的RSS功能" class="headerlink" title="第三步开启主题的左侧边栏的RSS功能"></a>第三步开启主题的左侧边栏的RSS功能</h3><p>在主题的配置文件theme/yilia/_config.yml中进行设置:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># SubNav</span><br><span class="line">subnav:</span><br><span class="line">  rss: &quot;atom.xml&quot;</span><br></pre></td></tr></table></figure><h3 id="第四步重新生成文件并加载到远端"><a href="#第四步重新生成文件并加载到远端" class="headerlink" title="第四步重新生成文件并加载到远端"></a>第四步重新生成文件并加载到远端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure><hr><p>插件官方github网址：<a href="https://github.com/hexojs/hexo-generator-feed。" target="_blank" rel="noopener">https://github.com/hexojs/hexo-generator-feed。</a></p><hr><p><img src="https://images4.alphacoders.com/975/97548.jpg" alt=""></p>]]></content>
      
      
      
        <tags>
            
            <tag> yilia </tag>
            
            <tag> RSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我通过Python对自己的微信朋友圈进行了可视化分析得到了意想不到的答案</title>
      <link href="/2020/05/25/%E6%88%91%E9%80%9A%E8%BF%87Python%E5%AF%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%9C%8B%E5%8F%8B%E5%9C%88%E8%BF%9B%E8%A1%8C%E4%BA%86%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90%E5%BE%97%E5%88%B0%E4%BA%86%E6%84%8F%E6%83%B3%E4%B8%8D%E5%88%B0%E7%9A%84%E7%AD%94%E6%A1%88/"/>
      <url>/2020/05/25/%E6%88%91%E9%80%9A%E8%BF%87Python%E5%AF%B9%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BE%AE%E4%BF%A1%E6%9C%8B%E5%8F%8B%E5%9C%88%E8%BF%9B%E8%A1%8C%E4%BA%86%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%86%E6%9E%90%E5%BE%97%E5%88%B0%E4%BA%86%E6%84%8F%E6%83%B3%E4%B8%8D%E5%88%B0%E7%9A%84%E7%AD%94%E6%A1%88/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20200525221403758.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>@<a href="目录">TOC</a></p><h3 id="前提准备"><a href="#前提准备" class="headerlink" title="前提准备"></a>前提准备</h3><p>确保安装用到的模块和库：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">itchat</span><br><span class="line">pyecharts</span><br><span class="line">jieba</span><br><span class="line">wordcloud </span><br><span class="line">collections</span><br><span class="line">PIL</span><br></pre></td></tr></table></figure><h3 id="第一步获取朋友圈好友的数据"><a href="#第一步获取朋友圈好友的数据" class="headerlink" title="第一步获取朋友圈好友的数据"></a>第一步获取朋友圈好友的数据</h3><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="comment"># 获取数据</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_data</span><span class="params">()</span>:</span></span><br><span class="line">    itchat.auto_login()</span><br><span class="line">    friends = itchat.get_friends(update=<span class="literal">True</span>)  <span class="comment"># 返回一个包含用户信息字典的列表</span></span><br><span class="line">    <span class="keyword">return</span> friends</span><br></pre></td></tr></table></figure><h3 id="第二步处理数据，并存储到txt文件中"><a href="#第二步处理数据，并存储到txt文件中" class="headerlink" title="第二步处理数据，并存储到txt文件中"></a>第二步处理数据，并存储到txt文件中</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 处理数据</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_data</span><span class="params">(data)</span>:</span></span><br><span class="line">    friends = []</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> data[<span class="number">1</span>:]:  <span class="comment"># 因为第一个元素是自己的信息，去掉</span></span><br><span class="line">        friend = &#123;</span><br><span class="line">            <span class="string">'NickName'</span>: item[<span class="string">'NickName'</span>],  <span class="comment"># 昵称</span></span><br><span class="line">            <span class="string">'RemarkName'</span>: item[<span class="string">'RemarkName'</span>],  <span class="comment"># 备注名</span></span><br><span class="line">            <span class="string">'Sex'</span>: item[<span class="string">'Sex'</span>],  <span class="comment"># 性别：1男，2女，0未设置</span></span><br><span class="line">            <span class="string">'Province'</span>: item[<span class="string">'Province'</span>],  <span class="comment"># 省份</span></span><br><span class="line">            <span class="string">'City'</span>: item[<span class="string">'City'</span>],  <span class="comment"># 城市</span></span><br><span class="line">            <span class="string">'Signature'</span>: item[<span class="string">'Signature'</span>].replace(<span class="string">'\n'</span>, <span class="string">' '</span>).replace(<span class="string">','</span>, <span class="string">' '</span>),  <span class="comment"># 个性签名（处理签名内容换行的情况）</span></span><br><span class="line">           &#125;</span><br><span class="line">        <span class="comment">#print(friend)</span></span><br><span class="line">        friends.append(friend)</span><br><span class="line">    <span class="keyword">return</span> friends</span><br><span class="line"><span class="comment"># 存储数据，存储到txt文件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">save_to_txt</span><span class="params">()</span>:</span></span><br><span class="line">    friends = parse_data(get_data())</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> friends:</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'friends.txt'</span>, mode=<span class="string">'a'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(<span class="string">'%s,%s,%d,%s,%s,%s\n'</span> % ( item[<span class="string">'NickName'</span>], item[<span class="string">'RemarkName'</span>], item[<span class="string">'Sex'</span>], item[<span class="string">'Province'</span>], item[<span class="string">'City'</span>], item[<span class="string">'Signature'</span>],))</span><br></pre></td></tr></table></figure><h3 id="第三步开始分析，走起！"><a href="#第三步开始分析，走起！" class="headerlink" title="第三步开始分析，走起！"></a>第三步开始分析，走起！</h3><h4 id="3-1-分析朋友圈sex"><a href="#3-1-分析朋友圈sex" class="headerlink" title="3.1 分析朋友圈sex"></a>3.1 分析朋友圈sex</h4><p>通过分析我得知我的交际圈被male占领了，怪不得我还没有女朋友呢！不过也不完全对，毕竟我是计算机专业的，男女比例也达到了惊人的8：1，哎，遥遥无期啊，距离脱单。想起个段子，程序猿没有对象，可以 <strong>new</strong> 一个对象出来，哈哈！！！<img src="https://img-blog.csdnimg.cn/20200525222334974.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>看一下实现代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> Pie</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stastic_sex</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 获取所有性别</span></span><br><span class="line">    sex = []</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'friends.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        rows = f.readlines()</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">            print(row.split(<span class="string">','</span>)[<span class="number">2</span>])</span><br><span class="line">            sex.append(row.split(<span class="string">','</span>)[<span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 统计每个性别的数量</span></span><br><span class="line">    attr = [<span class="string">'帅哥'</span>, <span class="string">'美女'</span>, <span class="string">'未知'</span>]</span><br><span class="line">    value = [sex.count(<span class="string">'1'</span>), sex.count(<span class="string">'2'</span>), sex.count(<span class="string">'0'</span>)]</span><br><span class="line"></span><br><span class="line">    pie = Pie(<span class="string">'好友性别比例'</span>, <span class="string">'好友总人数：%d'</span> % len(sex), title_pos=<span class="string">'center'</span>)</span><br><span class="line">    pie.add(<span class="string">''</span>, attr, value, radius=[<span class="number">30</span>, <span class="number">75</span>], rosetype=<span class="string">'area'</span>, is_label_show=<span class="literal">True</span>,</span><br><span class="line">            is_legend_show=<span class="literal">True</span>, legend_top=<span class="string">'bottom'</span>,is_more_utils=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment"># pie.show_config()</span></span><br><span class="line">    pie.render(<span class="string">'好友性别比例.html'</span>)</span><br></pre></td></tr></table></figure><h4 id="3-2-分析好友昵称，看看起名都有什么个操作"><a href="#3-2-分析好友昵称，看看起名都有什么个操作" class="headerlink" title="3.2 分析好友昵称，看看起名都有什么个操作"></a>3.2 分析好友昵称，看看起名都有什么个操作</h4><p><img src="https://img-blog.csdnimg.cn/20200525222842294.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>好吧，朋友圈里老师挺多的，这个情有可原，但是这个什么<strong>明天</strong>是神马，都赶着明天集市吗，哈哈，又看了看其他的，嗯，我好友里面还算干净些，没什么牛逼哄哄的称号哈。想想自己的名字，嗯是不是该赶着潮流了<del>~</del></p><p>代码实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取全部的名字</span></span><br><span class="line">NickNames = []</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'friends.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    rows = f.readlines()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">        NickName = row.split(<span class="string">','</span>)[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> NickName != <span class="string">''</span>:</span><br><span class="line">            <span class="comment"># print(City)</span></span><br><span class="line">            NickNames.append(NickName)</span><br><span class="line"><span class="comment"># 设置分词 False精准模式分词、True全模式分词</span></span><br><span class="line">split = jieba.cut(str(NickNames), cut_all=<span class="literal">False</span>)</span><br><span class="line">words = <span class="string">' '</span>.join(split)  <span class="comment"># 以空格进行拼接</span></span><br><span class="line"><span class="comment"># print(words)</span></span><br><span class="line"><span class="comment"># WordCloud（）函数的词云参数分别表示：画布宽高、背景颜色、背景图形状、字体、屏蔽词、最大词的字体大小</span></span><br><span class="line">wc = WordCloud(width=<span class="number">1024</span>, height=<span class="number">768</span>, background_color=<span class="string">'white'</span>,  font_path=<span class="string">'STKAITI.TTF'</span>,max_font_size=<span class="number">400</span>, random_state=<span class="number">50</span>)</span><br><span class="line"><span class="comment"># 将分词后数据传入云图</span></span><br><span class="line">wc.generate_from_text(words)</span><br><span class="line">wc.to_file(<span class="string">'好友昵称词云.jpg'</span>)</span><br></pre></td></tr></table></figure><h4 id="3-3分析哪里来的"><a href="#3-3分析哪里来的" class="headerlink" title="3.3分析哪里来的"></a>3.3分析哪里来的</h4><p><img src="https://img-blog.csdnimg.cn/20200525223419119.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我不看不知道，一看吓一跳。这我以后嗯，可以放心了，劳资是的东北大汉，旁边兄弟那统统都是你愁啥，瞅你咋地，再瞅个试试，试试就试试，的，嗯，不错。不过最后我突然想起个段子，不知道当讲不当讲，反正笑笑是可以的：孩子的爸身体缸缸的,就是没有文化,没给几个孩子起名字,就按大小顺序管孩子叫大鳖犊子、二鳖犊子……。<br>哈哈哈。<br>话不多说，进入正题还是，看一下实现代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取全部的省份名</span></span><br><span class="line">Provinces = []</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'friends.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    rows = f.readlines()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">        Province = row.split(<span class="string">','</span>)[<span class="number">3</span>]</span><br><span class="line">        <span class="keyword">if</span> Province != <span class="string">''</span>:</span><br><span class="line">            <span class="comment"># print(City)</span></span><br><span class="line">           Provinces.append(Province)</span><br><span class="line"><span class="comment"># 设置分词 False精准模式分词、True全模式分词</span></span><br><span class="line">split = jieba.cut(str(Provinces), cut_all=<span class="literal">False</span>)</span><br><span class="line">words = <span class="string">' '</span>.join(split)  <span class="comment"># 以空格进行拼接</span></span><br><span class="line"><span class="comment"># print(words)</span></span><br><span class="line"><span class="comment"># WordCloud（）函数的词云参数分别表示：画布宽高、背景颜色、背景图形状、字体、屏蔽词、最大词的字体大小</span></span><br><span class="line">wc = WordCloud(width=<span class="number">1024</span>, height=<span class="number">768</span>, background_color=<span class="string">'white'</span>,  font_path=<span class="string">'STKAITI.TTF'</span>,max_font_size=<span class="number">400</span>, random_state=<span class="number">50</span>)</span><br><span class="line"><span class="comment"># 将分词后数据传入云图</span></span><br><span class="line">wc.generate_from_text(words)</span><br><span class="line">wc.to_file(<span class="string">'好友省份词云.jpg'</span>)</span><br></pre></td></tr></table></figure><p>我们再通过可视化画出一个Bar图来更加清楚下，虽然结果很好，就是不知道最后那个省份是个什么鬼，都哪里来的，。。。。：<br><img src="https://img-blog.csdnimg.cn/20200525224120110.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># utf-8</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="comment"># 导入Counter类，用于统计值出现的次数</span></span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> Bar</span><br><span class="line"></span><br><span class="line">Provinces = []</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'friends.txt'</span>, mode=<span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    rows = f.readlines()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">        Province = row.split(<span class="string">','</span>)[<span class="number">3</span>]</span><br><span class="line">        <span class="keyword">if</span> Province != <span class="string">''</span>:</span><br><span class="line">            Provinces.append(Province)</span><br><span class="line">words = []</span><br><span class="line"><span class="keyword">for</span> cutword <span class="keyword">in</span> jieba.cut(str(Provinces), cut_all=<span class="literal">False</span>):</span><br><span class="line">    <span class="keyword">if</span> cutword <span class="keyword">not</span> <span class="keyword">in</span> [<span class="string">'_'</span>, <span class="string">'-'</span>, <span class="string">','</span>, <span class="string">'('</span>, <span class="string">')'</span>, <span class="string">'（'</span>, <span class="string">'）'</span>, <span class="string">' '</span>, <span class="string">"'"</span>]:<span class="comment"># 排除下划线、短横线、逗号、空格、单引号 防止出错</span></span><br><span class="line">        words.append(cutword)</span><br><span class="line">data_top10 = Counter(words).most_common(<span class="number">10</span>)  <span class="comment"># 返回出现次数最多的前10条</span></span><br><span class="line"><span class="comment"># print(data_top10)</span></span><br><span class="line">bar = Bar(<span class="string">'好友省份数量统计TOP10'</span>, <span class="string">''</span>, title_pos=<span class="string">'center'</span>, width=<span class="number">1200</span>, height=<span class="number">600</span>)</span><br><span class="line">attr, value = bar.cast(data_top10)</span><br><span class="line">bar.add(<span class="string">''</span>, attr, value, visual_range=[<span class="number">0</span>, <span class="number">200</span>], is_visualmap=<span class="literal">True</span>, is_label_show=<span class="literal">True</span>)</span><br><span class="line">bar.render(<span class="string">'好友省份数量统计TOP10.html'</span>)</span><br></pre></td></tr></table></figure><h4 id="3-4分析朋友圈的个性签名"><a href="#3-4分析朋友圈的个性签名" class="headerlink" title="3.4分析朋友圈的个性签名"></a>3.4分析朋友圈的个性签名</h4><p>写到这里，我看了下数据，发现有很多人忘了写呀，这可是我需要的东西，你不写多不好。嗯我在也就这里说说。嘿嘿。不过说回来，通过词云分析我大概也分析出个东东来。<br>看来部分朋友，class没学好好啊，都搁这写呢！哈哈<br><img src="https://img-blog.csdnimg.cn/20200525224630987.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>代码实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取全部的个性签名</span></span><br><span class="line">Signatures = []</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'friends.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    rows = f.readlines()</span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">        Signature = row.split(<span class="string">','</span>)[<span class="number">5</span>]</span><br><span class="line">        <span class="keyword">if</span> Signature != <span class="string">''</span>:</span><br><span class="line">            <span class="comment"># print(City)</span></span><br><span class="line">            Signatures.append(Signature)</span><br><span class="line"><span class="comment"># 设置分词 False精准模式分词、True全模式分词</span></span><br><span class="line">split = jieba.cut(str(Signatures), cut_all=<span class="literal">False</span>)</span><br><span class="line">words = <span class="string">' '</span>.join(split)  <span class="comment"># 以空格进行拼接</span></span><br><span class="line"><span class="comment"># print(words)</span></span><br><span class="line"><span class="comment"># WordCloud（）函数的词云参数分别表示：画布宽高、背景颜色、背景图形状、字体、屏蔽词、最大词的字体大小</span></span><br><span class="line">wc = WordCloud(width=<span class="number">1024</span>, height=<span class="number">768</span>, background_color=<span class="string">'white'</span>,  font_path=<span class="string">'STKAITI.TTF'</span>,max_font_size=<span class="number">400</span>, random_state=<span class="number">50</span>)</span><br><span class="line"><span class="comment"># 将分词后数据传入云图</span></span><br><span class="line">wc.generate_from_text(words)</span><br><span class="line">wc.to_file(<span class="string">'好友个性签名词云.jpg'</span>)</span><br></pre></td></tr></table></figure><h4 id="最后了，重磅来袭，输出所有朋友圈的头像合成在一张图片上"><a href="#最后了，重磅来袭，输出所有朋友圈的头像合成在一张图片上" class="headerlink" title="最后了，重磅来袭，输出所有朋友圈的头像合成在一张图片上"></a>最后了，重磅来袭，输出所有朋友圈的头像合成在一张图片上</h4><p>先看下效果图，当然了，我打马赛克了，不然认识的人看见，发现是我写的，那我就准备<strong>new</strong>一个自己来了。开玩笑，哈哈。<br><img src="https://img-blog.csdnimg.cn/20200525225151434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>具体实现完整代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取数据</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_image</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 扫描二维码登陆微信，即通过网页版微信登陆</span></span><br><span class="line">    itchat.auto_login()</span><br><span class="line">    <span class="comment"># 返回一个包含用户信息字典的列表</span></span><br><span class="line">    friends = itchat.get_friends(update=<span class="literal">True</span>)</span><br><span class="line">    <span class="comment">#  在当前位置创建一个用于存储头像的目录wechatImages</span></span><br><span class="line">    base_path = <span class="string">'wechatImages'</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(base_path):</span><br><span class="line">        os.mkdir(base_path)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取所有好友头像</span></span><br><span class="line">    <span class="keyword">for</span> friend <span class="keyword">in</span> friends:</span><br><span class="line">        <span class="comment"># 获取头像数据</span></span><br><span class="line">        img_data = itchat.get_head_img(userName = friend[<span class="string">'UserName'</span>])</span><br><span class="line">        <span class="comment">#判断备注名是否为空</span></span><br><span class="line">        <span class="keyword">if</span> friend[<span class="string">'RemarkName'</span>] != <span class="string">''</span>:</span><br><span class="line">            img_name = friend[<span class="string">'RemarkName'</span>]</span><br><span class="line">        <span class="keyword">else</span> :</span><br><span class="line">            img_name = friend[<span class="string">'NickName'</span>]</span><br><span class="line">         <span class="comment">#   在实际操作中如果文件名中含有*标志，会报错。则直接可以将其替换掉</span></span><br><span class="line">        <span class="keyword">if</span> img_name <span class="keyword">is</span> <span class="string">"*"</span>:</span><br><span class="line">            img_name = <span class="string">""</span></span><br><span class="line">        <span class="comment">#通过os.path.join()函数来拼接文件名</span></span><br><span class="line">        img_file = os.path.join(base_path, img_name + <span class="string">'.jpg'</span>)</span><br><span class="line">        print(img_file)</span><br><span class="line">        <span class="keyword">with</span> open(img_file, <span class="string">'wb'</span>) <span class="keyword">as</span> file:</span><br><span class="line">            file.write(img_data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 拼接头像</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">join_image</span><span class="params">()</span>:</span></span><br><span class="line">    base_path = <span class="string">'wechatImages'</span></span><br><span class="line">    files = os.listdir(base_path) <span class="comment">#返回指定的文件或文件夹的名字列表</span></span><br><span class="line">    print(len(files))</span><br><span class="line">    each_size = int(math.sqrt(float(<span class="number">6400</span> * <span class="number">6400</span>) / len(files)))<span class="comment">#计算每个粘贴图片的边长</span></span><br><span class="line">    lines = int(<span class="number">6400</span> / each_size)<span class="comment">#计算总共有多少行</span></span><br><span class="line">    print(lines)</span><br><span class="line">    image = Image.new(<span class="string">'RGB'</span>, (<span class="number">6400</span>, <span class="number">6400</span>))<span class="comment"># new(mode, size, color=0) 定义一张大小为640*640大小的图片，不给出第三个参数默认为黑色</span></span><br><span class="line">    x = <span class="number">0</span> <span class="comment">#定义横坐标</span></span><br><span class="line">    y = <span class="number">0</span> <span class="comment">#定义纵坐标</span></span><br><span class="line">    <span class="keyword">for</span> file_name <span class="keyword">in</span> files:</span><br><span class="line">        img = Image.open(os.path.join(base_path, file_name)) <span class="comment">#找到/打开图片</span></span><br><span class="line">        img = img.resize((each_size, each_size), Image.ANTIALIAS)<span class="comment">#实现图片同比例缩放，Image.ANTIALIAS添加滤镜效果</span></span><br><span class="line">        image.paste(img, (x * each_size, y * each_size))<span class="comment">#将缩放后的照片放到对应的坐标下</span></span><br><span class="line">        x += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> x == lines:<span class="comment">#如果每行的粘贴内容够了，则换行</span></span><br><span class="line">            x = <span class="number">0</span></span><br><span class="line">            y += <span class="number">1</span></span><br><span class="line">    image.save(<span class="string">'jointPic.jpg'</span>)<span class="comment">#最后将全部的照片保存下来</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    <span class="comment"># download_image()</span></span><br><span class="line">    join_image()</span><br></pre></td></tr></table></figure><hr><p>写到这本片就完了，我的头发还是那么茂密！<br><img src="https://img-blog.csdnimg.cn/20200525225434908.png" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 数据可视化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IndexError: list index out of range的错误分析</title>
      <link href="/2020/05/25/IndexError-list-index-out-of-range%E7%9A%84%E9%94%99%E8%AF%AF%E5%88%86%E6%9E%90/"/>
      <url>/2020/05/25/IndexError-list-index-out-of-range%E7%9A%84%E9%94%99%E8%AF%AF%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>造成错误有以下两种情况：</p><h3 id="第1种"><a href="#第1种" class="headerlink" title="第1种"></a>第1种</h3><p><code>list[index]</code> index超出范围<br>index索引是从0开始的，因此如果list列表里有10个元素，那它最后一个元素的索引是9，而不是10。</p><h3 id="第2种"><a href="#第2种" class="headerlink" title="第2种"></a>第2种</h3><p>list是一个空列表，没有一个元素。<br>所以进行<code>list[index]</code>就会出现该错误。</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Java File学习笔记，文件批量更名</title>
      <link href="/2020/05/25/Java-File%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8C%E6%96%87%E4%BB%B6%E6%89%B9%E9%87%8F%E6%9B%B4%E5%90%8D/"/>
      <url>/2020/05/25/Java-File%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%8C%E6%96%87%E4%BB%B6%E6%89%B9%E9%87%8F%E6%9B%B4%E5%90%8D/</url>
      
        <content type="html"><![CDATA[<p>有了文件操作类的帮助，就可以针对目录或子目录中的名称进行自动修改。</p><p>实例：更改文件的后缀，将“.jpg”改为“.png”<br>流程如下：<br><img src="https://img-blog.csdnimg.cn/20200525172103359.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><a id="more"></a><p>代码实现：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">test1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">File file = <span class="keyword">new</span> File(<span class="string">"E:"</span> + File.separator + <span class="string">"demo"</span>);  <span class="comment">//给定修改目录</span></span><br><span class="line">renameDir(file);<span class="comment">//目录更名</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">renameDir</span><span class="params">(File file)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">File results[] = file.listFiles();<span class="comment">//列出目录中的全部内容</span></span><br><span class="line"><span class="keyword">if</span> (results != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> x=<span class="number">0</span>; x&lt;results.length; x++) &#123;<span class="comment">//循环列出子路径</span></span><br><span class="line">renameDir(results[x]);<span class="comment">//递归调用</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (file.isFile()) &#123;</span><br><span class="line">String filename = <span class="keyword">null</span>;<span class="comment">//文件名称</span></span><br><span class="line"><span class="keyword">if</span> (file.getName().endsWith(<span class="string">".jpg"</span>)) &#123;<span class="comment">// 是否以“.jpg”为后缀</span></span><br><span class="line">filename = file.getName().substring(<span class="number">0</span>, file.getName().lastIndexOf(<span class="string">"."</span>)) + <span class="string">".png"</span>;<span class="comment">//新的文件名</span></span><br><span class="line">File newfile = <span class="keyword">new</span> File(file.getParentFile(), filename);</span><br><span class="line">file.renameTo(newfile);<span class="comment">//重命名</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> File操作 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初学python网络编程socket，并实现文件传输【含源代码】</title>
      <link href="/2020/05/24/%E5%88%9D%E5%AD%A6python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8Bsocket%EF%BC%8C%E5%B9%B6%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E3%80%90%E5%90%AB%E6%BA%90%E4%BB%A3%E7%A0%81%E3%80%91/"/>
      <url>/2020/05/24/%E5%88%9D%E5%AD%A6python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8Bsocket%EF%BC%8C%E5%B9%B6%E5%AE%9E%E7%8E%B0%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E3%80%90%E5%90%AB%E6%BA%90%E4%BB%A3%E7%A0%81%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>@<a href="Socket">TOC</a></p><h3 id="什么是Socket"><a href="#什么是Socket" class="headerlink" title="什么是Socket"></a>什么是Socket</h3><p>socket又称“套接字”， 应用程序通常通过“套接字”向网络发出请求或者应答网络请求，使主机间或者一台计算机上的进程间可以通讯。</p><h3 id="socket-函数"><a href="#socket-函数" class="headerlink" title="socket()函数"></a>socket()函数</h3><p>Python 中，我们用 socket（）函数来创建套接字，语法格式如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">socket.socket(family, type, protocol)</span><br></pre></td></tr></table></figure><a id="more"></a><blockquote><p>参数： family: 套接字家族可以使AF_UNIX或者AF_INET<br>type:套接字类型可以根据是面向连接的还是非连接分为SOCK_STREAM或SOCK_DGRAM<br>protocol: 一般不填默认为0.</p></blockquote><h3 id="socket-对象内建方法"><a href="#socket-对象内建方法" class="headerlink" title="socket 对象内建方法"></a>socket 对象内建方法</h3><p>函数    描述<br>服务器端套接字:</p><blockquote><p>s.bind()    绑定地址（host,port）到套接字， 在AF_INET下,以元组（host,port）的形式表示地址。</p></blockquote><blockquote><p>s.listen()    开始TCP监听。backlog指定在拒绝连接之前，操作系统可以挂起的最大连接数量。该值至少为1，大部分应用程序设为5就可以了。</p></blockquote><blockquote><p>s.accept()    被动接受TCP客户端连接,(阻塞式)等待连接的到来 客户端套接字</p></blockquote><blockquote><p>s.connect()    主动初始化TCP服务器连接，。一般address的格式为元组（hostname,port），如果连接出错，返回socket.error错误。</p></blockquote><blockquote><p>s.connect_ex()    connect()函数的扩展版本,出错时返回出错码,而不是抛出异常 </p></blockquote><p>公共用途的套接字函数</p><blockquote><p>s.recv()    接收TCP数据，数据以字符串形式返回，bufsize指定要接收的最大数据量。flag提供有关消息的其他信息，通常可以忽略。</p></blockquote><blockquote><p>s.send()    发送TCP数据，将string中的数据发送到连接的套接字。返回值是要发送的字节数量，该数量可能小于string的字节大小。</p></blockquote><blockquote><p>s.sendall()    完整发送TCP数据，完整发送TCP数据。将string中的数据发送到连接的套接字，但在返回之前会尝试发送所有数据。成功返回None，失败则抛出异常。</p></blockquote><blockquote><p>s.recvfrom()    接收UDP数据，与recv()类似，但返回值是（data,address）。其中data是包含接收数据的字符串，address是发送数据的套接字地址。</p></blockquote><blockquote><p>s.sendto()    发送UDP数据，将数据发送到套接字，address是形式为（ipaddr，port）的元组，指定远程地址。返回值是发送的字节数。</p></blockquote><blockquote><p>s.close()    关闭套接字</p></blockquote><blockquote><p>s.getpeername()    返回连接套接字的远程地址。返回值通常是元组（ipaddr,port）。</p></blockquote><blockquote><p>s.getsockname()    返回套接字自己的地址。通常是一个元组(ipaddr,port)</p><p>s.setsockopt(level,optname,value)    设置给定套接字选项的值。</p><p>s.getsockopt(level,optname[.buflen])    返回套接字选项的值。</p></blockquote><blockquote><p>s.settimeout(timeout)    设置套接字操作的超时期，timeout是一个浮点数，单位是秒。值为None表示没有超时期。一般，超时期应该在刚创建套接字时设置，因为它们可能用于连接的操作（如connect()）</p></blockquote><blockquote><p>s.gettimeout()    返回当前超时期的值，单位是秒，如果没有设置超时期，则返回None。</p></blockquote><blockquote><p>s.fileno()    返回套接字的文件描述符。</p></blockquote><blockquote><p>s.setblocking(flag)    如果flag为0，则将套接字设为非阻塞模式，否则将套接字设为阻塞模式（默认值）。非阻塞模式下，如果调用recv()没有发现任何数据，或send()调用无法立即发送数据，那么将引起socket.error异常。</p></blockquote><blockquote><p>s.makefile()    创建一个与该套接字相关连的文件</p></blockquote><p><code>-----**** 上述来源于网络 ****-----------</code></p><h3 id="实例：实现文件传输"><a href="#实例：实现文件传输" class="headerlink" title="实例：实现文件传输"></a>实例：实现文件传输</h3><h5 id="实例演示："><a href="#实例演示：" class="headerlink" title="实例演示："></a>实例演示：</h5><p>服务器端打开<br><img src="https://img-blog.csdnimg.cn/2020051819535476.png" alt="在这里插入图片描述"><br>客户端运行，选择文件上传<br><img src="https://img-blog.csdnimg.cn/20200518195453528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>客户端文件上传完毕<br><img src="https://img-blog.csdnimg.cn/20200518195509316.png" alt="在这里插入图片描述"><br>服务器端收到文件<br><img src="https://img-blog.csdnimg.cn/2020051819555527.png" alt="在这里插入图片描述"><br><code>注：本次演示不是在局域网上，而是在实际上的服务器上的文件传输演示</code></p><h5 id="源代码："><a href="#源代码：" class="headerlink" title="源代码："></a>源代码：</h5><blockquote><p>客户端</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">author: 全洛</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> easygui <span class="keyword">as</span> eg</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="string">'''读取配置文件'''</span></span><br><span class="line">f = open(<span class="string">'clientconf.json'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">date = json.load(f)</span><br><span class="line">ip = date.get(<span class="string">'IP'</span>)</span><br><span class="line">port = date.get(<span class="string">'port'</span>)</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line"><span class="string">'''创建socket对象'''</span></span><br><span class="line">client = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="string">'''连接服务器， 指定IP和端口'''</span></span><br><span class="line">    client.connect((ip, port))</span><br><span class="line"></span><br><span class="line">    <span class="string">'''接收小于 1024 字节的数据'''</span></span><br><span class="line">    msg = client.recv(<span class="number">1024</span>)</span><br><span class="line"></span><br><span class="line">    <span class="string">'''输出连接成功信息'''</span></span><br><span class="line">    print(msg.decode(<span class="string">'utf-8'</span>))</span><br><span class="line"><span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">    print(<span class="string">f'连接服务器失败'</span>, e)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="string">'''选择发送的文件'''</span></span><br><span class="line">    filepath = eg.fileopenbox(title=<span class="string">'选择文件'</span>)</span><br><span class="line">    <span class="string">'''获取文件名,文件大小'''</span></span><br><span class="line">    filename = filepath.split(<span class="string">"\\"</span>)[<span class="number">-1</span>]</span><br><span class="line">    filesize = os.path.getsize(filepath)</span><br><span class="line">    <span class="comment"># 先将文件名传过去</span></span><br><span class="line">    <span class="comment"># 编码文件名</span></span><br><span class="line">    client.send(filename.encode())</span><br><span class="line">    time.sleep(<span class="number">0.5</span>)</span><br><span class="line">    <span class="comment"># 再将将文件大小传过去</span></span><br><span class="line">    <span class="comment"># 编码文件大小</span></span><br><span class="line">    client.send(filesize.to_bytes(filesize.bit_length(), byteorder=<span class="string">'big'</span>))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="string">'''传输文件'''</span></span><br><span class="line">        start_time = time.time()</span><br><span class="line">        <span class="keyword">with</span> open(filepath, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            size = <span class="number">0</span></span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                <span class="comment">#读取文件数据，每次1024KB</span></span><br><span class="line">                f_data = f.read(<span class="number">1024</span>)</span><br><span class="line">                <span class="comment"># 数据长度不为零，传输继续</span></span><br><span class="line">                <span class="keyword">if</span> f_data:</span><br><span class="line">                    client.send(f_data)</span><br><span class="line">                    size += len(f_data)</span><br><span class="line">                    <span class="keyword">if</span> time.time() - start_time == <span class="number">0</span>:</span><br><span class="line">                        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">                    speed = (size) / (time.time() - start_time)</span><br><span class="line">                    print(<span class="string">'\r'</span> + <span class="string">'【上传进度】:%s%.2f%%, Speed: %.2fMB/s'</span> % (<span class="string">'&gt;'</span> * int(size * <span class="number">50</span> / filesize), float(size / filesize * <span class="number">100</span>), float(speed / <span class="number">1024</span> / <span class="number">1024</span>)), end=<span class="string">' '</span>)</span><br><span class="line">                <span class="comment"># 数据长度为零传输完成</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    print(<span class="string">f'<span class="subst">&#123;filename&#125;</span>,<span class="subst">&#123;float(filesize/<span class="number">1024</span>/<span class="number">1024</span>):<span class="number">.2</span>f&#125;</span>MB, 传输完成'</span>)</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        print(<span class="string">f'传输异常'</span>, e)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    <span class="string">'''关闭客户端'''</span></span><br><span class="line">    client.close()</span><br></pre></td></tr></table></figure><blockquote><p>客户端配置：<br>{<br>  “IP”: “182.92.112.155”,<br>  “port”: 3636<br>}</p></blockquote><blockquote><p>服务器端</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">author: 全洛</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''导入配置文件'''</span></span><br><span class="line">f = open(<span class="string">'serverconf.json'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">dirsave = json.load(f).get(<span class="string">'dirSave'</span>)</span><br><span class="line">f.close()</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dirsave):  <span class="comment"># 看是否有该文件夹，没有则创建文件夹</span></span><br><span class="line">    os.mkdir(dirsave)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">server</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">''''''</span></span><br><span class="line">        <span class="string">''' 创建socket对象'''</span></span><br><span class="line">        self.server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"></span><br><span class="line">        <span class="string">'''获取本地'''</span></span><br><span class="line">        self.host = socket.gethostname()</span><br><span class="line"></span><br><span class="line">        <span class="string">'''设置端口'''</span></span><br><span class="line">        self.port = <span class="number">3636</span></span><br><span class="line"></span><br><span class="line">        <span class="string">'''绑定地址'''</span></span><br><span class="line">        self.server.bind((self.host, self.port))</span><br><span class="line"></span><br><span class="line">        <span class="string">'''设置最大连接数， 超过后排队'''</span></span><br><span class="line">        self.server.listen(<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line">        print(<span class="string">'服务器已上线\n等待客户端连接...\n'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">server100</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            <span class="string">'''建立客户端连接'''</span></span><br><span class="line">            client, addr = self.server.accept()</span><br><span class="line">            print(<span class="string">f'客户端: <span class="subst">&#123;str(addr)&#125;</span>, 连接上服务器'</span>)</span><br><span class="line">            msg = <span class="string">f'已连接到服务器<span class="subst">&#123;self.host&#125;</span>!\r\n'</span></span><br><span class="line">            client.send(msg.encode(<span class="string">'utf-8'</span>))</span><br><span class="line">            <span class="comment"># 有客户端连接后，创建一个线程给客户端</span></span><br><span class="line">            t1 = threading.Thread(self.taskfilethread(client))</span><br><span class="line">            <span class="comment"># 设置线程守护</span></span><br><span class="line">            t1.setDaemon(<span class="literal">True</span>)</span><br><span class="line">            <span class="comment"># 启动线程</span></span><br><span class="line">            t1.start()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">taskfilethread</span><span class="params">(self, client)</span>:</span></span><br><span class="line">        <span class="string">'''接收文件名,文件大小'''</span></span><br><span class="line">        filename = client.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="comment"># time.sleep(0.5)</span></span><br><span class="line">        filesize = client.recv(<span class="number">1024</span>)</span><br><span class="line">        <span class="comment"># 解码文件名,文件大小</span></span><br><span class="line">        filename = filename.decode()</span><br><span class="line">        filesize = int.from_bytes(filesize, byteorder=<span class="string">'big'</span>)</span><br><span class="line">        <span class="string">'''接收文件'''</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            f = open(dirsave+<span class="string">"\\"</span>+ filename, <span class="string">'wb'</span>)</span><br><span class="line">            size = <span class="number">0</span></span><br><span class="line">            start_time = time.time()</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                <span class="comment"># 接收数据</span></span><br><span class="line">                f_data = client.recv(<span class="number">1024</span>)</span><br><span class="line">                <span class="comment"># 数据长度不为零，接收继续</span></span><br><span class="line">                <span class="keyword">if</span> f_data:</span><br><span class="line">                    f.write(f_data)</span><br><span class="line">                    size += len(f_data)</span><br><span class="line">                    <span class="keyword">if</span> time.time() - start_time == <span class="number">0</span>:</span><br><span class="line">                        time.sleep(<span class="number">0.5</span>)</span><br><span class="line">                    speed = (size) / (time.time() - start_time)</span><br><span class="line">                    print(<span class="string">'\r'</span> + <span class="string">'【下载进度】:%s%.2f%%, Speed: %.2fMB/s'</span> % (<span class="string">'&gt;'</span> * int(size * <span class="number">50</span> / filesize), float(size / filesize * <span class="number">100</span>), float(speed/<span class="number">1024</span>/<span class="number">1024</span>)),end=<span class="string">' '</span>)</span><br><span class="line">                <span class="comment"># 数据长度为零接收完成</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            print(<span class="string">f'接收异常'</span>, e)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            f.flush()</span><br><span class="line">            print(<span class="string">f'<span class="subst">&#123;filename&#125;</span>,<span class="subst">&#123;float(filesize/<span class="number">1024</span>/<span class="number">1024</span>):<span class="number">.2</span>f&#125;</span>MB, 接收完成'</span>)</span><br><span class="line">            f.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ ==<span class="string">'__main__'</span>:</span><br><span class="line">    server = server()</span><br><span class="line">    server.server100()</span><br></pre></td></tr></table></figure><blockquote><p>服务器端配置：<br>{<br>  “dirSave”: “C:\Users\Administrator\Desktop\temp”<br>}</p></blockquote><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> socket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python可视化入门 plotly ，小白请进</title>
      <link href="/2020/05/24/python%E5%8F%AF%E8%A7%86%E5%8C%96%E5%85%A5%E9%97%A8-plotly-%EF%BC%8C%E5%B0%8F%E7%99%BD%E8%AF%B7%E8%BF%9B/"/>
      <url>/2020/05/24/python%E5%8F%AF%E8%A7%86%E5%8C%96%E5%85%A5%E9%97%A8-plotly-%EF%BC%8C%E5%B0%8F%E7%99%BD%E8%AF%B7%E8%BF%9B/</url>
      
        <content type="html"><![CDATA[<p><code>大佬看到这里就可以走了， 小白可以继续看了，本篇文章只是【plotly】入门级</code></p><blockquote><p>注意：本篇文章使用的是离线版本的plotly，没有用线上版的，直接在pycharm上运行的。</p></blockquote><p>@[TOC](入门篇 plotly)</p><h3 id="安装-plotly"><a href="#安装-plotly" class="headerlink" title="安装 plotly"></a>安装 <code>plotly</code></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install plotly</span><br></pre></td></tr></table></figure><h3 id="导入plotly模块"><a href="#导入plotly模块" class="headerlink" title="导入plotly模块"></a>导入<code>plotly</code>模块</h3><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> plotly.graph_objects <span class="keyword">as</span> go </span><br><span class="line"><span class="keyword">import</span> plotly.offline <span class="keyword">as</span> of  <span class="comment"># 这个为离线模式的导入方法</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd <span class="comment">#使用pandas处理csv数据</span></span><br></pre></td></tr></table></figure><h3 id="example1-Scatter"><a href="#example1-Scatter" class="headerlink" title="example1 Scatter"></a>example1 <code>Scatter</code></h3><p>通过<code>Scatter</code>方法画折线图：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">r'C:\Users\Administrator\Desktop\data\nz_weather.csv'</span>)</span><br><span class="line">print(data.head()) <span class="comment">#显示5条数据</span></span><br><span class="line"><span class="comment"># Scatter</span></span><br><span class="line">line1 = go.Scatter(y=data[<span class="string">'Auckland'</span>], x=data[<span class="string">'DATE'</span>], name=<span class="string">'Auckland'</span>)   <span class="comment"># name定义每条线的名称</span></span><br><span class="line">line2 = go.Scatter(y=data[<span class="string">'Wellington'</span>], x=data[<span class="string">'DATE'</span>], name=<span class="string">'Wellington'</span>)</span><br><span class="line">fig = go.Figure([line1, line2])</span><br><span class="line">fig.update_layout(</span><br><span class="line">    title = <span class="string">'New Zealand Weather'</span>, <span class="comment">#定义生成的plot 的标题</span></span><br><span class="line">    xaxis_title = <span class="string">'DATE'</span>,<span class="comment">#定义x坐标名称</span></span><br><span class="line">    yaxis_title = <span class="string">'Weather'</span><span class="comment">#定义y坐标名称</span></span><br><span class="line">)</span><br><span class="line">of.plot(fig)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用数据：</span><br><span class="line">      DATE  Auckland  Christchurch Dunedin Hamilton  Wellington</span><br><span class="line"><span class="number">0</span>  <span class="number">2000</span><span class="number">-01</span>     <span class="number">115.4</span>          <span class="number">47.2</span>   <span class="number">174.8</span>     <span class="number">96.2</span>        <span class="number">91.8</span></span><br><span class="line"><span class="number">1</span>  <span class="number">2000</span><span class="number">-02</span>       <span class="number">8.4</span>          <span class="number">25.2</span>      <span class="number">41</span>      <span class="number">8.2</span>        <span class="number">35.2</span></span><br><span class="line"><span class="number">2</span>  <span class="number">2000</span><span class="number">-03</span>      <span class="number">57.2</span>          <span class="number">60.8</span>    <span class="number">74.2</span>     <span class="number">33.8</span>        <span class="number">53.4</span></span><br><span class="line"><span class="number">3</span>  <span class="number">2000</span><span class="number">-04</span>     <span class="number">106.8</span>          <span class="number">58.2</span>      <span class="number">50</span>    <span class="number">129.6</span>       <span class="number">109.8</span></span><br><span class="line"><span class="number">4</span>  <span class="number">2000</span><span class="number">-05</span>     <span class="number">128.2</span>          <span class="number">62.0</span>      <span class="string">'-     98.2        78.2</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516190650770.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h3 id="example2-Bar"><a href="#example2-Bar" class="headerlink" title="example2 Bar"></a>example2 <code>Bar</code></h3><p>通过<code>Bar</code>画条形图：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bar  </span></span><br><span class="line"><span class="comment"># 由于数据有很多，我就挑选一年的数据做为示例</span></span><br><span class="line">data_2010 = data[(data[<span class="string">'DATE'</span>] &gt;= <span class="string">'2010-01'</span>) &amp; (data[<span class="string">'DATE'</span>] &lt; <span class="string">'2011-01'</span>)] </span><br><span class="line">bar1 = go.Bar(y=data_2010[<span class="string">'Auckland'</span>], x=data_2010[<span class="string">'DATE'</span>],</span><br><span class="line">              text = data_2010[<span class="string">'Auckland'</span>], textposition = <span class="string">'outside'</span>, name=<span class="string">'Auckland'</span>) <span class="comment"># </span></span><br><span class="line">bar2 = go.Bar(y=data_2010[<span class="string">'Wellington'</span>], x=data_2010[<span class="string">'DATE'</span>],</span><br><span class="line">              text = data_2010[<span class="string">'Wellington'</span>], textposition = <span class="string">'outside'</span>, name=<span class="string">'Wellington'</span>) <span class="comment"># textpositon 是将text数据显示在条形柱上， outside是外面， inside是里面 ；name 和上述Scatter一样</span></span><br><span class="line">fig = go.Figure([bar1,bar2])</span><br><span class="line">fig.update_layout(</span><br><span class="line">    title = <span class="string">'New Zealand Weather'</span>,</span><br><span class="line">    xaxis_title = <span class="string">'DATE'</span>,</span><br><span class="line">    yaxis_title = <span class="string">'Weather'</span>,</span><br><span class="line">)</span><br><span class="line">of.plot(fig)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516191714736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br><strong>注解图：</strong><br><img src="https://img-blog.csdnimg.cn/20200516191743146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h3 id="example3-Histogram"><a href="#example3-Histogram" class="headerlink" title="example3 Histogram"></a>example3 <code>Histogram</code></h3><p><code>Histogram</code>统计某列数据的次数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Histogram</span></span><br><span class="line">hist1 = go.Histogram(x=data[<span class="string">'Auckland'</span>], xbins=&#123;<span class="string">'size'</span>: <span class="number">10</span>&#125;, name=<span class="string">'Auckland'</span>) <span class="comment"># xbins=&#123;'size': 10&#125; 是以10为范围，统计数据次数</span></span><br><span class="line">hist2 = go.Histogram(x=data[<span class="string">'Wellington'</span>], xbins=&#123;<span class="string">'size'</span>: <span class="number">10</span>&#125;, name=<span class="string">'Wellington'</span>)</span><br><span class="line">fig = go.Figure([hist1, hist2])</span><br><span class="line">fig.update_layout(</span><br><span class="line">    title = <span class="string">'New Zealand Weather'</span>,</span><br><span class="line">    xaxis_title = <span class="string">'Weather'</span>,</span><br><span class="line">    yaxis_title = <span class="string">'count'</span>,</span><br><span class="line">    bargap = <span class="number">0.1</span>, <span class="comment"># 是柱与柱之间存在空隙</span></span><br><span class="line">)</span><br><span class="line">of.plot(fig)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516192114467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="example4-Express"><a href="#example4-Express" class="headerlink" title="example4 Express"></a>example4 <code>Express</code></h3><p><code>Express</code> 是一种更方便的制作图表的方法：</p><ul><li>导入Express<br><code>import plotly.express as px</code></li><li>使用<code>Express</code> 来完成example1的方法：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># plotly.express</span></span><br><span class="line"><span class="keyword">import</span> plotly.express <span class="keyword">as</span> px</span><br><span class="line">data = pd.read_csv(<span class="string">r'C:\Users\Administrator\Desktop\data\iris.csv'</span>)</span><br><span class="line">fig = px.scatter(data, x=<span class="string">'SepalLength'</span>, y=<span class="string">'SepalWidth'</span>,</span><br><span class="line">                 color=<span class="string">'Name'</span>,</span><br><span class="line">                 )  </span><br><span class="line">of.plot(fig)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用的数据：鸢尾花数据集</span><br><span class="line">   SepalLength  SepalWidth  PetalLength  PetalWidth         Name</span><br><span class="line"><span class="number">0</span>          <span class="number">5.1</span>         <span class="number">3.5</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  Iris-setosa</span><br><span class="line"><span class="number">1</span>          <span class="number">4.9</span>         <span class="number">3.0</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  Iris-setosa</span><br><span class="line"><span class="number">2</span>          <span class="number">4.7</span>         <span class="number">3.2</span>          <span class="number">1.3</span>         <span class="number">0.2</span>  Iris-setosa</span><br><span class="line"><span class="number">3</span>          <span class="number">4.6</span>         <span class="number">3.1</span>          <span class="number">1.5</span>         <span class="number">0.2</span>  Iris-setosa</span><br><span class="line"><span class="number">4</span>          <span class="number">5.0</span>         <span class="number">3.6</span>          <span class="number">1.4</span>         <span class="number">0.2</span>  Iris-setosa</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516193604176.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h3 id="example5-pie"><a href="#example5-pie" class="headerlink" title="example5 pie"></a>example5 <code>pie</code></h3><p>通过Express方法生成饼图:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">r'C:\Users\Administrator\Desktop\data\pie-charts-with-excel.csv'</span>)</span><br><span class="line">print(data.head())</span><br><span class="line">fig = px.pie(data, names=data[<span class="string">'Label'</span>], values=data[<span class="string">'Values'</span>], title=<span class="string">'pie-charts-with-excel'</span>,)</span><br><span class="line">of.plot(fig)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用数据：</span><br><span class="line">   Unnamed: <span class="number">0</span>   Label  Values</span><br><span class="line"><span class="number">0</span>           <span class="number">0</span>  ZDS.FY      <span class="number">70</span></span><br><span class="line"><span class="number">1</span>           <span class="number">1</span>  RPF.JV      <span class="number">20</span></span><br><span class="line"><span class="number">2</span>           <span class="number">2</span>  ACC.UM      <span class="number">17</span></span><br><span class="line"><span class="number">3</span>           <span class="number">3</span>  NCY.LC      <span class="number">76</span></span><br><span class="line"><span class="number">4</span>           <span class="number">4</span>  EIK.JE      <span class="number">99</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516194652490.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h3 id="example6-3D"><a href="#example6-3D" class="headerlink" title="example6 3D"></a>example6 <code>3D</code></h3><ul><li>普通方法生成3D plot</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 3D</span></span><br><span class="line">data1 = pd.read_csv(<span class="string">r'C:\Users\Administrator\Desktop\data\3d-line1.csv'</span>)</span><br><span class="line"><span class="comment">#print(data1.head())</span></span><br><span class="line">line1 = go.Scatter3d(x=data1[<span class="string">'x'</span>], y=data1[<span class="string">'y'</span>], z=data1[<span class="string">'z'</span>],</span><br><span class="line">                     mode=<span class="string">'markers'</span>, marker=&#123;<span class="string">'size'</span>: <span class="number">3</span>, <span class="string">'color'</span>: data1[<span class="string">'color'</span>]&#125;)</span><br><span class="line">fig4 = go.Figure(line1)</span><br><span class="line">of.plot(fig4)</span><br></pre></td></tr></table></figure><ul><li>Express方法生成3D plot</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fig5 = px.scatter_3d(data1, x=<span class="string">'x'</span>, y=<span class="string">'y'</span>, z=<span class="string">'z'</span>, color=<span class="string">'color'</span>)</span><br><span class="line">of.plot(fig5)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用数据：</span><br><span class="line">            x         y         z  color</span><br><span class="line"><span class="number">0</span>  <span class="number">100.000000</span>  <span class="number">0.613222</span>  <span class="number">0.734706</span>      <span class="number">0</span></span><br><span class="line"><span class="number">1</span>   <span class="number">99.238875</span>  <span class="number">0.589852</span>  <span class="number">0.781320</span>      <span class="number">0</span></span><br><span class="line"><span class="number">2</span>   <span class="number">99.559608</span>  <span class="number">0.599743</span>  <span class="number">0.762566</span>      <span class="number">0</span></span><br><span class="line"><span class="number">3</span>   <span class="number">97.931425</span>  <span class="number">0.549296</span>  <span class="number">0.859966</span>      <span class="number">0</span></span><br><span class="line"><span class="number">4</span>   <span class="number">96.837832</span>  <span class="number">0.515613</span>  <span class="number">0.927150</span>      <span class="number">0</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516195018492.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h3 id="example7-Densitymapbox"><a href="#example7-Densitymapbox" class="headerlink" title="example7 Densitymapbox"></a>example7 <code>Densitymapbox</code></h3><p><strong>生成地图数据：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = pd.read_csv(<span class="string">r'C:\Users\Administrator\Desktop\data\earthquakes.csv'</span>)</span><br><span class="line"><span class="comment"># print(data.head())</span></span><br><span class="line">my_map = go.Densitymapbox(lat=data[<span class="string">'Latitude'</span>], lon=data[<span class="string">'Longitude'</span>], z=data[<span class="string">'Magnitude'</span>], radius=<span class="number">4</span>)</span><br><span class="line">fig = go.Figure(my_map)</span><br><span class="line">fig.update_layout(mapbox_style=<span class="string">'open-street-map'</span>)  <span class="comment">#必须有这个地图参数</span></span><br><span class="line"> <span class="comment">#可以使用的免费地图："open-street-map", "carto-positron", "carto-darkmatter", "stamen-terrain", "stamen-toner" or "stamen-watercolor"</span></span><br><span class="line">of.plot(fig)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">使用数据：</span><br><span class="line">         Date  Latitude  Longitude  Magnitude</span><br><span class="line"><span class="number">0</span>  <span class="number">01</span>/<span class="number">02</span>/<span class="number">1965</span>    <span class="number">19.246</span>    <span class="number">145.616</span>        <span class="number">6.0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">01</span>/<span class="number">04</span>/<span class="number">1965</span>     <span class="number">1.863</span>    <span class="number">127.352</span>        <span class="number">5.8</span></span><br><span class="line"><span class="number">2</span>  <span class="number">01</span>/<span class="number">05</span>/<span class="number">1965</span>   <span class="number">-20.579</span>   <span class="number">-173.972</span>        <span class="number">6.2</span></span><br><span class="line"><span class="number">3</span>  <span class="number">01</span>/<span class="number">08</span>/<span class="number">1965</span>   <span class="number">-59.076</span>    <span class="number">-23.557</span>        <span class="number">5.8</span></span><br><span class="line"><span class="number">4</span>  <span class="number">01</span>/<span class="number">09</span>/<span class="number">1965</span>    <span class="number">11.938</span>    <span class="number">126.427</span>        <span class="number">5.8</span></span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200516195248551.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h3 id="plotly官方文档："><a href="#plotly官方文档：" class="headerlink" title="plotly官方文档："></a><code>plotly</code>官方文档：</h3><p><a href="https://plotly.com/python/" target="_blank" rel="noopener">https://plotly.com/python/</a></p><hr><blockquote><p>结束语：<br>1.所有的数据都可以在plotly官方的github上找到。<br>2.如果我有什么讲得不好的地方欢迎大佬指点评论<br>3.原文链接<a href="https://blog.csdn.net/weixin_43347550/article/details/106163458" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43347550/article/details/106163458</a></p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> plotly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对一个DataFrame的一个列进行映射，得出一个新列。学习笔记</title>
      <link href="/2020/05/24/%E5%AF%B9%E4%B8%80%E4%B8%AADataFrame%E7%9A%84%E4%B8%80%E4%B8%AA%E5%88%97%E8%BF%9B%E8%A1%8C%E6%98%A0%E5%B0%84%EF%BC%8C%E5%BE%97%E5%87%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%97%E3%80%82%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2020/05/24/%E5%AF%B9%E4%B8%80%E4%B8%AADataFrame%E7%9A%84%E4%B8%80%E4%B8%AA%E5%88%97%E8%BF%9B%E8%A1%8C%E6%98%A0%E5%B0%84%EF%BC%8C%E5%BE%97%E5%87%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E5%88%97%E3%80%82%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<p>通过字典映射，将<code>DataFrame</code>某个文字列映射出一个数字列，使得在程序里使用更加方便。</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line">data = pd.DataFrame(&#123;<span class="string">'name'</span>: [<span class="string">'h1'</span>, <span class="string">'h1'</span>, <span class="string">'h2'</span>, <span class="string">'h2'</span> ,<span class="string">'h3'</span> ,<span class="string">'h4'</span>,<span class="string">'h3'</span> ,<span class="string">'h4'</span>]&#125;)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">  name</span></span><br><span class="line"><span class="string">0 h1</span></span><br><span class="line"><span class="string">1 h1</span></span><br><span class="line"><span class="string">2 h2</span></span><br><span class="line"><span class="string">3 h2</span></span><br><span class="line"><span class="string">4 h3</span></span><br><span class="line"><span class="string">5 h4</span></span><br><span class="line"><span class="string">6 h3</span></span><br><span class="line"><span class="string">7 h4</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">name_to_color = &#123;</span><br><span class="line">  <span class="string">'h1'</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">'h2'</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">'h3'</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">'h4'</span>: <span class="number">3</span>,</span><br><span class="line">&#125;</span><br><span class="line">data[<span class="string">'color'</span>] = data[<span class="string">'name'</span>].map(name_to_color)</span><br><span class="line">print(data)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">  name  color</span></span><br><span class="line"><span class="string">0   h1      0</span></span><br><span class="line"><span class="string">1   h1      0</span></span><br><span class="line"><span class="string">2   h2      1</span></span><br><span class="line"><span class="string">3   h2      1</span></span><br><span class="line"><span class="string">4   h3      2</span></span><br><span class="line"><span class="string">5   h4      3</span></span><br><span class="line"><span class="string">6   h3      2</span></span><br><span class="line"><span class="string">7   h4      3</span></span><br><span class="line"><span class="string">'''</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> DaraFrame </tag>
            
            <tag> 映射 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>论Python导入模块的三种修养【干货】</title>
      <link href="/2020/05/24/%E8%AE%BAPython%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E7%9A%84%E4%B8%89%E7%A7%8D%E4%BF%AE%E5%85%BB%E3%80%90%E5%B9%B2%E8%B4%A7%E3%80%91/"/>
      <url>/2020/05/24/%E8%AE%BAPython%E5%AF%BC%E5%85%A5%E6%A8%A1%E5%9D%97%E7%9A%84%E4%B8%89%E7%A7%8D%E4%BF%AE%E5%85%BB%E3%80%90%E5%B9%B2%E8%B4%A7%E3%80%91/</url>
      
        <content type="html"><![CDATA[<p>最进有些萌新老是混洗python导入模块的三种方法，甚至不知道各个都有什么作用，这回我来彻底讲解下，让你们不再迷茫。<br>@<a href="`Python导入模块有三种方法`">TOC</a></p><h4 id="修养一：-import-模块名"><a href="#修养一：-import-模块名" class="headerlink" title="修养一： import 模块名"></a><code>修养一： import 模块名</code></h4><p>直接使用 import ，但是再调用模块中的函数的时候，需要加上模块的命名空间。写个例子看看：</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用于计算摄氏度和华氏度的相互转换</span></span><br><span class="line"><span class="comment"># cf_t1.py</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">c2f</span><span class="params">(cel)</span>:</span></span><br><span class="line">fah = cel * <span class="number">1.8</span> + <span class="number">32</span></span><br><span class="line"><span class="keyword">return</span> fah</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f2c</span><span class="params">(fah)</span>:</span></span><br><span class="line">cel = (fah <span class="number">-32</span>) / <span class="number">1.8</span></span><br><span class="line"><span class="keyword">return</span> cel</span><br></pre></td></tr></table></figure><p>再写一个文件来导入刚才所写的模块：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cf_t2.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cf_t1</span><br><span class="line">print(<span class="string">"32摄氏度 = %.2f 华氏度"</span> % cf_t1.c2f(<span class="number">32</span>))</span><br><span class="line">print(<span class="string">"99华氏度 = %.2f 摄氏度"</span> % cf_t1.f2c(<span class="number">99</span>))</span><br></pre></td></tr></table></figure><p>程序实现如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">32</span>摄氏度 = <span class="number">89.60</span> 华氏度</span><br><span class="line"><span class="number">99</span>华氏度 = <span class="number">37.22</span> 摄氏度</span><br></pre></td></tr></table></figure><h4 id="修养二：-from-模块名-import-函数名"><a href="#修养二：-from-模块名-import-函数名" class="headerlink" title="修养二： from 模块名 import 函数名"></a><code>修养二： from 模块名 import 函数名</code></h4><p>第一种方法有些读者可能不是很喜欢，因为这个模块的名字太长了，每次调用模块里的函数都要写这么长的命名空间，真是费力不讨好又容易出错，所以第二种方法应运而生。<br>这种导入方法会直接将模块的命名空间覆盖进来，所以调用的时候也就不需要再加上命名空间了：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cf_t3.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> cf_t1 <span class="keyword">import</span> c2f, f2c</span><br><span class="line">print(<span class="string">"32摄氏度 = %.2f 华氏度"</span> % c2f(<span class="number">32</span>))</span><br><span class="line">print(<span class="string">"99华氏度 = %.2f 摄氏度"</span> % f2c(<span class="number">99</span>))</span><br></pre></td></tr></table></figure><p><strong>如果要写入的函数名过多，这里还可以使用通配符星号（*）来导入模块中所有的命名空间：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> cf_t1 <span class="keyword">import</span> *</span><br></pre></td></tr></table></figure><p>笔者个人观点：<code>在导入模块的时候应尽量避免通配符的导入，因为这样就不清楚当前名称空间中存在哪些名称了。为了清楚起见，最好坚持使用常规导入方法 （import 模块名）。（毕竟在写大项目的时候，某个函数出现了BUG，为了能找到这个函数是来自哪个模块是必不可少的，所以为了以后方便也不在乎多打点字的）建议：可以遵循PEP 8 的建议不使用通配符导入 。</code></p><h4 id="修养三：-import-模块名-as-新名字"><a href="#修养三：-import-模块名-as-新名字" class="headerlink" title="修养三： import 模块名 as 新名字"></a><code>修养三： import 模块名 as 新名字</code></h4><p>最好的总是留在最后，第三种方法结合了前两种的优势，使用这种方法可以给导入的命名空间起个新名字：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cf_t4.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cf_t1 <span class="keyword">as</span> tc</span><br><span class="line">print(<span class="string">"32摄氏度 = %.2f 华氏度"</span> % tc.c2f(<span class="number">32</span>))</span><br><span class="line">print(<span class="string">"99华氏度 = %.2f 摄氏度"</span> % tc.f2c(<span class="number">99</span>))</span><br></pre></td></tr></table></figure><p>提示：<code>强烈要求大家不要使用这种方法，因为这样做会使得命名空间的优势荡然无存，一不小心还会陷入名字混乱的局面。</code></p><hr><p>真是的，是不是发现了，说了这么多，到头来还是建议使用常规方法导入模块。<br>是的，这只是建议而已，这个其实是根据自身情况来判定的啦，多数情况下是使用常规方式而已。<br>因此你可根据自身情况灵活使用的。</p><hr><p>原文链接<a href="https://blog.csdn.net/weixin_43347550/article/details/106048759" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43347550/article/details/106048759</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> python导入模块 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scrapy实战----将数据存储到csv文件和MySQL数据库中</title>
      <link href="/2020/05/24/scrapy%E5%AE%9E%E6%88%98-%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%88%B0csv%E6%96%87%E4%BB%B6%E5%92%8CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD/"/>
      <url>/2020/05/24/scrapy%E5%AE%9E%E6%88%98-%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E5%88%B0csv%E6%96%87%E4%BB%B6%E5%92%8CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD/</url>
      
        <content type="html"><![CDATA[<h3 id="本章将通过爬取51jobs求职网站中的python职位信息来实现不同方式的数据存储的需求。"><a href="#本章将通过爬取51jobs求职网站中的python职位信息来实现不同方式的数据存储的需求。" class="headerlink" title="本章将通过爬取51jobs求职网站中的python职位信息来实现不同方式的数据存储的需求。"></a>本章将通过爬取51jobs求职网站中的python职位信息来实现不同方式的数据存储的需求。</h3><blockquote><p> github地址———&gt;<a href="https://github.com/JosenTong/51jobsinfo-spider" target="_blank" rel="noopener">源代码</a></p></blockquote><p>我们先来看一下：51jobs网站<br><img src="https://img-blog.csdnimg.cn/20200509230416564.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>我们需要的数据有，职位名 公司名 工作地点 薪资，这四个数据。<br>然后我们看一下他们都在哪<br>发现他们都在<br><img src="https://img-blog.csdnimg.cn/20200509230657826.png" alt="在这里插入图片描述"><br>这里面</p><a id="more"></a><p><img src="https://img-blog.csdnimg.cn/20200509230559453.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>需要的数据，相应的都在这里面<br><img src="https://img-blog.csdnimg.cn/20200509230815691.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>好了到这，我们已经知道了抓取的数据都在哪了。接下来我们开始写代码。</p><h4 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h4><p>使用命令<code>scrapy startproject  tongscrapy</code> 来创建一个scrapy框架。</p><p>然后使用<code>scrapy crawl py51jobs https://search.51job.com/list/000000,000000,0000,00,9,99,python,2,1.html</code> 来创建一个spider项目。</p><p>完成这些后打开 pycharm，将创建的项目，添加到pycharm中。</p><p>如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200509230155670.png" alt="在这里插入图片描述"><br>然后就是开始重写各个py文件了。</p><h4 id="重写-py51jobs-py"><a href="#重写-py51jobs-py" class="headerlink" title="重写 py51jobs.py"></a>重写 <code>py51jobs.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Py51jobsSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'py51jobs'</span></span><br><span class="line">    <span class="comment">#allowed_domains = ['51jobs.com']</span></span><br><span class="line">    start_urls = [<span class="string">'https://search.51job.com/list/000000,000000,0000,00,9,99,python,2,1.html'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        item = TongscrapyItem()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>, <span class="number">45</span>):<span class="comment">#每页共有40条数据</span></span><br><span class="line">            item[<span class="string">'position'</span>] = response.xpath(<span class="string">'//*[@id="resultList"]/div[&#123;num&#125;]/p/span/a/text()'</span>.format(num=i), first=<span class="literal">True</span>).extract_first().strip()</span><br><span class="line">            item[<span class="string">'company'</span>] = response.xpath(<span class="string">'//*[@id="resultList"]/div[&#123;num&#125;]/span[1]/a/text()'</span>.format(num=i), first=<span class="literal">True</span>).extract_first()</span><br><span class="line">            item[<span class="string">'place'</span>] = response.xpath(<span class="string">'//*[@id="resultList"]/div[&#123;num&#125;]/span[2]/text()'</span>.format(num=i), first=<span class="literal">True</span>).extract_first()</span><br><span class="line">            item[<span class="string">'salary'</span>] = response.xpath(<span class="string">'//*[@id="resultList"]/div[&#123;num&#125;]/span[3]/text()'</span>.format(num=i), first=<span class="literal">True</span>).extract_first()</span><br><span class="line">            print(<span class="string">'抓取完毕一条'</span>)</span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, <span class="number">10</span>): <span class="comment">#抓取页数，可自行更改</span></span><br><span class="line">            url = <span class="string">'https://search.51job.com/list/000000,000000,0000,00,9,99,python,2,'</span>+str(i)+<span class="string">'.html'</span></span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url, callback=self.parse)</span><br><span class="line">            print(<span class="string">'抓取完毕一页'</span>)</span><br></pre></td></tr></table></figure><h4 id="重写item-py"><a href="#重写item-py" class="headerlink" title="重写item.py"></a>重写<code>item.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TongscrapyItem</span><span class="params">(scrapy.Item)</span>:</span></span><br><span class="line">    <span class="comment"># define the fields for your item here like:</span></span><br><span class="line">    <span class="comment"># name = scrapy.Field()</span></span><br><span class="line">    position = scrapy.Field()</span><br><span class="line">    company = scrapy.Field()</span><br><span class="line">    place = scrapy.Field()</span><br><span class="line">    salary = scrapy.Field()</span><br></pre></td></tr></table></figure><h4 id="重写pipelines-py"><a href="#重写pipelines-py" class="headerlink" title="重写pipelines.py"></a>重写<code>pipelines.py</code></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据存储在csv文件里</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">savefileTongscrapyPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.file = open(<span class="string">'py51jobsinfo.csv'</span>, <span class="string">'w'</span>, newline=<span class="string">''</span>)</span><br><span class="line">        self.csvwriter = csv.writer(self.file)</span><br><span class="line">        self.csvwriter.writerow([<span class="string">'职位名称'</span>, <span class="string">'公司名'</span>, <span class="string">'地点'</span>, <span class="string">'薪资'</span>])</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        self.csvwriter.writerow([item[<span class="string">"position"</span>], item[<span class="string">"company"</span>], item[<span class="string">"place"</span>], item[<span class="string">"salary"</span>]])</span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">close_spider</span><span class="params">(self, spider)</span>:</span></span><br><span class="line">        self.file.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据存储在MySQL数据库里</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mysqlTongscrapyPipeline</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment"># 采用异步机制写入MySQL</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, dppool)</span>:</span></span><br><span class="line">        self.dppool = dppool</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 用固定方法 【写法固定】  获取配置文件内信息</span></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_settings</span><span class="params">(cls, settings)</span>:</span>  <span class="comment"># cls实际就是本类 MysqlTwistedPipeline</span></span><br><span class="line">        dpparms = dict(</span><br><span class="line">            host=settings[<span class="string">"MYSQL_HOST"</span>],</span><br><span class="line">            db=settings[<span class="string">"MYSQL_DBNAME"</span>],</span><br><span class="line">            user=settings[<span class="string">"MYSQL_USER"</span>],</span><br><span class="line">            passwd=settings[<span class="string">"MYSQL_PASSWD"</span>],</span><br><span class="line">            charset=<span class="string">"utf8"</span>,</span><br><span class="line">            cursorclass=MySQLdb.cursors.DictCursor,  <span class="comment"># 指定 curosr 类型  需要导入MySQLdb.cursors</span></span><br><span class="line">            use_unicode=<span class="literal">True</span></span><br><span class="line">        )</span><br><span class="line">        <span class="comment"># 由于要传递参数 所以参数名成要与connnect保持一致</span></span><br><span class="line">        <span class="comment"># 用的仍是MySQLdb的库 twisted并不提供</span></span><br><span class="line">        <span class="comment"># 异步操作</span></span><br><span class="line">        <span class="comment"># adbapi # 可以将MySQLdb的一些操作变成异步化操作</span></span><br><span class="line">        dppool = adbapi.ConnectionPool(<span class="string">"MySQLdb"</span>, **dpparms)  <span class="comment"># 告诉它使用的是哪个数据库模块  连接参数</span></span><br><span class="line">        <span class="comment"># 另外 以上dpparms的参数也可单独写，这样会造成参数列表过大</span></span><br><span class="line">        <span class="keyword">return</span> cls(dppool)  <span class="comment"># 即实例化一个pipeline</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span><span class="params">(self, item, spider)</span>:</span></span><br><span class="line">        <span class="comment"># 使用twisted将mysql插入编程异步操作</span></span><br><span class="line">        <span class="comment"># 指定操作方法和操作的数据 [下面会将方法异步处理]</span></span><br><span class="line">        query = self.dppool.runInteraction(self.do_insert, item)</span><br><span class="line">        <span class="comment"># AttributeError: 'Deferred' object has no attribute 'addErrorback'</span></span><br><span class="line">        <span class="comment"># query.addErrorback(self.handle_error)  # 处理异常</span></span><br><span class="line">        query.addErrback(self.handle_error)  <span class="comment"># 处理异常</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handle_error</span><span class="params">(self, failure)</span>:</span></span><br><span class="line">        <span class="comment"># 定义错误 处理异步插入的异常</span></span><br><span class="line">        print(failure)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">do_insert</span><span class="params">(self, cursor, item)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        此类内其他都可以看作是通用 针对不同的sql操作只需要改写这里即可了</span></span><br><span class="line"><span class="string">        :param cursor:</span></span><br><span class="line"><span class="string">        :param item:</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        insert_sql = <span class="string">"""insert into py51jobsinfo(position, company, place, salary)</span></span><br><span class="line"><span class="string">                                    values (%s, %s, %s, %s)"""</span></span><br><span class="line"></span><br><span class="line">        cursor.execute(insert_sql, (item[<span class="string">"position"</span>], item[<span class="string">"company"</span>], item[<span class="string">"place"</span>], item[<span class="string">"salary"</span>]))</span><br><span class="line">        <span class="keyword">return</span> item</span><br></pre></td></tr></table></figure><h4 id="最后重写settings-py-写入mysql数据库的配置信息和相应的ITEM-PIPELINES"><a href="#最后重写settings-py-写入mysql数据库的配置信息和相应的ITEM-PIPELINES" class="headerlink" title="最后重写settings.py,写入mysql数据库的配置信息和相应的ITEM_PIPELINES"></a>最后重写<code>settings.py</code>,写入mysql数据库的配置信息和相应的ITEM_PIPELINES</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">BOT_NAME = <span class="string">'tongscrapy'</span></span><br><span class="line"></span><br><span class="line">SPIDER_MODULES = [<span class="string">'tongscrapy.spiders'</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">'tongscrapy.spiders'</span></span><br><span class="line">ROBOTSTXT_OBEY = <span class="literal">True</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line"><span class="comment">#注意后头的参数是通道运行顺序，两个要不相同，不然会出错。</span></span><br><span class="line">   <span class="string">'tongscrapy.pipelines.savefileTongscrapyPipeline'</span>: <span class="number">300</span>,</span><br><span class="line">   <span class="string">'tongscrapy.pipelines.mysqlTongscrapyPipeline'</span>: <span class="number">500</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#Mysql数据库的配置信息</span></span><br><span class="line">MYSQL_HOST = <span class="string">'192.168.1.106'</span>     <span class="comment">#数据库地址</span></span><br><span class="line">MYSQL_DBNAME = <span class="string">'quanluo'</span>         <span class="comment">#数据库名字</span></span><br><span class="line">MYSQL_USER = <span class="string">'root'</span>             <span class="comment">#数据库账号</span></span><br><span class="line">MYSQL_PASSWD = <span class="string">'123'</span>         <span class="comment">#数据库密码</span></span><br><span class="line"></span><br><span class="line">MYSQL_PORT = <span class="number">3306</span>               <span class="comment">#数据库端口</span></span><br></pre></td></tr></table></figure><h4 id="运行py51jobs-py-并输出结果："><a href="#运行py51jobs-py-并输出结果：" class="headerlink" title="运行py51jobs.py,并输出结果："></a>运行<code>py51jobs.py</code>,并输出结果：</h4><p>使用代码：<code>scrapy crawl py51jobs</code><br>运行结果为（展示最后部分）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2020</span><span class="number">-05</span><span class="number">-09</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">08</span> [scrapy.core.scraper] DEBUG: Scraped <span class="keyword">from</span> &lt;<span class="number">200</span> https://search<span class="number">.51j</span>ob.com/list/<span class="number">000000</span>,<span class="number">000000</span>,<span class="number">0000</span>,<span class="number">00</span>,<span class="number">9</span>,<span class="number">99</span>,python,<span class="number">2</span>,<span class="number">4.</span>html&gt;</span><br><span class="line"><span class="literal">None</span></span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line">抓取完毕一页</span><br><span class="line"><span class="number">2020</span><span class="number">-05</span><span class="number">-09</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">08</span> [scrapy.core.engine] INFO: Closing spider (finished)</span><br><span class="line"><span class="number">2020</span><span class="number">-05</span><span class="number">-09</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">08</span> [scrapy.statscollectors] INFO: Dumping Scrapy stats:</span><br><span class="line">&#123;<span class="string">'downloader/request_bytes'</span>: <span class="number">7745</span>,</span><br><span class="line"> <span class="string">'downloader/request_count'</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">'downloader/request_method_count/GET'</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">'downloader/response_bytes'</span>: <span class="number">208750</span>,</span><br><span class="line"> <span class="string">'downloader/response_count'</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">'downloader/response_status_count/200'</span>: <span class="number">9</span>,</span><br><span class="line"> <span class="string">'downloader/response_status_count/404'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'dupefilter/filtered'</span>: <span class="number">64</span>,</span><br><span class="line"> <span class="string">'elapsed_time_seconds'</span>: <span class="number">8.845924</span>,</span><br><span class="line"> <span class="string">'finish_reason'</span>: <span class="string">'finished'</span>,</span><br><span class="line"> <span class="string">'finish_time'</span>: datetime.datetime(<span class="number">2020</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">15</span>, <span class="number">24</span>, <span class="number">8</span>, <span class="number">227376</span>),</span><br><span class="line"> <span class="string">'item_scraped_count'</span>: <span class="number">369</span>,</span><br><span class="line"> <span class="string">'log_count/DEBUG'</span>: <span class="number">380</span>,</span><br><span class="line"> <span class="string">'log_count/INFO'</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">'request_depth_max'</span>: <span class="number">2</span>,</span><br><span class="line"> <span class="string">'response_received_count'</span>: <span class="number">10</span>,</span><br><span class="line"> <span class="string">'robotstxt/request_count'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'robotstxt/response_count'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'robotstxt/response_status_count/404'</span>: <span class="number">1</span>,</span><br><span class="line"> <span class="string">'scheduler/dequeued'</span>: <span class="number">9</span>,</span><br><span class="line"> <span class="string">'scheduler/dequeued/memory'</span>: <span class="number">9</span>,</span><br><span class="line"> <span class="string">'scheduler/enqueued'</span>: <span class="number">9</span>,</span><br><span class="line"> <span class="string">'scheduler/enqueued/memory'</span>: <span class="number">9</span>,</span><br><span class="line"> <span class="string">'start_time'</span>: datetime.datetime(<span class="number">2020</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">15</span>, <span class="number">23</span>, <span class="number">59</span>, <span class="number">381452</span>)&#125;</span><br><span class="line"><span class="number">2020</span><span class="number">-05</span><span class="number">-09</span> <span class="number">23</span>:<span class="number">24</span>:<span class="number">08</span> [scrapy.core.engine] INFO: Spider closed (finished)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python中的!r和!s的字符串格式区别</title>
      <link href="/2020/05/24/Python%E4%B8%AD%E7%9A%84-r-%E5%92%8C-s-%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%BA%E5%88%AB/"/>
      <url>/2020/05/24/Python%E4%B8%AD%E7%9A%84-r-%E5%92%8C-s-%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%BA%E5%88%AB/</url>
      
        <content type="html"><![CDATA[<p><code>!s（apply str()）和!r（apply repr()）可用于在格式化之前转换值。</code></p><p>字符串之间的区别很容易看出来（因为repr字符串将包含外部引号）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'foo &#123;!s&#125;'</span>.format(<span class="string">'bar'</span>)</span><br><span class="line"><span class="string">'foo bar'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">'foo &#123;!r&#125;'</span>.format(<span class="string">'bar'</span>)</span><br><span class="line"><span class="string">"foo 'bar'"</span></span><br></pre></td></tr></table></figure><p>这两种方法之间的区别实际上主要取决于要格式化的对象。对于许多对象（例如那些不覆盖该<code>__str__</code>方法的对象），格式化输出将没有差异。</p><a id="more"></a><hr><p>在python中，有两种相当自然的选择来获取… <code>str</code>和<code>repr</code>的字符串表示形式。 <code>str</code>通常更人性化，<code>repr</code>更精确。也许<a href="https://docs.python.org/3/reference/datamodel.html#object.__repr__" target="_blank" rel="noopener">官方文档</a>是寻找差异的最佳地方：</p><p><code>object.__repr__(self)</code></p><ul><li><p>由<code>repr()</code>内置函数调用以计算对象的“正式”字符串表示形式。如果可能的话，这应该看起来像一个有效的Python表达式，可以用来重新创建具有相同值的对象（在适当的环境下）。如果这不可能，<code>&lt;...some useful description...&gt;</code>则应返回形式的字符串。返回值必须是一个字符串对象。如果定义了一个类，<code>__repr__()</code>但未定义<code>__str__()</code>，则<code>__repr__()</code>当需要该类的实例的“非正式”字符串表示形式时，也会使用该类。</p></li><li><p>这通常用于调试，因此重要的是，表示形式必须信息丰富且明确。</p></li></ul><p><code>object.__str__(self)</code></p><ul><li>由str（object）和内置函数format（）和print（）调用，以计算对象的“非正式”或可很好打印的字符串表示形式。返回值必须是一个字符串对象。</li><li>此方法的不同之处在于，<code>object.__repr__()</code>不期望<code>__str__()</code>返回有效的Python表达式：可以使用更方便或更简洁的表示形式。</li><li>内置类型object invokes定义的默认实现<code>object.__repr__()</code>。</li></ul><p>在<code>str.format</code>中，<code>!s</code>选择用于<code>str</code>设置对象格式，而<code>!r</code>选择<code>repr</code>设置值格式。</p><hr><p>最后再写个例子来更加的认识<code>!r</code>:🤭🤭🤭🤭🤭🤭🤭🤭🤭</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">'全洛'</span></span><br><span class="line">line = <span class="string">'Hello, World'</span></span><br><span class="line">hi = <span class="string">f'<span class="subst">&#123;name&#125;</span>: <span class="subst">&#123;line&#125;</span>'</span></span><br><span class="line">print(<span class="string">f'<span class="subst">&#123;hi!r&#125;</span>'</span>)</span><br></pre></td></tr></table></figure><p>输出结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'全洛: Hello, World'</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> !s!r </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>with语句还能这么用，你会吗?--with语句和上下文管理器</title>
      <link href="/2020/05/24/with%E8%AF%AD%E5%8F%A5%E8%BF%98%E8%83%BD%E8%BF%99%E4%B9%88%E7%94%A8%EF%BC%8C%E4%BD%A0%E4%BC%9A%E5%90%97-with%E8%AF%AD%E5%8F%A5%E5%92%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/"/>
      <url>/2020/05/24/with%E8%AF%AD%E5%8F%A5%E8%BF%98%E8%83%BD%E8%BF%99%E4%B9%88%E7%94%A8%EF%BC%8C%E4%BD%A0%E4%BC%9A%E5%90%97-with%E8%AF%AD%E5%8F%A5%E5%92%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>@<a href="with语句和上下文管理器">TOC</a></p><h4 id="启程"><a href="#启程" class="headerlink" title="启程"></a><code>启程</code></h4><p>&emsp;&emsp; <code>with 语句</code>究竟有哪些好处？它有助于简化一些通用资源管理模式，抽象出其中的功能，将其分解并重用。</p><p>&emsp;&emsp;若想充分的使用这个特性，比较好的办法是查看Python标准库的示例。内置的 <code>open()</code>函数就是一个很好的例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> open(<span class="string">'hello.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">f.write(<span class="string">'hello, world!'</span>)</span><br></pre></td></tr></table></figure><p>我们应该都知道打开文件的时候一般建议使用 <code>with 语句</code>，因为这样能确保打开的文件描述符在程序执行离开 <code>with语句</code> 的上下文后自动关闭。本质上来说，上面的代码示例可转换成下面这样：</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'hello.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f.write(<span class="string">'hello, world'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><p>很明显，这段代码比<code>with语句</code>冗长。 注意，当中的<code>try……finally 语句</code>也很重要，只关注其中的逻辑代码还不够：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'hello.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">f.write(<span class="string">'hello, world'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>如果在调用<code>f.write()</code>时发生异常，这段代码不能保证文件最后被关闭，因此程序可能会泄露文件描述符。此时<code>with语句</code>就派上用场了，它能够简化资源的获取和释放。</p><p><code>threading.Lock</code>类是python标准库中另一个比较好的示例，它有效地使用了<code>with语句</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">some_loke = threading.Lock()</span><br><span class="line"></span><br><span class="line"><span class="comment">#常见版：</span></span><br><span class="line">some_lock.acquire()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment">#执行某些操作.....</span></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    some_loke.release()</span><br><span class="line"></span><br><span class="line"><span class="comment">#改进版：</span></span><br><span class="line"><span class="keyword">with</span> some_loke:</span><br><span class="line">    <span class="comment">#执行某些操作.....</span></span><br></pre></td></tr></table></figure><p>在这两个例子中，使用<code>with语句</code>都可以抽象出大部分资源处理逻辑。不必每次都显示地写一个<code>try……finally语句</code>，<code>with语句</code>会自行处理。<br><code>with 语句</code>不仅让处理系统资源的代码更易读，而且由于绝对不会忘记清理获释放资源，因此还可以避免 <code>bug</code>或资源泄露。</p><h4 id="下面进行with语句的剖析，在自定义对象中支持with"><a href="#下面进行with语句的剖析，在自定义对象中支持with" class="headerlink" title="下面进行with语句的剖析，在自定义对象中支持with"></a><code>下面进行with语句的剖析，在自定义对象中支持with</code></h4><p>&emsp;&emsp; 无论是 <code>open()函数</code>和<code>threading.Lock类</code>本身，还是它们与<code>with语句</code>一起使用，这些都是没有什么特殊之处。只要实现所谓的<code>上下文管理器（context manager）</code>，就可以在自定义的类和函数中获得相同的功能。</p><p>对了，那<code>上下文管理器</code>是个什么鬼？这是一个简单的<strong>协议(或接口)</strong>,自定义对象需要遵循这个接口来支持<code>with语句</code>。总的来说，如果想将一个对象作为<code>上下文管理器</code>，需要做的就是向其中添加两个方法：<code>__enter__和__exit__方法</code>。python将在资源管理周期的适当时间调用这两种方法。</p><p>来看看实际代码，下面是<code>open()</code>上下文管理器的一个简单实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ManagedFile</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.file = open(self.name, <span class="string">'w'</span>)</span><br><span class="line">        <span class="keyword">return</span> self.file</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.file:</span><br><span class="line">            self.file.close()</span><br></pre></td></tr></table></figure><p>其中的<code>ManagedFile</code>类遵循上下文管理器协议，所以与原来的<code>open()</code>例子一样，也支持<code>with语句</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> ManagedFile(<span class="string">'hello.txt'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">'hello, world!'</span>)</span><br><span class="line">    f.write(<span class="string">'bey now'</span>)</span><br></pre></td></tr></table></figure><p>当执行流程进入<code>with语句</code>上下文时，Python会调用<code>__enter__</code>获取资源；离开<code>with</code>上下文时，Python会调用<code>__exit__</code>释放资源。</p><h4 id="进阶"><a href="#进阶" class="headerlink" title="进阶"></a><code>进阶</code></h4><p>如果想要管理的“资源”是某种报告生成程序中的文本缩进层次，可以编写下面这样的代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> Indenter() <span class="keyword">as</span> indent:</span><br><span class="line">    indent.print(<span class="string">'Hi'</span>)</span><br><span class="line">    <span class="keyword">with</span> indent:</span><br><span class="line">        indent.print(<span class="string">'hello'</span>)</span><br><span class="line">        <span class="keyword">with</span> indent:</span><br><span class="line">            indent.print(<span class="string">'quanluo'</span>)</span><br><span class="line">    indent.print(<span class="string">'Hey'</span>)</span><br></pre></td></tr></table></figure><p>这些语句读起来有点像用于缩进文本的领域特定语言（DSL）。注意这段代码多次进入离开相同的文本管理器，以此来更改缩进级别。运行这段代码会在控制台中整齐地显示出下面的内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Hi</span><br><span class="line">  hello</span><br><span class="line">    quanluo</span><br><span class="line">Hey</span><br></pre></td></tr></table></figure><p>那么如何实现一个<code>上下文管理器</code>来支持这种功能呢？<br>这是一个不错的练习，可以从中准确的了解<code>上下文管理器</code>的工作方式。<strong>因此在查看下面的实现之前，最好先花一些时间尝试自行实现。</strong></p><p>如果你已经准备好查看实现代码了，那么下面就是使用基于类的上下文管理器来实现的方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Indenter</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.level = <span class="number">0</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__enter__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.level += <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> self</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__exit__</span><span class="params">(self, exc_type, exc_val, exc_tb)</span>:</span></span><br><span class="line">        self.level -= <span class="number">1</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">print</span><span class="params">(self, text)</span>:</span></span><br><span class="line">        print(<span class="string">'  '</span> * self.level + text)</span><br></pre></td></tr></table></figure><p>感觉怎么样，和你自己想的有差别吗？<br>如果还不错，希望你现在能熟练地在自己的Python程序中使用<code>上下文管理器</code>和<code>with语句</code>。<br>这两个功能很不错，可以用来以更加有Python特色和可维护的方式处理资源管理问题。</p><h4 id="加深理解"><a href="#加深理解" class="headerlink" title="加深理解"></a><code>加深理解</code></h4><p>如果你还想再找一个练习来加深理解，可以尝试实现一个使用<code>time.time()</code>函数来测量代码块的执行时间的<code>上下文管理器</code>。<br>示例代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">with</span> times():</span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">1000001</span>):</span><br><span class="line">            count += i</span><br><span class="line">    print(count)</span><br></pre></td></tr></table></figure><p>运行这段代码会在命令行中显示下面的内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">500000500000</span></span><br><span class="line">程序运行时间为:<span class="number">0.15491032600402832</span>s</span><br></pre></td></tr></table></figure><p><strong>请自行编写实现该<code>times类</code>的代码。</strong></p><h4 id="探索"><a href="#探索" class="headerlink" title="探索"></a><code>探索</code></h4><p><code>with语句</code>也能用来与<code>装饰器</code>连用，可以自行在自己Python程序上试试.</p><hr><p><code>注： 如果想要关于实现times类的源代码请在下方评论区告诉我。我看见了会发给你。</code></p><hr><p>🔗原文链接：<a href="https://blog.csdn.net/weixin_43347550/article/details/105968879" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43347550/article/details/105968879</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> with </tag>
            
            <tag> 上下文管理器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python，通过一行代码输出python和库的版本信息</title>
      <link href="/2020/05/24/python%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BApython%E5%92%8C%E5%BA%93%E7%9A%84%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF/"/>
      <url>/2020/05/24/python%EF%BC%8C%E9%80%9A%E8%BF%87%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BApython%E5%92%8C%E5%BA%93%E7%9A%84%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<p><strong>话不多说先上效果图：</strong><br><img src="https://img-blog.csdnimg.cn/20200505185619150.png" alt="在这里插入图片描述"><br><strong>原理：通过自带的 ==__version__== 功能实现</strong><br>代码模板：</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># package_name version</span></span><br><span class="line"><span class="keyword">import</span> package_name</span><br><span class="line">print(<span class="string">'package_name: &#123;&#125;'</span>.format(package_name.__version__))</span><br></pre></td></tr></table></figure><p> <strong>注意:检查python版本需要修改代码，如下：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python version</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(<span class="string">'Python: &#123;&#125;'</span>.format(sys.version))</span><br></pre></td></tr></table></figure><p><strong>效果图实现代码：</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python version</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">print(<span class="string">'Python: &#123;&#125;'</span>.format(sys.version))</span><br><span class="line"></span><br><span class="line"><span class="comment"># requests</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">print(<span class="string">'requests: &#123;&#125;'</span>.format(requests.__version__))</span><br><span class="line"></span><br><span class="line"><span class="comment"># numpy</span></span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line">print(<span class="string">'numpy: &#123;&#125;'</span>.format(numpy.__version__))</span><br><span class="line"></span><br><span class="line"><span class="comment"># matplotlib</span></span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line">print(<span class="string">'matplotlib: &#123;&#125;'</span>.format(matplotlib.__version__))</span><br><span class="line"></span><br><span class="line"><span class="comment"># pandas</span></span><br><span class="line"><span class="keyword">import</span> pandas</span><br><span class="line">print(<span class="string">'pandas: &#123;&#125;'</span>.format(pandas.__version__))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一行代码让python的运行速度提高100倍</title>
      <link href="/2020/05/24/%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%A9python%E7%9A%84%E8%BF%90%E8%A1%8C%E9%80%9F%E5%BA%A6%E6%8F%90%E9%AB%98100%E5%80%8D/"/>
      <url>/2020/05/24/%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%A9python%E7%9A%84%E8%BF%90%E8%A1%8C%E9%80%9F%E5%BA%A6%E6%8F%90%E9%AB%98100%E5%80%8D/</url>
      
        <content type="html"><![CDATA[<p>我们先看一个原始代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    tt = time.time()</span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x, y):</span><br><span class="line">        s *= i</span><br><span class="line">    print(<span class="string">'time:&#123;&#125;'</span>.format(time.time() - tt))</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">print(foo(<span class="number">1</span>,<span class="number">100000000</span>))</span><br></pre></td></tr></table></figure><p>看一下运算时间结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time:<span class="number">8.983859300613403</span></span><br></pre></td></tr></table></figure><p>然后我们加一行代码，再看看结果：</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numba <span class="keyword">as</span> nu</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="meta">@nu.jit()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    tt = time.time()</span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x, y):</span><br><span class="line">        s *= i</span><br><span class="line">    print(<span class="string">'time:&#123;&#125;'</span>.format(time.time() - tt))</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">print(foo(<span class="number">1</span>,<span class="number">100000000</span>))</span><br></pre></td></tr></table></figure><p>看一下运算时间结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">time:<span class="number">0.16590428352355957</span></span><br></pre></td></tr></table></figure><p> <font color=red><strong>咦~好像快了不止100倍啊</strong></font></p><p> 我丢，厉害了我的<strong>一行代码</strong></p><p>下面来讲解一下神奇的 <strong>numba</strong>库</p><h5 id="如何使用numba"><a href="#如何使用numba" class="headerlink" title="如何使用numba"></a>如何使用numba</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numba <span class="keyword">as</span> nb</span><br></pre></td></tr></table></figure><h5 id="只用1行代码即可加速，对loop有奇效"><a href="#只用1行代码即可加速，对loop有奇效" class="headerlink" title="只用1行代码即可加速，对loop有奇效"></a>只用1行代码即可加速，对loop有奇效</h5><p>这回肯定又有人问了神马是<strong>loop</strong>，这里我讲解一下： <font color=red><strong>loop就是循环的意思</strong></font><br>然后numba 的优势就是 loop，对循环（loop）有奇效，而往往在科学计算中限制python速度的就是loop。</p><p>但要注意的是，numba对没有循环或者只有非常小循环的函数加速效果并不明显，用不用都一样。（偷偷告诉你，numba的loop甚至常常比numpy的矩阵运算还要快）</p><p><strong>重点：</strong><br><strong>numba可以把各种具有很大loop的函数加到很快的速度，但numpy的加速只适用于numpy自带的函数。</strong><br>示例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numba <span class="keyword">as</span> nb</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="comment"># 用numba加速的求和函数</span></span><br><span class="line"><span class="meta">@nb.jit()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nb_foo</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    tt = time.time()</span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x, y):</span><br><span class="line">        s += i</span><br><span class="line">    print(<span class="string">'time:&#123;&#125;'</span>.format(time.time() - tt))</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">print(nb_foo(<span class="number">1</span>,<span class="number">100000000</span>))</span><br><span class="line"><span class="comment"># 没用numba加速的求和函数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">py_foo</span><span class="params">(x, y)</span>:</span></span><br><span class="line">    tt = time.time()</span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(x, y):</span><br><span class="line">        s += i</span><br><span class="line">    print(<span class="string">'time:&#123;&#125;'</span>.format(time.time() - tt))</span><br><span class="line">    <span class="keyword">return</span> s</span><br><span class="line"></span><br><span class="line">print(py_foo(<span class="number">1</span>,<span class="number">100000000</span>))</span><br><span class="line"></span><br><span class="line">a = list(range(<span class="number">100000000</span>)) <span class="comment"># 创建一个长度为100000000的数组</span></span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">np.sum(a) <span class="comment"># numpy自带的求和函数</span></span><br><span class="line">end = time.time()</span><br><span class="line">print(end-start)</span><br><span class="line"></span><br><span class="line">start = time.time()</span><br><span class="line">sum(a) <span class="comment"># python自带的求和函数</span></span><br><span class="line">end = time.time()</span><br><span class="line">print(end-start)</span><br></pre></td></tr></table></figure><p>看一下输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">time:<span class="number">0.06898283958435059</span><span class="comment"># numba加速的求和函数</span></span><br><span class="line"><span class="number">4999999950000000</span></span><br><span class="line">time:<span class="number">10.004251480102539</span><span class="comment"># 没加速的求和函数</span></span><br><span class="line"><span class="number">4999999950000000</span></span><br><span class="line"><span class="number">9.993287086486816</span><span class="comment">#numpy自带的求和函数</span></span><br><span class="line"><span class="number">4.011701583862305</span><span class="comment"># python自带的求和函数</span></span><br></pre></td></tr></table></figure><p>可以看出，numba甚至比号称最接近C语言速度运行的numpy还要快6倍以上。<br><strong>在这里我还想说numba另一个强大的功能，矢量（vectorize）。像上面的jit一样，只要添加一行vectorize就可以让普通函数变成ufunc</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sin</span><br><span class="line"></span><br><span class="line"><span class="meta">@nb.vectorize()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nb_vec_sin</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> sin(a)</span><br></pre></td></tr></table></figure><p>用vectorize改写的三角函数具有了和np.sin()一样的同时处理数组每个元素的功能，而且表现也不必numpy差。当遇到numpy没有的数学函数时（比如sech），用numba矢量化不失为一个好的选择。除了math中的sin，它支持的其他函数列表可以在documentation中找到（链接见附录）。</p><p>其实numpy也有矢量化的功能，只不过比numba差远了。</p><h5 id="更多numba的加速选项"><a href="#更多numba的加速选项" class="headerlink" title="更多numba的加速选项"></a>更多numba的加速选项</h5><p>除了上面提到的jit和vectorize，其实numba还支持很多加速类型。常见的比如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">​ @nb.jit(nopython=<span class="literal">True</span>,fastmath=<span class="literal">True</span>) 牺牲一丢丢数学精度来提高速度</span><br><span class="line">​ @nb.jit(nopython=<span class="literal">True</span>,parallel=<span class="literal">True</span>) 自动进行并行计算</span><br></pre></td></tr></table></figure><p>还有一个：<br>如果希望JIT能针对所有类型的参数进行运算，可以使用autojit：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numba <span class="keyword">as</span> nb</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="meta">@nb.autojit()</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">nb_sum</span><span class="params">(a)</span>:</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    Sum = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a)):</span><br><span class="line">        Sum += a[i]</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="keyword">return</span> end-start</span><br></pre></td></tr></table></figure><p>autoit虽然可以根据参数类型动态地产生机器码函数，但是由于它需要每次检查参数类型，因此计算速度也有所降低。numba的用法很简单，基本上就是用jit和autojit这两个修饰器，和一些类型对象。下面的程序列出numba所支持的所有类型：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> [obj <span class="keyword">for</span> obj <span class="keyword">in</span> nb.__dict__.values() <span class="keyword">if</span> isinstance(obj, nb.minivect.minitypes.Type)]</span><br><span class="line">[size_t, Py_uintptr_t, uint16, complex128, float, complex256, void, int , long double,</span><br><span class="line">unsigned PY_LONG_LONG, uint32, complex256, complex64, object_, npy_intp, const char *,</span><br><span class="line">double, unsigned short, float, object_, float, uint64, uint32, uint8, complex128, uint16,</span><br><span class="line">int, int , uint8, complex64, int8, uint64, double, long double, int32, double, long double,</span><br><span class="line">char, long, unsigned char, PY_LONG_LONG, int64, int16, unsigned long, int8, int16, int32,</span><br><span class="line">unsigned int, short, int64, Py_ssize_t]</span><br></pre></td></tr></table></figure><h5 id="Numba的精度问题"><a href="#Numba的精度问题" class="headerlink" title="Numba的精度问题"></a>Numba的精度问题</h5><p>精度方面，在上面我也谈到numba会自动转换数据类型以适应计算。但是在个别时候，<strong>这种自动转变类型可能会引起一些计算误差</strong>。通常这个误差是非常小的，几乎不会造成任何影响。但如果你所处理的问题会积累误差，比如求解非线性方程，那么在非常多的计算之后误差可能就是肉眼可见了。<strong>如果你发现有这样的问题，记得在jit中指定输入输出的数据类型</strong>。<br><strong><em>numba具有C所有的数据类型，比如对上面的求和函数，只需要把@nb.jit()改为@nb.jit(nb.int64(nb.int32[:]))即可。nb.int64是说输出的数字为int64类型，nb.int32是说输入的数据类型为int32，而[:]是说输入的是数组。</em></strong></p><hr><p>参考文章：<br><a href="https://zhuanlan.zhihu.com/p/60994299" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/60994299</a><br><a href="https://blog.csdn.net/qq_39241986/article/details/102486661" target="_blank" rel="noopener">https://blog.csdn.net/qq_39241986/article/details/102486661</a></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>用python爬取qq好友的头像并都下载到本地</title>
      <link href="/2020/05/24/%E7%94%A8python%E7%88%AC%E5%8F%96qq%E5%A5%BD%E5%8F%8B%E7%9A%84%E5%A4%B4%E5%83%8F%E5%B9%B6%E9%83%BD%E4%B8%8B%E8%BD%BD%E5%88%B0%E6%9C%AC%E5%9C%B0/"/>
      <url>/2020/05/24/%E7%94%A8python%E7%88%AC%E5%8F%96qq%E5%A5%BD%E5%8F%8B%E7%9A%84%E5%A4%B4%E5%83%8F%E5%B9%B6%E9%83%BD%E4%B8%8B%E8%BD%BD%E5%88%B0%E6%9C%AC%E5%9C%B0/</url>
      
        <content type="html"><![CDATA[<p>正常步骤先上爬取效果图：<br><img src="https://img-blog.csdnimg.cn/20200423121926130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>原理：从邮箱开始半自动爬取qq好友头像。<br>首先我们先打开网页版qq邮箱，并登陆上你的qq账户，通过qq邮箱来获取所有人的qq号。<br>接下来我用Google Chrome 浏览器来演示：</p><a id="more"></a><ol><li>在qq邮箱网页界面 摁 <strong>F12</strong> 键 ，然后在弹出的界面 点击 Network 选项。<br><img src="https://img-blog.csdnimg.cn/20200423122316765.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>然后刷新一下网页，并在在红色箭头的地方输入<strong>laddr_lastlist</strong><br>,然后回车<br><img src="https://img-blog.csdnimg.cn/20200423122615661.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li><li>然后单击下面搜索到的选项，右边会弹出一个界面，然后单击<strong>Response</strong>（响应），然后下边就是我们所需要的内容，我也没有什么办法，毕竟<strong>是半自动的</strong>，所以，就需要<strong>Ctrl+c Ctrl+v</strong>，来将内容粘贴复制到一个<strong>txt文本</strong>上。<br><img src="https://img-blog.csdnimg.cn/20200423122830676.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后我们发现qq头像框保存在这么个地址上<br><a href="http://qlogo.store.qq.com/qzone/88888888/88888888/100" target="_blank" rel="noopener">http://qlogo.store.qq.com/qzone/88888888/88888888/100</a><br>即：<br><a href="http://qlogo.store.qq.com/qzone/qq号/qq号/100" target="_blank" rel="noopener">http://qlogo.store.qq.com/qzone/qq号/qq号/100</a><br>示例：<br><img src="https://img-blog.csdnimg.cn/20200423123431183.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>好了得到这些后，我们就开始码代码了。<br>直接上代码，基本上注释都给解释完了，这里我就不再过多介绍了。：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> codecs</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">txtpath = <span class="string">'E:/大二下半学期资料/头像/qqfriends.txt'</span>  <span class="comment"># 你从QQ邮箱中粘贴的txt文件</span></span><br><span class="line">savepath = <span class="string">'E:/大二下半学期资料/头像/touxiang/'</span>  <span class="comment"># 头像存储位置</span></span><br><span class="line"></span><br><span class="line">friends_count = <span class="number">0</span>  <span class="comment"># 初始化好友数量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gettouxiang</span><span class="params">(txtpath)</span>:</span>  <span class="comment"># 输入你的txt文件存储位置</span></span><br><span class="line">    file = codecs.open(txtpath, <span class="string">'rb'</span>, <span class="string">'utf-8'</span>)</span><br><span class="line">    s = file.read()</span><br><span class="line">    pattern = re.compile(<span class="string">r'\d+@qq.com'</span>)</span><br><span class="line">    all_mail = pattern.findall(s)  <span class="comment"># 正则表达式匹配所有的qq号</span></span><br><span class="line">    all_link = []  <span class="comment"># 用于存储需要访问的链接</span></span><br><span class="line">    url = <span class="string">'http://qlogo.store.qq.com/qzone/'</span></span><br><span class="line">    <span class="keyword">for</span> mail <span class="keyword">in</span> all_mail:</span><br><span class="line">        qq = mail.replace(<span class="string">'@qq.com'</span>, <span class="string">''</span>)</span><br><span class="line">        l = url + qq + <span class="string">'/'</span> + qq + <span class="string">'/100'</span></span><br><span class="line">        all_link.append(l)</span><br><span class="line">    i = <span class="number">0</span> <span class="comment">#初始化下载图片数量</span></span><br><span class="line">    friends_count = len(all_link)  <span class="comment"># 获取朋友头像数量</span></span><br><span class="line">    print(<span class="string">'共&#123;&#125;个头像'</span>.format(friends_count))</span><br><span class="line">    <span class="keyword">for</span> link <span class="keyword">in</span> all_link:  <span class="comment"># 遍历链接，下载头像</span></span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        saveurl = savepath + str(i) + <span class="string">'.png'</span></span><br><span class="line">        print(<span class="string">'第 %d 个'</span> % i, end=<span class="string">' '</span>)</span><br><span class="line">        savaImg(link, saveurl)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">savaImg</span><span class="params">(picurl, saveurl)</span>:</span>  <span class="comment"># 存储图片函数，picurl是图片的URL，saveurl是本地存储位置</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        start = time.time()</span><br><span class="line">        response = requests.get(picurl, stream=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">with</span> open(saveurl,<span class="string">'wb'</span>) <span class="keyword">as</span> file:   <span class="comment"># 下载图片到本地</span></span><br><span class="line">                file.write(response.content)</span><br><span class="line">                print(<span class="string">'【下载完成】:'</span>, end=<span class="string">' '</span>)</span><br><span class="line">        end = time.time()</span><br><span class="line">        time_ = end-start</span><br><span class="line">        print(<span class="string">'用时: %.2f秒'</span> % (time_))</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'worry'</span>)</span><br><span class="line">        <span class="comment">#savaImg(picurl, saveurl)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    gettouxiang(txtpath)    <span class="comment">#获取头像</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>运行实例：<br><img src="https://img-blog.csdnimg.cn/20200423123741455.png" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> spider </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学Python这么久了还不知道__init__(),__new__(),__del__()吗？这回彻底掌握它！</title>
      <link href="/2020/05/24/%E5%AD%A6Python%E8%BF%99%E4%B9%88%E4%B9%85%E4%BA%86%E8%BF%98%E4%B8%8D%E7%9F%A5%E9%81%93-init-new-del-%E5%90%97%EF%BC%9F%E8%BF%99%E5%9B%9E%E5%BD%BB%E5%BA%95%E6%8E%8C%E6%8F%A1%E5%AE%83%EF%BC%81/"/>
      <url>/2020/05/24/%E5%AD%A6Python%E8%BF%99%E4%B9%88%E4%B9%85%E4%BA%86%E8%BF%98%E4%B8%8D%E7%9F%A5%E9%81%93-init-new-del-%E5%90%97%EF%BC%9F%E8%BF%99%E5%9B%9E%E5%BD%BB%E5%BA%95%E6%8E%8C%E6%8F%A1%E5%AE%83%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>学python的，学过类与对象的，都会经常看到和用到<font color=red>__init__(self, )，__new__(cls, )，__del__(self)。</font><br>但是很多可能见过的，却不知道怎么用，或者为什么用。没有真正的了解它们。<br>然而其实这些就是我们学习面向对象编程语言中的<strong>构造方法和析构方法</strong>。<br>这三个其实还有另一种称呼叫做<font color=red><strong>魔法方法</strong></font>.<br><strong>魔法方法顾名思义，就是总是被左右各两个下划线包围的方法称为魔法方法，如<strong>init</strong>().</strong>(注：这里我不会细说魔法方法，只会针对这三个方法进行讲解。)</p><a id="more"></a><h5 id="那么，下面就是开始学习Python的正确姿势了"><a href="#那么，下面就是开始学习Python的正确姿势了" class="headerlink" title="那么，下面就是开始学习Python的正确姿势了~"></a>那么，下面就是开始学习Python的正确姿势了~</h5><h4 id="1、-init-self-…"><a href="#1、-init-self-…" class="headerlink" title="1、__init__(self[, …])"></a>1、__init__(self[, …])</h4><p>__init__()方法，相当于其他面向对象编程语言的<strong>构造方法</strong>，与就是类在实例化成对象的时候首先会调用的一个方法。<br>我们可能看到过这种情况，有时候在类定义时写__init__()方法，有时候则没有写，这是为什么呢？<br>其实这就好比是一种需求。就比如有一种something是迫使人去奋苦拼搏不惜一切代价也要得到的，这个something就是需求。你在定义其他的构造方法时有时候需要一些比如参数的需求，这时就需要了__init__()方法了。我相信我说到这，应该就已经理解了得到答案了。<br>如果还没有理解，那好吧，我来举个例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    我们定义一个矩形类，</span></span><br><span class="line"><span class="string">    需要长和宽两个参数，</span></span><br><span class="line"><span class="string">    拥有计算周长和面积两个方法。</span></span><br><span class="line"><span class="string">    因此我们知道了我们的需求了，这是就需要__init__()方法了</span></span><br><span class="line"><span class="string">    因此我们需要重写__init__()方法，因为我们也说过，该方法是类在实例化成对象的时候首先会调用的一个方法，</span></span><br><span class="line"><span class="string">    说到这应该都可以理解了吧。</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, l, w)</span>:</span></span><br><span class="line">        self.l = l</span><br><span class="line">        self.w = w</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getPeri</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> (self.l + self.w) * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getArea</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.l * self.w</span><br><span class="line"></span><br><span class="line">test = Rectangle(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">peri = test.getPeri()</span><br><span class="line">area = test.getArea()</span><br><span class="line">print(peri, area)</span><br><span class="line"><span class="comment">#输出结果为：14 12</span></span><br></pre></td></tr></table></figure><p><font color=red>注意：__init__（）方法的返回值一定是<strong>None</strong>，不能为其他(否则会出错)：</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'abc'</span></span><br><span class="line">a = A()</span><br><span class="line"><span class="comment">#输出结果为：</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/ceshi.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    a = A()</span><br><span class="line">TypeError: __init__() should <span class="keyword">return</span> <span class="literal">None</span>, <span class="keyword">not</span> <span class="string">'str'</span></span><br></pre></td></tr></table></figure><p>所以，只有在需要进行初始化的时候才重写__init__（）方法。</p><p>其实万事都留一手，这个__init__（）并不是实例化对象时第一个被调用的魔法方法。</p><h4 id="2、-new-cls-…"><a href="#2、-new-cls-…" class="headerlink" title="2、__new__(cls[, …])"></a>2、__new__(cls[, …])</h4><p>事实上，__new__()才是在一个对象实例化的时候调用的第一个方法。它与其他魔法方法不同，它的第一个参数不是 self 而是这个<strong>类</strong>（<strong>cls</strong>），而其它参数会直接传递给__init__()方法。<br>__new__()方法需要返回一个实例对象，通常是 <strong>cls</strong> 这个类实例化的对象，当然也可以返回其他对象。<br>__new__()方法平时很少去重写它，一般让Python用默认的方案执行就可以了。<font color=red><strong>但是有一种情况需要重写这个魔法方法，就是当继承一个不可变的类型的时候，它的特性就显得尤为重要了。</strong></font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CapStr</span><span class="params">(str)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, string)</span>:</span></span><br><span class="line">        string = string.upper()</span><br><span class="line">        <span class="keyword">return</span> str.__new__(cls, string)</span><br><span class="line">a = CapStr(<span class="string">'I Love apple'</span>)</span><br><span class="line">print(a)</span><br><span class="line"><span class="comment">#输出结果为：I LOVE APPLE</span></span><br></pre></td></tr></table></figure><p>这里返回 str.__new__(cls, string)  这种做法是值得推崇的，只需要重写我们关注的那部分内容，然后其他的琐碎东西交给 Python 的默认机制去完成就可以了，毕竟它们出错的概率要比我们自己写小得多。</p><h4 id="3、-del-self"><a href="#3、-del-self" class="headerlink" title="3、__del__(self)"></a>3、__del__(self)</h4><p>如果说 __init__() 和 __new__() 方法是对象的构造器的话，那么 Python 也提供了一个<strong>析构器</strong>，称为 __del__() 方法。当对象将要被销毁的时候，这个方法就会被调用。<font color=red>但一定要注意的是，并非 <strong>del x</strong>  就相当于自动调用了 <strong>x.__del__()</strong>， __del__()方法是当垃圾回收机制回收这个对象的时候调用的。</font><br>例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是 __init__()方法，我被调用了'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是 __del__()方法，我被调用了'</span>)</span><br><span class="line">b1 = B()</span><br><span class="line">print(<span class="string">'123'</span>)</span><br><span class="line">print(<span class="string">'456'</span>)</span><br></pre></td></tr></table></figure><p>结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">我是 __init__()方法，我被调用了</span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">456</span></span><br><span class="line">我是 __del__()方法，我被调用了</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是 __init__()方法，我被调用了'</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__del__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'我是 __del__()方法，我被调用了'</span>)</span><br><span class="line">b1 = B()</span><br><span class="line">print(<span class="string">'123'</span>)</span><br><span class="line"><span class="keyword">del</span> b1</span><br><span class="line">print(<span class="string">'456'</span>)</span><br></pre></td></tr></table></figure><p>结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">我是 __init__()方法，我被调用了</span><br><span class="line"><span class="number">123</span></span><br><span class="line">我是 __del__()方法，我被调用了</span><br><span class="line"><span class="number">456</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>贪心(婪)算法之哈夫曼编码(Huffman code)学习笔记（Python版）</title>
      <link href="/2020/05/24/%E8%B4%AA%E5%BF%83-%E5%A9%AA-%E7%AE%97%E6%B3%95%E4%B9%8B%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81-Huffman-code-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88Python%E7%89%88%EF%BC%89/"/>
      <url>/2020/05/24/%E8%B4%AA%E5%BF%83-%E5%A9%AA-%E7%AE%97%E6%B3%95%E4%B9%8B%E5%93%88%E5%A4%AB%E6%9B%BC%E7%BC%96%E7%A0%81-Huffman-code-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88Python%E7%89%88%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>前言（可省略。）：<br>哈夫曼编码可以很有效的压缩数据：通常可以节省 20%~90%的空间，具体压缩率依赖于数据的特性。我们将待压缩数据看做字符序列。根据每个字符的出现频率，哈夫曼贪心算法构造出字符的最优二进制表示。</p><p>假定我们希望压缩一个10个字符的数据文件。下表给出了文件中所出现的字符和它们的出现频率。也就是说，文件中只出现了6个不同字符，其中字符a出现了45 000次。<br>|  | a |b |c |d |e  |f  |<br>|–|–|—-|–|—|—|—|<br>| 频率（千次） | 45 | 13| 12| 16| 9 | 5 |<br>|定长编码  | 000 |001 | 010|011 | 100 | 101 |<br>|变长编码  | 0 |101 |100 |111 | 1101 | 1100 |</p><a id="more"></a><ul><li>一个字符编码的问题。一个100 000个字符的文件，只包含a~f 6个不同字符，出现的频率如上表。如果为每个字符指定一个3为的码字，我们可以将文件编码为300 000位的长度。但使用上表的变长编码，我们可以仅用224 000位编码文件。因此我们看到这是文件的最优字符编码。</li></ul><p>因此我们知道了哈夫曼编码。<br>哈夫曼编码是可变字长编码的一种。<br>哈夫曼设计了一个贪心算法来构造最优前缀码，被称为哈夫曼编码（Huffman code）。哈夫曼树：哈夫曼树又称最优二叉树。它是 n 个带权叶子结点构成的所有二叉树中，带权路径长度 WPL 最小的二叉树。</p><h3 id="接下来我们来了解哈夫曼算法的具体过程"><a href="#接下来我们来了解哈夫曼算法的具体过程" class="headerlink" title="接下来我们来了解哈夫曼算法的具体过程"></a>接下来我们来了解哈夫曼算法的具体过程</h3><p><font color=red>Note:每次构造二叉树时已按字母频率递增顺序排好序</font><br><font color=red>步骤：每次构造二叉树将频率低的两棵树进行合并</font><br>1.我们借用上面的例子得到初始字母叶节点：</p><p><img src="https://img-blog.csdnimg.cn/20200416165456220.jpg#pic_center" alt="在这里插入图片描述"><br>2.f 和 e 合并：<br><img src="https://img-blog.csdnimg.cn/20200416165911110.jpg#pic_center" alt="在这里插入图片描述"><br>3.c 和 b 合并：<br><img src="https://img-blog.csdnimg.cn/20200416170000110.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>4. 14 和 d 合并：<br><img src="https://img-blog.csdnimg.cn/20200416170100647.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>5.  25 和 30 合并：<br><img src="https://img-blog.csdnimg.cn/20200416170132214.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"><br>6. 45 和 55 合并，最终得到完整的赫夫曼树：<br><img src="https://img-blog.csdnimg.cn/2020041617015835.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>因此得到哈夫曼编码为：<br>a 的编码为： 0<br>b 的编码为： 101<br>c 的编码为： 100<br>d 的编码为： 111<br>e 的编码为： 1101<br>f 的编码为： 1100</p><h3 id="代码实现哈夫曼编码"><a href="#代码实现哈夫曼编码" class="headerlink" title="代码实现哈夫曼编码"></a><font color=red>代码实现哈夫曼编码</font></h3><h5 id="1-制备每个字符的概率表"><a href="#1-制备每个字符的概率表" class="headerlink" title="1.制备每个字符的概率表"></a>1.制备每个字符的概率表</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findTheCharFrequency</span><span class="params">(text)</span>:</span>                                   </span><br><span class="line">    result = dict()                                               </span><br><span class="line">    <span class="keyword">with</span> open(text,<span class="string">'r'</span>) <span class="keyword">as</span> f:                                     </span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():                                </span><br><span class="line">            line = line.lower()                                   </span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> line:                                        </span><br><span class="line">                <span class="keyword">if</span> i.isalpha():     <span class="comment">#判断字符是否为英文字母                  </span></span><br><span class="line">                    <span class="keyword">if</span> i <span class="keyword">in</span> result:                               </span><br><span class="line">                        result[i] += <span class="number">1</span>                            </span><br><span class="line">                    <span class="keyword">else</span>:                                         </span><br><span class="line">                        result.update(&#123;i:<span class="number">1</span>&#125;)                      </span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>存放字符的文本：<br><img src="https://img-blog.csdnimg.cn/20200416170559384.png#pic_center" alt="在这里插入图片描述"><br>输出样例（以字典的形式给出每个字符的频率）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'t'</span>: <span class="number">22</span>, <span class="string">'x'</span>: <span class="number">3</span>, <span class="string">'h'</span>: <span class="number">28</span>, <span class="string">'u'</span>: <span class="number">16</span>, <span class="string">'f'</span>: <span class="number">34</span>, <span class="string">'m'</span>: <span class="number">20</span>, <span class="string">'a'</span>: <span class="number">26</span>, <span class="string">'n'</span>: <span class="number">24</span>, <span class="string">'c'</span>: <span class="number">18</span>, <span class="string">'o'</span>: <span class="number">24</span>, <span class="string">'d'</span>: <span class="number">14</span>, <span class="string">'i'</span>: <span class="number">20</span>, <span class="string">'g'</span>: <span class="number">8</span>, <span class="string">'s'</span>: <span class="number">20</span>, <span class="string">'e'</span>: <span class="number">32</span>, <span class="string">'p'</span>: <span class="number">8</span>, <span class="string">'r'</span>: <span class="number">18</span>, <span class="string">'y'</span>: <span class="number">2</span>, <span class="string">'b'</span>: <span class="number">2</span>, <span class="string">'l'</span>: <span class="number">2</span>, <span class="string">'w'</span>: <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><h5 id="2-创建节点类"><a href="#2-创建节点类" class="headerlink" title="2.创建节点类"></a>2.创建节点类</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span>         </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name=None, value=None)</span>:</span></span><br><span class="line">        self.name = name    </span><br><span class="line">        self.value = value  </span><br><span class="line">        self.lchild = <span class="literal">None</span>  </span><br><span class="line">        self.rchild = <span class="literal">None</span></span><br></pre></td></tr></table></figure><h5 id="3-以节点反向建立Huffman树"><a href="#3-以节点反向建立Huffman树" class="headerlink" title="3.以节点反向建立Huffman树"></a>3.以节点反向建立Huffman树</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建Huffman树                                                                  </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuffmanTree</span><span class="params">(object)</span>:</span>                                                   </span><br><span class="line">    <span class="comment">#根据Huffman树的思想：以节点为基础，反向建立Huffman树                                       </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, char_Weights)</span>:</span>                                        </span><br><span class="line">        self.Leaf = [Node(k,v) <span class="keyword">for</span> k, v <span class="keyword">in</span> char_Weights.items()]             </span><br><span class="line">        <span class="keyword">while</span> len(self.Leaf) != <span class="number">1</span>:                                           </span><br><span class="line">            self.Leaf.sort(key=<span class="keyword">lambda</span> node:node.value, reverse=<span class="literal">True</span>)         </span><br><span class="line">            n = Node(value=(self.Leaf[<span class="number">-1</span>].value + self.Leaf[<span class="number">-2</span>].value))      </span><br><span class="line">            n.lchild = self.Leaf.pop(<span class="number">-1</span>)                                     </span><br><span class="line">            n.rchild = self.Leaf.pop(<span class="number">-1</span>)                                     </span><br><span class="line">            self.Leaf.append(n)                                              </span><br><span class="line">        self.root = self.Leaf[<span class="number">0</span>]                                             </span><br><span class="line">        self.Buffer = list(range(<span class="number">10</span>))</span><br></pre></td></tr></table></figure><h5 id="用递归地思想生成编码"><a href="#用递归地思想生成编码" class="headerlink" title="用递归地思想生成编码"></a>用递归地思想生成编码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Hu_generate</span><span class="params">(self, tree, length)</span>:</span></span><br><span class="line">    node = tree</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">not</span> node):</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">elif</span> node.name:</span><br><span class="line">        print(node.name + <span class="string">' 的Huffman编码为: '</span>, end=<span class="string">''</span>)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(length):</span><br><span class="line">            print(self.Buffer[i], end=<span class="string">''</span>)</span><br><span class="line">        print(<span class="string">'\n'</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    self.Buffer[length] = <span class="number">0</span></span><br><span class="line">    self.Hu_generate(node.lchild, length + <span class="number">1</span>)</span><br><span class="line">    self.Buffer[length] = <span class="number">1</span></span><br><span class="line">    self.Hu_generate(node.rchild, length + <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h5 id="输出哈夫曼编码"><a href="#输出哈夫曼编码" class="headerlink" title="输出哈夫曼编码"></a>输出哈夫曼编码</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_code</span><span class="params">(self)</span>:</span></span><br><span class="line">    self.Hu_generate(self.root, <span class="number">0</span>)</span><br></pre></td></tr></table></figure><h5 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    text = <span class="string">r'123.txt'</span></span><br><span class="line">    result = findTheCharFrequency(text)</span><br><span class="line">    print(result)</span><br><span class="line">    tree = HuffmanTree(result)</span><br><span class="line">    tree.get_code()</span><br></pre></td></tr></table></figure><p>输出样例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">e 的Huffman编码为: <span class="number">000</span></span><br><span class="line">f 的Huffman编码为: <span class="number">001</span></span><br><span class="line">r 的Huffman编码为: <span class="number">0100</span></span><br><span class="line">c 的Huffman编码为: <span class="number">0101</span></span><br><span class="line">s 的Huffman编码为: <span class="number">0110</span></span><br><span class="line">i 的Huffman编码为: <span class="number">0111</span></span><br><span class="line">m 的Huffman编码为: <span class="number">1000</span></span><br><span class="line">t 的Huffman编码为: <span class="number">1001</span></span><br><span class="line">o 的Huffman编码为: <span class="number">1010</span></span><br><span class="line">n 的Huffman编码为: <span class="number">1011</span></span><br><span class="line">w 的Huffman编码为: <span class="number">1100000</span></span><br><span class="line">l 的Huffman编码为: <span class="number">1100001</span></span><br><span class="line">x 的Huffman编码为: <span class="number">1100010</span></span><br><span class="line">b 的Huffman编码为: <span class="number">11000110</span></span><br><span class="line">y 的Huffman编码为: <span class="number">11000111</span></span><br><span class="line">d 的Huffman编码为: <span class="number">11001</span></span><br><span class="line">a 的Huffman编码为: <span class="number">1101</span></span><br><span class="line">h 的Huffman编码为: <span class="number">1110</span></span><br><span class="line">p 的Huffman编码为: <span class="number">111100</span></span><br><span class="line">g 的Huffman编码为: <span class="number">111101</span></span><br><span class="line">u 的Huffman编码为: <span class="number">11111</span></span><br></pre></td></tr></table></figure><h5 id="完整代码："><a href="#完整代码：" class="headerlink" title="完整代码："></a><font color=red>完整代码：</font></h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#制备每个字符的概率表</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">findTheCharFrequency</span><span class="params">(text)</span>:</span></span><br><span class="line">    result = dict()</span><br><span class="line">    <span class="keyword">with</span> open(text,<span class="string">'r'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f.readlines():</span><br><span class="line">            line = line.lower()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> line:</span><br><span class="line">                <span class="keyword">if</span> i.isalpha():     <span class="comment">#判断字符是否为英文字母</span></span><br><span class="line">                    <span class="keyword">if</span> i <span class="keyword">in</span> result:</span><br><span class="line">                        result[i] += <span class="number">1</span></span><br><span class="line">                    <span class="keyword">else</span>:</span><br><span class="line">                        result.update(&#123;i:<span class="number">1</span>&#125;)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建节点类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name=None, value=None)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.value = value</span><br><span class="line">        self.lchild = <span class="literal">None</span></span><br><span class="line">        self.rchild = <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#创建Huffman树</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HuffmanTree</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment">#根据Huffman树的思想：以节点为基础，反向建立Huffman树</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, char_Weights)</span>:</span></span><br><span class="line">        self.Leaf = [Node(k,v) <span class="keyword">for</span> k, v <span class="keyword">in</span> char_Weights.items()]</span><br><span class="line">        <span class="keyword">while</span> len(self.Leaf) != <span class="number">1</span>:</span><br><span class="line">            self.Leaf.sort(key=<span class="keyword">lambda</span> node:node.value, reverse=<span class="literal">True</span>)</span><br><span class="line">            n = Node(value=(self.Leaf[<span class="number">-1</span>].value + self.Leaf[<span class="number">-2</span>].value))</span><br><span class="line">            n.lchild = self.Leaf.pop(<span class="number">-1</span>)</span><br><span class="line">            n.rchild = self.Leaf.pop(<span class="number">-1</span>)</span><br><span class="line">            self.Leaf.append(n)</span><br><span class="line">        self.root = self.Leaf[<span class="number">0</span>]</span><br><span class="line">        self.Buffer = list(range(<span class="number">10</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#用递归地思想生成编码</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Hu_generate</span><span class="params">(self, tree, length)</span>:</span></span><br><span class="line">        node = tree</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">not</span> node):</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">elif</span> node.name:</span><br><span class="line">            print(node.name + <span class="string">' 的Huffman编码为: '</span>, end=<span class="string">''</span>)</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(length):</span><br><span class="line">                print(self.Buffer[i], end=<span class="string">''</span>)</span><br><span class="line">            print(<span class="string">'\n'</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        self.Buffer[length] = <span class="number">0</span></span><br><span class="line">        self.Hu_generate(node.lchild, length + <span class="number">1</span>)</span><br><span class="line">        self.Buffer[length] = <span class="number">1</span></span><br><span class="line">        self.Hu_generate(node.rchild, length + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#输出哈夫曼编码</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_code</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.Hu_generate(self.root, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    text = <span class="string">r'123.txt'</span></span><br><span class="line">    result = findTheCharFrequency(text)</span><br><span class="line">    <span class="comment">#print(result)</span></span><br><span class="line">    tree = HuffmanTree(result)</span><br><span class="line">    tree.get_code()</span><br></pre></td></tr></table></figure><hr><p><font color=red>本篇完</font></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Huffman code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之一行代码的终极姿势（干货！）</title>
      <link href="/2020/05/24/Python%E4%B9%8B%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BB%88%E6%9E%81%E5%A7%BF%E5%8A%BF%EF%BC%88%E5%B9%B2%E8%B4%A7%EF%BC%81%EF%BC%89/"/>
      <url>/2020/05/24/Python%E4%B9%8B%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E7%9A%84%E7%BB%88%E6%9E%81%E5%A7%BF%E5%8A%BF%EF%BC%88%E5%B9%B2%E8%B4%A7%EF%BC%81%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>Python的简洁之美，一行代码也能玩出<strong>姿势</strong>的花样<del>~</del></p><h3 id="1-一行代码交换参数a-b的值"><a href="#1-一行代码交换参数a-b的值" class="headerlink" title="1.一行代码交换参数a, b的值"></a>1.一行代码交换参数a, b的值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a, b = b, a</span><br></pre></td></tr></table></figure><h3 id="2-一行代码反转list（列表）"><a href="#2-一行代码反转list（列表）" class="headerlink" title="2.一行代码反转list（列表）"></a>2.一行代码反转list（列表）</h3><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[v1,v2,v3][::<span class="number">-1</span>]</span><br><span class="line"><span class="comment">#输出结果为：[v3,v2,v1]</span></span><br></pre></td></tr></table></figure><h3 id="3-一行代码list（列表）去重（元素）"><a href="#3-一行代码list（列表）去重（元素）" class="headerlink" title="3.一行代码list（列表）去重（元素）"></a>3.一行代码list（列表）去重（元素）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set([<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>])</span><br><span class="line"><span class="comment">#输出结果为：&#123;1, 2, 3, 4&#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-一行代码求list（列表）中的最大值"><a href="#4-一行代码求list（列表）中的最大值" class="headerlink" title="4.一行代码求list（列表）中的最大值"></a>4.一行代码求list（列表）中的最大值</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">max(max([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">6</span>,<span class="number">2</span>], [<span class="number">4</span>]], key=<span class="keyword">lambda</span> v: max(v)))</span><br><span class="line"><span class="comment">#输出结果为：6</span></span><br></pre></td></tr></table></figure><h3 id="5-一行代码合并两个字典"><a href="#5-一行代码合并两个字典" class="headerlink" title="5.一行代码合并两个字典"></a>5.一行代码合并两个字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;**&#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;, **&#123;<span class="string">'ID'</span>:<span class="string">'001'</span>, <span class="string">'School'</span>:<span class="string">'yale'</span>&#125;&#125;</span><br><span class="line"><span class="comment">#输出结果为：&#123;'Name': 'Tom', 'Age': '16', 'Sex': 'male', 'ID': '001', 'School': 'yale'&#125;</span></span><br></pre></td></tr></table></figure><h3 id="6-一行代码生成顺序序列"><a href="#6-一行代码生成顺序序列" class="headerlink" title="6.一行代码生成顺序序列"></a>6.一行代码生成顺序序列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list(range(<span class="number">10</span>))</span><br><span class="line"><span class="comment">#输出结果为：[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br></pre></td></tr></table></figure><h3 id="7-一行代码生成逆序序列"><a href="#7-一行代码生成逆序序列" class="headerlink" title="7.一行代码生成逆序序列"></a>7.一行代码生成逆序序列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">list(range(<span class="number">10</span>,<span class="number">-1</span>,<span class="number">-1</span>))</span><br><span class="line"><span class="comment">#输出结果为：[10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0]</span></span><br></pre></td></tr></table></figure><h3 id="8-一行代码生成九九乘法表"><a href="#8-一行代码生成九九乘法表" class="headerlink" title="8.一行代码生成九九乘法表"></a>8.一行代码生成九九乘法表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">print</span> (<span class="string">'\n'</span>.join([<span class="string">' '</span>.join([<span class="string">'%s*%s=%-2s'</span> % (y,x,x*y) <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">1</span>,x+<span class="number">1</span>)]) <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">10</span>)]))</span><br><span class="line"><span class="comment">#输出结果为：</span></span><br><span class="line"><span class="number">1</span>*<span class="number">1</span>=<span class="number">1</span> </span><br><span class="line"><span class="number">1</span>*<span class="number">2</span>=<span class="number">2</span>  <span class="number">2</span>*<span class="number">2</span>=<span class="number">4</span> </span><br><span class="line"><span class="number">1</span>*<span class="number">3</span>=<span class="number">3</span>  <span class="number">2</span>*<span class="number">3</span>=<span class="number">6</span>  <span class="number">3</span>*<span class="number">3</span>=<span class="number">9</span> </span><br><span class="line"><span class="number">1</span>*<span class="number">4</span>=<span class="number">4</span>  <span class="number">2</span>*<span class="number">4</span>=<span class="number">8</span>  <span class="number">3</span>*<span class="number">4</span>=<span class="number">12</span> <span class="number">4</span>*<span class="number">4</span>=<span class="number">16</span></span><br><span class="line"><span class="number">1</span>*<span class="number">5</span>=<span class="number">5</span>  <span class="number">2</span>*<span class="number">5</span>=<span class="number">10</span> <span class="number">3</span>*<span class="number">5</span>=<span class="number">15</span> <span class="number">4</span>*<span class="number">5</span>=<span class="number">20</span> <span class="number">5</span>*<span class="number">5</span>=<span class="number">25</span></span><br><span class="line"><span class="number">1</span>*<span class="number">6</span>=<span class="number">6</span>  <span class="number">2</span>*<span class="number">6</span>=<span class="number">12</span> <span class="number">3</span>*<span class="number">6</span>=<span class="number">18</span> <span class="number">4</span>*<span class="number">6</span>=<span class="number">24</span> <span class="number">5</span>*<span class="number">6</span>=<span class="number">30</span> <span class="number">6</span>*<span class="number">6</span>=<span class="number">36</span></span><br><span class="line"><span class="number">1</span>*<span class="number">7</span>=<span class="number">7</span>  <span class="number">2</span>*<span class="number">7</span>=<span class="number">14</span> <span class="number">3</span>*<span class="number">7</span>=<span class="number">21</span> <span class="number">4</span>*<span class="number">7</span>=<span class="number">28</span> <span class="number">5</span>*<span class="number">7</span>=<span class="number">35</span> <span class="number">6</span>*<span class="number">7</span>=<span class="number">42</span> <span class="number">7</span>*<span class="number">7</span>=<span class="number">49</span></span><br><span class="line"><span class="number">1</span>*<span class="number">8</span>=<span class="number">8</span>  <span class="number">2</span>*<span class="number">8</span>=<span class="number">16</span> <span class="number">3</span>*<span class="number">8</span>=<span class="number">24</span> <span class="number">4</span>*<span class="number">8</span>=<span class="number">32</span> <span class="number">5</span>*<span class="number">8</span>=<span class="number">40</span> <span class="number">6</span>*<span class="number">8</span>=<span class="number">48</span> <span class="number">7</span>*<span class="number">8</span>=<span class="number">56</span> <span class="number">8</span>*<span class="number">8</span>=<span class="number">64</span></span><br><span class="line"><span class="number">1</span>*<span class="number">9</span>=<span class="number">9</span>  <span class="number">2</span>*<span class="number">9</span>=<span class="number">18</span> <span class="number">3</span>*<span class="number">9</span>=<span class="number">27</span> <span class="number">4</span>*<span class="number">9</span>=<span class="number">36</span> <span class="number">5</span>*<span class="number">9</span>=<span class="number">45</span> <span class="number">6</span>*<span class="number">9</span>=<span class="number">54</span> <span class="number">7</span>*<span class="number">9</span>=<span class="number">63</span> <span class="number">8</span>*<span class="number">9</span>=<span class="number">72</span> <span class="number">9</span>*<span class="number">9</span>=<span class="number">81</span></span><br></pre></td></tr></table></figure><h3 id="9-一行代码实现-a-到-b-的和-（a-与-b-均为int变量）"><a href="#9-一行代码实现-a-到-b-的和-（a-与-b-均为int变量）" class="headerlink" title="9.一行代码实现 a 到 b 的和 （a 与 b 均为int变量）"></a>9.一行代码实现 a 到 b 的和 （a 与 b 均为int变量）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#示例求1——100的和</span></span><br><span class="line">print(sum(range(<span class="number">1</span>, <span class="number">101</span>)))</span><br><span class="line"><span class="comment">#输出结果为：5050</span></span><br></pre></td></tr></table></figure><h3 id="10-一行代码实现求解2的1000次方的各位数之和"><a href="#10-一行代码实现求解2的1000次方的各位数之和" class="headerlink" title="10.一行代码实现求解2的1000次方的各位数之和"></a>10.一行代码实现求解2的1000次方的各位数之和</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(sum(map(int, str(<span class="number">2</span>**<span class="number">1000</span>))))</span><br><span class="line"><span class="comment">#输出结果为：1366</span></span><br></pre></td></tr></table></figure><h3 id="11-一行代码实现心形输出"><a href="#11-一行代码实现心形输出" class="headerlink" title="11.一行代码实现心形输出"></a>11.一行代码实现心形输出</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'\n'</span>.join([<span class="string">''</span>.join([(<span class="string">u'Love全 洛Love'</span>[(x-y)%<span class="number">11</span>]<span class="keyword">if</span>((x*<span class="number">0.05</span>)**<span class="number">2</span>+(y*<span class="number">0.1</span>)**<span class="number">2</span><span class="number">-1</span>)**<span class="number">3</span>-(x*<span class="number">0.05</span>)**<span class="number">2</span>*(y*<span class="number">0.1</span>)**<span class="number">3</span>&lt;=<span class="number">0</span> <span class="keyword">else</span><span class="string">' '</span>)<span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">-30</span>,<span class="number">30</span>)])<span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">15</span>,<span class="number">-15</span>,<span class="number">-1</span>)]))</span><br><span class="line"><span class="comment">#输出结果：</span></span><br><span class="line">                LoveLove全            洛LoveLov               </span><br><span class="line">            全 洛LoveLove全 洛Lov   ve全 洛LoveLove全 洛L           </span><br><span class="line">          e全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛Love         </span><br><span class="line">         e全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛LoveLo        </span><br><span class="line">        e全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛LoveLove       </span><br><span class="line">        全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛LoveLove全       </span><br><span class="line">         洛LoveLove全 洛LoveLove全 洛LoveLove全 洛LoveLove全        </span><br><span class="line">        洛LoveLove全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛       </span><br><span class="line">        LoveLove全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛L       </span><br><span class="line">        oveLove全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛Lo       </span><br><span class="line">         eLove全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛Lo        </span><br><span class="line">          ove全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛Lo         </span><br><span class="line">          ve全 洛LoveLove全 洛LoveLove全 洛LoveLove全 洛Lov         </span><br><span class="line">             洛LoveLove全 洛LoveLove全 洛LoveLove全 洛Lo           </span><br><span class="line">             LoveLove全 洛LoveLove全 洛LoveLove全 洛Lo            </span><br><span class="line">              veLove全 洛LoveLove全 洛LoveLove全 洛Lo             </span><br><span class="line">                ove全 洛LoveLove全 洛LoveLove全 洛L               </span><br><span class="line">                  全 洛LoveLove全 洛LoveLove全 洛                 </span><br><span class="line">                    LoveLove全 洛LoveLove全                    </span><br><span class="line">                       Love全 洛LoveLove                      </span><br><span class="line">                          全 洛LoveLo                         </span><br><span class="line">                             ove                            </span><br><span class="line">                              e</span><br></pre></td></tr></table></figure><h3 id="12-一行代码输出斐波那契数列"><a href="#12-一行代码输出斐波那契数列" class="headerlink" title="12.一行代码输出斐波那契数列"></a>12.一行代码输出斐波那契数列</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print([x[<span class="number">0</span>] <span class="keyword">for</span> x <span class="keyword">in</span> [(a[i][<span class="number">0</span>], a.append([a[i][<span class="number">1</span>], a[i][<span class="number">0</span>]+a[i][<span class="number">1</span>]])) <span class="keyword">for</span> a <span class="keyword">in</span> ([[<span class="number">1</span>, <span class="number">1</span>]], ) <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">30</span>)]])</span><br><span class="line"><span class="comment">#输出结果为：[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368, 75025, 121393, 196418, 317811, 514229, 832040]</span></span><br></pre></td></tr></table></figure><h3 id="13-一行代码实现快速排序"><a href="#13-一行代码实现快速排序" class="headerlink" title="13.一行代码实现快速排序"></a>13.一行代码实现快速排序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quick_sort = <span class="keyword">lambda</span> arr: arr <span class="keyword">if</span> len(array) &lt;= <span class="number">1</span> <span class="keyword">else</span> quick_sort([item <span class="keyword">for</span> item <span class="keyword">in</span> arr[<span class="number">1</span>:] <span class="keyword">if</span> item &lt;= arr[<span class="number">0</span>]]) + [arr[<span class="number">0</span>]] + quick_sort([item <span class="keyword">for</span> item <span class="keyword">in</span> arr[<span class="number">1</span>:] <span class="keyword">if</span> item &gt; arr[<span class="number">0</span>]]) <span class="keyword">or</span> arr</span><br></pre></td></tr></table></figure><h3 id="14-一行代码解决八皇后问题"><a href="#14-一行代码解决八皇后问题" class="headerlink" title="14.一行代码解决八皇后问题"></a>14.一行代码解决八皇后问题</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[__import__(<span class="string">'sys'</span>).stdout.write(<span class="string">'\n'</span>.join(<span class="string">'.'</span> * i + <span class="string">'Q'</span> + <span class="string">'.'</span> * (<span class="number">8</span>-i<span class="number">-1</span>) <span class="keyword">for</span> i <span class="keyword">in</span> vec) + <span class="string">"\n========\n"</span>) <span class="keyword">for</span> vec <span class="keyword">in</span> __import__(<span class="string">'itertools'</span>).permutations(range(<span class="number">8</span>)) <span class="keyword">if</span> <span class="number">8</span> == len(set(vec[i]+i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>))) == len(set(vec[i]-i <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">8</span>)))]</span><br><span class="line"><span class="comment">#输出结果（展示部分）：</span></span><br><span class="line">Q.......</span><br><span class="line">....Q...</span><br><span class="line">.......Q</span><br><span class="line">.....Q..</span><br><span class="line">..Q.....</span><br><span class="line">......Q.</span><br><span class="line">.Q......</span><br><span class="line">...Q....</span><br></pre></td></tr></table></figure><h3 id="15-一行代码将十进制转换为（二、八、十六）进制-and-十转ASCll码-and-ASCll码转十"><a href="#15-一行代码将十进制转换为（二、八、十六）进制-and-十转ASCll码-and-ASCll码转十" class="headerlink" title="15.一行代码将十进制转换为（二、八、十六）进制 and 十转ASCll码  and ASCll码转十"></a>15.一行代码将十进制转换为（二、八、十六）进制 and 十转ASCll码  and ASCll码转十</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#十转二</span></span><br><span class="line">bin(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#输出结果为：0b1010</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#十转八</span></span><br><span class="line">oct(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#输出结果：0o12</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#十转十六</span></span><br><span class="line">hex(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#输出结果为：0xa</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#十转ASCll</span></span><br><span class="line">chr(<span class="number">65</span>)</span><br><span class="line"><span class="comment">#输出结果为：A</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ASCll转十</span></span><br><span class="line">ord(<span class="string">'A'</span>)</span><br><span class="line"><span class="comment">#输出结果为：65</span></span><br></pre></td></tr></table></figure><h3 id="16-一行代码启动一个Web服务"><a href="#16-一行代码启动一个Web服务" class="headerlink" title="16.一行代码启动一个Web服务"></a>16.一行代码启动一个Web服务</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m http.server <span class="number">8080</span></span><br></pre></td></tr></table></figure><h3 id="17-一行代码输出Mandelbrot图像"><a href="#17-一行代码输出Mandelbrot图像" class="headerlink" title="17.一行代码输出Mandelbrot图像"></a>17.一行代码输出Mandelbrot图像</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'\n'</span>.join([<span class="string">''</span>.join([<span class="string">'*'</span><span class="keyword">if</span> abs((<span class="keyword">lambda</span> a: <span class="keyword">lambda</span> z, c, n: a(a, z, c, n))(<span class="keyword">lambda</span> s, z, c, n: z <span class="keyword">if</span> n == <span class="number">0</span> <span class="keyword">else</span> s(s, z*z+c, c, n<span class="number">-1</span>))(<span class="number">0</span>, <span class="number">0.02</span>*x+<span class="number">0.05j</span>*y, <span class="number">40</span>)) &lt; <span class="number">2</span> <span class="keyword">else</span> <span class="string">' '</span> <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">-80</span>, <span class="number">20</span>)]) <span class="keyword">for</span> y <span class="keyword">in</span> range(<span class="number">-20</span>, <span class="number">20</span>)]))</span><br><span class="line"><span class="comment">#输出结果：</span></span><br><span class="line">                                                                                *                   </span><br><span class="line">                                                                                                    </span><br><span class="line">                                                                                                    </span><br><span class="line">                                                                          **                        </span><br><span class="line">                                                                     ***********                    </span><br><span class="line">                                                                    ************                    </span><br><span class="line">                                                                      *********                     </span><br><span class="line">                                                            *    * ************  * *                </span><br><span class="line">                                                    ****** * *************************** *          </span><br><span class="line">                                                    *************************************** *****   </span><br><span class="line">                                                     *******************************************    </span><br><span class="line">                                               *** ******************************************** *   </span><br><span class="line">                                                **************************************************  </span><br><span class="line">                                             *******************************************************</span><br><span class="line">                      *        *              ***************************************************** </span><br><span class="line">                     **** ******* *          *******************************************************</span><br><span class="line">                      *****************     ******************************************************* </span><br><span class="line">                   *********************** *********************************************************</span><br><span class="line">                   *********************** ******************************************************** </span><br><span class="line">             **** ********************************************************************************  </span><br><span class="line">*********************************************************************************************       </span><br><span class="line">             **** ********************************************************************************  </span><br><span class="line">                   *********************** ******************************************************** </span><br><span class="line">                   *********************** *********************************************************</span><br><span class="line">                      *****************     ******************************************************* </span><br><span class="line">                     **** ******* *          *******************************************************</span><br><span class="line">                      *        *              ***************************************************** </span><br><span class="line">                                             *******************************************************</span><br><span class="line">                                                **************************************************  </span><br><span class="line">                                               *** ******************************************** *   </span><br><span class="line">                                                     *******************************************    </span><br><span class="line">                                                    *************************************** *****   </span><br><span class="line">                                                    ****** * *************************** *          </span><br><span class="line">                                                            *    * ************  * *                </span><br><span class="line">                                                                      *********                     </span><br><span class="line">                                                                    ************                    </span><br><span class="line">                                                                     ***********                    </span><br><span class="line">                                                                          **</span><br></pre></td></tr></table></figure><p>原图为：<br><img src="https://img-blog.csdnimg.cn/20200416122506121.png" alt="在这里插入图片描述"></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python list 常用操作汇总（干货！）</title>
      <link href="/2020/05/24/Python-list-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB%EF%BC%88%E5%B9%B2%E8%B4%A7%EF%BC%81%EF%BC%89/"/>
      <url>/2020/05/24/Python-list-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%B1%87%E6%80%BB%EF%BC%88%E5%B9%B2%E8%B4%A7%EF%BC%81%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>@[TOC](list 列表常用操作汇总)</p><h3 id="1、list定义"><a href="#1、list定义" class="headerlink" title="1、list定义"></a>1、list定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>]</span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123', 'z', '456']</span></span><br><span class="line">print(list[<span class="number">1</span>])</span><br><span class="line"><span class="comment">#输出结果：b</span></span><br></pre></td></tr></table></figure><h3 id="2、list负数索引"><a href="#2、list负数索引" class="headerlink" title="2、list负数索引"></a>2、list负数索引</h3><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>]</span><br><span class="line">print(list[<span class="number">-1</span>])</span><br><span class="line"><span class="comment">#输出结果：456</span></span><br><span class="line">print(list[<span class="number">-3</span>])</span><br><span class="line"><span class="comment">#输出结果：123</span></span><br></pre></td></tr></table></figure><h3 id="3、list切片"><a href="#3、list切片" class="headerlink" title="3、list切片"></a>3、list切片</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>]</span><br><span class="line">print(list[<span class="number">0</span>:<span class="number">3</span>])</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123']</span></span><br><span class="line">print(list[<span class="number">1</span>:<span class="number">-1</span>])</span><br><span class="line"><span class="comment">#输出结果：['b', '123', 'z']</span></span><br><span class="line">print(list[::<span class="number">-1</span>]) <span class="comment"># 重点：逆序输出list中元素</span></span><br><span class="line"><span class="comment">#输出结果：['456', 'z', '123', 'b', 'a']</span></span><br></pre></td></tr></table></figure><h3 id="4、list增加元素"><a href="#4、list增加元素" class="headerlink" title="4、list增加元素"></a>4、list增加元素</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>]</span><br><span class="line">list.append(<span class="string">'new1'</span>) <span class="comment">#在list末尾添加</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123', 'z', '456', 'new1']</span></span><br><span class="line">list.insert(<span class="number">2</span>, <span class="string">'new2'</span>)  <span class="comment">#在指定位置上添加元素</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', 'new2', '123', 'z', '456', 'new1']</span></span><br><span class="line">list.extend([<span class="string">'new3'</span>, <span class="string">'new4'</span>])  <span class="comment">#添加一个列表</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', 'new2', '123', 'z', '456', 'new1', 'new3', 'new4']</span></span><br></pre></td></tr></table></figure><h3 id="5、list删除元素"><a href="#5、list删除元素" class="headerlink" title="5、list删除元素"></a>5、list删除元素</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'new'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>, <span class="string">'new'</span>, <span class="string">'new3'</span>, <span class="string">'new4'</span>]</span><br><span class="line">list.remove(<span class="string">'z'</span>)</span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', 'new', '123', '456', 'new', 'new3', 'new4']</span></span><br><span class="line">list.remove(<span class="string">'new'</span>) <span class="comment">#删除首次出现的new</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123', '456', 'new', 'new3', 'new4']</span></span><br><span class="line"><span class="comment"># list.remove('c')    #list 中没有找到值，会引发异常list.pop</span></span><br><span class="line"><span class="comment"># print(list)</span></span><br><span class="line"><span class="comment">#输出结果：ValueError: list.remove(x): x not in list</span></span><br><span class="line">pop = list.pop()  <span class="comment">#pop 会做两件事：删除 list 的最后一个元素， 然后返回删除的元素的值</span></span><br><span class="line">print(pop)</span><br><span class="line"><span class="comment">#输出结果：new4</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123', '456', 'new']</span></span><br></pre></td></tr></table></figure><h3 id="6、list搜索"><a href="#6、list搜索" class="headerlink" title="6、list搜索"></a>6、list搜索</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'new'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>, <span class="string">'new'</span>, <span class="string">'new3'</span>, <span class="string">'new4'</span>]</span><br><span class="line">index1 = list.index(<span class="string">'456'</span>)</span><br><span class="line">print(index1)</span><br><span class="line"><span class="comment">#输出结果：5</span></span><br><span class="line">index2 = list.index(<span class="string">'new'</span>) <span class="comment">#返回第一个匹配的元素位置</span></span><br><span class="line">print(index2)</span><br><span class="line"><span class="comment">#输出结果：2</span></span><br><span class="line">index3 = list.index(<span class="string">'c'</span>)    <span class="comment">#list 中没有找到该值，则会引发异常</span></span><br><span class="line">print(index3)</span><br><span class="line"><span class="comment">#输出结果：ValueError: 'c' is not in list</span></span><br></pre></td></tr></table></figure><h3 id="7、list运算符"><a href="#7、list运算符" class="headerlink" title="7、list运算符"></a>7、list运算符</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>]</span><br><span class="line">list = list + [<span class="string">'new'</span>, <span class="string">'new3'</span>]</span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123', 'z', '456', 'new', 'new3']</span></span><br><span class="line">list += [<span class="string">'two'</span>]</span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：['a', 'b', '123', 'z', '456', 'new', 'new3', 'two']</span></span><br><span class="line">list = [<span class="number">1</span>, <span class="number">2</span>] * <span class="number">3</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：[1, 2, 1, 2, 1, 2]</span></span><br></pre></td></tr></table></figure><h3 id="8、使用join链接list成为字符串"><a href="#8、使用join链接list成为字符串" class="headerlink" title="8、使用join链接list成为字符串"></a>8、使用join链接list成为字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">params = &#123;<span class="string">'server'</span>:<span class="string">'abc'</span>, <span class="string">'database'</span>:<span class="string">'master'</span>, <span class="string">'uid'</span>:<span class="string">'123'</span>, <span class="string">'pwd'</span>:<span class="string">'456'</span>&#125;</span><br><span class="line">x = [<span class="string">'%s=%s'</span> % (k, v) <span class="keyword">for</span> k, v <span class="keyword">in</span> params.items()]</span><br><span class="line">print(x)</span><br><span class="line"><span class="comment">#输出结果：['server=abc', 'database=master', 'uid=123', 'pwd=456']</span></span><br><span class="line">y = <span class="string">';'</span>.join([<span class="string">'%s=%s'</span> % (k, v) <span class="keyword">for</span> k, v <span class="keyword">in</span> params.items()])</span><br><span class="line">print(y)</span><br><span class="line"><span class="comment">#输出结果：server=abc;database=master;uid=123;pwd=456</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Note:join 只能用于元素是字符串的 list；它不进行任何的类型强制转换。</span></span><br></pre></td></tr></table></figure><h3 id="9、list分割字符串"><a href="#9、list分割字符串" class="headerlink" title="9、list分割字符串"></a>9、list分割字符串</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'server=abc'</span>, <span class="string">'database=master'</span>, <span class="string">'uid=123'</span>, <span class="string">'pwd=456'</span>]</span><br><span class="line">x = <span class="string">';'</span>.join(list)</span><br><span class="line">print(x)</span><br><span class="line"><span class="comment">#输出结果：server=abc;database=master;uid=123;pwd=456</span></span><br><span class="line">y = x.split(<span class="string">';'</span>)    <span class="comment">#split 与 join 正好相反，它将一个字符串分割成多元素list</span></span><br><span class="line">print(y)</span><br><span class="line"><span class="comment">#输出结果：['server=abc', 'database=master', 'uid=123', 'pwd=456']</span></span><br><span class="line">z = x.split(<span class="string">';'</span>, <span class="number">1</span>)     <span class="comment">#第二个参数为要分割的次数</span></span><br><span class="line">print(z)</span><br><span class="line"><span class="comment">#输出结果：['server=abc', 'database=master;uid=123;pwd=456']</span></span><br></pre></td></tr></table></figure><h3 id="10、list的映射"><a href="#10、list的映射" class="headerlink" title="10、list的映射"></a>10、list的映射</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">10</span>]</span><br><span class="line">print([elem*<span class="number">2</span> <span class="keyword">for</span> elem <span class="keyword">in</span> list])</span><br><span class="line"><span class="comment">#输出结果：[2, 10, 6, 20]</span></span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：[1, 5, 3, 10]</span></span><br><span class="line">list = [elem*<span class="number">2</span> <span class="keyword">for</span> elem <span class="keyword">in</span> list]</span><br><span class="line">print(list)</span><br><span class="line"><span class="comment">#输出结果：[2, 10, 6, 20]</span></span><br></pre></td></tr></table></figure><h3 id="11、dict（字典）中的解析（返回的为list形式）"><a href="#11、dict（字典）中的解析（返回的为list形式）" class="headerlink" title="11、dict（字典）中的解析（返回的为list形式）"></a>11、dict（字典）中的解析（返回的为list形式）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">params = &#123;<span class="string">'server'</span>:<span class="string">'abc'</span>, <span class="string">'database'</span>:<span class="string">'master'</span>, <span class="string">'uid'</span>:<span class="string">'123'</span>, <span class="string">'pwd'</span>:<span class="string">'456'</span>&#125;</span><br><span class="line">print(params.keys())</span><br><span class="line"><span class="comment">#输出结果：dict_keys(['server', 'database', 'uid', 'pwd'])</span></span><br><span class="line">print(params.values())</span><br><span class="line"><span class="comment">#输出结果：dict_values(['abc', 'master', '123', '456'])</span></span><br><span class="line">print(params.items())</span><br><span class="line"><span class="comment">#输出结果：dict_items([('server', 'abc'), ('database', 'master'), ('uid', '123'), ('pwd', '456')])</span></span><br><span class="line">print([k <span class="keyword">for</span> k, v <span class="keyword">in</span> params.items()])</span><br><span class="line"><span class="comment">#输出结果：['server', 'database', 'uid', 'pwd']</span></span><br><span class="line">print([v <span class="keyword">for</span> k, v <span class="keyword">in</span> params.items()])</span><br><span class="line"><span class="comment">#输出结果：['abc', 'master', '123', '456']</span></span><br><span class="line">print([<span class="string">'%s=%s'</span> % (k, v) <span class="keyword">for</span> k, v <span class="keyword">in</span> params.items()])</span><br><span class="line"><span class="comment">#输出结果：['server=abc', 'database=master', 'uid=123', 'pwd=456']</span></span><br><span class="line">print([&#123;k:v&#125; <span class="keyword">for</span> k, v <span class="keyword">in</span> params.items()])</span><br><span class="line"><span class="comment">#输出结果：[&#123;'server': 'abc'&#125;, &#123;'database': 'master'&#125;, &#123;'uid': '123'&#125;, &#123;'pwd': '456'&#125;]</span></span><br></pre></td></tr></table></figure><h3 id="12、list过滤"><a href="#12、list过滤" class="headerlink" title="12、list过滤"></a>12、list过滤</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">list = [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'123'</span>, <span class="string">'z'</span>, <span class="string">'456'</span>, <span class="string">'b'</span>, <span class="string">'d'</span>, <span class="string">'d'</span>]</span><br><span class="line">print([elem <span class="keyword">for</span> elem <span class="keyword">in</span> list <span class="keyword">if</span> len(elem) &gt; <span class="number">1</span>])     <span class="comment">#过滤掉 list 里字符串长度小于等于1的元素</span></span><br><span class="line"><span class="comment">#输出结果：['123', '456']</span></span><br><span class="line">print([elem <span class="keyword">for</span> elem <span class="keyword">in</span> list <span class="keyword">if</span> elem != <span class="string">'b'</span>])       <span class="comment">#过滤掉'b'元素</span></span><br><span class="line"><span class="comment">#输出结果：['a', '123', 'z', '456', 'd', 'd']</span></span><br><span class="line">print([elem <span class="keyword">for</span> elem <span class="keyword">in</span> list <span class="keyword">if</span> list.count(elem) == <span class="number">1</span>])       <span class="comment">#过滤掉除了 list 里只出现过一次的元素</span></span><br><span class="line"><span class="comment">#输出结果：['a', '123', 'z', '456']</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> list </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之Requests_html库入门篇（含实例：爬取51jobs网站python岗位信息 ）</title>
      <link href="/2020/05/23/Python%E4%B9%8BRequests-html%E5%BA%93%E5%85%A5%E9%97%A8%E7%AF%87%EF%BC%88%E5%90%AB%E5%AE%9E%E4%BE%8B%EF%BC%9A%E7%88%AC%E5%8F%9651jobs%E7%BD%91%E7%AB%99python%E5%B2%97%E4%BD%8D%E4%BF%A1%E6%81%AF-%EF%BC%89/"/>
      <url>/2020/05/23/Python%E4%B9%8BRequests-html%E5%BA%93%E5%85%A5%E9%97%A8%E7%AF%87%EF%BC%88%E5%90%AB%E5%AE%9E%E4%BE%8B%EF%BC%9A%E7%88%AC%E5%8F%9651jobs%E7%BD%91%E7%AB%99python%E5%B2%97%E4%BD%8D%E4%BF%A1%E6%81%AF-%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>Python上有一个非常著名的HTTP库——requests，相比大家都听说过，用过的人都说好！现在requests库的作者又发布了一个新库，叫做requests-html，看名字也能猜出来，这是一个解析HTML的库，而且用起来和requests一样爽，下面就来介绍一下它。</p><a id="more"></a><p>@<a href="Requests_html库入门学习">TOC</a></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install requests_html</span><br></pre></td></tr></table></figure><p>如果还不会pip安装的请看我的这篇文章——&gt;<a href="https://blog.csdn.net/weixin_43347550/article/details/105185238" target="_blank" rel="noopener">pip 安装，更新，卸载，查看模块方法</a></p><p><font color=red>Note: requests-html只支持Python 3.6及更新的版本，所以使用老版本的Python的同学需要更新一下Python版本了。</font></p><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><h5 id="获取网页"><a href="#获取网页" class="headerlink" title="获取网页"></a>获取网页</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests_html <span class="keyword">import</span> HTMLSession</span><br><span class="line"></span><br><span class="line">session = HTMLSession()</span><br><span class="line">url = <span class="string">"https://search.51job.com/list/010000,000000,0000,00,9,99,python,2,1.html"</span></span><br><span class="line">h = session.get(url=url)</span><br><span class="line"><span class="comment">#查看网页内容</span></span><br><span class="line">print(h.html.html)</span><br></pre></td></tr></table></figure><p>requests-html和其他解析HTML库最大的不同点在于HTML解析库一般都是专用的，所以我们需要用另一个HTTP库先把网页下载下来，然后传给那些HTML解析库。<br>而requests-html自带了这个功能，所以在爬取网页等方面非常方便</p><h5 id="获取连接"><a href="#获取连接" class="headerlink" title="获取连接"></a>获取连接</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#相对路径</span></span><br><span class="line">print(h.html.links)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#绝对路径</span></span><br><span class="line">print(h.html.absolute_links)</span><br></pre></td></tr></table></figure><p>links和absolute_links两个属性分别返回HTML对象所包含的所有链接和绝对链接（均不包含锚点）。</p><h5 id="获取元素"><a href="#获取元素" class="headerlink" title="获取元素"></a>获取元素</h5><p>request-html支持CSS选择器和XPATH两种语法来选取HTML元素。<br>1、首先先来看看CSS选择器语法，它需要使用HTML的find函数，该函数有5个参数，作用如下：</p><ul><li>selector，要用的CSS选择器；</li><li>clean，布尔值，如果为真会忽略HTML中style和script标签造成的影响（原文是-sanitize，大概这么理解）;</li><li>containing，如果设置该属性，会返回包含该属性文本的标签；</li><li>first，布尔值，如果为真会返回第一个元素，否则会返回满足条件的元素列表；</li><li>_encoding，编码格式。<br>示例：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取职业名称</span></span><br><span class="line">position = h.html.find(<span class="string">'#resultList &gt; div:nth-child(&#123;num&#125;) &gt; p &gt; span &gt; a'</span>.format(num=i), first=<span class="literal">True</span>).text</span><br><span class="line">print(position)</span><br></pre></td></tr></table></figure>输出结果为：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python开发工程师</span><br></pre></td></tr></table></figure>2、XPATH语法，这需要另一个函数xpath的支持，它有4个参数如下：</li><li>selector，要用的XPATH选择器；</li><li>clean，布尔值，如果为真会忽略HTML中style和script标签造成的影响（原文是sanitize，大概这么理解）;</li><li>first，布尔值，如果为真会返回第一个元素，否则会返回满足条件的元素列表；</li><li>_encoding，编码格式。<br>示例：</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#获取职业名称</span></span><br><span class="line">position = h.html.xpath(<span class="string">'#resultList &gt; div:nth-child(&#123;num&#125;) &gt; p &gt; span &gt; a'</span>.format(num=i), first=<span class="literal">True</span>).text</span><br><span class="line">print(position)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Python开发工程师</span><br></pre></td></tr></table></figure><h5 id="元素内容"><a href="#元素内容" class="headerlink" title="元素内容"></a>元素内容</h5><p>要获取元素的attribute，用attr属性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(h.attrs)</span><br></pre></td></tr></table></figure><p>获取元素的html代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(h.html)</span><br></pre></td></tr></table></figure><p>要搜索元素的文本内容，用search函数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(e.search(<span class="string">'51j&#123;&#125;bs'</span>)[<span class="number">0</span>])</span><br><span class="line"><span class="comment">#输出：o</span></span><br></pre></td></tr></table></figure><p>两个链接属性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">print(e.links)  <span class="comment"># 相对路径</span></span><br><span class="line">print(e.absolute_links) <span class="comment"># 绝对路径</span></span><br></pre></td></tr></table></figure><h3 id="实例-爬取51jobs网站有关Python工作的信息"><a href="#实例-爬取51jobs网站有关Python工作的信息" class="headerlink" title="实例 爬取51jobs网站有关Python工作的信息"></a>实例 爬取51jobs网站有关Python工作的信息</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> requests_html <span class="keyword">import</span> HTMLSession</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> csv</span><br><span class="line"></span><br><span class="line">session = HTMLSession()</span><br><span class="line"></span><br><span class="line">file = open(<span class="string">'51jobsinfo.csv'</span>, <span class="string">'w'</span>, newline=<span class="string">''</span>)</span><br><span class="line">csvwriter = csv.writer(file)</span><br><span class="line">csvwriter.writerow([<span class="string">'序号'</span>, <span class="string">'职位名称'</span>, <span class="string">'公司名'</span>, <span class="string">'地点'</span>, <span class="string">'薪资'</span>])</span><br><span class="line">num = <span class="number">1</span>  <span class="comment">#初始化抓取每条信息的序号</span></span><br><span class="line">cont = <span class="number">0</span> <span class="comment">#初始化抓取页数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_jobsinfo</span><span class="params">(url)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        h = session.get(url=url)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'第&#123;&#125;页抓取失败共10页'</span>.format(cont))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">global</span> num</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>,<span class="number">54</span>):</span><br><span class="line">            <span class="comment">#i = int(i)</span></span><br><span class="line">            position = h.html.find(<span class="string">'#resultList &gt; div:nth-child(&#123;num&#125;) &gt; p &gt; span &gt; a'</span>.format(num=i), first=<span class="literal">True</span>).text</span><br><span class="line">            company = h.html.find(<span class="string">'#resultList &gt; div:nth-child(&#123;num&#125;) &gt; span.t2 &gt; a'</span>.format(num=i), first=<span class="literal">True</span>).text</span><br><span class="line">            place = h.html.find(<span class="string">'#resultList &gt; div:nth-child(&#123;num&#125;) &gt; span.t3'</span>.format(num=i), first=<span class="literal">True</span>).text</span><br><span class="line">            salary = h.html.find(<span class="string">'#resultList &gt; div:nth-child(&#123;num&#125;) &gt; span.t4'</span>.format(num=i), first=<span class="literal">True</span>).text</span><br><span class="line">            csvwriter.writerow([num, position, company, place, salary])</span><br><span class="line">            num += <span class="number">1</span></span><br><span class="line">        print(<span class="string">'第&#123;&#125;页抓取完毕共10页'</span>.format(cont))</span><br><span class="line">        </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line"><span class="comment">#设置抓取页数</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">11</span>):</span><br><span class="line">        <span class="keyword">global</span> cont</span><br><span class="line">        cont = i</span><br><span class="line">        url = <span class="string">'https://search.51job.com/list/010000,000000,0000,00,9,99,python,2,'</span> + str(i) + <span class="string">'.html'</span></span><br><span class="line">        get_jobsinfo(url)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    print(<span class="string">'开始抓取...'</span>)</span><br><span class="line">    main()</span><br><span class="line">    print(<span class="string">'抓取完毕！共&#123;&#125;条信息。'</span>.format(num<span class="number">-1</span>))</span><br><span class="line">    file.close()</span><br></pre></td></tr></table></figure><p>输出结果（由于信息的太多只展示部分）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">序号,职位名称,公司名,地点,薪资</span><br><span class="line"><span class="number">1</span>,Python开发工程师,北京泽塔云科技股份有限公司,北京-朝阳区,<span class="number">1</span><span class="number">-2</span>万/月</span><br><span class="line"><span class="number">2</span>,EB/JAVA/Python软件研发工程师,中国科学院软件研究所,北京-海淀区,<span class="number">10</span><span class="number">-15</span>万/年</span><br><span class="line"><span class="number">3</span>,Python中级开发工程师,深圳市赢时胜信息技术股份有限公司...,北京-西城区,<span class="number">1</span><span class="number">-1.2</span>万/月</span><br><span class="line"><span class="number">4</span>,Python/PHP开发工程师,北京华脉世纪石油科技有限公司,北京,<span class="number">0.8</span><span class="number">-1</span>万/月</span><br><span class="line"><span class="number">5</span>,Python高级开发工程师,北京文泽智远信息技术有限公司,北京-海淀区,<span class="number">1.5</span><span class="number">-2</span>万/月</span><br><span class="line"><span class="number">6</span>,爬虫工程师（Java或Python）,北京三六九数动科技有限公司,北京,<span class="number">2.5</span><span class="number">-3</span>万/月</span><br><span class="line"><span class="number">7</span>,Python 工程师,北京友聚四海网络科技有限公司,北京-朝阳区,<span class="number">1</span><span class="number">-1.5</span>万/月</span><br><span class="line"><span class="number">8</span>,Python开发工程师-财务报表平台,字节跳动,北京,<span class="number">2</span><span class="number">-4</span>万/月</span><br><span class="line"><span class="number">9</span>,python开发,深圳市捷兴电子商务有限公司,北京-朝阳区,<span class="number">2</span><span class="number">-3</span>万/月</span><br></pre></td></tr></table></figure><hr><p><font color=red>Note: 如果频繁访问爬取的网页有可能会面临着ip被封，可以适当的使用代理ip来防止自己的ip被封，详细使用请参考我的这篇文章——&gt; <a href="https://blog.csdn.net/weixin_43347550/article/details/105380469" target="_blank" rel="noopener">都什么时代了还在裸爬吗，快用IP代理池吧！</a></font></p><h3 id="requests-html官方链接"><a href="#requests-html官方链接" class="headerlink" title="requests_html官方链接"></a>requests_html官方链接</h3><p>(<a href="https://requests-html.kennethreitz.org/" target="_blank" rel="noopener">https://requests-html.kennethreitz.org/</a>)</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Requests_html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 数据可视化生成词云 WordCloud</title>
      <link href="/2020/05/23/Python-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%94%9F%E6%88%90%E8%AF%8D%E4%BA%91-WordCloud/"/>
      <url>/2020/05/23/Python-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96%E7%94%9F%E6%88%90%E8%AF%8D%E4%BA%91-WordCloud/</url>
      
        <content type="html"><![CDATA[<p>演示：<br><img src="https://img-blog.csdnimg.cn/20200414104754800.gif#pic_center" alt="在这里插入图片描述"><br>不罗嗦，直接先上代码。</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">path = <span class="string">r'E:\123\教程'</span>  <span class="comment">#文本路径</span></span><br><span class="line">path_ph = <span class="string">r'E:\123\教程'</span>   <span class="comment">#词云背景模板路径</span></span><br><span class="line">font = <span class="string">r'C:\Windows\Fonts\FZSTK.TTF'</span>  <span class="comment">#设置字体，可以显示中文。</span></span><br><span class="line"></span><br><span class="line">text = (open(path + <span class="string">r'\job.txt'</span>, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>)).read()   <span class="comment"># gbk &lt;--&gt; utf-8</span></span><br><span class="line">cut = jieba.cut(text)  <span class="comment"># 使用 jieba库 分词</span></span><br><span class="line">string = <span class="string">' '</span>.join(cut)</span><br><span class="line">print(len(string))  <span class="comment"># 输出词量</span></span><br><span class="line">img = Image.open(path_ph + <span class="string">r'\2.jpg'</span>)  <span class="comment"># 打开图片</span></span><br><span class="line">img_array = np.array(img)  <span class="comment"># 将图片装换为数组</span></span><br><span class="line">stopword = [<span class="string">'Unword'</span>]  <span class="comment"># 设置停止词，也就是你不想显示的词，可有可无，看情况处理</span></span><br><span class="line">wc = WordCloud(</span><br><span class="line">    background_color=<span class="string">'white'</span>,  <span class="comment">#设置显示内容在什么颜色内</span></span><br><span class="line">    width=<span class="number">1000</span>,    <span class="comment">#设置图片宽</span></span><br><span class="line">    height=<span class="number">800</span>,     <span class="comment">#设置图片高</span></span><br><span class="line">    mask=img_array,  <span class="comment">#设置词云背景模板</span></span><br><span class="line">    font_path=font,  <span class="comment">#设置字体路径</span></span><br><span class="line">    stopwords=stopword,</span><br><span class="line">    scale=<span class="number">10</span>  <span class="comment">#图像清晰度，数值越大越清晰，最好在10-30之间。</span></span><br><span class="line">)</span><br><span class="line">wc.generate_from_text(string)  <span class="comment"># 绘制图片</span></span><br><span class="line">plt.imshow(wc)</span><br><span class="line">plt.axis(<span class="string">'off'</span>) <span class="comment">#关闭坐标轴</span></span><br><span class="line">plt.show()  <span class="comment"># 显示图片</span></span><br><span class="line">wc.to_file(path + <span class="string">r'\wordcloud1.png'</span>)  <span class="comment"># 保存图片</span></span><br></pre></td></tr></table></figure><p>使用之前需要将需要的第三方库先下载安装完。（wordcloud、jieba、matplotlib、PIL、numpy）<br>可以通过pip安装。<br>如果还不会的可以看我的另一个文章———&gt;<a href="https://blog.csdn.net/weixin_43347550/article/details/105185238" target="_blank" rel="noopener">pip 安装，更新，卸载，查看模块方法</a></p><p><font color=red>Note：有时候你们生成的词云可能不清晰，是因为没有设置 scale 值 ，设置完后会让生成的词云图像变得清晰。</font></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> wordcloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之彻底学会字典（干货！）</title>
      <link href="/2020/05/23/Python%E4%B9%8B%E5%BD%BB%E5%BA%95%E5%AD%A6%E4%BC%9A%E5%AD%97%E5%85%B8%EF%BC%88%E5%B9%B2%E8%B4%A7%EF%BC%81%EF%BC%89/"/>
      <url>/2020/05/23/Python%E4%B9%8B%E5%BD%BB%E5%BA%95%E5%AD%A6%E4%BC%9A%E5%AD%97%E5%85%B8%EF%BC%88%E5%B9%B2%E8%B4%A7%EF%BC%81%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>@<a href="干货！！！">TOC</a></p><h1 id="Python-字典"><a href="#Python-字典" class="headerlink" title="Python 字典"></a>Python 字典</h1><p>字典是另一种可变容器模型，且可存储任意类型对象。<br>字典的使用非常简单，它有自己的标志性符号，就是用大括号（{}）定义。<br>字典由“键”和“值”共同构成，每个键值对用冒号（  ：）分割，每一对键值组合称为“项”,每个项之间用逗号（,）分割。<br>格式如下：</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;key1 : value1, key2 : value2 &#125;</span><br></pre></td></tr></table></figure><p><font color=red>Note:字典的键必须独一无二，但值则不必。值可以取任何数据类型，但必须是不可变的，如字符串、数或元组。</font></p><h3 id="一、创建和访问字典"><a href="#一、创建和访问字典" class="headerlink" title="一、创建和访问字典"></a>一、创建和访问字典</h3><h5 id="1-创建字典："><a href="#1-创建字典：" class="headerlink" title="(1).创建字典："></a>(1).创建字典：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br></pre></td></tr></table></figure><h5 id="2-访问字典："><a href="#2-访问字典：" class="headerlink" title="(2).访问字典："></a>(2).访问字典：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"><span class="comment">#直接访问</span></span><br><span class="line">print(dict)</span><br><span class="line"><span class="comment">#通过循环逐个访问</span></span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> dict:</span><br><span class="line">    print(<span class="string">'%s : %s'</span> % (each, dict[each]))</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'Name'</span>: <span class="string">'Tom'</span>, <span class="string">'Age'</span>: <span class="string">'16'</span>, <span class="string">'Sex'</span>: <span class="string">'male'</span>&#125;</span><br><span class="line">Name : Tom</span><br><span class="line">Age : <span class="number">16</span></span><br><span class="line">Sex : male</span><br></pre></td></tr></table></figure><h3 id="二、修改、添加和删除字典"><a href="#二、修改、添加和删除字典" class="headerlink" title="二、修改、添加和删除字典"></a>二、修改、添加和删除字典</h3><h5 id="1-修改字典："><a href="#1-修改字典：" class="headerlink" title="(1).修改字典："></a>(1).修改字典：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"><span class="comment">#修改年龄</span></span><br><span class="line">dict[<span class="string">'Age'</span>] = <span class="number">20</span></span><br><span class="line">print(dict)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'Name'</span>: <span class="string">'Tom'</span>, <span class="string">'Age'</span>: <span class="number">20</span>, <span class="string">'Sex'</span>: <span class="string">'male'</span>&#125;</span><br></pre></td></tr></table></figure><h5 id="2-添加字典："><a href="#2-添加字典：" class="headerlink" title="(2).添加字典："></a>(2).添加字典：</h5><ol><li>添加单个项</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"><span class="comment">#添加 ID</span></span><br><span class="line">dict[<span class="string">'ID'</span>] = <span class="string">'001'</span></span><br><span class="line">print(dict)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'Name'</span>: <span class="string">'Tom'</span>, <span class="string">'Age'</span>: <span class="string">'16'</span>, <span class="string">'Sex'</span>: <span class="string">'male'</span>, <span class="string">'ID'</span>: <span class="string">'001'</span>&#125;</span><br></pre></td></tr></table></figure><p>2.一行代码合并两个字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加一个dict</span></span><br><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line">dict2 = &#123;<span class="string">'ID'</span>:<span class="string">'001'</span>, <span class="string">'School'</span>:<span class="string">'yale'</span>&#125;</span><br><span class="line">dict = &#123;**dict, **dict2&#125;</span><br><span class="line">print(dict)</span><br><span class="line"><span class="comment">#输出结果：&#123;'Name': 'Tom', 'Age': '16', 'Sex': 'male', 'ID': '001', 'School': 'yale'&#125;</span></span><br><span class="line"><span class="comment">#另一种写法</span></span><br><span class="line">dict = &#123;**&#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;, **&#123;<span class="string">'ID'</span>:<span class="string">'001'</span>, <span class="string">'School'</span>:<span class="string">'yale'</span>&#125;&#125;</span><br><span class="line">print(dict)</span><br><span class="line"><span class="comment">#输出结果：&#123;'Name': 'Tom', 'Age': '16', 'Sex': 'male', 'ID': '001', 'School': 'yale'&#125;</span></span><br></pre></td></tr></table></figure><h5 id="3-删除字典："><a href="#3-删除字典：" class="headerlink" title="(3).删除字典："></a>(3).删除字典：</h5><ol><li>删除字典的项：<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"><span class="comment">#删除 Age</span></span><br><span class="line"><span class="keyword">del</span> dict[<span class="string">'Age'</span>]</span><br><span class="line">print(dict)</span><br></pre></td></tr></table></figure>输出结果：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'Name'</span>: <span class="string">'Tom'</span>, <span class="string">'Sex'</span>: <span class="string">'male'</span>&#125;</span><br></pre></td></tr></table></figure><ol start="2"><li>删除整个字典：</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"><span class="comment">#删除 dict字典 </span></span><br><span class="line">dict.clear()</span><br><span class="line"><span class="keyword">del</span> dict</span><br><span class="line">print(dict)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">dict</span>'&gt;</span></span><br></pre></td></tr></table></figure><h3 id="三、字典键的特性"><a href="#三、字典键的特性" class="headerlink" title="三、字典键的特性"></a>三、字典键的特性</h3><p>字典值可以没有任何限制地取任何python对象，既可以是标准的对象，也可以是用户定义的，但键不行。有两个重要的注意点必须记住！</p><h5 id="1-不允许同一个键出现两次。创建时如果同一个键被赋值两次，后一个值会被记住。"><a href="#1-不允许同一个键出现两次。创建时如果同一个键被赋值两次，后一个值会被记住。" class="headerlink" title="(1).不允许同一个键出现两次。创建时如果同一个键被赋值两次，后一个值会被记住。"></a>(1).不允许同一个键出现两次。创建时如果同一个键被赋值两次，后一个值会被记住。</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'Name'</span>:<span class="string">'Tom'</span>, <span class="string">'Name'</span>:<span class="string">'Li'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">'Name'</span>: <span class="string">'Li'</span>, <span class="string">'Age'</span>: <span class="string">'16'</span>, <span class="string">'Sex'</span>: <span class="string">'male'</span>&#125;</span><br></pre></td></tr></table></figure><h5 id="2-键必须不可变，所以可以用数字，字符串或者元组充当，而用列表就不行。"><a href="#2-键必须不可变，所以可以用数字，字符串或者元组充当，而用列表就不行。" class="headerlink" title="(2).键必须不可变，所以可以用数字，字符串或者元组充当，而用列表就不行。"></a>(2).键必须不可变，所以可以用数字，字符串或者元组充当，而用列表就不行。</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;[<span class="string">'Name'</span>]:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line"></span><br><span class="line">print(dict)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"dict.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    dict = &#123;[<span class="string">'Name'</span>]:<span class="string">'Tom'</span>, <span class="string">'Age'</span>:<span class="string">'16'</span>, <span class="string">'Sex'</span>:<span class="string">'male'</span>&#125;</span><br><span class="line">TypeError: unhashable type: <span class="string">'list'</span></span><br></pre></td></tr></table></figure><h3 id="四、字典内置函数和方法"><a href="#四、字典内置函数和方法" class="headerlink" title="四、字典内置函数和方法"></a>四、字典内置函数和方法</h3><h5 id="1-内置函数"><a href="#1-内置函数" class="headerlink" title="(1).内置函数"></a>(1).内置函数</h5><table><thead><tr><th>序号</th><th>函数及描述</th><th>实例</th></tr></thead><tbody><tr><td>1</td><td>len(dict)        计算字典元素个数，即键的总数</td><td><img src="https://img-blog.csdnimg.cn/20200412113216202.png" alt="在这里插入图片描述"></td></tr><tr><td>2</td><td>str(dict)        输出字典以可打印的字符串表示</td><td><img src="https://img-blog.csdnimg.cn/20200412113317136.png" alt="在这里插入图片描述"></td></tr><tr><td>3</td><td>type(variable)        返回输入的变量类型，如果变量是字典就返回字典类型</td><td><img src="https://img-blog.csdnimg.cn/20200412113357289.png" alt="在这里插入图片描述"></td></tr><tr><td>##### (2).内置方法</td><td></td><td></td></tr><tr><td>序号</td><td>方法及描述</td><td>实例</td></tr><tr><td>–</td><td>–</td><td>—</td></tr><tr><td>1</td><td>dict.clear()    删除字典内所有元素</td><td><img src="https://img-blog.csdnimg.cn/2020041211570844.png" alt="在这里插入图片描述"></td></tr><tr><td>2</td><td>dict.copy()     返回一个字典的浅复制</td><td><img src="https://img-blog.csdnimg.cn/20200412115823626.png" alt="在这里插入图片描述"></td></tr><tr><td>3</td><td>dict.fromkeys(seq, value)        创建一个新字典，以序列seq中元素做字典的键，以value做为字典所有键对应的初始值</td><td><img src="https://img-blog.csdnimg.cn/20200412120129509.png" alt="在这里插入图片描述"></td></tr><tr><td>4</td><td>dict.get(key, default=None)     返回指定键的值，如果值不在字典中返回default值</td><td><img src="https://img-blog.csdnimg.cn/20200412120325709.png" alt="在这里插入图片描述"></td></tr><tr><td>5</td><td>key in dict    如果键在字典dict里返回true，否则返回false</td><td><img src="https://img-blog.csdnimg.cn/20200412120710808.png" alt="在这里插入图片描述"></td></tr><tr><td>6</td><td>dict.items()    以列表返回可遍历的（键，值）元组数组</td><td><img src="https://img-blog.csdnimg.cn/20200412120851654.png" alt="在这里插入图片描述"></td></tr><tr><td>7</td><td>dict.keys()    以列表返回一个字典的所有的键</td><td><img src="https://img-blog.csdnimg.cn/20200412121025868.png" alt="在这里插入图片描述"></td></tr><tr><td>8</td><td>dict.setdefault(key, defalut=None)    和get()类似，但如果键不存在于字典中，将会添加键并将值设为default</td><td><img src="https://img-blog.csdnimg.cn/20200412121436962.png" alt="在这里插入图片描述"></td></tr><tr><td>9</td><td>dict.update(dict2)    把字典dict2的键/值对更新到dict里</td><td><img src="https://img-blog.csdnimg.cn/20200412121633613.png" alt="在这里插入图片描述"></td></tr><tr><td>10</td><td>dict.values()     以列表返回字典中所有值</td><td><img src="https://img-blog.csdnimg.cn/20200412121818535.png" alt="在这里插入图片描述"></td></tr><tr><td>—</td><td></td><td></td></tr></tbody></table><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> dict </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>学Python了还不会异常处理吗？这一篇让你彻底掌握它</title>
      <link href="/2020/05/23/%E5%AD%A6Python%E4%BA%86%E8%BF%98%E4%B8%8D%E4%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%90%97%EF%BC%9F%E8%BF%99%E4%B8%80%E7%AF%87%E8%AE%A9%E4%BD%A0%E5%BD%BB%E5%BA%95%E6%8E%8C%E6%8F%A1%E5%AE%83/"/>
      <url>/2020/05/23/%E5%AD%A6Python%E4%BA%86%E8%BF%98%E4%B8%8D%E4%BC%9A%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%90%97%EF%BC%9F%E8%BF%99%E4%B8%80%E7%AF%87%E8%AE%A9%E4%BD%A0%E5%BD%BB%E5%BA%95%E6%8E%8C%E6%8F%A1%E5%AE%83/</url>
      
        <content type="html"><![CDATA[<h5 id="你不可能总是对的"><a href="#你不可能总是对的" class="headerlink" title="你不可能总是对的"></a>你不可能总是对的</h5><p>因为我们是人，不是神，所以经常会犯错误。当然程序员也不例外，就算是经验丰富的码农，也不能保证写出来的代码百分之百没有任何问题（要不哪来的那么多的漏洞）。</p><p>另外，作为一名合格的程序猿，在编程的时候一定要意识到一点，那就是永远不要相信你的用户。要把它们想象成熊孩子，把它们想象成黑客，这样写出来的程序自然会更加的安全和稳定。</p><p>那么既然程序总会出错出问题，就应该学会用适当的方法去解决问题。<br>程序出现逻辑错误或者用户输入不合法都会引发异常，但这些一场不是致命的，不会导致程序坏死。可以利用Python提供的异常处理机制，在异常出现的时候及时捕获，并从内部消化掉。</p><a id="more"></a><p>那么接下来就是正确<font color=red>学习Python的姿势了</font>。</p><p>那什么是异常呢？我们先来了解下，如果你编写了一个异常代码，运行后，会出现异常，代码会停止，并显示出一个 <font color=red><strong>Traceback</strong> </font>  ，这其中就包含了有关异常的报告，举个例子：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example1.py</span></span><br><span class="line">file_name = <span class="string">'不存在的文件.txt'</span></span><br><span class="line">f = open(file_name, <span class="string">'r'</span>)</span><br><span class="line">print(<span class="string">'输出文件内容:'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">    print(line)</span><br></pre></td></tr></table></figure><p>这里是打开一个不存在的文件，那么这就会使代码出现异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example1.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    f = open(file_name, <span class="string">'r'</span>)</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">'随便来个文件.txt'</span></span><br></pre></td></tr></table></figure><p>上面的例子就抛出了一个<font color=red>FileNotFoundError</font >异常。<br>当然了Python不可能只抛出这么一个异常，<br>那Python通常会抛出那些异常呢？这里我先一一列举出来，做个总结，让大家先有个认识，这样今后遇见这样的异常时就不会感到陌生了。</p><h5 id="常见异常总结"><a href="#常见异常总结" class="headerlink" title="常见异常总结"></a>常见异常总结</h5><h4 id="1-FileNotFoundError：找不到文件异常"><a href="#1-FileNotFoundError：找不到文件异常" class="headerlink" title="1. FileNotFoundError：找不到文件异常"></a>1. <font color=red>FileNotFoundError</font >：找不到文件异常</h4><p>  使用文件时，一种常见的问题是找不到文件：你要查找的文件可能在其他什么地方，文件名可能不正确或者这个文件根本不存在。<br> 上面已举例，这里我就不再举例了。</p><h4 id="2-AssertionError：断言语句（assert）失败"><a href="#2-AssertionError：断言语句（assert）失败" class="headerlink" title="2. AssertionError：断言语句（assert）失败"></a>2. <font color=red>AssertionError</font >：断言语句（assert）失败</h4><p> 当 assert 这个我关键字后面的条件为假时，程序将停止并抛出 AssertionError 异常。assert 语句一般是在测试程序的时候用于在代码中置入检查点：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example2</span></span><br><span class="line">my_list = [<span class="string">'example2'</span>]</span><br><span class="line"><span class="keyword">assert</span> len(my_list) &gt; <span class="number">0</span></span><br><span class="line"></span><br><span class="line">my_list.pop()</span><br><span class="line"><span class="keyword">assert</span> len(my_list) &gt; <span class="number">0</span></span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">5</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    <span class="keyword">assert</span> len(my_list) &gt; <span class="number">0</span></span><br><span class="line">AssertionError</span><br></pre></td></tr></table></figure><h4 id="3-AttributeError：尝试访问未知的对象属性"><a href="#3-AttributeError：尝试访问未知的对象属性" class="headerlink" title="3. AttributeError：尝试访问未知的对象属性"></a>3. <font color=red>AttributeError</font >：尝试访问未知的对象属性</h4><p>当试图访问的对象属性不存在时抛出 AttributeError 异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example3</span></span><br><span class="line">my_list = []</span><br><span class="line">my_list.example3</span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    my_list.example3</span><br><span class="line">AttributeError: <span class="string">'list'</span> object has no attribute <span class="string">'example3'</span></span><br></pre></td></tr></table></figure><h4 id="4-IndexError：索引超出序列范围"><a href="#4-IndexError：索引超出序列范围" class="headerlink" title="4. IndexError：索引超出序列范围"></a>4. <font color=red>IndexError</font >：索引超出序列范围</h4><p>在使用序列的时候就常常会遇到 IndexError 异常，原因是索引超出序列范围的内容：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example4</span></span><br><span class="line">my_list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">x = my_list[<span class="number">3</span>]</span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">2</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    x = my_list[<span class="number">3</span>]</span><br><span class="line">IndexError: list index out of range</span><br></pre></td></tr></table></figure><h4 id="5-KeyError：字典中查找一个不存在的关键字"><a href="#5-KeyError：字典中查找一个不存在的关键字" class="headerlink" title="5. KeyError：字典中查找一个不存在的关键字"></a>5. <font color=red>KeyError</font >：字典中查找一个不存在的关键字</h4><p>当试图在字典中查找一个不存在的关键字时就会引发 KeyError 异常，因此建议使用 dict.get()方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># example5</span></span><br><span class="line">my_dist = &#123;<span class="string">'one'</span>:<span class="number">1</span>, <span class="string">'two'</span>:<span class="number">2</span>, <span class="string">'three'</span>:<span class="number">3</span>&#125;</span><br><span class="line">x = my_dist[<span class="string">'one'</span>]</span><br><span class="line">print(x)</span><br><span class="line">y = my_dist[<span class="string">'four'</span>]</span><br><span class="line">print(y)</span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    y = my_dist[<span class="string">'four'</span>]</span><br><span class="line">KeyError: <span class="string">'four'</span></span><br></pre></td></tr></table></figure><h4 id="6-NameError：尝试访问一个不存在的变量"><a href="#6-NameError：尝试访问一个不存在的变量" class="headerlink" title="6. NameError：尝试访问一个不存在的变量"></a>6. <font color=red>NameError</font >：尝试访问一个不存在的变量</h4><p>当尝试访问一个不存在的变量时，Python会抛出 NameError 异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example6</span></span><br><span class="line">example6</span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    example6</span><br><span class="line">NameError: name <span class="string">'example6'</span> <span class="keyword">is</span> <span class="keyword">not</span> defined</span><br></pre></td></tr></table></figure><h4 id="7-OSError：操作系统产生的异常"><a href="#7-OSError：操作系统产生的异常" class="headerlink" title="7. OSError：操作系统产生的异常"></a>7. <font color=red>OSError</font >：操作系统产生的异常</h4><p>OSError ，顾名思义就是操作系统产生的异常，就像打开一个不存在的文件就会引发 FileNotFindError ，而这个 FileNotFindError 就是 OSError 的子类。<br>例子在上面已演示过了，这里就不再重说了。</p><h4 id="8-SyntaxError：Python-的语法错误"><a href="#8-SyntaxError：Python-的语法错误" class="headerlink" title="8. SyntaxError：Python 的语法错误"></a>8. <font color=red>SyntaxError</font >：Python 的语法错误</h4><p>如果遇到 SyntaxError 是 Python 的语法错误，这时 Python 的代码并不能继续执行，应该先找到并改正错误：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example8</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'I am example8'</span></span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">1</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'I am example8'</span></span><br><span class="line">                        ^</span><br><span class="line">SyntaxError: Missing parentheses in call to 'print'. Did you mean print('I am example8')?</span><br></pre></td></tr></table></figure><h4 id="9-TypeError：不同类型间的无效操作"><a href="#9-TypeError：不同类型间的无效操作" class="headerlink" title="9. TypeError：不同类型间的无效操作"></a>9. <font color=red>TypeError</font >：不同类型间的无效操作</h4><p>类型不同的对象是不能互相进行计算的，否则会抛出 TypeError 异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example9</span></span><br><span class="line">x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">TypeError: unsupported operand type(s) <span class="keyword">for</span> +: <span class="string">'int'</span> <span class="keyword">and</span> <span class="string">'str'</span></span><br></pre></td></tr></table></figure><h4 id="10-ZeroDivisionError：除数为零"><a href="#10-ZeroDivisionError：除数为零" class="headerlink" title="10. ZeroDivisionError：除数为零"></a>10. <font color=red>ZeroDivisionError</font >：除数为零</h4><p>地球人都知道除数不为零，所以除以零就会引发 ZeroDivisionError 异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example10</span></span><br><span class="line">x = <span class="number">365</span> / <span class="number">0</span></span><br><span class="line">print(x)</span><br></pre></td></tr></table></figure><p>异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    x = <span class="number">365</span> / <span class="number">0</span></span><br><span class="line">ZeroDivisionError: division by zero</span><br></pre></td></tr></table></figure><h3 id="现在我们已经讲完常见的异常类型了，那接下来就是进入正题，该如何处理异常了"><a href="#现在我们已经讲完常见的异常类型了，那接下来就是进入正题，该如何处理异常了" class="headerlink" title="现在我们已经讲完常见的异常类型了，那接下来就是进入正题，该如何处理异常了"></a><font color=red>现在我们已经讲完常见的异常类型了，那接下来就是进入正题，该如何处理异常了</font></h3><h4 id="一、-try—except-语句"><a href="#一、-try—except-语句" class="headerlink" title="一、 try—except 语句"></a>一、 <font color=red>try—except 语句</font></h4><h5 id="1-语法结构："><a href="#1-语法结构：" class="headerlink" title="1. 语法结构："></a>1. 语法结构：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">检测内容</span><br><span class="line"><span class="keyword">except</span> Exception [<span class="keyword">as</span> reason]:</span><br><span class="line">出现异常（Exception）后的处理代码</span><br></pre></td></tr></table></figure><h5 id="2-简单举个例子："><a href="#2-简单举个例子：" class="headerlink" title="2. 简单举个例子："></a>2. 简单举个例子：</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example</span></span><br><span class="line">f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">print(f.read())</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><p>当上面的例子中’不存在的文档.txt‘，这个文档不存在时，Python就会报错出现异常：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"E:/PycharmProjects/untitled2/abnormal/example.py"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">FileNotFoundError: [Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">'不存在的文档.txt'</span></span><br></pre></td></tr></table></figure><p>这时为了解决异常问题，我们可以这么修改代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span> OSError:</span><br><span class="line">    print(<span class="string">'文件打开的时候出错啦T_T'</span>)</span><br></pre></td></tr></table></figure><p>运行一下试试：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件打开的时候出错啦T_T</span><br></pre></td></tr></table></figure><p><font color=red>注：这里我之所以用 OSError 而没用 FileNotFindError 是因为导致 OSError 异常的原因有很多（如  FileNotFindError，FileExistsError，PermissionError 等）</font><br>当然了，如果你更在意出错的具体内容，这里可以用 as 把具体的错误信息给打印出来：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'文件打开的时候出错啦T_T\n 错误原因是:'</span> + str(reason))</span><br></pre></td></tr></table></figure><p>运行后，结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件打开的时候出错啦T_T</span><br><span class="line"> 错误原因是:[Errno <span class="number">2</span>] No such file <span class="keyword">or</span> directory: <span class="string">'不存在的文档.txt'</span></span><br></pre></td></tr></table></figure><h5 id="3-针对不同异常设置多个-except"><a href="#3-针对不同异常设置多个-except" class="headerlink" title="3. 针对不同异常设置多个 except"></a>3. 针对不同异常设置多个 except</h5><p>一个 try 语句可以和多个 except 语句搭配<font color=red>（缺点是它只会返回第一个发现的异常）</font>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#example</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'文件打开的时候出错啦T_T\n 错误原因是:'</span> + str(reason))</span><br><span class="line"><span class="keyword">except</span> TypeError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'类型出错啦T_T\n 错误原因是:'</span> + str(reason))</span><br></pre></td></tr></table></figure><p>运行后，结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">类型出错啦T_T</span><br><span class="line"> 错误原因是:unsupported operand type(s) <span class="keyword">for</span> +: <span class="string">'int'</span> <span class="keyword">and</span> <span class="string">'str'</span></span><br></pre></td></tr></table></figure><h5 id="4-对多个异常统一处理"><a href="#4-对多个异常统一处理" class="headerlink" title="4. 对多个异常统一处理"></a>4. 对多个异常统一处理</h5><p>except 后面还可以跟着多个异常，然后对这些异常进行统一的处理<font color=red>（同样缺点是它只会返回第一个发现的异常）</font>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    int(<span class="string">'abc'</span>)</span><br><span class="line">    x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span> (OSError, TypeError, ValueError) <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'出错啦T_T\n 错误原因是:'</span> + str(reason))</span><br></pre></td></tr></table></figure><p>运行后，结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">出错啦T_T</span><br><span class="line"> 错误原因是:invalid literal <span class="keyword">for</span> int() <span class="keyword">with</span> base <span class="number">10</span>: <span class="string">'abc'</span></span><br></pre></td></tr></table></figure><h5 id="5-捕获所有异常"><a href="#5-捕获所有异常" class="headerlink" title="5. 捕获所有异常"></a>5. 捕获所有异常</h5><p>如果你无法判断要对哪一类型的异常进行处理，只是希望在 try 语句中一旦出现异常，可以返回一个看得懂的异常错误提醒，那么可以这么做：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    int(<span class="string">'abc'</span>)</span><br><span class="line">    x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'出错啦T_T'</span>)</span><br></pre></td></tr></table></figure><p>运行后，结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">出错啦T_T</span><br></pre></td></tr></table></figure><p><font color=red>注： 不过通常不建议这么做，因为它会隐藏所有程序未想到并且未做好处理准备的错误。</font></p><h4 id="二、-try—finally-语句"><a href="#二、-try—finally-语句" class="headerlink" title="二、 try—finally 语句"></a>二、 <font color=red>try—finally 语句</font></h4><p>如果确定存在一个名为 ’不存在的文档.txt‘ 的文件，open() 函数正常返回文件对象，但异常却发生在成功打开文件后的 x = 1 + ’1‘ 语句上。此时 Python 将直接跳到 except 语句上，也就是说，文件打开了，但关闭文件的命令却被跳过了，导致没有关闭文件。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line">    f.close()</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'出错啦T_T'</span>)</span><br></pre></td></tr></table></figure><p>因此出现了，为了实现像这种”就算出现异常，但也并不的不执行的收尾工作（如在程序崩溃前保存用户文档）“，引入了 finally 来扩展 try：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line">    x = <span class="number">1</span> + <span class="string">'1'</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">'出错啦T_T'</span>)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><p><font color=red>注：如果 try 语句块中没有出现任何异常，会跳过 except 语句块执行 finally 语句块的内容。如果出现了异常，则会先执行 except 语句块的内容再执行 finally 语句块的内容。总之，finally 语句块中的内容就是确保无论如何都将被执行的内容。</font></p><h4 id="三、-try—except-扩展-（出现异常时一声不吭）"><a href="#三、-try—except-扩展-（出现异常时一声不吭）" class="headerlink" title="三、 try—except 扩展 （出现异常时一声不吭）"></a>三、 try—except 扩展 （出现异常时一声不吭）</h4><p>如果我们想在出现异常时，当作什么也没发生，不做任何处理，可以使用 <font color=red><strong>pass</strong></font> 语句来实现。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>运行后，结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="四、-else-语句搭配"><a href="#四、-else-语句搭配" class="headerlink" title="四、 else 语句搭配"></a>四、 <font color=red>else 语句搭配</font></h4><p>else 语句还能与异常处理进行搭配，实现方法与循环语句搭配差不多：只要 try 语句块里没有出现任何异常，那么就会执行 else 语句块里的内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    int(<span class="number">4.5</span>)</span><br><span class="line"><span class="keyword">except</span> ValueError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'出错啦T_T: '</span>+ str(reason))</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'没有任何异常!'</span>)</span><br></pre></td></tr></table></figure><p>运行后，结果为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">没有任何异常!</span><br><span class="line"></span><br><span class="line">Process finished <span class="keyword">with</span> exit code <span class="number">0</span></span><br></pre></td></tr></table></figure><h4 id="五、-简洁的-with-语句"><a href="#五、-简洁的-with-语句" class="headerlink" title="五、  简洁的 with 语句"></a>五、  <font color=red>简洁的 with 语句</font></h4><p>你们在玩文件的时候可能都见过 with 语句 ，但是你们都理解为什么要带着它吗？</p><p>你们可能觉得，既要打开文件又要关闭文件，还要关注异常处理，有点麻烦，所以 Python 提供了一个 with 语句，利用这个语句抽象出文件操作中频繁使用的 try/except/finally 相关的细节。对文件操作使用 with 语句，将大大减少代码量，而且再也不用担心出现文件打开了忘记关闭的问题了 （ with 会自动帮助关闭文件）。<br>举例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    f = open(<span class="string">'不存在的文档.txt'</span>, <span class="string">'w'</span>)</span><br><span class="line">    print(f.read())</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'出错啦T_T: '</span> + str(reason))</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><p>使用 with 语句 ，可以改成以下这样：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'不存在的文档.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        print(f.read())</span><br><span class="line"><span class="keyword">except</span> OSError <span class="keyword">as</span> reason:</span><br><span class="line">    print(<span class="string">'出错啦T_T: '</span> + str(reason))</span><br></pre></td></tr></table></figure><p>是不是觉得很方便呢，有了<font color=red> with </font>语句，就在也不用担心忘记关闭文件了。</p><hr><p>到此，如果你能细心读完的话，我相信你对异常处理已经可以掌握的差不多了</p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 异常处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>都什么时代了还在裸爬吗，快用IP代理池吧！</title>
      <link href="/2020/05/23/%E9%83%BD%E4%BB%80%E4%B9%88%E6%97%B6%E4%BB%A3%E4%BA%86%E8%BF%98%E5%9C%A8%E8%A3%B8%E7%88%AC%E5%90%97%EF%BC%8C%E5%BF%AB%E7%94%A8IP%E4%BB%A3%E7%90%86%E6%B1%A0%E5%90%A7%EF%BC%81/"/>
      <url>/2020/05/23/%E9%83%BD%E4%BB%80%E4%B9%88%E6%97%B6%E4%BB%A3%E4%BA%86%E8%BF%98%E5%9C%A8%E8%A3%B8%E7%88%AC%E5%90%97%EF%BC%8C%E5%BF%AB%E7%94%A8IP%E4%BB%A3%E7%90%86%E6%B1%A0%E5%90%A7%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>当你经常爬取对方的网站，对方看你，呦这家伙频繁访问也太快了吧，肯定是个爬爬，得把他的IP封了，看他还怎么爬！<br>因此，这次教你怎么伪装自己的 IP 地址别让对方轻易的就把你给封掉。<br>那怎么伪装呢？<br><font color=red><strong>那接下来就是学习Python的正确姿势了！</strong></font></p><p>其实对于Python来说，使用代理代理IP访问是很简单的。就拿我们经常使用的<font color=red>requests</font>库来说，使用代理IP如下：</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment">#定义代理IP</span></span><br><span class="line">proxie = &#123;</span><br><span class="line"><span class="string">'http'</span> : <span class="string">'http://xx.xxx.xxx.xxx:xxxx'</span>,</span><br><span class="line">        <span class="string">'http'</span> : <span class="string">'http://xxx.xx.xx.xxx:xxx'</span>,</span><br><span class="line">        ....</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用代理IP</span></span><br><span class="line">response = requests.get(url,proxies=proxies)</span><br></pre></td></tr></table></figure><p>这样你就能使用代理IP去访问网站了，当然了，你会问我代理IP在哪？哪里来？<br>在网上有很多的免费的代理IP，一搜就是一大堆。<br>当然了你也知道，既然是免费的，肯定也有很多人去使用，而且也不稳定。<br>如果你有钱的话，市面上有人就专门提供代理IP的直接去买就行了。（真有钱，真是的爬个虫也得这样，也带带我~）</p><p><font color=red>当然了我们的重点就是白嫖，不花钱了。</font><br>那么接下来就是重点了，开始真正的学习Python正确姿势了！</p><p><strong>不想花钱？那我们可以搞个IP代理池！</strong><br>道理呢大家都懂：<br>主要就是通过 python 程序去抓取网上大量免费的代理 ip ，然后定时的去检测这些 ip 可不可以用，那么下次你要使用代理 ip 的时候，你只需要去自己的 ip 代理池里面拿就行了。</p><p>现在的你是不是心痒痒的也想弄一个代理池了，当然了你也得有这个水平。哈哈</p><p>所以我现在推荐一个不错的开源的IP代理池</p><p><font color=red><strong><a href="https://github.com/Python3WebSpider/ProxyPool" target="_blank" rel="noopener">https://github.com/Python3WebSpider/ProxyPool</a></strong></font></p><p>然后将它下载到本地就好。<br>接下来如果你需要配置一些相关信息，可以到它的proxypool目录下的setting.py里设置，比如Redis 的地址密码相关。<br>如果你没有Redis，那么你得快去下载了。这是必须需要的。下载地址请看下面：</p><p><font color=red><strong><a href="https://github.com/MicrosoftArchive/redis/releases" target="_blank" rel="noopener">https://github.com/MicrosoftArchive/redis/releases</a></strong></font></p><h5 id="前提Redis-安装完后，进行以下步骤"><a href="#前提Redis-安装完后，进行以下步骤" class="headerlink" title="前提Redis 安装完后，进行以下步骤"></a>前提Redis 安装完后，进行以下步骤</h5><p>然后接下来找到你下载好的IP代理池文件夹，</p><h5 id="第一步：安装上依赖包"><a href="#第一步：安装上依赖包" class="headerlink" title="第一步：安装上依赖包"></a>第一步：安装上依赖包</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>步骤如下：<br>Shift+鼠标右键，选Windows PowerShell 窗口，然后在命令行输入命令。<br><img src="https://img-blog.csdnimg.cn/20200408103732979.gif#pic_center" alt="在这里插入图片描述"></p><h5 id="第二步，运行run-py"><a href="#第二步，运行run-py" class="headerlink" title="第二步，运行run.py"></a>第二步，运行run.py</h5><p>步骤，直接在Windows PS窗口进行运行，<br>输入命令<code>python run.py</code><br><img src="https://img-blog.csdnimg.cn/20200408104356664.gif#pic_center" alt="在这里插入图片描述"><br>项目跑起来后，不要关闭该窗口，然后接下来你就可以访问你的ip代理池了。</p><p>比如随机获取一个代理 ip 地址</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost:<span class="number">5555</span>/random</span><br></pre></td></tr></table></figure><p>这样访问可以随机获取一个代理ip。</p><p>有了这样的条件，在代码中也不难实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">PROXY_POOL_URL = <span class="string">'http://localhost:5555/random'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_proxy</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.get(PROXY_POOL_URL)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">return</span> response.text  <span class="comment"># 如果该代理ip可用，返回该代理ip</span></span><br><span class="line">    <span class="keyword">except</span> ConnectionError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br></pre></td></tr></table></figure><p>这样我们就成功的在我们的代理池中获取代理 ip 了，那么下次谁还敢封你ip，你就拿出你的代理ip，继续爬，嘿嘿~</p><p>下面我给大家一个简单的实例来展现一下<font color=red >秀操作了.</font><br>通过代理ip来爬取京东的商品图片：<br><img src="https://img-blog.csdnimg.cn/20200408105551327.gif#pic_center" alt="在这里插入图片描述"><br>源代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">PROXY_POOL_URL = <span class="string">'http://localhost:5555/random'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_proxy</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.get(PROXY_POOL_URL)</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">            <span class="keyword">return</span> response.text</span><br><span class="line">    <span class="keyword">except</span> ConnectionError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'user-agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 6.1; Win64; x64) '</span></span><br><span class="line">                  <span class="string">'AppleWebKit/537.36 (KHTML, like Gecko) '</span></span><br><span class="line">                  <span class="string">'Chrome/63.0.3239.132 Safari/537.36'</span>,</span><br><span class="line">    <span class="string">'upgrade-insecure-requests'</span>: <span class="string">'1'</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gethtml</span><span class="params">(url)</span>:</span></span><br><span class="line">    proxy = get_proxy()</span><br><span class="line">    proxies = &#123;<span class="string">'http'</span>: <span class="string">'http://'</span> + proxy&#125;</span><br><span class="line">    response = requests.get(url, headers = headers, proxies=proxies)</span><br><span class="line">    html = response.text</span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">geturllist</span><span class="params">(html)</span>:</span></span><br><span class="line">    pattern = re.compile(<span class="string">r'data-lazy-img="//(.+?\.jpg)"'</span>,re.M)</span><br><span class="line">    imglist = re.findall(pattern, html)</span><br><span class="line">    <span class="keyword">return</span> imglist</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">downloadimgs</span><span class="params">(urllist)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(<span class="string">'pictures'</span>):</span><br><span class="line">        os.mkdir(<span class="string">'pictures'</span>)</span><br><span class="line">    x=<span class="number">1</span></span><br><span class="line">    print(<span class="string">'开始下载，共&#123;count&#125;张图片。'</span>.format(count=len(urllist)))</span><br><span class="line">    <span class="keyword">for</span> imgurl <span class="keyword">in</span> urllist:</span><br><span class="line">        print(<span class="string">'第&#123;count&#125;张图片。'</span>.format(count=x))</span><br><span class="line">        imgurl = <span class="string">"http://"</span> + imgurl</span><br><span class="line">        request.urlretrieve(imgurl,os.path.join(<span class="string">'pictures'</span>,<span class="string">'&#123;num&#125;.jpg'</span>.format(num=x)))</span><br><span class="line">        x+=<span class="number">1</span></span><br><span class="line">    print(<span class="string">'下载完成!'</span>)</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:</span><br><span class="line">    url = <span class="string">'https://search.jd.com/Search?keyword=cpu&amp;enc=utf-8&amp;wq=cpu&amp;pvid=2fc2be2e40ba471399e67b5bbb0b82f2'</span></span><br><span class="line">    html=gethtml(url)</span><br><span class="line">    urllist=geturllist(html)</span><br><span class="line">    downloadimgs(urllist)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> ip代理池 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之将py文件(一个或多个)打包成exe可执行文件----pyinstaller</title>
      <link href="/2020/05/23/Python%E4%B9%8B%E5%B0%86py%E6%96%87%E4%BB%B6-%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA-%E6%89%93%E5%8C%85%E6%88%90exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6-pyinstaller/"/>
      <url>/2020/05/23/Python%E4%B9%8B%E5%B0%86py%E6%96%87%E4%BB%B6-%E4%B8%80%E4%B8%AA%E6%88%96%E5%A4%9A%E4%B8%AA-%E6%89%93%E5%8C%85%E6%88%90exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6-pyinstaller/</url>
      
        <content type="html"><![CDATA[<h1 id="Python之将py文件-一个或多个-打包成exe可执行文件—-pyinstaller"><a href="#Python之将py文件-一个或多个-打包成exe可执行文件—-pyinstaller" class="headerlink" title="Python之将py文件(一个或多个)打包成exe可执行文件—-pyinstaller"></a>Python之将py文件(一个或多个)打包成exe可执行文件—-pyinstaller</h1><h2 id="一、首先，先安装pyinstaller"><a href="#一、首先，先安装pyinstaller" class="headerlink" title="一、首先，先安装pyinstaller"></a>一、首先，先安装pyinstaller</h2><h3 id="win-R-输入cmd，回车进入后输入pip-install-pyinstaller"><a href="#win-R-输入cmd，回车进入后输入pip-install-pyinstaller" class="headerlink" title="win+R,输入cmd，回车进入后输入pip install pyinstaller"></a><font color=red>win+R,输入cmd，回车进入后输入pip install pyinstaller</font></h3><p><img src="https://img-blog.csdnimg.cn/20200406154538630.gif#pic_center" alt="在这里插入图片描述"><br>注：我是因为安装完了pyinstaller所以会出现这样的情况，正常安装情况时需要等待的。</p><a id="more"></a><h2 id="二、使用pyinstaller进行打包"><a href="#二、使用pyinstaller进行打包" class="headerlink" title="二、使用pyinstaller进行打包"></a>二、使用pyinstaller进行打包</h2><h3 id="命令格式："><a href="#命令格式：" class="headerlink" title="命令格式："></a>命令格式：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller [主文件] -p [其他文件<span class="number">1</span>] -p [其他文件<span class="number">2</span>] -p [其他文件<span class="number">3</span>] --hidden-<span class="keyword">import</span> [自建模块<span class="number">1</span>] --hidden-<span class="keyword">import</span> [自建模块<span class="number">2</span>] --hidden-<span class="keyword">import</span> [自建模块<span class="number">3</span>]</span><br></pre></td></tr></table></figure><p><font color=red>注：要是只有一个py文件，生成单独的exe文件，可以直接如下命令格式</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller -F [单个py文件]</span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyinstaller main.py -p hello.py -p other.py --hidden-<span class="keyword">import</span> hello --hidden-<span class="keyword">import</span> other</span><br></pre></td></tr></table></figure><h3 id="步骤1-选定需要打包的装py文件的文件夹，2-Shift-鼠标右键打开Windows-PowerShell窗口，3-输入pyinstaller命令。"><a href="#步骤1-选定需要打包的装py文件的文件夹，2-Shift-鼠标右键打开Windows-PowerShell窗口，3-输入pyinstaller命令。" class="headerlink" title="步骤1.选定需要打包的装py文件的文件夹，2.Shift+鼠标右键打开Windows PowerShell窗口，3.输入pyinstaller命令。"></a>步骤1.选定需要打包的装py文件的文件夹，2.Shift+鼠标右键打开Windows PowerShell窗口，3.输入pyinstaller命令。</h3><p><img src="https://img-blog.csdnimg.cn/20200406161418371.gif#pic_center" alt="在这里插入图片描述"><br>然后会在目录下生成build文件夹，dist文件夹和main.spec文件<br><font color=red>生成的文件在根目录下。可执行文件可以在‘根目录\dist\main\’下找到生成的main.exe。注：需要的其他依赖文件(如：xlsx、docx等)需要拷贝进入到‘程序根目录\dist\main\’下，即可运行。</font></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> pyinstaller </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python3 File 方法总结 (超详细！)</title>
      <link href="/2020/05/23/Python3-File-%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93-%E8%B6%85%E8%AF%A6%E7%BB%86%EF%BC%81/"/>
      <url>/2020/05/23/Python3-File-%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93-%E8%B6%85%E8%AF%A6%E7%BB%86%EF%BC%81/</url>
      
        <content type="html"><![CDATA[<p>@[TOC](Python3 File 方法总结目录)<br><img src="https://github.com/quanluo/photos/blob/master/%E5%A3%81%E7%BA%B8/1.png?raw=true" alt="123"></p><a id="more"></a><h2 id="1-file-close-—-关闭一个已打开的文件"><a href="#1-file-close-—-关闭一个已打开的文件" class="headerlink" title="1. file.close() — 关闭一个已打开的文件"></a>1. <font color=red>file.close()</font> — 关闭一个已打开的文件</h2><p>close()方法用于==关闭一个已打开的文件==。关闭后的文件不能再进行读写操作，否则会报错。该方法允许调用多次。使用close()方法关闭文件是一个好习惯。<br>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.close()  <span class="comment">#无参数，无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件名为： hello.txt</span><br></pre></td></tr></table></figure><h2 id="2-file-flush-—-用来刷新缓冲区的"><a href="#2-file-flush-—-用来刷新缓冲区的" class="headerlink" title="2. file.flush() — 用来刷新缓冲区的"></a>2. <font color=red>file.flush()</font> — 用来刷新缓冲区的</h2><p>flush()方法是==用来刷新缓冲区的==，即将缓冲区中的数据立刻写入文件，同时清空缓冲区，不需要是被动的等待输出缓冲区写入。<br>一般情况下，文件关闭后会自动刷新缓冲区，但是有时你需要在关闭之前刷新它，这时就可以使用flush()方法。<br>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.flush() <span class="comment">#无参数，无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">#刷新缓冲区</span></span><br><span class="line">fo.flush()</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">文件名为： hello.txt</span><br></pre></td></tr></table></figure><h2 id="3-file-fileno-—-返回一个整型的文件描述符-file-descriptor-FD-整型"><a href="#3-file-fileno-—-返回一个整型的文件描述符-file-descriptor-FD-整型" class="headerlink" title="3. file.fileno() — 返回一个整型的文件描述符(file descriptor FD 整型)"></a>3. <font color=red>file.fileno()</font> — 返回一个整型的文件描述符(file descriptor FD 整型)</h2><p>fileno()方法==返回一个整型的文件描述符(file descriptor FD 整型)==，可用于底层操作系统的I/O操作。</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.fileno() <span class="comment">#无参数，无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#文件打开</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">fd = fo.fileno()</span><br><span class="line">print(<span class="string">"文件描述符为： "</span>, fd)</span><br><span class="line"></span><br><span class="line"><span class="comment">#文件关闭</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件名为： hello.txt</span><br><span class="line">文件描述符为： <span class="number">3</span></span><br></pre></td></tr></table></figure><h2 id="4-file-isatty-—-检测文件是否连接到一个终端设备，如果是返回-True，否则返回-False"><a href="#4-file-isatty-—-检测文件是否连接到一个终端设备，如果是返回-True，否则返回-False" class="headerlink" title="4. file.isatty() — 检测文件是否连接到一个终端设备，如果是返回 True，否则返回 False"></a>4. <font color=red>file.isatty()</font> — 检测文件是否连接到一个终端设备，如果是返回 True，否则返回 False</h2><p>isatty()方法==检测文件是否连接到一个终端设备，如果是返回 True，否则返回 False。==</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fileObject.isatty() <span class="comment">#无参数，返回值为True或则False</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">isa = fo.isatty()</span><br><span class="line">print(<span class="string">"返回值为： "</span>, isa)</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">文件名： hello.txt</span><br><span class="line">返回值为： <span class="literal">False</span></span><br></pre></td></tr></table></figure><h2 id="5-file-next-—-python3的内置函数next-通过迭代器调用next-方法返回下一项"><a href="#5-file-next-—-python3的内置函数next-通过迭代器调用next-方法返回下一项" class="headerlink" title="5. file.next() — python3的内置函数next()通过迭代器调用next()方法返回下一项"></a>5. <font color=red>file.next()</font> — python3的内置函数next()通过迭代器调用<strong>next</strong>()方法返回下一项</h2><p>python3 中的file对象不支持next()方法。==python3的内置函数next()通过迭代器调用<strong>next</strong>()方法返回下一项==。 在循环中，next()方法会在每次循环中调用，该方法返回文件的下一行，如果到达结尾(EOF)，则触发Stoplteration</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">next(fileobject) </span><br><span class="line"><span class="comment">#参数 命名的打开文件名</span></span><br><span class="line"><span class="comment">#返回值 返回文件下一行</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">           line = next(fo)</span><br><span class="line">           print(<span class="string">"第 %d 行 ： %s"</span>  % (index, line))</span><br><span class="line">        </span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">第 <span class="number">1</span> 行 ： 第一行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">2</span> 行 ： 第二行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">3</span> 行 ： 第三行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">4</span> 行 ： 第四行內容</span><br></pre></td></tr></table></figure><h2 id="6-file-read-—-用于从文件读取指定的字节数"><a href="#6-file-read-—-用于从文件读取指定的字节数" class="headerlink" title="6. file.read() — 用于从文件读取指定的字节数"></a>6. <font color=red>file.read()</font> — 用于从文件读取指定的字节数</h2><p>read()方法==用于从文件读取指定的字节数==，如果未给出或为负数则读取所有。读取包括”\n”字符。</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObjext.read(size)</span><br><span class="line"><span class="comment">#参数 size    从文件中读取的字节数</span></span><br><span class="line"><span class="comment">#返回值  返回从字符串中读取的字节</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">line = fo.read(<span class="number">10</span>)</span><br><span class="line">print(<span class="string">"读取的字符串： %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">读取的字符串： 第一行內容</span><br><span class="line">第二行內</span><br></pre></td></tr></table></figure><h2 id="7-file-readline-—-用于从文件读取整行"><a href="#7-file-readline-—-用于从文件读取整行" class="headerlink" title="7. file.readline() — 用于从文件读取整行"></a>7. <font color=red>file.readline()</font> — 用于从文件读取整行</h2><p>readline()方法==用于从文件读取整行==，包括”\n”字符。如果指定了一个非负数的参数，则返回指定大小的字节数，包括”\n”字符。如果未给定，则输出整行。</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObject.readline(size)</span><br><span class="line"><span class="comment">#参数 size    从文件中读取的字节数</span></span><br><span class="line"><span class="comment">#返回值  返回从字符串中读取的字节</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">line = fo.readline()</span><br><span class="line">print(<span class="string">"读取第一行:  %s"</span> % (line))</span><br><span class="line"></span><br><span class="line">line = fo.readline(<span class="number">3</span>)</span><br><span class="line">print(<span class="string">"读取字符串为： %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">文件名： hello.txt</span><br><span class="line">读取第一行： 第一行内容</span><br><span class="line"></span><br><span class="line">读取的字符串： 第一行</span><br></pre></td></tr></table></figure><h2 id="8-file-readlines-—-用于读取所有行-直到结束符EOF-并返回列表"><a href="#8-file-readlines-—-用于读取所有行-直到结束符EOF-并返回列表" class="headerlink" title="8. file.readlines() — 用于读取所有行(直到结束符EOF)并返回列表"></a>8. <font color=red>file.readlines()</font> — 用于读取所有行(直到结束符EOF)并返回列表</h2><p>readlines()方法==用于读取所有行(直到结束符EOF)并返回列表，==若给定size&gt;0，返回总和大约为size字节的行，实际读取值可能比size较大，因为需要填充缓冲区。<br>如果碰到结束符EOF则返回空字符串。</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObject.readlines(size)</span><br><span class="line"><span class="comment">#参数  size   从文件中读取的字节数</span></span><br><span class="line"><span class="comment">#返回值  返回列表，包含所有行</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">line = fo.readlines()</span><br><span class="line">print(<span class="string">"读取的数据为:  %s"</span> % (line))</span><br><span class="line"></span><br><span class="line">line = fo.readline(<span class="number">2</span>)</span><br><span class="line">print(<span class="string">"读取的数据为： %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">读取的数据为:  [<span class="string">'第一行內容\n'</span>, <span class="string">'第二行內容\n'</span>, <span class="string">'第三行內容\n'</span>, <span class="string">'第四行內容'</span>]</span><br><span class="line">读取的数据为： []</span><br></pre></td></tr></table></figure><h2 id="9-file-seek-—-用于移动文件读取指针-到-指定位置"><a href="#9-file-seek-—-用于移动文件读取指针-到-指定位置" class="headerlink" title="9. file.seek() — 用于移动文件读取指针 到 指定位置"></a>9. <font color=red>file.seek()</font> — 用于移动文件读取指针 到 指定位置</h2><p>seek()方法==用于移动文件读取指针 到 指定位置==。</p><p>语法： </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fileObject.seek(offset, whence)</span><br><span class="line"><span class="comment">#参数 </span></span><br><span class="line">* offset 开始的偏移量，也就是代表需要移动偏移的字节数</span><br><span class="line">* whence 可选，默认值为<span class="number">0</span>。给whence参数一个定义，表示要从哪个位置开始偏移；<span class="number">0</span>代表从文件开头开始算起，<span class="number">1</span>代表从当前位置开始算起，<span class="number">2</span>代表从文件末尾开始算起。</span><br><span class="line"><span class="comment">#返回值 无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">line = fo.readline()</span><br><span class="line">print(<span class="string">"读取的数据为： %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#重新设置文件读取指针到开头</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">line = fo.readline()</span><br><span class="line">print(<span class="string">"读取的数据为： %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#从当前位置指针开始</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">line = fo.readline()</span><br><span class="line">print(<span class="string">"读取的数据为： %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#从文件末尾开始</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">line = fo.readline()</span><br><span class="line">print(<span class="string">"读取的数据为： %s"</span> % (line))</span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">读取的数据为： 第一行內容</span><br><span class="line"></span><br><span class="line">读取的数据为： 第一行內容</span><br><span class="line"></span><br><span class="line">读取的数据为： 第二行內容</span><br><span class="line"></span><br><span class="line">读取的数据为：</span><br></pre></td></tr></table></figure><h2 id="10-file-tell-—-返回文件的当前位置"><a href="#10-file-tell-—-返回文件的当前位置" class="headerlink" title="10. file.tell() — 返回文件的当前位置"></a>10. <font color=red>file.tell()</font> — 返回文件的当前位置</h2><p>tell()方法==返回文件的当前位置==，即文件指针当前位置。</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObject.tell()</span><br><span class="line"><span class="comment">#无参数</span></span><br><span class="line"><span class="comment">#返回值 返回文件指针当前位置</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">line = fo.readline()</span><br><span class="line">print(<span class="string">"读取的数据为:  %s"</span> % (line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取当前文件指针位置</span></span><br><span class="line">path = fo.tell()</span><br><span class="line">print(<span class="string">"当前指针位置： %d"</span> % (path))</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">读取的数据为:  第一行內容</span><br><span class="line"></span><br><span class="line">当前指针位置： <span class="number">17</span></span><br></pre></td></tr></table></figure><h2 id="11-file-truncate-—-用于截断文件"><a href="#11-file-truncate-—-用于截断文件" class="headerlink" title="11. file.truncate() — 用于截断文件"></a>11. <font color=red>file.truncate()</font> — 用于截断文件</h2><p>truncate()方法==用于截断文件==，如果指定了可选参数size，则表示截断文件为size个字符。如果没有指定size，则重置到当前位置。（换行符’\n‘也会被计算）</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObject.truncate(size)</span><br><span class="line"><span class="comment">#参数 size 可选，如果存在则文件截断为size个字节。</span></span><br><span class="line"><span class="comment">#返回值 无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#hello.txt</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">everyone</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>, <span class="string">'r+'</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">fo.truncate(<span class="number">10</span>)</span><br><span class="line"><span class="comment">#读取现在文件所有的内容</span></span><br><span class="line">line = fo.read()</span><br><span class="line">print(line)</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">hello</span><br><span class="line">wor</span><br></pre></td></tr></table></figure><p>现在hello.txt文件内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#hello.txt</span><br><span class="line">hello</span><br><span class="line">wor</span><br></pre></td></tr></table></figure><h2 id="12-file-write-—-用于向文件中写入指定字符串"><a href="#12-file-write-—-用于向文件中写入指定字符串" class="headerlink" title="12. file.write() — 用于向文件中写入指定字符串"></a>12. <font color=red>file.write()</font> — 用于向文件中写入指定字符串</h2><p>write()方法==用于向文件中写入指定字符串==。在文件关闭前或缓冲区刷新前，字符串内容存储在缓冲区中，这时你在文件中看不到写入的内容的。</p><p>语法： </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObject.write(str)</span><br><span class="line"><span class="comment">#参数 str ---要写入文件的字符串</span></span><br><span class="line"><span class="comment">#返回值 无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,<span class="string">"r+"</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">str = <span class="string">'\n第五行内容'</span></span><br><span class="line"><span class="comment">#在文件末尾写入一行</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">line = fo.write(str)</span><br><span class="line"></span><br><span class="line"><span class="comment">#回到文件开头，读取文件所有内容</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(<span class="number">1</span>,<span class="number">6</span>):</span><br><span class="line">    line = next(fo)</span><br><span class="line">    print(<span class="string">'第 %d 行 -- %s'</span> % (index, line))</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">第 <span class="number">1</span> 行 -- 第一行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">2</span> 行 -- 第二行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">3</span> 行 -- 第三行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">4</span> 行 -- 第四行內容</span><br><span class="line"></span><br><span class="line">第 <span class="number">5</span> 行 -- 第五行内容</span><br></pre></td></tr></table></figure><p>现在hello.txt,文件内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br><span class="line">第五行内容</span><br></pre></td></tr></table></figure><h2 id="13-file-writelines-—-用于向文件中写入一序列的字符串"><a href="#13-file-writelines-—-用于向文件中写入一序列的字符串" class="headerlink" title="13. file.writelines() — 用于向文件中写入一序列的字符串"></a>13. <font color=red>file.writelines()</font> — 用于向文件中写入一序列的字符串</h2><p>writelines() 方法==用于向文件中写入一序列的字符串==。这一序列字符串可以是由迭代对象产生的，如一个字符串列表。换行需要制定换行符\n.</p><p>语法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fileObject.writelines([str])</span><br><span class="line"><span class="comment">#参数 str --要写入文件的字符串序列</span></span><br><span class="line"><span class="comment">#返回值 无返回值</span></span><br></pre></td></tr></table></figure><p>实例：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#python</span></span><br><span class="line"><span class="comment">#打开文件</span></span><br><span class="line">fo = open(<span class="string">"hello.txt"</span>,<span class="string">"r+"</span>, encoding=<span class="string">'utf-8'</span>)</span><br><span class="line">print(<span class="string">"文件名为： "</span>, fo.name)</span><br><span class="line"></span><br><span class="line">seq = [<span class="string">'\n添加第五行内容'</span>, <span class="string">'\n添加第六行内容'</span>]</span><br><span class="line"><span class="comment">#在文件末尾写入</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">line = fo.writelines(seq)</span><br><span class="line"></span><br><span class="line"><span class="comment">#回到文件开头，读取文件所有内容</span></span><br><span class="line">fo.seek(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">line = fo.read()</span><br><span class="line">print(line)</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭文件</span></span><br><span class="line">fo.close()</span><br></pre></td></tr></table></figure><p>输入结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件名为：  hello.txt</span><br><span class="line">第一行內容</span><br><span class="line">第二行內容</span><br><span class="line">第三行內容</span><br><span class="line">第四行內容</span><br><span class="line">第五行内容</span><br><span class="line">添加第五行内容</span><br><span class="line">添加第六行内容</span><br></pre></td></tr></table></figure><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> file方法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>这回终于知道了if __name__==&#39;__main__&#39;干嘛的了</title>
      <link href="/2020/05/23/%E8%BF%99%E5%9B%9E%E7%BB%88%E4%BA%8E%E7%9F%A5%E9%81%93%E4%BA%86if-name-main-%E5%B9%B2%E5%98%9B%E7%9A%84%E4%BA%86/"/>
      <url>/2020/05/23/%E8%BF%99%E5%9B%9E%E7%BB%88%E4%BA%8E%E7%9F%A5%E9%81%93%E4%BA%86if-name-main-%E5%B9%B2%E5%98%9B%E7%9A%84%E4%BA%86/</url>
      
        <content type="html"><![CDATA[<p>相信很多人都去阅读过别人的代码（注：通常通过阅读比你牛的人写的代码，会让你的技术水平飞速提高），在阅读代码时，你会发现很多代码中都有 if __name__==’__main__‘ 这么一行代码语句，但是不知道有什么用？<br>因此下面我来详细的解答一下：</p><a id="more"></a><p>先举个例子，一般写完代码要先测试一下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># testone.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'hello'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'world'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    t1()</span><br><span class="line">    t2()</span><br><span class="line"></span><br><span class="line">test()</span><br></pre></td></tr></table></figure><p>单独运行这个模块是没问题的：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><p>但是，如果在另一个文件（testtwo.py）导入后再调用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#testtwo.py</span></span><br><span class="line"><span class="keyword">import</span> testone <span class="keyword">as</span> te</span><br><span class="line"></span><br><span class="line">print(<span class="string">'test:'</span>)</span><br><span class="line">te.t1()</span><br><span class="line">te.t2()</span><br></pre></td></tr></table></figure><p>就会出现问题：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;</span><br><span class="line">hello</span><br><span class="line">world</span><br><span class="line">test:</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><p>python 把模块testone.py中的测试函数也一块给执行了，而这并不是想要的结果。<br>避免这种情况的关键在于：让python知道该模块是作为程序运行还是导入到其他模块中。为了实现这一点，需要使用模块的<strong>name</strong>属性：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">print(__name__)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">__main__</span><br><span class="line">print(te.__name__)</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line">testone</span><br></pre></td></tr></table></figure><p>在作为程序运行的时候，<strong>name</strong>属性的值是’__main__‘；而作为模块导入的时候，这个值就是该模块的名字了。因此，也就不难理解if <strong>name</strong>==’<strong>main</strong>‘这句代码的意思了。<br>因此，我们改一下testone.py的代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#testone.py</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t1</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'hello'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t2</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'world'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">()</span>:</span></span><br><span class="line">    t1()</span><br><span class="line">    t2()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span>:   //这段代码确保只有单独运行testone.py时才会执行text()函数</span><br><span class="line">    test()</span><br></pre></td></tr></table></figure><p>然后我们再来运行一下testtwo.py文件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;</span><br><span class="line">test:</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><p>得到了我们想要的结果了。</p><p>其实除了上述方案，我们还有另一种方法<br>（from 模块名 import 函数名）：<br>我们可已通过以下修改来实现：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#testtwo.py</span></span><br><span class="line"><span class="keyword">from</span> testone <span class="keyword">import</span> t1,t2  </span><br><span class="line"></span><br><span class="line">print(<span class="string">'test:'</span>)</span><br><span class="line">t1()</span><br><span class="line">t2()</span><br></pre></td></tr></table></figure><p>运行一下testtwo.py文件，得到：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;</span><br><span class="line">test:</span><br><span class="line">hello</span><br><span class="line">world</span><br></pre></td></tr></table></figure><p>这种方法可以直接导入模块中的需要的函数，来进行操作。<br>如果函数多的话还有可以通过使用通配符星号（*）来导入模块中所有的函数。<br>from 模块名 import *</p><hr>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python 给下载文件显示进度条和下载时间（一看就会！）</title>
      <link href="/2020/05/23/Python-%E7%BB%99%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%E6%9D%A1%E5%92%8C%E4%B8%8B%E8%BD%BD%E6%97%B6%E9%97%B4%EF%BC%88%E4%B8%80%E7%9C%8B%E5%B0%B1%E4%BC%9A%EF%BC%81%EF%BC%89/"/>
      <url>/2020/05/23/Python-%E7%BB%99%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E6%98%BE%E7%A4%BA%E8%BF%9B%E5%BA%A6%E6%9D%A1%E5%92%8C%E4%B8%8B%E8%BD%BD%E6%97%B6%E9%97%B4%EF%BC%88%E4%B8%80%E7%9C%8B%E5%B0%B1%E4%BC%9A%EF%BC%81%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>实现原理其实很简单，我们一般下载东西使用的requests.get(url).content的方法下载来的文件是二进制文件，我们只要通过for循环每次下载1024kb，到最后获取文件的总大小，即可完成我们的功能实现了！</p><a id="more"></a><h3 id="其实实现它方法很简单，这里我写了个进度条的模块，其中还附带上了运行时间也就是下载时间了。"><a href="#其实实现它方法很简单，这里我写了个进度条的模块，其中还附带上了运行时间也就是下载时间了。" class="headerlink" title="其实实现它方法很简单，这里我写了个进度条的模块，其中还附带上了运行时间也就是下载时间了。"></a>其实实现它方法很简单，这里我写了个进度条的模块，其中还附带上了运行时间也就是下载时间了。</h3><p>该模块调用了三个库：<br>1.os 2.requests 3.time</p><p><font color=red><strong>话不多说，先上代码！！！</strong>.</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进度条模块</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">progressbar</span><span class="params">(url,path)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):   <span class="comment"># 看是否有该文件夹，没有则创建文件夹</span></span><br><span class="line">         os.mkdir(path)</span><br><span class="line">    start = time.time() <span class="comment">#下载开始时间</span></span><br><span class="line">    response = requests.get(url, stream=<span class="literal">True</span>) <span class="comment">#stream=True必须写上</span></span><br><span class="line">    size = <span class="number">0</span>    <span class="comment">#初始化已下载大小</span></span><br><span class="line">    chunk_size = <span class="number">1024</span>  <span class="comment"># 每次下载的数据大小</span></span><br><span class="line">    content_size = int(response.headers[<span class="string">'content-length'</span>])  <span class="comment"># 下载文件总大小</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:   <span class="comment">#判断是否响应成功</span></span><br><span class="line">            print(<span class="string">'Start download,[File size]:&#123;size:.2f&#125; MB'</span>.format(size = content_size / chunk_size /<span class="number">1024</span>))   <span class="comment">#开始下载，显示下载文件大小</span></span><br><span class="line">            filepath = path+<span class="string">'\name.extension name'</span>  <span class="comment">#设置图片name，注：必须加上扩展名</span></span><br><span class="line">            <span class="keyword">with</span> open(filepath,<span class="string">'wb'</span>) <span class="keyword">as</span> file:   <span class="comment">#显示进度条</span></span><br><span class="line">                <span class="keyword">for</span> data <span class="keyword">in</span> response.iter_content(chunk_size = chunk_size):</span><br><span class="line">                    file.write(data)</span><br><span class="line">                    size +=len(data)</span><br><span class="line">                    print(<span class="string">'\r'</span>+<span class="string">'[下载进度]:%s%.2f%%'</span> % (<span class="string">'&gt;'</span>*int(size*<span class="number">50</span>/ content_size), float(size / content_size * <span class="number">100</span>)) ,end=<span class="string">' '</span>)</span><br><span class="line">        end = time.time()   <span class="comment">#下载结束时间</span></span><br><span class="line">        print(<span class="string">'Download completed!,times: %.2f秒'</span> % (end - start))  <span class="comment">#输出下载用时时间</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br></pre></td></tr></table></figure><p><font color=red><strong>实现原理其实很简单，我们一般下载东西使用的requests.get(url).content的方法下载来的文件是二进制文件，我们只要通过for循环每次下载1024kb，到最后获取文件的总大小，即可完成我们的功能实现了！</strong>.</font></p><p>通过上面这个函数我们就实现了简单的进度条以及所需时间的功能，我们用了两个参数，我们下载个皮卡丘图片来试试效果：<br><img src="https://img-blog.csdnimg.cn/20200401161451294.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200401161507923.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <font color=red><strong>效果还不错~~注：[下载进度]后面的‘&gt;’是有动态显示的，这里可能看不到，可以在自己的环境下测试看看！！</strong></font></p><p>实例代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进度条模块</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">progressbar</span><span class="params">(url,path)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):   <span class="comment"># 看是否有该文件夹，没有则创建文件夹</span></span><br><span class="line">         os.mkdir(path)</span><br><span class="line">    start = time.time() <span class="comment">#下载开始时间</span></span><br><span class="line">    response = requests.get(url, stream=<span class="literal">True</span>)</span><br><span class="line">    size = <span class="number">0</span>    <span class="comment">#初始化已下载大小</span></span><br><span class="line">    chunk_size = <span class="number">1024</span>  <span class="comment"># 每次下载的数据大小</span></span><br><span class="line">    content_size = int(response.headers[<span class="string">'content-length'</span>])  <span class="comment"># 下载文件总大小</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:   <span class="comment">#判断是否响应成功</span></span><br><span class="line">            print(<span class="string">'Start download,[File size]:&#123;size:.2f&#125; MB'</span>.format(size = content_size / chunk_size /<span class="number">1024</span>))   <span class="comment">#开始下载，显示下载文件大小</span></span><br><span class="line">            filepath = path+<span class="string">'\Pikachu.jpg'</span>  <span class="comment">#设置图片name，注：必须加上扩展名</span></span><br><span class="line">            <span class="keyword">with</span> open(filepath,<span class="string">'wb'</span>) <span class="keyword">as</span> file:   <span class="comment">#显示进度条</span></span><br><span class="line">                <span class="keyword">for</span> data <span class="keyword">in</span> response.iter_content(chunk_size = chunk_size):</span><br><span class="line">                    file.write(data)</span><br><span class="line">                    size +=len(data)</span><br><span class="line">                    print(<span class="string">'\r'</span>+<span class="string">'[下载进度]:%s%.2f%%'</span> % (<span class="string">'&gt;'</span>*int(size*<span class="number">50</span>/ content_size), float(size / content_size * <span class="number">100</span>)) ,end=<span class="string">' '</span>)</span><br><span class="line">        end = time.time()   <span class="comment">#下载结束时间</span></span><br><span class="line">        print(<span class="string">'Download completed!,times: %.2f秒'</span> % (end - start))  <span class="comment">#输出下载用时时间</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(<span class="string">'Error!'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment">#下载皮卡丘图片</span></span><br><span class="line">    url = <span class="string">'https://img.moegirl.org/common/thumb/e/ed/%E7%9A%AE%E5%8D%A1%E4%B8%98%E4%B9%8B%E6%AD%8C.jpg/1200px-%E7%9A%AE%E5%8D%A1%E4%B8%98%E4%B9%8B%E6%AD%8C.jpg'</span></span><br><span class="line">    path = <span class="string">r'E:\123'</span>  <span class="comment"># 设置下载到本地的地址</span></span><br><span class="line">    progressbar(url,path)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>看完是不是感觉很简单，手热的赶快去试试吧。<br><font color=red>本篇完。</font></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 进度条 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pycharm自定义更换背景图</title>
      <link href="/2020/05/23/Pycharm%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9B%B4%E6%8D%A2%E8%83%8C%E6%99%AF%E5%9B%BE/"/>
      <url>/2020/05/23/Pycharm%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9B%B4%E6%8D%A2%E8%83%8C%E6%99%AF%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<p><img src="https://img-blog.csdnimg.cn/20200331115019912.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><a id="more"></a><h1 id="来给代码加个PS！"><a href="#来给代码加个PS！" class="headerlink" title="来给代码加个PS！"></a>来给代码加个PS！</h1><p>首先打开我们的Pycharm，然后通过快捷键<font color=red>Ctrl+Shift+A</font>打开搜索，然后输入<font color=red>set background image</font>，回车后就是进行背景更换了。<br>步骤如下：<br>1、会弹出个Background Imag 的窗口<br><img src="https://img-blog.csdnimg.cn/20200331114240658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>2、再Image框里设置你想用的图片地址<br><img src="https://img-blog.csdnimg.cn/20200331114446748.png" alt="在这里插入图片描述"><br>3、下面这个Opacity这个选项是用来调整图片的透明度的，设置自己喜欢的数值就好，（注意数值越大，写代码越专注，容错率越低！！！！我不会说我说的是反话的<del>🤭）<br><img src="https://img-blog.csdnimg.cn/20200331114709789.png" alt="在这里插入图片描述"><br>4、其他的设置就一句个人喜好了，我这里就不详解了。<br>5、都弄完后点击<strong>OK</strong>就行了<br><img src="https://img-blog.csdnimg.cn/20200331114848653.png" alt="在这里插入图片描述"><br>最后你就会发现背景已经换完了，给大家看看样子</del><br><img src="https://img-blog.csdnimg.cn/20200331115019912.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h3 id="喜欢的就快去调吧！！"><a href="#喜欢的就快去调吧！！" class="headerlink" title="喜欢的就快去调吧！！"></a><font color=red>喜欢的就快去调吧！！</font></h3>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之何为yield关键字（生成器）？</title>
      <link href="/2020/05/23/Python%E4%B9%8B%E4%BD%95%E4%B8%BAyield%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%88%E7%94%9F%E6%88%90%E5%99%A8%EF%BC%89%EF%BC%9F/"/>
      <url>/2020/05/23/Python%E4%B9%8B%E4%BD%95%E4%B8%BAyield%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%88%E7%94%9F%E6%88%90%E5%99%A8%EF%BC%89%EF%BC%9F/</url>
      
        <content type="html"><![CDATA[<h1 id="yield-关键字"><a href="#yield-关键字" class="headerlink" title="yield 关键字"></a>yield 关键字</h1><p>yield顾名思义，它是python3中33个关键字中的一个，也是非常重要的一个关键字。</p><h2 id="yield与生成器息息相关，yield-lt-gt-生成器"><a href="#yield与生成器息息相关，yield-lt-gt-生成器" class="headerlink" title="yield与生成器息息相关，yield &lt;==&gt; 生成器 "></a><font color=red>yield与生成器息息相关，yield &lt;==&gt; 生成器 </font></h2><p>所以知道了什么是生成器，yield也自然而然地懂了。<br>那什么是生成器呢？<br><font color=red></p><blockquote><p>1.生成器是一个不断产生值的函数。</p><blockquote><p>2.包含yield语句的函数是一个生成器。</p><blockquote><p>3.生成器每次产生一个值（yield语句），函数被冻结，知道再被唤醒后再产生一个值。(也就是说，产生一个值后会在这个位置暂停，直到再被唤醒后，会从暂停的位置开始继续执行)<br></font></p></blockquote></blockquote></blockquote><a id="more"></a><p>接下来我么来看一段代码：看看生成器的写法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#产生所有小于n的平方值</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">yield</span> i**<span class="number">2</span></span><br></pre></td></tr></table></figure><p>按照定义，首先会执行for循环，然后执行到yield语句时，这个函数会被冻结，而当前yield对应的那一行产生的值会被返回出来，通过调用该函数，会逐渐的遍历这个循环。</p><p><font color=red>生成器的使用一般与循环搭配在一起，我们可以用一个for循环来调用上边的函数代码，代码如下：</font></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">gen</span><span class="params">(n)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">        <span class="keyword">yield</span> i**<span class="number">2</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> gen(<span class="number">5</span>):</span><br><span class="line">    print(i,end=<span class="string">" "</span>)</span><br><span class="line">输出：</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">4</span> <span class="number">9</span> <span class="number">16</span></span><br></pre></td></tr></table></figure><p>for循环通过遍历gen（）函数，每次是的会唤醒一次这个函数，因此最后执行出小于5的整数所有的平方值。</p><p>事实上它也可以用一般写法，return生成，代码如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">square</span><span class="params">(n)</span>:</span></span><br><span class="line">    ls = [i**<span class="number">2</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">    <span class="keyword">return</span> ls</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> square(<span class="number">5</span>):</span><br><span class="line">    print(i,end=<span class="string">" "</span>)</span><br><span class="line">输出：</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">4</span> <span class="number">9</span> <span class="number">16</span></span><br></pre></td></tr></table></figure><p><font color=red>但是这种普通的写法与生成器的写法是有不同的。</font><br>这种普通的写法，是指我们将所有可能得值全部计算出来并且通过一个列表返回给上乘的调用函数。<br>因此，我们知道，生成器相比这种普通的生成所有内容的写法它们是不同的。<br><font color=red>那生成器有什么优势吗？<br>其实是非常明显的！<br>生成器相比一次列出所有内容的优势有三个：</font></p><h4 id="1、更节省存储空间。"><a href="#1、更节省存储空间。" class="headerlink" title="1、更节省存储空间。"></a><font color=red>1、更节省存储空间。</font></h4><h3 id="2、相应更迅速"><a href="#2、相应更迅速" class="headerlink" title="2、相应更迅速"></a><font color=red>2、相应更迅速</font></h3><h3 id="3、使用更灵活"><a href="#3、使用更灵活" class="headerlink" title="3、使用更灵活"></a><font color=red>3、使用更灵活</font></h3><p>我们可以再通过上面的列子进行说明：<br>普通写法是一次性将所有可能的值存储起来并且通过列表返回，<br>而生成器呢，是每次只返回一个值。<br>如果上面的例子中，n不是5，而是n=1M、10M、100M或更大呢？（M为兆）<br>当n=1M时，<br>普通写法需要将所有的值全部列出来并且存储在列表中再返回，也就是说你必须得等待它将值完全列出来后才能看到结果，这里还只是1M，那如果是10M，100M，甚至是100000000000M呢，我相信结果还没出来，你就先没了。。。。而且它还需要能装得下它的存储空间才行。。。<br>反过来我们通过生成器呢，它在每调用一次的时候只产生一个值并返回，当它再次被调用时也就是唤醒它，它才会第二个值，以此类推。<br>所以即使n=10M或更多，对于生成器来说，它需要使用的存储空间仍然是一个元素的存储空间，而且不需要等待所有的值都结算完才能看到，可以逐个看，你需要的时候唤醒它，不需要的时候就不唤醒它。</p><hr><p><font color=red>说到这，我相信大家已经对yield有了很清楚的认识了</font></p>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> yield </tag>
            
            <tag> 生成器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pip 安装，更新，卸载，查看模块方法</title>
      <link href="/2020/05/23/pip-%E5%AE%89%E8%A3%85%EF%BC%8C%E6%9B%B4%E6%96%B0%EF%BC%8C%E5%8D%B8%E8%BD%BD%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95/"/>
      <url>/2020/05/23/pip-%E5%AE%89%E8%A3%85%EF%BC%8C%E6%9B%B4%E6%96%B0%EF%BC%8C%E5%8D%B8%E8%BD%BD%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%A8%A1%E5%9D%97%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h1 id="pip-安装，更新，卸载，查看模块使用方法"><a href="#pip-安装，更新，卸载，查看模块使用方法" class="headerlink" title="pip 安装，更新，卸载，查看模块使用方法"></a>pip 安装，更新，卸载，查看模块使用方法</h1><ul><li><h3 id="一、win-R输入cmd"><a href="#一、win-R输入cmd" class="headerlink" title="一、win+R输入cmd"></a>一、win+R输入cmd</h3><img src="https://img-blog.csdnimg.cn/20200402103708812.gif#pic_center" alt="在这里插入图片描述"><a id="more"></a></li><li><h3 id="二、Shift-单击右键选中的文件夹"><a href="#二、Shift-单击右键选中的文件夹" class="headerlink" title="二、Shift+单击右键选中的文件夹"></a>二、Shift+单击右键选中的文件夹</h3><img src="https://img-blog.csdnimg.cn/20200402103448956.gif#pic_center" alt="在这里插入图片描述"> </li></ul><h2 id="pip-安装"><a href="#pip-安装" class="headerlink" title="pip 安装"></a>pip 安装</h2><blockquote><p>在命令行输入</p><h3 id="pip-install-PackageName"><a href="#pip-install-PackageName" class="headerlink" title="pip install PackageName"></a>pip install PackageName</h3></blockquote><h2 id="pip-更新"><a href="#pip-更新" class="headerlink" title="pip 更新"></a>pip 更新</h2><blockquote><p>在命令行输入</p><h3 id="pip-install-U-PackageName"><a href="#pip-install-U-PackageName" class="headerlink" title="pip install -U PackageName"></a>pip install -U PackageName</h3></blockquote><h2 id="pip-卸载"><a href="#pip-卸载" class="headerlink" title="pip 卸载"></a>pip 卸载</h2><blockquote><p>在命令行输入</p><h3 id="pip-uninstall-PackageName"><a href="#pip-uninstall-PackageName" class="headerlink" title="pip uninstall PackageName"></a>pip uninstall PackageName</h3></blockquote><h2 id="pip-查看-检查上是否已安装某个模块"><a href="#pip-查看-检查上是否已安装某个模块" class="headerlink" title="pip 查看(检查上是否已安装某个模块)"></a>pip 查看(检查上是否已安装某个模块)</h2><blockquote><p>在命令行输入</p><h3 id="pip-show-PackageName"><a href="#pip-show-PackageName" class="headerlink" title="pip show PackageName"></a>pip show PackageName</h3></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> pip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python正则表达式详解 （超详细，看完必会！）</title>
      <link href="/2020/05/23/Python%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%A6%E8%A7%A3-%EF%BC%88%E8%B6%85%E8%AF%A6%E7%BB%86%EF%BC%8C%E7%9C%8B%E5%AE%8C%E5%BF%85%E4%BC%9A%EF%BC%81%EF%BC%89/"/>
      <url>/2020/05/23/Python%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%A6%E8%A7%A3-%EF%BC%88%E8%B6%85%E8%AF%A6%E7%BB%86%EF%BC%8C%E7%9C%8B%E5%AE%8C%E5%BF%85%E4%BC%9A%EF%BC%81%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="正则表达式详解"><a href="#正则表达式详解" class="headerlink" title="正则表达式详解"></a>正则表达式详解</h1><p> 正则表达式 英文名称叫 ==Regular Expression==简称RegEx，是用来匹配字符的一种工具，它常被用在网页爬虫，文稿整理，数据筛选等方面，最常用的就是用在网页爬虫，数据抓取。<br> <a id="more"></a></p><h2 id="一、正则表达式的各种符号解释"><a href="#一、正则表达式的各种符号解释" class="headerlink" title="一、正则表达式的各种符号解释"></a>一、正则表达式的各种符号解释</h2><p> <img src="https://img-blog.csdnimg.cn/20200328112825146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200328112918573.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200328112937917.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> <img src="https://img-blog.csdnimg.cn/20200328112956369.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br> （来自维基百科）<del>~</del></p><p>是不是感觉太多了，因此我将常用的整理出来了<br><img src="https://img-blog.csdnimg.cn/20200328113846744.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200328113857419.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="二、进行逐个详解"><a href="#二、进行逐个详解" class="headerlink" title="二、进行逐个详解"></a>二、进行逐个详解</h2><h3 id="1-首先导入模块"><a href="#1-首先导入模块" class="headerlink" title="1.首先导入模块"></a>1.首先导入模块</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br></pre></td></tr></table></figure><h3 id="2-匹配多种可能-使用"><a href="#2-匹配多种可能-使用" class="headerlink" title="2.匹配多种可能 使用 []"></a>2.匹配多种可能 使用 []</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#'run' or 'ran'</span></span><br><span class="line">res = re.search(<span class="string">r'r[au]n'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'run'</span>&gt; </span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'r[au]n'</span>,<span class="string">'dog rans to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'ran'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">#continue 匹配更多种可能</span></span><br><span class="line">res = re.search(<span class="string">r'r[A-Z]n'</span>,<span class="string">'dog rans to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'r[a-z]n'</span>,<span class="string">'dog rans to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'ran'</span>&gt;</span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'r[0-9]n'</span>,<span class="string">'dog rans to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line">&gt;&gt;&gt;<span class="literal">None</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'r[0-9a-z]n'</span>,<span class="string">'dog rans to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'ran'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="3-匹配数字-d-and-D"><a href="#3-匹配数字-d-and-D" class="headerlink" title="3.匹配数字 \d and \D"></a>3.匹配数字 \d and \D</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \d : decimal digit 数字的</span></span><br><span class="line">res = re.search(<span class="string">r'r\dn'</span>,<span class="string">'run r9n'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'r9n'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># \D : any non-decimal digit 任何不是数字的</span></span><br><span class="line">res = re.search(<span class="string">r'r\Dn'</span>,<span class="string">'run r9n'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">3</span>), match=<span class="string">'run'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="4-匹配空白-s-and-S"><a href="#4-匹配空白-s-and-S" class="headerlink" title="4.匹配空白 \s and \S"></a>4.匹配空白 \s and \S</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \s : any white space [\t \n \r \f \v]</span></span><br><span class="line">res = re.search(<span class="string">r'r\sn'</span>,<span class="string">'r\nn r9n'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">3</span>), match=<span class="string">'r\nn'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># \S : 和\s相反，any non-white space</span></span><br><span class="line">res = re.search(<span class="string">r'r\Sn'</span>,<span class="string">'r\nn r9n'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'r9n'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="5-匹配所有的字母和数字以及”-”-w-and-W"><a href="#5-匹配所有的字母和数字以及”-”-w-and-W" class="headerlink" title="5.匹配所有的字母和数字以及”_” \w and \W"></a>5.匹配所有的字母和数字以及”_” \w and \W</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \w : [a-zA-Z0-9_]</span></span><br><span class="line">res = re.search(<span class="string">r'r\wn'</span>,<span class="string">'r\nn r9n'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'r9n'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># \W : opposite to \w 即与\w相反</span></span><br><span class="line">res = re.search(<span class="string">r'r\Wn'</span>,<span class="string">'r\nn r9n'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">3</span>), match=<span class="string">'r\nn'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="6-匹配空白字符-b-and-B"><a href="#6-匹配空白字符-b-and-B" class="headerlink" title="6.匹配空白字符  \b and \B"></a>6.匹配空白字符  \b and \B</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \b : (only at the start or end of the word)</span></span><br><span class="line">res = re.search(<span class="string">r'\bruns\b'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">8</span>), match=<span class="string">'runs'</span>&gt;</span><br><span class="line">res = re.search(<span class="string">r'\bruns\b'</span>,<span class="string">'dogrunsto cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># \B : ( but not at the start or end of the word)</span></span><br><span class="line">res = re.search(<span class="string">r'\Bruns\B'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line">res = re.search(<span class="string">r'\Bruns\B'</span>,<span class="string">'dogrunsto cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">5</span>, <span class="number">11</span>), match=<span class="string">' runs '</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="7-匹配特殊字符-任意字符-and"><a href="#7-匹配特殊字符-任意字符-and" class="headerlink" title="7.匹配特殊字符 任意字符 \ and ."></a>7.匹配特殊字符 任意字符 \ and .</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># \\ : 匹配 \</span></span><br><span class="line">res = re.search(<span class="string">r'runs\\'</span>,<span class="string">'dog runs\ to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">9</span>), match=<span class="string">'runs\\'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># . : 匹配 anything （except \n）</span></span><br><span class="line">res = re.search(<span class="string">r'r.ns'</span>,<span class="string">'dog r;ns to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">8</span>), match=<span class="string">'r;ns'</span>&gt;</span><br><span class="line">&gt;res = re.search(<span class="string">r'r.ns'</span>,<span class="string">'dog r\nns to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br></pre></td></tr></table></figure><h3 id="8-匹配句尾句首-and"><a href="#8-匹配句尾句首-and" class="headerlink" title="8.匹配句尾句首 $ and ^"></a>8.匹配句尾句首 $ and ^</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ^ : 匹配line beginning</span></span><br><span class="line">res = re.search(<span class="string">r'^runs'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line">res = re.search(<span class="string">r'^dog'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">3</span>), match=<span class="string">'dog'</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># $ : 匹配line ending</span></span><br><span class="line">res = re.search(<span class="string">r'runs$'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line">res = re.search(<span class="string">r'cat$'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">12</span>, <span class="number">15</span>), match=<span class="string">'cat'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="9-是否匹配-？"><a href="#9-是否匹配-？" class="headerlink" title="9. 是否匹配     ？"></a>9. 是否匹配     ？</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ？ ： may or may nt occur</span></span><br><span class="line">res = re.search(<span class="string">r'r(u)?ns'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">8</span>), match=<span class="string">'runs'</span>&gt;</span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'r(u)?ns'</span>,<span class="string">'dog rns to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line">&gt;&gt;&gt;&lt;re.Match object; span=(<span class="number">4</span>, <span class="number">7</span>), match=<span class="string">'rns'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="10-多行匹配-re-M"><a href="#10-多行匹配-re-M" class="headerlink" title="10. 多行匹配  re.M"></a>10. 多行匹配  re.M</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 匹配代码后面加上re.M</span></span><br><span class="line">string = <span class="string">""" 123.</span></span><br><span class="line"><span class="string">dog runs to cat.</span></span><br><span class="line"><span class="string">You run to dog.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">res = re.search(<span class="string">r'^You'</span>,string)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'^You'</span>,string,re.M)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">10</span>, <span class="number">13</span>), match=<span class="string">'run'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="11-匹配零次或多次"><a href="#11-匹配零次或多次" class="headerlink" title="11. 匹配零次或多次    *"></a>11. 匹配零次或多次    *</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># * ： occur 0 or more times</span></span><br><span class="line">res = re.search(<span class="string">r'ab*'</span>,<span class="string">'a'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">1</span>), match=<span class="string">'a'</span>&gt;</span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'ab*'</span>,<span class="string">'abbbbbbbbbb'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">11</span>), match=<span class="string">'abbbbbbbbbb'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="12-匹配一次或多次"><a href="#12-匹配一次或多次" class="headerlink" title="12. 匹配一次或多次    +"></a>12. 匹配一次或多次    +</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># + ：occur 1 or more times</span></span><br><span class="line">res = re.search(<span class="string">r'ab+'</span>,<span class="string">'a'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'ab+'</span>,<span class="string">'abbbbbbbbbb'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">11</span>), match=<span class="string">'abbbbbbbbbb'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="13-可选次数匹配-n-m"><a href="#13-可选次数匹配-n-m" class="headerlink" title="13. 可选次数匹配    {n, m}"></a>13. 可选次数匹配    {n, m}</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># &#123;n, m&#125; : occur n to m times</span></span><br><span class="line">res = re.search(<span class="string">r'ab&#123;1,10&#125;'</span>,<span class="string">'a'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="literal">None</span></span><br><span class="line"></span><br><span class="line">res = re.search(<span class="string">r'ab&#123;1,10&#125;'</span>,<span class="string">'abbbbbbbbbb'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>&lt;re.Match object; span=(<span class="number">0</span>, <span class="number">11</span>), match=<span class="string">'abbbbbbbbbb'</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="14-匹配后group组输出"><a href="#14-匹配后group组输出" class="headerlink" title="14. 匹配后group组输出"></a>14. 匹配后group组输出</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># group</span></span><br><span class="line">res = re.search(<span class="string">r'ID: (\d+), Name: (.+)'</span>,<span class="string">'ID: 123456789, Name: a/b*c;d'</span>)</span><br><span class="line">print(res.group())</span><br><span class="line">print(res.group(<span class="number">1</span>))</span><br><span class="line">print(res.group(<span class="number">2</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>ID: <span class="number">123456789</span>, Name: a/b*c;d</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">123456789</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a/b*c;d</span><br><span class="line"></span><br><span class="line"><span class="comment"># 给group组命名  ?P&lt;name&gt;</span></span><br><span class="line">res = re.search(<span class="string">r'ID: (?P&lt;id&gt;\d+), Name: (?P&lt;name&gt;.+)'</span>,<span class="string">'ID: 123456789, Name: a/b*c;d'</span>)</span><br><span class="line">print(res.group(<span class="string">'id'</span>))</span><br><span class="line">print(res.group(<span class="string">'name'</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="number">123456789</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a/b*c;d</span><br></pre></td></tr></table></figure><h3 id="15-寻找所有匹配-findall"><a href="#15-寻找所有匹配-findall" class="headerlink" title="15.寻找所有匹配 findall"></a>15.寻找所有匹配 findall</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.findall()</span></span><br><span class="line">res = re.findall(<span class="string">r'r[ua]n'</span>,<span class="string">'run ran ren'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'run'</span>, <span class="string">'ran'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 另一种写法</span></span><br><span class="line">res = re.findall(<span class="string">r'(run|ran)'</span>,<span class="string">'run ran ren'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'run'</span>, <span class="string">'ran'</span>]</span><br></pre></td></tr></table></figure><h3 id="16-替换匹配内容-sub"><a href="#16-替换匹配内容-sub" class="headerlink" title="16.替换匹配内容 sub"></a>16.替换匹配内容 sub</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.sub(   ,replace,   )</span></span><br><span class="line">res = re.sub(<span class="string">r'runs'</span>,<span class="string">'catches'</span>,<span class="string">'dog runs to cat'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dog catches to cat</span><br></pre></td></tr></table></figure><h3 id="17-分裂内容-split"><a href="#17-分裂内容-split" class="headerlink" title="17. 分裂内容  split"></a>17. 分裂内容  split</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re.split()</span></span><br><span class="line">res = re.split(<span class="string">r'[,;\.\\]'</span>, <span class="string">'a,b;c.d\e'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>]</span><br></pre></td></tr></table></figure><h3 id="18-包装正则表达式-compile"><a href="#18-包装正则表达式-compile" class="headerlink" title="18. 包装正则表达式 compile"></a>18. 包装正则表达式 compile</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># re. compile()</span></span><br><span class="line">compile_re = re.compile(<span class="string">r'r[ua]n'</span>)</span><br><span class="line">res = compile_re.findall(<span class="string">'run ran ren'</span>)</span><br><span class="line">print(res)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[<span class="string">'run'</span>, <span class="string">'ran'</span>]</span><br></pre></td></tr></table></figure><h2 id="三、归总一些常见的正则表达式"><a href="#三、归总一些常见的正则表达式" class="headerlink" title="三、归总一些常见的正则表达式"></a>三、归总一些常见的正则表达式</h2><h5 id="（1）、校验数字的表达式"><a href="#（1）、校验数字的表达式" class="headerlink" title="（1）、校验数字的表达式"></a>（1）、校验数字的表达式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1、数字：^[0-9]*$</span><br><span class="line">2、n位的数字：^\d&#123;n&#125;$</span><br><span class="line">3、至少n位的数字：^\d&#123;n,&#125;$</span><br><span class="line">4、m-n位的数字：^\d&#123;m,n&#125;$</span><br><span class="line">5、零和非零开头的数字：^(0|[1-9][0-9]*)$</span><br><span class="line">6、非零开头的最多带两位小数的数字：^([1-9][0-9]*)+(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">7、带1-2位小数的正数或负数：^(\-)?\d+(\.\d&#123;1,2&#125;)?$</span><br><span class="line">8、正数、负数、和小数：^(\-|\+)?\d+(\.\d+)?$</span><br><span class="line">9、有两位小数的正实数：^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class="line">10、有1~3位小数的正实数：^[0-9]+(.[0-9]&#123;1,3&#125;)?$</span><br><span class="line">11、非零的正整数：^[1-9]\d*$ 或 ^([1-9][0-9]*)&#123;1,3&#125;$ 或 ^\+?[1-9][0-9]*$</span><br><span class="line">12、非零的负整数：^\-[1-9][]0-9&quot;*$ 或 ^-[1-9]\d*$</span><br><span class="line">13、非负整数：^\d+$ 或 ^[1-9]\d*|0$</span><br><span class="line">14、非正整数：^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</span><br><span class="line">15、非负浮点数：^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$</span><br><span class="line">16、非正浮点数：^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$</span><br><span class="line">17、正浮点数：^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$</span><br><span class="line">18、负浮点数：^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$</span><br><span class="line">19、浮点数：^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$</span><br></pre></td></tr></table></figure><h5 id="（2）、校验字符的表达式"><a href="#（2）、校验字符的表达式" class="headerlink" title="（2）、校验字符的表达式"></a>（2）、校验字符的表达式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1、汉字：^[\u4e00-\u9fa5]&#123;0,&#125;$</span><br><span class="line">2、英文和数字：^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]&#123;4,40&#125;$</span><br><span class="line">3、长度为3-20的所有字符：^.&#123;3,20&#125;$</span><br><span class="line">3、由26个英文字母组成的字符串：^[A-Za-z]+$</span><br><span class="line">5、由26个大写英文字母组成的字符串：^[A-Z]+$</span><br><span class="line">6、由26个小写英文字母组成的字符串：^[a-z]+$</span><br><span class="line">7、由数字和26个英文字母组成的字符串：^[A-Za-z0-9]+$</span><br><span class="line">8、由数字、26个英文字母或者下划线组成的字符串：^\w+$ 或 ^\w&#123;3,20&#125;$</span><br><span class="line">9、中文、英文、数字包括下划线：^[\u4E00-\u9FA5A-Za-z0-9_]+$</span><br><span class="line">10、中文、英文、数字但不包括下划线等符号：^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]&#123;2,20&#125;$</span><br><span class="line">11、可以输入含有^%&amp;&#39;,;&#x3D;?$\&quot;等字符：[^%&amp;&#39;,;&#x3D;?$\x22]+</span><br><span class="line">12、禁止输入含有~的字符：[^~\x22]+</span><br></pre></td></tr></table></figure><h5 id="（3）、特殊需求表达式"><a href="#（3）、特殊需求表达式" class="headerlink" title="（3）、特殊需求表达式"></a>（3）、特殊需求表达式</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1、Email地址：^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</span><br><span class="line">2、域名：[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;(&#x2F;.[a-zA-Z0-9][-a-zA-Z0-9]&#123;0,62&#125;)+&#x2F;.?</span><br><span class="line">3、 InternetURL：[a-zA-z]+:&#x2F;&#x2F;[^\s]* 或 ^http:&#x2F;&#x2F;([\w-]+\.)+[\w-]+(&#x2F;[\w-.&#x2F;?%&amp;&#x3D;]*)?$</span><br><span class="line">4、手机号码：^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d&#123;8&#125;$</span><br><span class="line">5、电话号码(&quot;XXX-XXXXXXX&quot;、&quot;XXXX-XXXXXXXX&quot;、&quot;XXX-XXXXXXX&quot;、&quot;XXX-XXXXXXXX&quot;、&quot;XXXXXXX&quot;和&quot;XXXXXXXX)：^(\(\d&#123;3,4&#125;-)|\d&#123;3.4&#125;-)?\d&#123;7,8&#125;$</span><br><span class="line">6、国内电话号码(0511-4405222、021-87888822)：\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;</span><br><span class="line">7、身份证号(15位、18位数字)：^\d&#123;15&#125;|\d&#123;18&#125;$</span><br><span class="line">8、短身份证号码(数字、字母x结尾)：^([0-9])&#123;7,18&#125;(x|X)?$ 或 ^\d&#123;8,18&#125;|[0-9x]&#123;8,18&#125;|[0-9X]&#123;8,18&#125;?$</span><br><span class="line">9、帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：^[a-zA-Z][a-zA-Z0-9_]&#123;4,15&#125;$</span><br><span class="line">10、密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：^[a-zA-Z]\w&#123;5,17&#125;$</span><br><span class="line">11、强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：^(?&#x3D;.*\d)(?&#x3D;.*[a-z])(?&#x3D;.*[A-Z]).&#123;8,10&#125;$</span><br><span class="line">12、日期格式：^\d&#123;4&#125;-\d&#123;1,2&#125;-\d&#123;1,2&#125;</span><br><span class="line">13、一年的12个月(01～09和1～12)：^(0?[1-9]|1[0-2])$</span><br><span class="line">14 、一个月的31天(01～09和1～31)：^((0?[1-9])|((1|2)[0-9])|30|31)$</span><br><span class="line">15、钱的输入格式：</span><br><span class="line">* 有四种钱的表示形式我们可以接受:&quot;10000.00&quot; 和 &quot;10,000.00&quot;, 和没有 &quot;分&quot; 的 &quot;10000&quot; 和 &quot;10,000&quot;：^[1-9][0-9]*$</span><br><span class="line">* 这表示任意一个不以0开头的数字,但是,这也意味着一个字符&quot;0&quot;不通过,所以我们采用下面的形式：^(0|[1-9][0-9]*)$</span><br><span class="line">* 一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：^(0|-?[1-9][0-9]*)$</span><br><span class="line">* 这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：^[0-9]+(.[0-9]+)?$</span><br><span class="line">* 5.必须说明的是,小数点后面至少应该有1位数,所以&quot;10.&quot;是不通过的,但是 &quot;10&quot; 和 &quot;10.2&quot; 是通过的：^[0-9]+(.[0-9]&#123;2&#125;)?$</span><br><span class="line">* 6.这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：^[0-9]+(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">* 这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：^[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">* 1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：^([0-9]+|[0-9]&#123;1,3&#125;(,[0-9]&#123;3&#125;)*)(.[0-9]&#123;1,2&#125;)?$</span><br><span class="line">* 备注：这就是最终结果了,别忘了&quot;+&quot;可以用&quot;*&quot;替代如果你觉得空字符串也可</span><br><span class="line">* 以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</span><br><span class="line">16、xml文件：^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$</span><br><span class="line">17、中文字符的正则表达式：[\u4e00-\u9fa5]</span><br><span class="line">18、双字节字符：[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</span><br><span class="line">19、空白行的正则表达式：\n\s*\r (可以用来删除空白行)</span><br><span class="line">20、HTML标记的正则表达式：&lt;(\S*?)[^&gt;]*&gt;.*?&lt;&#x2F;\1&gt;|&lt;.*? &#x2F;&gt; (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)</span><br><span class="line">21、首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</span><br><span class="line">22、 腾讯QQ号：[1-9][0-9]&#123;4,&#125; (腾讯QQ号从10000开始)</span><br><span class="line">23、中国邮政编码：[1-9]\d&#123;5&#125;(?!\d) (中国邮政编码为6位数字)</span><br><span class="line">24、IP地址：\d+\.\d+\.\d+\.\d+ (提取IP地址时有用)</span><br><span class="line">25、 IP地址：((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.)&#123;3&#125;(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d))</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>scrapy基础操作教程（含实例）</title>
      <link href="/2020/05/23/scrapy%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%95%99%E7%A8%8B%EF%BC%88%E5%90%AB%E5%AE%9E%E4%BE%8B%EF%BC%89/"/>
      <url>/2020/05/23/scrapy%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C%E6%95%99%E7%A8%8B%EF%BC%88%E5%90%AB%E5%AE%9E%E4%BE%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>Scrapy 是用 Python 实现的一个为了爬取网站数据、提取结构性数据而编写的应用框架。<br>Scrapy 常应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。<br>通常我们可以很简单的通过 Scrapy 框架实现一个爬虫，抓取指定网站的内容或图片。本文将讲解如何开启一个简单的scrapy框架。</p><a id="more"></a><h1 id="scrapy教程"><a href="#scrapy教程" class="headerlink" title="scrapy教程"></a>scrapy教程</h1><p>我通过一个爬取百度贴吧hello吧页面源码的简单爬虫来讲解</p><h2 id="Scrapy架构-5-2结构"><a href="#Scrapy架构-5-2结构" class="headerlink" title="Scrapy架构(5+2结构)"></a>Scrapy架构(5+2结构)</h2><p>Scrapy Engine(引擎)：负责Spider、ItemPipeline、Downloader、Scheduler中间的通讯，信号、数据传递等。<br>Scheduler(调度器)：它负责接受引擎发送过来的Request请求，并按照一定的方式进行整理排列，入队，当引擎需要时，交还给引擎。<br>Downloader（下载器）：负责下载Scrapy Engine(引擎)发送的所有Requests请求，并将其获取到的Responses交还给Scrapy Engine(引擎)，由引擎交给Spider来处理。<br>Spider（爬虫）：它负责处理所有Responses,从中分析提取数据，获取Item字段需要的数据，并将需要跟进的URL提交给引擎，再次进入Scheduler(调度器)。<br>Item Pipeline(管道)：它负责处理Spider中获取到的Item，并进行进行后期处理（详细分析、过滤、存储等）的地方。<br>Downloader Middlewares（下载中间件）：一个可以自定义扩展下载功能的组件。<br>Spider Middlewares（Spider中间件）：一个可以自定扩展和操作引擎和Spider中间通信的功能组件。<br><img src="https://img-blog.csdnimg.cn/20200327153707772.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p><h2 id="一、安装scrapy"><a href="#一、安装scrapy" class="headerlink" title="一、安装scrapy"></a>一、安装scrapy</h2><p>1.通过pip安装</p><blockquote><p>pip install scrapy</p></blockquote><h2 id="二、创建工程"><a href="#二、创建工程" class="headerlink" title="二、创建工程"></a>二、创建工程</h2><p>Scrapy 常用命令<br><img src="https://img-blog.csdnimg.cn/20200327154424306.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>步骤1：<br>自己指定一个目录下创建一个新工程，输入命令行<br>比如在E盘根目录下创建<br>在根目录下Shift+右键，打开PS窗口<br>输入命令行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject hello</span><br></pre></td></tr></table></figure><p>当出现下面反应证明成功建立工程（我建立了一个hello工程）<br><img src="https://img-blog.csdnimg.cn/20200327155025755.png" alt="在这里插入图片描述"><br>步骤2：（该步骤也可以手工完成，这里就不说了）<br>在工程中产生一个scrapy爬虫<br>首先进入工程目录,继续输入命令行</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd hello</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200327155401767.png" alt="在这里插入图片描述"><br>然后在执行如下命令(生成一个名称为baidutieba的spider)：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy genspider baidutieba baidu.com</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200327155845873.png" alt="在这里插入图片描述"><br>生成的baidutieba.py文件在hello文件里的spiders目录下</p><h2 id="三、爬取百度hello吧页面源码实例编写"><a href="#三、爬取百度hello吧页面源码实例编写" class="headerlink" title="三、爬取百度hello吧页面源码实例编写"></a>三、爬取百度hello吧页面源码实例编写</h2><p>打开baidutieba.py文件进行编写爬取代码：<br>改写成如下代码<br><img src="https://img-blog.csdnimg.cn/202003271650328.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzM0NzU1MA==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>然后保存。<br>最后 再用PS窗口命令行输入</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl baidutieba</span><br></pre></td></tr></table></figure><p>即如下图所示：<br><img src="https://img-blog.csdnimg.cn/20200327165228371.png" alt="在这里插入图片描述"><br>回车运行，最后会在hello目录下生成一个hello.txt的文件，里面就是百度贴吧hello吧页面的网页源码。<br><img src="https://img-blog.csdnimg.cn/20200327165428124.png" alt="在这里插入图片描述"></p><h3 id="到此本次scrapy基础操作教程结束了"><a href="#到此本次scrapy基础操作教程结束了" class="headerlink" title="到此本次scrapy基础操作教程结束了"></a>到此本次scrapy基础操作教程结束了</h3>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> scrapy </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yilia 基本使用总结</title>
      <link href="/2020/05/23/yilia-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/"/>
      <url>/2020/05/23/yilia-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>本片文章记录一些 yilia 初学使用的一些基本用方法和技巧，我会持续更新，学到啥写啥，慢慢来吧。</p><a id="more"></a><h3 id="1-为文章添加多个标签"><a href="#1-为文章添加多个标签" class="headerlink" title="1.为文章添加多个标签"></a>1.为文章添加多个标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tags:</span><br><span class="line">    - 标签1</span><br><span class="line">    - 标签2</span><br><span class="line">    - ...</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure><h3 id="2-设置hexo首页只显示部分摘要（不显示全文）"><a href="#2-设置hexo首页只显示部分摘要（不显示全文）" class="headerlink" title="2.设置hexo首页只显示部分摘要（不显示全文）"></a>2.设置hexo首页只显示部分摘要（不显示全文）</h3><ul><li>在文章中需要截断的地方加入<code>&lt;!--more--&gt;</code>，显示部分为截断的上面。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">... 显示内容</span><br><span class="line">&lt;!--more--&gt;  #截断</span><br><span class="line">... 不显示内容</span><br></pre></td></tr></table></figure></li></ul><h3 id="3-头像上背景修改为图片"><a href="#3-头像上背景修改为图片" class="headerlink" title="3.头像上背景修改为图片"></a>3.头像上背景修改为图片</h3><ul><li>修改 themes\yilia\layout_partial\left-col.ejs 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;overlay&quot; style&#x3D;&quot;background: &lt;%&#x3D; theme.style &amp;&amp; theme.style.header ? theme.style.header : defaultBg %&gt;&quot;&gt;&lt;&#x2F;div&gt;    </span><br><span class="line">改为    </span><br><span class="line">&lt;div class&#x3D;&quot;overlay&quot; style&#x3D;&quot;background: url(&#39;https:&#x2F;&#x2F;w.wallhaven.cc&#x2F;full&#x2F;k9&#x2F;wallhaven-k9zqjd.png&#39;) no-repeat center bottom;background-size: cover;&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure><h3 id="4-实现旋转头像效果"><a href="#4-实现旋转头像效果" class="headerlink" title="4.实现旋转头像效果"></a>4.实现旋转头像效果</h3></li><li>新建 themes\yilia\source\avatarrotation.css 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># avatarrotation.css</span><br><span class="line"></span><br><span class="line">.left-col #header .profilepic img &#123;</span><br><span class="line">&#x2F;* 控制旋转速度时间*&#x2F;</span><br><span class="line">  -webkit-transition: -webkit-transform 1.0s ease-out;</span><br><span class="line">  -moz-transition: -moz-transform 1.0s ease-out;</span><br><span class="line">  transition: transform 1.0s ease-out;</span><br><span class="line">&#125;</span><br><span class="line">.left-col #header .profilepic img:hover &#123;</span><br><span class="line">&#x2F;* 鼠标经过360% *&#x2F;</span><br><span class="line">  -webkit-transform: rotateZ(360deg);</span><br><span class="line">  -moz-transform: rotateZ(360deg);</span><br><span class="line">  transform: rotateZ(360deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>修改 themes\yilia\layout_partial\head.ejs 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># head.ejs</span><br><span class="line"></span><br><span class="line">  &lt;%- partial(&#39;css&#39;) %&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 旋转头像效果--&gt;</span><br><span class="line">  &lt;% if (theme.avatarrotation)&#123; %&gt;</span><br><span class="line">&lt;link rel&#x3D;&quot;stylesheet&quot; type&#x3D;&quot;text&#x2F;css&quot; href&#x3D;&quot;&#x2F;.&#x2F;avatarrotation.css&quot;&gt;</span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;!-- 添加完成 --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;</span><br></pre></td></tr></table></figure></li><li>themes\yilia_config.yml 文件添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#头像是否旋转(如果不要旋转取false)</span><br><span class="line">avatarrotation: true</span><br></pre></td></tr></table></figure></li></ul><h3 id="5-添加-valine-评论系统"><a href="#5-添加-valine-评论系统" class="headerlink" title="5.添加 valine 评论系统"></a>5.添加 valine 评论系统</h3><ul><li>leancloud官网：<a href="https://leancloud.cn/" target="_blank" rel="noopener">https://leancloud.cn/</a></li></ul><p>注册完以后需要创建一个应用，名字可以随便起，然后 进入应用-&gt;设置-&gt;应用key<br>获取你的appid 和 appkey</p><ul><li>修改 themes/yilia/_config.yml 添加valine 评论系统：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Valine https:&#x2F;&#x2F;valine.js.org</span><br><span class="line">valine: </span><br><span class="line"> appid:  #Leancloud应用的appId</span><br><span class="line"> appkey:  #Leancloud应用的appKey</span><br><span class="line"> verify: false #验证码</span><br><span class="line"> notify: false #评论回复提醒</span><br><span class="line"> avatar: mm #评论列表头像样式：&#39;&#39;&#x2F;mm&#x2F;identicon&#x2F;monsterid&#x2F;wavatar&#x2F;retro&#x2F;hide</span><br><span class="line"> placeholder: Just go go #评论框占位符</span><br></pre></td></tr></table></figure></li><li>打开 themes\yilia\layout_partial\article.ejs 文件，末尾添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># article.ejs</span><br><span class="line"></span><br><span class="line">&lt;% if (theme.valine &amp;&amp; theme.valine.appid &amp;&amp; theme.valine.appkey &amp;&amp; !index)&#123; %&gt;</span><br><span class="line">  &lt;section id&#x3D;&quot;comments&quot; class&#x3D;&quot;comments&quot;&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      .comments&#123;margin:30px;padding:10px;background:#fff&#125;</span><br><span class="line">      @media screen and (max-width:800px)&#123;.comments&#123;margin:auto;padding:10px;background:#fff&#125;&#125;</span><br><span class="line">    &lt;&#x2F;style&gt;</span><br><span class="line">    &lt;%- partial(&#39;post&#x2F;valine&#39;, &#123;</span><br><span class="line">      key: post.slug,</span><br><span class="line">      title: post.title,</span><br><span class="line">      url: config.url+url_for(post.path)</span><br><span class="line">      &#125;) %&gt;</span><br><span class="line">  &lt;&#x2F;section&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure></li><li>打开 hexo\themes\yilia\layout_partial\post 文件夹，新建 valine.ejs 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">#valine.ejs</span><br><span class="line"></span><br><span class="line">&lt;div id&#x3D;&quot;vcomment&quot; class&#x3D;&quot;comment&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;jquery&#x2F;dist&#x2F;jquery.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&quot;&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;leancloud-storage&#x2F;dist&#x2F;av-min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script src&#x3D;&#39;&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;valine&#x2F;dist&#x2F;Valine.min.js&#39;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">   var notify &#x3D; &#39;&lt;%&#x3D; theme.valine.notify %&gt;&#39; &#x3D;&#x3D; true ? true : false;</span><br><span class="line">   var verify &#x3D; &#39;&lt;%&#x3D; theme.valine.verify %&gt;&#39; &#x3D;&#x3D; true ? true : false;</span><br><span class="line">   new Valine(&#123;</span><br><span class="line">            av: AV,</span><br><span class="line">            el: &#39;#vcomment&#39;,</span><br><span class="line">            notify: notify,</span><br><span class="line">            verify: verify,</span><br><span class="line">            app_id: &quot;&lt;%&#x3D; theme.valine.appid %&gt;&quot;,</span><br><span class="line">            app_key: &quot;&lt;%&#x3D; theme.valine.appkey %&gt;&quot;,</span><br><span class="line">            placeholder: &quot;&lt;%&#x3D; theme.valine.placeholder %&gt;&quot;,</span><br><span class="line">            avatar: &quot;&lt;%&#x3D; theme.valine.avatar %&gt;&quot;,</span><br><span class="line">            avatar_cdn: &quot;&lt;%&#x3D; theme.valine.avatar_cdn %&gt;&quot;,</span><br><span class="line">            pageSize: &lt;%&#x3D; theme.valine.pageSize %&gt;</span><br><span class="line">    &#125;);</span><br><span class="line">    if(window.location.hash)&#123;</span><br><span class="line">        var checkExist &#x3D; setInterval(function() &#123;</span><br><span class="line">           if ($(window.location.hash).length) &#123;</span><br><span class="line">              $(&#39;html, body&#39;).animate(&#123;scrollTop: $(window.location.hash).offset().top-90&#125;, 1000);</span><br><span class="line">              clearInterval(checkExist);</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;, 100);</span><br><span class="line">    &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="6-点击桃心效果"><a href="#6-点击桃心效果" class="headerlink" title="6.点击桃心效果"></a>6.点击桃心效果</h3><ul><li>创建 themes\yilia\source\js\src\love.js 文件，如果找不到文件夹，就新建对应的文件夹。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"># love.js</span><br><span class="line"></span><br><span class="line">! function(e, t, a) &#123;</span><br><span class="line">  function n() &#123;</span><br><span class="line">    c(&quot;.heart&#123;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);&#125;.heart:after,.heart:before&#123;content: &#39;&#39;;width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;&#125;.heart:after&#123;top: -5px;&#125;.heart:before&#123;left: -5px;&#125;&quot;), o(), r()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function r() &#123;</span><br><span class="line">    for (var e &#x3D; 0; e &lt; d.length; e++) d[e].alpha &lt;&#x3D; 0 ? (t.body.removeChild(d[e].el), d.splice(e, 1)) : (d[e].y--, d[e].scale +&#x3D; .004, d[e].alpha -&#x3D; .013, d[e].el.style.cssText &#x3D; &quot;left:&quot; + d[e].x + &quot;px;top:&quot; + d[e].y + &quot;px;opacity:&quot; + d[e].alpha + &quot;;transform:scale(&quot; + d[e].scale + &quot;,&quot; + d[e].scale + &quot;) rotate(45deg);background:&quot; + d[e].color + &quot;;z-index:99999&quot;);</span><br><span class="line">    requestAnimationFrame(r)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function o() &#123;</span><br><span class="line">    var t &#x3D; &quot;function&quot; &#x3D;&#x3D; typeof e.onclick &amp;&amp; e.onclick;</span><br><span class="line">    e.onclick &#x3D; function(e) &#123;</span><br><span class="line">      t &amp;&amp; t(), i(e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function i(e) &#123;</span><br><span class="line">    var a &#x3D; t.createElement(&quot;div&quot;);</span><br><span class="line">    a.className &#x3D; &quot;heart&quot;, d.push(&#123;</span><br><span class="line">      el: a,</span><br><span class="line">      x: e.clientX - 5,</span><br><span class="line">      y: e.clientY - 5,</span><br><span class="line">      scale: 1,</span><br><span class="line">      alpha: 1,</span><br><span class="line">      color: s()</span><br><span class="line">    &#125;), t.body.appendChild(a)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function c(e) &#123;</span><br><span class="line">    var a &#x3D; t.createElement(&quot;style&quot;);</span><br><span class="line">    a.type &#x3D; &quot;text&#x2F;css&quot;;</span><br><span class="line">    try &#123;</span><br><span class="line">      a.appendChild(t.createTextNode(e))</span><br><span class="line">    &#125; catch (t) &#123;</span><br><span class="line">      a.styleSheet.cssText &#x3D; e</span><br><span class="line">    &#125;</span><br><span class="line">    t.getElementsByTagName(&quot;head&quot;)[0].appendChild(a)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function s() &#123;</span><br><span class="line">    return &quot;rgb(&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;,&quot; + ~~(255 * Math.random()) + &quot;)&quot;</span><br><span class="line">  &#125;</span><br><span class="line">  var d &#x3D; [];</span><br><span class="line">  e.requestAnimationFrame &#x3D; function() &#123;</span><br><span class="line">    return e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function(e) &#123;</span><br><span class="line">      setTimeout(e, 1e3 &#x2F; 60)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;(), n()</span><br><span class="line">&#125;(window, document);</span><br></pre></td></tr></table></figure></li><li>打开 themes\yilia\layout\layout.ejs 文件, 最末尾添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;text&#x2F;javascript&quot; src&#x3D;&quot;&#x2F;js&#x2F;src&#x2F;love.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li></ul><h3 id="7-文章末尾添加“本文结束”标记"><a href="#7-文章末尾添加“本文结束”标记" class="headerlink" title="7.文章末尾添加“本文结束”标记"></a>7.文章末尾添加“本文结束”标记</h3><ul><li>打开 themes\yilia\layout_partial\article.ejs 文件。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># article.ejs</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">                      &lt;span class&#x3D;&quot;reward-type&quot;&gt;微信&lt;&#x2F;span&gt;</span><br><span class="line">                    &lt;&#x2F;div&gt;</span><br><span class="line">                    &lt;% &#125; %&gt;</span><br><span class="line">                  &lt;&#x2F;div&gt;</span><br><span class="line">                &lt;&#x2F;span&gt;</span><br><span class="line">              &lt;&#x2F;span&gt;</span><br><span class="line">            &lt;&#x2F;span&gt;</span><br><span class="line">          &lt;&#x2F;div&gt;</span><br><span class="line">          &lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;% &#125; %&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 添加本文结束标记--&gt;</span><br><span class="line">&lt;% if ( !index )&#123; %&gt;</span><br><span class="line">&lt;div style&#x3D;&quot;text-align:center;color: #00BFFF;font-size:14px;&quot;&gt;</span><br><span class="line">     -------------本文结束&lt;i class&#x3D;&quot;fa fa-paw&quot;&gt;&lt;&#x2F;i&gt;感谢您的阅读-------------</span><br><span class="line">     &lt;&#x2F;div&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line">&lt;!-- 添加完成 --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;div class&#x3D;&quot;article-info article-info-index&quot;&gt;</span><br><span class="line">      &lt;%if(post.top)&#123;%&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;article-pop-out tagcloud&quot;&gt;</span><br><span class="line">          &lt;i class&#x3D;&quot;icon-tuding&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">          &lt;a class&#x3D;&quot;article-tag-list-link color3&quot;&gt;置顶&lt;&#x2F;a&gt;</span><br><span class="line">        &lt;&#x2F;div&gt;</span><br><span class="line">      &lt;% &#125; %&gt;</span><br><span class="line">......</span><br></pre></td></tr></table></figure></li></ul><h3 id="8-侧边栏背景修改为图片"><a href="#8-侧边栏背景修改为图片" class="headerlink" title="8.侧边栏背景修改为图片"></a>8.侧边栏背景修改为图片</h3><ul><li>修改 themes\yilia\layout\layout.ejs 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;left-col&quot; q-class&#x3D;&quot;show:isShow&quot;&gt; </span><br><span class="line">改为</span><br><span class="line">&lt;div class&#x3D;&quot;left-col&quot; q-class&#x3D;&quot;show:isShow&quot; style&#x3D;&quot;background: url(&#39;https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;05&#x2F;23&#x2F;Ygxmpn4zwrSEJGy.png&#39;) no-repeat center bottom;background-size: cover;&quot; &gt;</span><br></pre></td></tr></table></figure></li><li>修改 themes\yilia_config.yml 文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 样式定制 - 一般不需要修改，除非有很强的定制欲望…</span><br><span class="line">style:</span><br><span class="line">  # 头像上面的背景颜色</span><br><span class="line">  header: &#39;rgba(0,0,0,0)&#39;</span><br></pre></td></tr></table></figure></li></ul><h3 id="9-Hexo添加Live2D看板娘"><a href="#9-Hexo添加Live2D看板娘" class="headerlink" title="9.Hexo添加Live2D看板娘"></a>9.Hexo添加Live2D看板娘</h3><ul><li>第一步在Hexo文件下安装依赖：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li><li>第二步安装模型依赖<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-模型</span><br></pre></td></tr></table></figure>模型可以在这里查看自己喜欢的<a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">https://huaji8.top/post/live2d-plugin-2.0/</a></li></ul><p>我现在用的是 z16</p><p><img src="https://i.loli.net/2020/05/24/ZPTCfvGtbLzYDlr.jpg" alt="z161.jpg"></p><ul><li>第三步向 hexo 的 _config.yml 添加如下的配置</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># Live2D</span><br><span class="line">## https:&#x2F;&#x2F;github.com&#x2F;EYHN&#x2F;hexo-helper-live2d</span><br><span class="line">live2d:</span><br><span class="line">  enable: true</span><br><span class="line">  scriptFrom: local</span><br><span class="line">  pluginRootPath: live2dw&#x2F;</span><br><span class="line">  pluginJsPath: lib&#x2F;</span><br><span class="line">  pluginModelPath: assets&#x2F;</span><br><span class="line">  tagMode: false #标签模式下为true</span><br><span class="line">  debug: false</span><br><span class="line">  log: false # Whether to show logs in console</span><br><span class="line">  model:</span><br><span class="line">    use: live2d-widget-model-z16    #选择的模型  koharu</span><br><span class="line">    scale: 1</span><br><span class="line">    hHeadPos: 0.5</span><br><span class="line">    vHeadPos: 0.618</span><br><span class="line">  react:</span><br><span class="line">    opacity: 0.7 #透明度</span><br><span class="line">    opacityDefault: 0.7</span><br><span class="line">    opacityOnHover: 0.2</span><br><span class="line">  display:</span><br><span class="line">    superSample: 2</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">    position: right #位置</span><br><span class="line">    hOffset: 0</span><br><span class="line">    vOffset: -20</span><br><span class="line">  mobile:</span><br><span class="line">    show: true</span><br><span class="line">    scale: 0.5</span><br><span class="line">    motion: true</span><br></pre></td></tr></table></figure><p><code>注意：use后面 改为你想用的live2d模型</code></p><ul><li>第四步正常发布后就可以看到了<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g -d</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      
        <tags>
            
            <tag> yilia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python之format用法详解</title>
      <link href="/2020/05/23/Python%E4%B9%8Bformat%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/"/>
      <url>/2020/05/23/Python%E4%B9%8Bformat%E7%94%A8%E6%B3%95%E8%AF%A6%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<p>Python2.6 开始，新增了一种格式化字符串的函数 str.format()，它增强了字符串格式化的功能。<br>基本语法是通过 {} 和 : 来代替以前的 % 。<br>format 函数可以接受不限个参数，位置可以不按顺序。</p><a id="more"></a><h1 id="Python之format用法详解"><a href="#Python之format用法详解" class="headerlink" title="Python之format用法详解"></a>Python之format用法详解</h1><h2 id="一、填充"><a href="#一、填充" class="headerlink" title="一、填充"></a>一、填充</h2><h3 id="1-无参（1）"><a href="#1-无参（1）" class="headerlink" title="1.无参（1）"></a>1.无参（1）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'&#123;&#125; &#123;&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))</span><br></pre></td></tr></table></figure><blockquote><p>hello world</p></blockquote><h3 id="2-无参（2）"><a href="#2-无参（2）" class="headerlink" title="2.无参（2）"></a>2.无参（2）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'&#123;0&#125; &#123;1&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))</span><br></pre></td></tr></table></figure><blockquote><p>hello world</p></blockquote><h3 id="3-无参（3）"><a href="#3-无参（3）" class="headerlink" title="3.无参（3）"></a>3.无参（3）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'&#123;1&#125; &#123;0&#125; &#123;1&#125;'</span>.format(<span class="string">'hello'</span>,<span class="string">'world'</span>))</span><br></pre></td></tr></table></figure><blockquote><p>world hello world</p></blockquote><h3 id="4-key-value"><a href="#4-key-value" class="headerlink" title="4.key value"></a>4.key value</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'ID:&#123;id&#125;,Name:&#123;name&#125;'</span>.format(id=<span class="string">'001'</span>,name=<span class="string">'hello'</span>))</span><br></pre></td></tr></table></figure><blockquote><p>ID:001,Name:hello</p></blockquote><h3 id="5-列表"><a href="#5-列表" class="headerlink" title="5.列表"></a>5.列表</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list=[<span class="string">'001'</span>,<span class="string">'hello'</span>]</span><br><span class="line">print(<span class="string">'ID:&#123;List[0]&#125;,Name:&#123;List[1]&#125;'</span>.format(List = list))</span><br><span class="line">print(<span class="string">'ID:&#123;0[0]&#125;,Name:&#123;0[1]&#125;'</span>.format(list))</span><br></pre></td></tr></table></figure><blockquote><p>ID:001,Name:hello<br>ID:001,Name:hello</p></blockquote><h3 id="6-字典"><a href="#6-字典" class="headerlink" title="6.字典"></a>6.字典</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dict=&#123;<span class="string">'id'</span>:<span class="string">'001,'</span>name<span class="string">':'</span>hello<span class="string">'&#125;                                                                              </span></span><br><span class="line"><span class="string">print('</span>ID:&#123;Dict[<span class="number">0</span>]&#125;,Name:&#123;Dict[<span class="number">1</span>]&#125;<span class="string">'.format(Dict = dict))</span></span><br><span class="line"><span class="string">print('</span>ID:&#123;id&#125;,Name:&#123;name&#125;<span class="string">'.format(**dict))</span></span><br></pre></td></tr></table></figure><blockquote><p>ID:001,Name:hello<br>ID:001,Name:hello</p></blockquote><h3 id="7-类"><a href="#7-类" class="headerlink" title="7.类"></a>7.类</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">value</span><span class="params">()</span>:</span></span><br><span class="line">id = <span class="string">'001'</span></span><br><span class="line">name = <span class="string">'hello'</span></span><br><span class="line">print(<span class="string">'ID:&#123;Value.id&#125;,Name&#123;Value.name&#125;'</span>.format(Value = value))</span><br></pre></td></tr></table></figure><blockquote><p>ID:001,Name:hello</p></blockquote><h3 id="8-魔法参数"><a href="#8-魔法参数" class="headerlink" title="8.魔法参数"></a>8.魔法参数</h3><p><em>args表示任何多个无名参数，它是一个tuple or list；*</em>kwargs表示关键字参数，它是一个 dict。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">args = [<span class="string">','</span>,<span class="string">'.'</span>]</span><br><span class="line">kwargs = &#123;<span class="string">'id'</span>: <span class="string">'001'</span>,<span class="string">'name'</span>:<span class="string">'hello'</span>&#125;</span><br><span class="line">print(<span class="string">'ID:&#123;id&#125;&#123;&#125;Name:&#123;name&#125;&#123;&#125;'</span>.format(*args, **kwargs))</span><br></pre></td></tr></table></figure><blockquote><p>ID:001,Name:hello.</p></blockquote><hr><h2 id="二、数字格式化"><a href="#二、数字格式化" class="headerlink" title="二、数字格式化"></a>二、数字格式化</h2><table><thead><tr><th>数字</th><th>格式</th><th>输出</th><th>描述</th></tr></thead><tbody><tr><td>3.1415926</td><td>{:.2f}</td><td>3.14</td><td>保留小数点后两位</td></tr><tr><td>3.1415926</td><td>{:+.2f}</td><td>+3.14</td><td>带符号保留小数点后两位</td></tr><tr><td>-1</td><td>{:+.2f}</td><td>-1.00</td><td>带符号保留小数点后两位</td></tr><tr><td>2.71828</td><td>{:.0f}</td><td>3</td><td>不带小数</td></tr><tr><td>5</td><td>{:0&gt;2d}</td><td>05</td><td>数字补零 (填充左边, 宽度为2)</td></tr><tr><td>5</td><td>{:x&lt;4d}</td><td>5xxx    )</td><td>数字补x (填充右边, 宽度为4</td></tr><tr><td>10</td><td>{:x&lt;4d}</td><td>10xx    )</td><td>数字补x (填充右边, 宽度为4</td></tr><tr><td>1000000</td><td>{:,}</td><td>1,000,000</td><td>以逗号分隔的数字格式</td></tr><tr><td>0.25</td><td>{:.2%}</td><td>25.00%</td><td>百分比格式</td></tr><tr><td>1000000000</td><td>{:.2e}</td><td>1.00e+09</td><td>指数记法</td></tr><tr><td>13</td><td>{:&gt;10d}</td><td>13</td><td>右对齐 (默认, 宽度为10)</td></tr><tr><td>13</td><td>{:&lt;10d}</td><td>13</td><td>左对齐 (宽度为10)</td></tr><tr><td>13</td><td>{:^10d}</td><td>13</td><td>中间对齐 (宽度为10)</td></tr><tr><td>11</td><td>‘{:b}’.format(11)</td><td>1011</td><td>二进制</td></tr><tr><td>11</td><td>‘{:d}’.format(11)</td><td>11</td><td>十进制</td></tr><tr><td>11</td><td>‘{：o}’.format(11)</td><td>13</td><td>八进制   //这里打成中文的冒号了，因为用英文的会打出一个O的表情<del>~</del></td></tr><tr><td>11</td><td>‘{:x}’.format(11)</td><td>b</td><td>十六进制</td></tr><tr><td>11</td><td>‘{:#x}’.format(11)</td><td>0xb</td><td>0x式十六进制+小写</td></tr><tr><td>11</td><td>‘{:#X}’.format(11)</td><td>0xB</td><td>0x式十六进制+大写</td></tr><tr><td>—-</td><td></td><td></td><td></td></tr><tr><td>## 三、叹号用法</td><td></td><td></td><td></td></tr><tr><td><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">print(‘&#123;!s&#125;好’.format(‘你’))</span><br><span class="line">print(‘&#123;!r&#125;好’.format(‘你’)) </span><br><span class="line">print(‘&#123;!a&#125;好’.format(‘你’))</span><br></pre></td></tr></table></figure></td><td></td><td></td><td></td></tr></tbody></table><blockquote><p> 你好</p></blockquote><blockquote><p>’你’好</p></blockquote><blockquote><p>’\u4f60’好</p></blockquote><hr><blockquote><p>！后面可以加s r a 分别对应str() repr() ascii() 作用是在填充前先用对应的函数来处理参数<br>差别就是<br>str()是面向用户的，目的是可读性，<br>repr()带有引号，<br>ascii()是面向Python解析器的，返回值表示在python内部的含义,ascii (),返回ascii编码</p></blockquote>]]></content>
      
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> format </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>随笔一</title>
      <link href="/2020/05/23/%E9%9A%8F%E7%AC%94%E4%B8%80/"/>
      <url>/2020/05/23/%E9%9A%8F%E7%AC%94%E4%B8%80/</url>
      
        <content type="html"><![CDATA[<p>这是一个实验！<br>分享一下我头像后面的背景，薇尔莉特<del>~</del></p><p><img src="https://i.loli.net/2020/05/23/L8h75gJnaxliXHe.jpg" alt=""></p>]]></content>
      
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的第一篇blog HelloWorld</title>
      <link href="/2020/05/21/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87blog/"/>
      <url>/2020/05/21/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E7%AF%87blog/</url>
      
        <content type="html"><![CDATA[<p>HelloWorld！</p><p>今天是我开通个人博客的第一天，很是高兴。我其实已经写博客好长时间了，不过都是在CSDN上写的，最近看一些大佬写的博客都是在自己的个人博客上，突发奇想地我也想自己建一个个人博客出来，由此，我的个人博客诞生了！</p><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy9QbjRTbTBSc0F1ZzJDZG45YUxYcDdRU2lidmJySWNBMzRDZllKaWFqT3hNTnNGRWd5WGgwellMM0pGRllSVU1BcFdVNDZ2akdzMWRlaGljWHRvdlluaWFlU3cvNjQwP3d4X2ZtdD1wbmc?x-oss-process=image/format,png" alt=""></p>]]></content>
      
      
      
        <tags>
            
            <tag> helloworld </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/google571d39cc539343d9.html"/>
      <url>/google571d39cc539343d9.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/photos/data.json"/>
      <url>/photos/data.json</url>
      
        <content type="html"><![CDATA[{"list":[{"date":"2021-09-10","arr":{"year":2021,"month":9,"day":10,"link":["2021-09-10_1.jpg","2021-09-10_2.jpg","2021-09-10_3.jpg","2021-09-10_7.jpg","2021-09-10_6.jpg","2021-09-10_4.jpg","2021-09-10_5.jpg"],"text":["1","2","3","7","6","4","5"],"type":["image","image","image","image","image","image","image"]}},{"date":"2021-09-09","arr":{"year":2021,"month":9,"day":9,"link":["2021-09-09_1.jpg","2021-09-09_3.jpg","2021-09-09_2.jpg","2021-09-09_6.jpg","2021-09-09_7.jpg","2021-09-09_5.jpg","2021-09-09_4.jpg"],"text":["1","3","2","6","7","5","4"],"type":["image","image","image","image","image","image","image"]}},{"date":"2021-08-08","arr":{"year":2021,"month":8,"day":8,"link":["2021-08-08_眷思量8.jpg","2021-08-08_眷思量9.jpg","2021-08-08_眷思量3.jpg","2021-08-08_眷思量1.jpg","2021-08-08_眷思量4.jpg","2021-08-08_眷思量10.jpg","2021-08-08_眷思量5.jpg","2021-08-08_眷思量7.jpg","2021-08-08_眷思量6.jpg"],"text":["眷思量8","眷思量9","眷思量3","眷思量1","眷思量4","眷思量10","眷思量5","眷思量7","眷思量6"],"type":["image","image","image","image","image","image","image","image","image"]}},{"date":"2020-05-20","arr":{"year":2020,"month":5,"day":20,"link":["2020-05-20_6.png","2020-05-20_4.png","2020-05-20_5.png","2020-05-20_1.png","2020-05-20_2.png","2020-05-20_3.png"],"text":["6","4","5","1","2","3"],"type":["image","image","image","image","image","image"]}}]}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/photos/ins.css"/>
      <url>/photos/ins.css</url>
      
        <content type="html"><![CDATA[#post-instagram{padding: 30px;}#post-instagram .article-entry{padding-right: 0;}.instagram{position: relative;min-height: 500px;}.instagram img {width: 100%;}.instagram .year {font-size: 16px;}.instagram .open-ins{padding: 10px 0;color: #cdcdcd;}.instagram .open-ins:hover{color: #657b83;}.instagram .year{display: inline;}.instagram .thumb {width: 25%;height: 0; padding-bottom: 25%;position: relative;display: inline-block;text-align: center;background: #ededed;outline: 1px solid #ddd;}.instagram .thumb a {position: relative;}.instagram .album h1 em{font-style: normal;font-size: 14px;margin-left: 10px;}.instagram .album ul{display: flex;flex-wrap: wrap;clear: both;width: 100%;text-align: left;}.instagram .album li{list-style: none;display: inline-block;box-sizing: border-box;padding: 0 5px;margin-bottom: -10px;height: 0;width: 25%;position: relative;padding-bottom: 25%;}.instagram .album li:before{display: none;}.instagram .album div.img-box{position: absolute;width: 90%;height: 90%;-webkit-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);-moz-box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);box-shadow: 0 1px 0 rgba(255,255,255,0.4), 0 1px 0 1px rgba(255,255,255,0.1);}.instagram .album div.img-box img{width: 100%;height: 100%;    position: absolute;    z-index: 2;}.instagram .album div.img-box .img-bg{position: absolute;top: 0;left: 0;bottom: 0px;width: 100%;margin: -5px;padding: 5px;-webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);-moz-box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);box-shadow: 0 0 0 1px rgba(0,0,0,.04), 0 1px 5px rgba(0,0,0,0.1);-webkit-transition: all 0.15s ease-out 0.1s;-moz-transition: all 0.15s ease-out 0.1s;-o-transition: all 0.15s ease-out 0.1s;transition: all 0.15s ease-out 0.1s;opacity: 0.2;cursor: pointer;display: block;z-index: 3;}.instagram .album div.img-box .icon {    font-size: 14px;    position: absolute;    left: 50%;    top: 50%;    margin-left: -7px;    margin-top: -7px;    color: #999;    z-index: 1;}.instagram .album div.img-box .img-bg:hover{opacity: 0;}.photos-btn-wrap {border-bottom: 1px solid #e5e5e5;margin-bottom: 20px;}.photos-btn {font-size: 16px;color: #333;margin-bottom: -4px;padding: 5px 8px 3px;}.photos-btn.active {color: #08c;border: 1px solid #e5e5e5;border-bottom: 5px solid #fff;}@media screen and (max-width:600px) {.instagram .thumb {width: 50%;padding-bottom: 50%;}.instagram .album li {width: 100%;position: relative;padding-bottom: 100%;text-align: center;}.instagram .album div.img-box{margin: 0;width: 90%;height: 90%;}}/* ====== video ===== */ .video-container {    z-index: 1;    position: relative;    padding-bottom: 56.25%;    margin: 0 auto;}.video-container iframe, .video-container object, .video-container embed {    z-index: 1;    position: absolute;    top: 0;    left: 7%;    width: 85%;    height: 85%;    box-shadow: 0px 0px 20px 2px #888888;}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/photos/ins.js"/>
      <url>/photos/ins.js</url>
      
        <content type="html"><![CDATA[/******/(function(modules) { // webpackBootstrap  /******/ // The module cache  /******/  var installedModules = {};  /******/  /******/ // The require function  /******/  function __webpack_require__(moduleId) {    /******/    /******/ // Check if module is in cache    /******/    if (installedModules[moduleId])    /******/      return installedModules[moduleId].exports;    /******/    /******/ // Create a new module (and put it into the cache)    /******/    var module = installedModules[moduleId] = {      /******/      exports: {},      /******/      id: moduleId,      /******/      loaded: false        /******/    };    /******/    /******/ // Execute the module function    /******/    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);    /******/    /******/ // Flag the module as loaded    /******/    module.loaded = true;    /******/    /******/ // Return the exports of the module    /******/    return module.exports;    /******/  }  /******/  /******/  /******/ // expose the modules object (__webpack_modules__)  /******/  __webpack_require__.m = modules;  /******/  /******/ // expose the module cache  /******/  __webpack_require__.c = installedModules;  /******/  /******/ // __webpack_public_path__  /******/  __webpack_require__.p = "/dist/";  /******/  /******/ // Load entry module and return exports  /******/  return __webpack_require__(0);  /******/})/************************************************************************//******/([  /* 0 */  /***/  function(module, exports, __webpack_require__) {    'use strict';    __webpack_require__(1);    var _view = __webpack_require__(2);    var _view2 = _interopRequireDefault(_view);    function _interopRequireDefault(obj) {      return obj && obj.__esModule ? obj : {        default: obj      };    }    /**     * @name impush-client      * @description 这个项目让我发家致富…     * @date 2016-12-1     */    var _collection = [];    var _count = 0;    var searchData;    function addMask(elem) {      var rect = elem.getBoundingClientRect();      var style = getComputedStyle(elem, null);      var mask = document.createElement('i');      mask.className = 'icon-film';      mask.style.color = '#fff';      mask.style.fontSize = '26px';      mask.style.position = 'absolute';      mask.style.right = '10px';      mask.style.bottom = '10px';      mask.style.zIndex = 1;      elem.parentNode.appendChild(mask);    }    var createVideoIncon = function createVideoIncon() {      var $videoImg = document.querySelectorAll('.thumb a[data-type="video"]');      for (var i = 0, len = $videoImg.length; i < len; i++) {        addMask($videoImg[i]);      }    };    var render = function render(res) {      //https://raw.githubusercontent.com/quanluo/Blog-Picture/master/min_photos/2020-05-20_1.png      //https://gitee.com/quanluo/blog-picture/raw/master/min_photos/2020-05-20_1.png      var ulTmpl = "";      for (var j = 0, len2 = res.list.length; j < len2; j++) {        var data = res.list[j].arr;        var liTmpl = "";        for (var i = 0, len = data.link.length; i < len; i++) {          var minSrc = 'https://gitee.com/quanluo/blog-picture/raw/master/min_photos/' + data.link[i];          var src = 'https://gitee.com/quanluo/blog-picture/raw/master/photos/' + data.link[i];          // var minSrc = 'https://raw.githubusercontent.com/quanluo/Blog-Picture/master/min_photos/' + data.link[i];          // var src = 'https://raw.githubusercontent.com/quanluo/Blog-Picture/master/photos/' + data.link[i];          var type = data.type[i];          var target = src + (type === 'video' ? '.mp4' : '.jpg');          src += '';          liTmpl += '<figure class="thumb" itemprop="associatedMedia" itemscope="" itemtype="http://schema.org/ImageObject">\                <a href="' + src + '" itemprop="contentUrl" data-size="1080x1080" data-type="' + type + '" data-target="' + src + '">\                  <img class="reward-img" data-type="' + type + '" data-src="' + minSrc + '" src="/assets/img/empty.png" itemprop="thumbnail" onload="lzld(this)">\                </a>\                <figcaption style="display:none" itemprop="caption description">' + data.text[i] + '</figcaption>\            </figure>';        }        ulTmpl = ulTmpl + '<section class="archives album"><h1 class="year">' + data.year + '年<em>' + data.month + '月<em>' + data.day + '日</em></h1>\        <ul class="img-box-ul">' + liTmpl + '</ul>\        </section>';      }      document.querySelector('.instagram').innerHTML = '<div class="photos" itemscope="" itemtype="http://schema.org/ImageGallery">' + ulTmpl + '</div>';      createVideoIncon();      _view2.default.init();    };    var replacer = function replacer(str) {      var arr = str.split("/");      return "/assets/ins/" + arr[arr.length - 1];    };    var ctrler = function ctrler(data) {      var imgObj = {};      for (var i = 0, len = data.length; i < len; i++) {        var y = data[i].y;        var m = data[i].m;        var src = replacer(data[i].src);        var text = data[i].text;        var key = y + "" + ((m + "").length == 1 ? "0" + m : m);        if (imgObj[key]) {          imgObj[key].srclist.push(src);          imgObj[key].text.push(text);        } else {          imgObj[key] = {            year: y,            month: m,            srclist: [src],            text: [text]          };        }      }      render(imgObj);    };    function loadData(success) {      if (!searchData) {        var xhr = new XMLHttpRequest();        xhr.open('GET', './data.json?t=' + +new Date(), true);        xhr.onload = function() {          if (this.status >= 200 && this.status < 300) {            var res = JSON.parse(this.response);            searchData = res;            success(searchData);          } else {            console.error(this.statusText);          }        };        xhr.onerror = function() {          console.error(this.statusText);        };        xhr.send();      } else {        success(searchData);      }    }    var Ins = {      init: function init() {        loadData(function(data) {          render(data);        });      }    };    Ins.init();    // export default impush;    /***/  },  /* 1 */  /***/  function(module, exports, __webpack_require__) {    /* WEBPACK VAR INJECTION */    (function(global) {      'use strict';      var inViewport = __webpack_require__(3);      var lazyAttrs = ['data-src'];      global.lzld = lazyload();      // Provide libs using getAttribute early to get the good src      // and not the fake data-src      replaceGetAttribute('Image');      replaceGetAttribute('IFrame');      function registerLazyAttr(attr) {        if (indexOf.call(lazyAttrs, attr) === -1) {          lazyAttrs.push(attr);        }      }      function lazyload(opts) {        opts = merge({          'offset': 333,          'src': 'data-src',          'container': false        }, opts || {});        if (typeof opts.src === 'string') {          registerLazyAttr(opts.src);        }        var elts = [];        function show(elt) {          var src = findRealSrc(elt);          if (src) {            elt.src = src;          }          elt.setAttribute('data-lzled', true);          elts[indexOf.call(elts, elt)] = null;        }        function findRealSrc(elt) {          if (typeof opts.src === 'function') {            return opts.src(elt);          }          return elt.getAttribute(opts.src);        }        function register(elt) {          elt.onload = null;          elt.removeAttribute('onload');          elt.onerror = null;          elt.removeAttribute('onerror');          if (indexOf.call(elts, elt) === -1) {            inViewport(elt, opts, show);          }        }        return register;      }      function replaceGetAttribute(elementName) {        var fullname = 'HTML' + elementName + 'Element';        if (fullname in global === false) {          return;        }        var original = global[fullname].prototype.getAttribute;        global[fullname].prototype.getAttribute = function(name) {          if (name === 'src') {            var realSrc;            for (var i = 0, max = lazyAttrs.length; i < max; i++) {              realSrc = original.call(this, lazyAttrs[i]);              if (realSrc) {                break;              }            }            return realSrc || original.call(this, name);          }          // our own lazyloader will go through theses lines          // because we use getAttribute(opts.src)          return original.call(this, name);        };      }      function merge(defaults, opts) {        for (var name in defaults) {          if (opts[name] === undefined) {            opts[name] = defaults[name];          }        }        return opts;      }      // http://webreflection.blogspot.fr/2011/06/partial-polyfills.html      function indexOf(value) {        for (var i = this.length; i-- && this[i] !== value;) {}        return i;      }      module.exports = lazyload;      // export default impush;      /* WEBPACK VAR INJECTION */    }.call(exports, (function() {      return this;    }())))    /***/  },  /* 2 */  /***/  function(module, exports) {    'use strict';    var initPhotoSwipeFromDOM = function initPhotoSwipeFromDOM(gallerySelector) {      // parse slide data (url, title, size ...) from DOM elements       // (children of gallerySelector)      var parseThumbnailElements = function parseThumbnailElements(el) {        el = el.parentNode.parentNode;        var thumbElements = el.getElementsByClassName('thumb'),          numNodes = thumbElements.length,          items = [],          figureEl,          linkEl,          size,          type,          // video or not          target,          item;        for (var i = 0; i < numNodes; i++) {          figureEl = thumbElements[i]; //           // include only element nodes           if (figureEl.nodeType !== 1) {            continue;          }          linkEl = figureEl.children[0]; //           size = linkEl.getAttribute('data-size').split('x');          type = linkEl.getAttribute('data-type');          target = linkEl.getAttribute('data-target');          // create slide object          item = {            src: linkEl.getAttribute('href'),            w: parseInt(size[0], 10),            h: parseInt(size[1], 10)          };          if (figureEl.children.length > 1) {            item.title = figureEl.children[1].innerHTML;          }          if (linkEl.children.length > 0) {            item.msrc = linkEl.children[0].getAttribute('src');            item.type = type;            item.target = target;            item.html = '<video src="' + target + '" controls="controls" autoplay="autoplay"></video>';            if (type === 'video') {              //item.src = null;            }          }          item.el = figureEl; // save link to element for getThumbBoundsFn          items.push(item);        }        return items;      };      // find nearest parent element      var closest = function closest(el, fn) {        return el && (fn(el) ? el : closest(el.parentNode, fn));      };      // triggers when user clicks on thumbnail      var onThumbnailsClick = function onThumbnailsClick(e) {        e = e || window.event;        e.preventDefault ? e.preventDefault() : e.returnValue = false;        var eTarget = e.target || e.srcElement;        // find root element of slide        var clickedListItem = closest(eTarget, function(el) {          return el.tagName && el.tagName.toUpperCase() === 'FIGURE';        });        if (!clickedListItem) {          return;        }        // find index of clicked item by looping through all child nodes        // alternatively, you may define index via data- attribute        var clickedGallery = clickedListItem.parentNode,          // childNodes = clickedListItem.parentNode.childNodes,          // numChildNodes = childNodes.length,          childNodes = document.getElementsByClassName('thumb'),          numChildNodes = childNodes.length,          nodeIndex = 0,          index;        for (var i = 0; i < numChildNodes; i++) {          if (childNodes[i].nodeType !== 1) {            continue;          }          if (childNodes[i] === clickedListItem) {            index = nodeIndex;            break;          }          nodeIndex++;        }        if (index >= 0) {          // open PhotoSwipe if valid index found          openPhotoSwipe(index, clickedGallery);        }        return false;      };      // parse picture index and gallery index from URL (#&pid=1&gid=2)      var photoswipeParseHash = function photoswipeParseHash() {        var hash = window.location.hash.substring(1),          params = {};        if (hash.length < 5) {          return params;        }        var vars = hash.split('&');        for (var i = 0; i < vars.length; i++) {          if (!vars[i]) {            continue;          }          var pair = vars[i].split('=');          if (pair.length < 2) {            continue;          }          params[pair[0]] = pair[1];        }        if (params.gid) {          params.gid = parseInt(params.gid, 10);        }        return params;      };      var openPhotoSwipe = function openPhotoSwipe(index, galleryElement, disableAnimation, fromURL) {        var pswpElement = document.querySelectorAll('.pswp')[0],          gallery,          options,          items;        items = parseThumbnailElements(galleryElement);        // define options (if needed)        options = {          // define gallery index (for URL)          galleryUID: galleryElement.getAttribute('data-pswp-uid'),          getThumbBoundsFn: function getThumbBoundsFn(index) {            // See Options -> getThumbBoundsFn section of documentation for more info            var thumbnail = items[index].el.getElementsByTagName('img')[0],              // find thumbnail              pageYScroll = window.pageYOffset || document.documentElement.scrollTop,              rect = thumbnail.getBoundingClientRect();            return {              x: rect.left,              y: rect.top + pageYScroll,              w: rect.width            };          }        };        // PhotoSwipe opened from URL        if (fromURL) {          if (options.galleryPIDs) {            // parse real index when custom PIDs are used             // http://photoswipe.com/documentation/faq.html#custom-pid-in-url            for (var j = 0; j < items.length; j++) {              if (items[j].pid == index) {                options.index = j;                break;              }            }          } else {            // in URL indexes start from 1            options.index = parseInt(index, 10) - 1;          }        } else {          options.index = parseInt(index, 10);        }        // exit if index not found        if (isNaN(options.index)) {          return;        }        if (disableAnimation) {          options.showAnimationDuration = 0;        }        // Pass data to PhotoSwipe and initialize it        gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);        gallery.init();        var $tempVideo;        var stopVideoHandle = function stopVideoHandle() {          if ($tempVideo) {            $tempVideo.remove();            $tempVideo = null;          }        };        var changeHandle = function changeHandle() {          var item = gallery.currItem;          stopVideoHandle();          if (item.type === 'video') {            var $ctn = item.container;            var style = $ctn.getElementsByClassName('pswp__img')[0].style;            var $video = document.createElement('video');            $video.setAttribute('autoplay', 'autoplay');            $video.setAttribute('controls', 'controls');            $video.setAttribute('src', item.target);            $video.style.width = style.width;            $video.style.height = style.height;            $video.style.position = 'absolute';            $video.style.zIndex = 2;            $tempVideo = $video;            $ctn.appendChild($video);          }        };        gallery.listen('initialZoomIn', changeHandle);        gallery.listen('afterChange', changeHandle);        gallery.listen('initialZoomOut', stopVideoHandle);      };      // loop through all gallery elements and bind events      var galleryElements = document.querySelectorAll(gallerySelector);      for (var i = 0, l = galleryElements.length; i < l; i++) {        galleryElements[i].setAttribute('data-pswp-uid', i + 1);        galleryElements[i].onclick = onThumbnailsClick;      }      // Parse URL and open gallery if it contains #&pid=3&gid=1      var hashData = photoswipeParseHash();      if (hashData.pid && hashData.gid) {        openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);      }    };    var Viewer = function() {      function init() {        initPhotoSwipeFromDOM('.photos');      }      return {        init: init      };    }();    module.exports = Viewer;    /***/  },  /* 3 */  /***/  function(module, exports) {    /* WEBPACK VAR INJECTION */    (function(global) {      module.exports = inViewport;      var instances = [];      var supportsMutationObserver = typeof global.MutationObserver === 'function';      function inViewport(elt, params, cb) {        var opts = {          container: global.document.body,          offset: 0        };        if (params === undefined || typeof params === 'function') {          cb = params;          params = {};        }        var container = opts.container = params.container || opts.container;        var offset = opts.offset = params.offset || opts.offset;        for (var i = 0; i < instances.length; i++) {          if (instances[i].container === container) {            return instances[i].isInViewport(elt, offset, cb);          }        }        return instances[          instances.push(createInViewport(container)) - 1        ].isInViewport(elt, offset, cb);      }      function addEvent(el, type, fn) {        if (el.attachEvent) {          el.attachEvent('on' + type, fn);        } else {          el.addEventListener(type, fn, false);        }      }      function debounce(func, wait, immediate) {        var timeout;        return function() {          var context = this,            args = arguments;          var callNow = immediate && !timeout;          clearTimeout(timeout);          timeout = setTimeout(later, wait);          if (callNow) func.apply(context, args);          function later() {            timeout = null;            if (!immediate) func.apply(context, args);          }        };      }      // https://github.com/jquery/sizzle/blob/3136f48b90e3edc84cbaaa6f6f7734ef03775a07/sizzle.js#L708      var contains = function() {        if (!global.document) {          return true;        }        return global.document.documentElement.compareDocumentPosition ?          function(a, b) {            return !!(a.compareDocumentPosition(b) & 16);          } :          global.document.documentElement.contains ?          function(a, b) {            return a !== b && (a.contains ? a.contains(b) : false);          } :          function(a, b) {            while (b = b.parentNode) {              if (b === a) {                return true;              }            }            return false;          };      }      function createInViewport(container) {        var watches = createWatches();        var scrollContainer = container === global.document.body ? global : container;        var debouncedCheck = debounce(watches.checkAll(watchInViewport), 15);        addEvent(scrollContainer, 'scroll', debouncedCheck);        if (scrollContainer === global) {          addEvent(global, 'resize', debouncedCheck);        }        if (supportsMutationObserver) {          observeDOM(watches, container, debouncedCheck);        }        // failsafe check, every 200ms we check for visible images        // usecase: a hidden parent containing eleements        // when the parent becomes visible, we have no event that the children        // became visible        setInterval(debouncedCheck, 150);        function isInViewport(elt, offset, cb) {          if (!cb) {            return isVisible(elt, offset);          }          var remote = createRemote(elt, offset, cb);          remote.watch();          return remote;        }        function createRemote(elt, offset, cb) {          function watch() {            watches.add(elt, offset, cb);          }          function dispose() {            watches.remove(elt);          }          return {            watch: watch,            dispose: dispose          };        }        function watchInViewport(elt, offset, cb) {          if (isVisible(elt, offset)) {            watches.remove(elt);            cb(elt);          }        }        function isVisible(elt, offset) {          if (!contains(global.document.documentElement, elt) || !contains(global.document.documentElement, container)) {            return false;          }          // Check if the element is visible          // https://github.com/jquery/jquery/blob/740e190223d19a114d5373758127285d14d6b71e/src/css/hiddenVisibleSelectors.js          if (!elt.offsetWidth || !elt.offsetHeight) {            return false;          }          var eltRect = elt.getBoundingClientRect();          var viewport = {};          if (container === global.document.body) {            viewport = {              top: -offset,              left: -offset,              right: global.document.documentElement.clientWidth + offset,              bottom: global.document.documentElement.clientHeight + offset            };          } else {            var containerRect = container.getBoundingClientRect();            viewport = {              top: containerRect.top - offset,              left: containerRect.left - offset,              right: containerRect.right + offset,              bottom: containerRect.bottom + offset            };          }          // The element must overlap with the visible part of the viewport          var visible =            (              (eltRect.right > viewport.left) &&              (eltRect.left < viewport.right) &&              (eltRect.bottom > viewport.top) &&              (eltRect.top < viewport.bottom)            );          return visible;        }        return {          container: container,          isInViewport: isInViewport        };      }      function createWatches() {        var watches = [];        function add(elt, offset, cb) {          if (!isWatched(elt)) {            watches.push([elt, offset, cb]);          }        }        function remove(elt) {          var pos = indexOf(elt);          if (pos !== -1) {            watches.splice(pos, 1);          }        }        function indexOf(elt) {          for (var i = watches.length - 1; i >= 0; i--) {            if (watches[i][0] === elt) {              return i;            }          }          return -1;        }        function isWatched(elt) {          return indexOf(elt) !== -1;        }        function checkAll(cb) {          return function() {            for (var i = watches.length - 1; i >= 0; i--) {              cb.apply(this, watches[i]);            }          };        }        return {          add: add,          remove: remove,          isWatched: isWatched,          checkAll: checkAll        };      }      function observeDOM(watches, container, cb) {        var observer = new MutationObserver(watch);        var filter = Array.prototype.filter;        var concat = Array.prototype.concat;        observer.observe(container, {          childList: true,          subtree: true,          // changes like style/width/height/display will be catched          attributes: true        });        function watch(mutations) {          // some new DOM nodes where previously watched          // we should check their positions          if (mutations.some(knownNodes) === true) {            setTimeout(cb, 0);          }        }        function knownNodes(mutation) {          var nodes = concat.call([],            Array.prototype.slice.call(mutation.addedNodes),            mutation.target          );          return filter.call(nodes, watches.isWatched).length > 0;        }      }      /* WEBPACK VAR INJECTION */    }.call(exports, (function() {      return this;    }())))    /***/  }  /******/]);]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/photos/lazyload.min.js"/>
      <url>/photos/lazyload.min.js</url>
      
        <content type="html"><![CDATA[/*! * An jQuery | zepto plugin for lazy loading images. * author -> jieyou * see https://github.com/jieyou/lazyload * use some tuupola's code https://github.com/tuupola/jquery_lazyload (BSD) * use component's throttle https://github.com/component/throttle (MIT) */!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery||window.Zepto)}(function(a){function g(){}function h(a,b){var e;return e=b._$container==d?("innerHeight"in c?c.innerHeight:d.height())+d.scrollTop():b._$container.offset().top+b._$container.height(),e<=a.offset().top-b.threshold}function i(b,e){var f;return f=e._$container==d?d.width()+(a.fn.scrollLeft?d.scrollLeft():c.pageXOffset):e._$container.offset().left+e._$container.width(),f<=b.offset().left-e.threshold}function j(a,b){var c;return c=b._$container==d?d.scrollTop():b._$container.offset().top,c>=a.offset().top+b.threshold+a.height()}function k(b,e){var f;return f=e._$container==d?a.fn.scrollLeft?d.scrollLeft():c.pageXOffset:e._$container.offset().left,f>=b.offset().left+e.threshold+b.width()}function l(a,b){var c=0;a.each(function(d){function g(){f.trigger("_lazyload_appear"),c=0}var f=a.eq(d);if(!(f.width()<=0&&f.height()<=0||"none"===f.css("display")))if(b.vertical_only)if(j(f,b));else if(h(f,b)){if(++c>b.failure_limit)return!1}else g();else if(j(f,b)||k(f,b));else if(h(f,b)||i(f,b)){if(++c>b.failure_limit)return!1}else g()})}function m(a){return a.filter(function(b){return!a.eq(b)._lazyload_loadStarted})}function n(a,b){function h(){f=0,g=+new Date,e=a.apply(c,d),c=null,d=null}var c,d,e,f,g=0;return function(){c=this,d=arguments;var a=new Date-g;return f||(a>=b?h():f=setTimeout(h,b-a)),e}}var f,c=window,d=a(c),e={threshold:0,failure_limit:0,event:"scroll",effect:"show",effect_params:null,container:c,data_attribute:"original",data_srcset_attribute:"original-srcset",skip_invisible:!0,appear:g,load:g,vertical_only:!1,check_appear_throttle_time:300,url_rewriter_fn:g,no_fake_img_loader:!1,placeholder_data_img:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",placeholder_real_img:"http://ditu.baidu.cn/yyfm/lazyload/0.0.1/img/placeholder.png"};f=function(){var a=Object.prototype.toString;return function(b){return a.call(b).replace("[object ","").replace("]","")}}(),a.fn.hasOwnProperty("lazyload")||(a.fn.lazyload=function(b){var i,j,k,h=this;return a.isPlainObject(b)||(b={}),a.each(e,function(g,h){var i=f(b[g]);-1!=a.inArray(g,["threshold","failure_limit","check_appear_throttle_time"])?"String"==i?b[g]=parseInt(b[g],10):"Number"!=i&&(b[g]=h):"container"==g?(b._$container=b.hasOwnProperty(g)?b[g]==c||b[g]==document?d:a(b[g]):d,delete b.container):!e.hasOwnProperty(g)||b.hasOwnProperty(g)&&i==f(e[g])||(b[g]=h)}),i="scroll"==b.event,k=0==b.check_appear_throttle_time?l:n(l,b.check_appear_throttle_time),j=i||"scrollstart"==b.event||"scrollstop"==b.event,h.each(function(c){var e=this,f=h.eq(c),i=f.attr("src"),k=f.attr("data-"+b.data_attribute),l=b.url_rewriter_fn==g?k:b.url_rewriter_fn.call(e,f,k),n=f.attr("data-"+b.data_srcset_attribute),o=f.is("img");return 1==f._lazyload_loadStarted||i==l?(f._lazyload_loadStarted=!0,h=m(h),void 0):(f._lazyload_loadStarted=!1,o&&!i&&f.one("error",function(){f.attr("src",b.placeholder_real_img)}).attr("src",b.placeholder_data_img),f.one("_lazyload_appear",function(){function i(){d&&f.hide(),o?(n&&f.attr("srcset",n),l&&f.attr("src",l)):f.css("background-image",'url("'+l+'")'),d&&f[b.effect].apply(f,c?b.effect_params:[]),h=m(h)}var d,c=a.isArray(b.effect_params);f._lazyload_loadStarted||(d="show"!=b.effect&&a.fn[b.effect]&&(!b.effect_params||c&&0==b.effect_params.length),b.appear!=g&&b.appear.call(e,f,h.length,b),f._lazyload_loadStarted=!0,b.no_fake_img_loader||n?(b.load!=g&&f.one("load",function(){b.load.call(e,f,h.length,b)}),i()):a("<img />").one("load",function(){i(),b.load!=g&&b.load.call(e,f,h.length,b)}).attr("src",l))}),j||f.on(b.event,function(){f._lazyload_loadStarted||f.trigger("_lazyload_appear")}),void 0)}),j&&b._$container.on(b.event,function(){k(h,b)}),d.on("resize load",function(){k(h,b)}),a(function(){k(h,b)}),this})});]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>相册</title>
      <link href="/photos/index.html"/>
      <url>/photos/index.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="./ins.css"><div class="photos-btn-wrap"><a class="photos-btn active" href="javascript:void(0)">Photos</a><a class="photos-btn" href="/photos/videos.html">videos</a></div><div class="instagram itemscope"><a href="https://quanluo.github.io/" target="_blank" class="open-ins">图片正在加载中…</a></div><script>  (function() {    var loadScript = function(path) {      var $script = document.createElement('script')      document.getElementsByTagName('body')[0].appendChild($script)      $script.setAttribute('src', path)    }    setTimeout(function() {      loadScript('./ins.js')    }, 0)  })()</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>标签云</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>留言板</title>
      <link href="/%E7%95%99%E8%A8%80%E6%9D%BF/index.html"/>
      <url>/%E7%95%99%E8%A8%80%E6%9D%BF/index.html</url>
      
        <content type="html"><![CDATA[<h1 id="留言板开通了。"><a href="#留言板开通了。" class="headerlink" title="留言板开通了。"></a><font color=red>留言板开通了。</font></h1><h1 id="欢迎大家来留言。"><a href="#欢迎大家来留言。" class="headerlink" title="欢迎大家来留言。"></a><font color=red>欢迎大家来留言。</font></h1><p><img src="https://images2.alphacoders.com/116/thumbbig-1164598.webp" alt=""></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>相册</title>
      <link href="/photos/videos.html"/>
      <url>/photos/videos.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="./ins.css"><div class="photos-btn-wrap"><a class="photos-btn" href="/photos">Photos</a><a class="photos-btn active" href="/photos/videos.html">Videos</a></div><center>    <h1>所念皆星河</h1></center><hr/><center>    <div class="video-container">        <iframe height="80%" width="80%" src="https://player.youku.com/embed/XNTgwNDkzMTI0NA==" frameborder=0 allowfullscreen></iframe>    </div></center>    ]]></content>
      
    </entry>
    
    
  
</search>
